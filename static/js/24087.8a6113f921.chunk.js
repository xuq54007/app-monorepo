!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="31966bf7-1a28-47f4-973e-eb29d0bd2ab2",e._sentryDebugIdIdentifier="sentry-dbid-31966bf7-1a28-47f4-973e-eb29d0bd2ab2")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[24087],{593827:(e,r,a)=>{a.d(r,{L:()=>WalletAvatar});var t=a(503668),n=a.n(t),o=a(490343),s=a(491180),i=a(258988),p=a(831085);function WalletAvatarBase({size:e,img:r,wallet:a}){var t,n,d=r||a?.avatarInfo?.img;return d?s.A.isHwHiddenWallet({wallet:a})?(0,p.jsx)(o.Icon,{size:"$10",name:"LockSolid",color:"$iconSubdued"}):(0,p.jsxs)(o.Image,{size:e,"data-sentry-element":"Image","data-sentry-component":"WalletAvatarBase","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx",children:[(0,p.jsx)(o.Image.Source,{source:null!=(t=i.UO[d])?t:i.UO.bear,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx"}),(0,p.jsx)(o.Image.Fallback,{delayMs:300,justifyContent:"center",alignItems:"center","data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx",children:(0,p.jsx)(o.SizableText,{"data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx",children:null!=(n=a?.avatarInfo?.emoji)?n:""})})]}):null}function WalletAvatar({size:e="$10",status:r,badge:a,img:t,wallet:s}){return(0,p.jsxs)(o.Stack,{w:e,h:e,justifyContent:"center",alignItems:"center","data-sentry-element":"Stack","data-sentry-component":"WalletAvatar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx",children:[(0,p.jsx)(WalletAvatarBase,{size:e,img:t,wallet:s,"data-sentry-element":"WalletAvatarBase","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx"}),"connected"===r?(0,p.jsx)(o.Stack,{position:"absolute",bottom:-2,right:-2,bg:"$bgSidebar",p:"$0.5",borderRadius:"$full",zIndex:"$1",children:(0,p.jsx)(o.Stack,{borderRadius:"$full",w:"$2.5",h:"$2.5",bg:"$bgSuccessStrong"})}):null,n()(a)?null:(0,p.jsx)(o.Stack,{position:"absolute",h:"$4",px:"$0.5",justifyContent:"center",bottom:-2,right:-1,bg:"$bgSubdued",borderRadius:"$full",zIndex:"$1",children:(0,p.jsx)(o.SizableText,{size:"$bodySm",textAlign:"center",children:a})})]})}},326745:(e,r,a)=>{a.d(r,{u:()=>useAppRoute});var t=a(654266);function useAppRoute(){return(0,t.lq)()}},973066:(e,r,a)=>{a.d(r,{i:()=>FirmwareChangeLogContentView,z:()=>FirmwareChangeLogView});var t=a(586330),n=a(514041),o=a(908867),s=a(490343),i=a(643087),p=a(471169),d=a(334439),l=a(773831),c=a(225555),u=a(355422),m=a(443791),g=a(831085);function ChangeLogMarkdown({changelog:e}){var[{locale:r}]=(0,p.useSettingsPersistAtom)(),[a,o]=(0,n.useState)(r);return(0,n.useEffect)((function(){(0,t.A)((function*(){"system"===r&&o(yield i.A.serviceSetting.getCurrentLocale())}))()}),[r]),(0,g.jsx)(s.Markdown,{"data-sentry-element":"Markdown","data-sentry-component":"ChangeLogMarkdown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:e?.["zh-CN"===a?"zh-CN":"en-US"]||"No change log found."})}function ChangeLogSection({title:e,icon:r,isDone:a,updateInfo:t}){var i=(0,o.A)(),[p,l]=(0,n.useState)(a),c=(0,n.useCallback)((function(){l(!p)}),[p]);return(0,g.jsxs)(s.Stack,{"data-sentry-element":"Stack","data-sentry-component":"ChangeLogSection","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:[(0,g.jsxs)(s.XStack,{gap:"$3",py:"$2",ai:"center",onPress:c,"data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:[(0,g.jsx)(s.Icon,{name:r,size:"$5","data-sentry-element":"Icon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx"}),(0,g.jsxs)(s.Stack,{flex:1,"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:[(0,g.jsx)(s.SizableText,{size:"$bodyLgMedium","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:e}),(0,g.jsx)(s.SizableText,{size:"$bodyMd",color:a?"$textSubdued":"$textInfo","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:a?i.formatMessage({id:d.ETranslations.update_updated_to_latest_version},{version:t?.toVersion||i.formatMessage({id:d.ETranslations.global_unknown})}):i.formatMessage({id:d.ETranslations.global_version_is_available},{version:t?.toVersion||i.formatMessage({id:d.ETranslations.global_unknown})})})]}),(0,g.jsx)(s.IconButton,{icon:p?"ChevronDownSmallOutline":"ChevronTopSmallOutline",variant:"tertiary",onPress:c,"data-sentry-element":"IconButton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx"})]}),p?null:(0,g.jsxs)(s.Stack,{bg:"$bgStrong",p:"$5",borderRadius:"$3",children:[(0,g.jsx)(m.Y,{fromVersion:t?.fromVersion,toVersion:t?.toVersion}),(0,g.jsx)(ChangeLogMarkdown,{changelog:t?.changelog})]})]})}function FirmwareChangeLogContentView({result:e,isDone:r}){var a=(0,o.A)();return(0,g.jsxs)(s.Stack,{mt:"$8","data-sentry-element":"Stack","data-sentry-component":"FirmwareChangeLogContentView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:[e?.updateInfos?.bootloader?.hasUpgrade?(0,g.jsx)(ChangeLogSection,{title:a.formatMessage({id:d.ETranslations.global_bootloader}),icon:"StorageOutline",updateInfo:e?.updateInfos?.bootloader,isDone:r}):null,e?.updateInfos?.ble?.hasUpgrade?(0,g.jsx)(ChangeLogSection,{title:a.formatMessage({id:d.ETranslations.global_bluetooth}),icon:"BluetoothOutline",updateInfo:e?.updateInfos?.ble,isDone:r}):null,e?.updateInfos?.firmware?.hasUpgrade?(0,g.jsx)(ChangeLogSection,{title:a.formatMessage({id:d.ETranslations.global_firmware}),icon:"LaunchOutline",updateInfo:e?.updateInfos?.firmware,isDone:r}):null]})}function FirmwareChangeLogView({result:e,onConfirmClick:r}){var a=(0,o.A)(),[,t]=(0,p.useFirmwareUpdateStepInfoAtom)(),{showCheckList:n}=(0,l.B)();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.nv,{onConfirmText:a.formatMessage({id:d.ETranslations.update_update_now}),onConfirm:function(){t({step:p.EFirmwareUpdateSteps.showCheckList,payload:void 0}),n({result:e}),r?.()},"data-sentry-element":"FirmwareUpdatePageFooter","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx"}),(0,g.jsxs)(s.Stack,{"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:[(0,g.jsx)(u.N,{result:e,"data-sentry-element":"FirmwareUpdateWalletProfile","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx"}),(0,g.jsx)(FirmwareChangeLogContentView,{result:e,"data-sentry-element":"FirmwareChangeLogContentView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx"})]})]})}},88569:(e,r,a)=>{a.d(r,{m:()=>FirmwareInstallingView,V:()=>FirmwareInstallingViewBase});var t=a(514041),n=a(490343),o=a(471169),s=a(908867),i=a(334439),p=a(773831),d=a(973066),l=a(723337),c=a(225555),u=a(831085);function FirmwareUpdateDone({result:e}){var r=(0,s.A)(),a=(0,p.B)();return(0,u.jsxs)(n.Stack,{"data-sentry-element":"Stack","data-sentry-component":"FirmwareUpdateDone","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateDone.tsx",children:[(0,u.jsx)(l.u,{icon:"CheckRadioSolid",tone:"success",title:r.formatMessage({id:i.ETranslations.update_all_updates_complete}),"data-sentry-element":"FirmwareUpdateBaseMessageView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateDone.tsx"}),(0,u.jsx)(d.i,{result:e,isDone:!0,"data-sentry-element":"FirmwareChangeLogContentView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateDone.tsx"}),(0,u.jsx)(c.nv,{onConfirmText:r.formatMessage({id:i.ETranslations.global_got_it}),onConfirm:function(){a.closeUpdateModal()},"data-sentry-element":"FirmwareUpdatePageFooter","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateDone.tsx"})]})}var m=a(853748),g=a(99202),w=a(355422);function FirmwareInstallingViewBase({result:e,isDone:r,tipMessage:a,retryInfo:o,progressBarKey:s}){(0,u.jsx)(w.N,{result:e});var i=(0,t.useMemo)((function(){return r?(0,u.jsx)(FirmwareUpdateDone,{result:e}):o?(0,u.jsx)(m.uH.InstallingErrors,{retryInfo:o,result:e,lastFirmwareTipMessage:a}):(0,u.jsx)(g.D,{lastFirmwareTipMessage:a,isDone:r},s)}),[r,s,e,o,a]);return(0,u.jsx)(n.Stack,{"data-sentry-element":"Stack","data-sentry-component":"FirmwareInstallingViewBase","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareInstallingView.tsx",children:i})}function FirmwareInstallingView({result:e,isDone:r}){var[a]=(0,o.useFirmwareUpdateStepInfoAtom)(),[n]=(0,o.useFirmwareUpdateRetryAtom)(),[s]=(0,o.useHardwareUiStateAtom)(),i=(0,t.useRef)(0);a.step===o.EFirmwareUpdateSteps.updateStart&&(i.current=a.payload.startAtTime);var p=s?.payload?.firmwareTipData?.message,[d,l]=(0,t.useState)();return(0,t.useEffect)((function(){p&&l(p)}),[p]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(FirmwareInstallingViewBase,{result:e,isDone:r,tipMessage:d,retryInfo:a.step===o.EFirmwareUpdateSteps.updateStart?void 0:n,progressBarKey:i.current,"data-sentry-element":"FirmwareInstallingViewBase","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareInstallingView.tsx"})})}},411252:(e,r,a)=>{a.d(r,{p:()=>FirmwareLatestVersionInstalled});var t=a(908867),n=a(490343),o=a(334439),s=a(831085);function FirmwareLatestVersionInstalled(){var e=(0,t.A)();return(0,s.jsxs)(n.Stack,{ai:"center",jc:"center",h:500,"data-sentry-element":"Stack","data-sentry-component":"FirmwareLatestVersionInstalled","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareLatestVersionInstalled.tsx",children:[(0,s.jsx)(n.Icon,{size:"$14",name:"CheckRadioSolid",color:"$iconSuccess","data-sentry-element":"Icon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareLatestVersionInstalled.tsx"}),(0,s.jsx)(n.SizableText,{my:"$6",size:"$headingLg","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareLatestVersionInstalled.tsx",children:e.formatMessage({id:o.ETranslations.update_latest_version})})]})}},723337:(e,r,a)=>{a.d(r,{u:()=>FirmwareUpdateBaseMessageView});var t=a(514041),n=a(908867),o=a(490343),s=a(726130),i=a(334439),p=(a(663522),a(831085)),getColors=function(e){switch(e){case"destructive":return{iconWrapperBg:"$bgCritical",iconColor:"$iconCritical"};case"warning":return{iconWrapperBg:"$bgCaution",iconColor:"$iconCaution"};case"success":return{iconWrapperBg:"$bgSuccess",iconColor:"$iconSuccess"};default:return{iconWrapperBg:"$bgStrong",iconColor:"$icon"}}};function UpdateErrorTroubleshooting(){var e,r=(0,n.A)();e=i.ETranslations.update_troubleshoot_connection_issues;var a=r.formatMessage({id:e,defaultMessage:"If you have any questions, please refer to the troubleshooting guide."}).split("\n");return(0,p.jsx)(o.Stack,{"data-sentry-element":"Stack","data-sentry-component":"UpdateErrorTroubleshooting","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateBaseMessageView.tsx",children:a.map((function(e,r){return e.includes("<url>")?(0,p.jsx)(o.RichSizeableText,{size:"$bodyMd",color:"$textSubdued",linkList:{url:{url:s.ks}},children:e},r):(0,p.jsx)(o.SizableText,{size:"$bodyMd",color:"$textSubdued",children:e},r)}))})}function FirmwareUpdateBaseMessageView({icon:e,title:r,tone:a,message:n,linkList:s,displayTroubleshooting:i}){var d=(0,t.useCallback)((function(){return e?.endsWith("Solid")?(0,p.jsx)(o.Icon,{name:e,size:"$14",color:getColors(a).iconColor}):(0,p.jsx)(o.Stack,{alignSelf:"flex-start",p:"$3",borderRadius:"$full",bg:getColors(a).iconWrapperBg,children:(0,p.jsx)(o.Icon,{name:e,size:"$7",color:getColors(a).iconColor})})}),[e,a]);return(0,p.jsxs)(o.Stack,{py:"$6",gap:"$5","data-sentry-element":"Stack","data-sentry-component":"FirmwareUpdateBaseMessageView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateBaseMessageView.tsx",children:[(0,p.jsxs)(o.Stack,{"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateBaseMessageView.tsx",children:[e?d():null,r?(0,p.jsx)(o.SizableText,{my:"$4",size:"$heading2xl",children:r}):null,n?(0,p.jsx)(o.RichSizeableText,{size:"$bodyLg",color:"$textSubdued",linkList:s,children:n}):null]}),i?(0,p.jsx)(UpdateErrorTroubleshooting,{}):null]})}},853748:(e,r,a)=>{a.d(r,{_V:()=>EnterBootModeGuide,uH:()=>x,RH:()=>useFirmwareUpdateErrors});var t=a(586330),n=a(514041),o=a(813362),s=a(908867),i=a(490343),p=a(471169),d=a(726130),l=a(319357),c=a(514527),u=a(334439),m=a(117746),g=a(100645),w=a(643087);const f=a.p+"static/media/enter-boot-guide-mini.e82812de54d81a27fd02.png";var k=a(723337),y=a(225555),v=a(831085);function CommonError({message:e,title:r,icon:a,displayTroubleshooting:t}){var n=(0,s.A)();return(0,v.jsx)(k.u,{icon:a,tone:"destructive",title:r||n.formatMessage({id:u.ETranslations.global_an_error_occurred}),message:e,displayTroubleshooting:t,"data-sentry-element":"FirmwareUpdateBaseMessageView","data-sentry-component":"CommonError","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"})}function ShouldUpdateBridge({result:e}){var r=(0,s.A)();return(0,v.jsxs)(i.Stack,{"data-sentry-element":"Stack","data-sentry-component":"ShouldUpdateBridge","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx",children:[(0,v.jsx)(k.u,{icon:"InfoCircleOutline",title:r.formatMessage({id:u.ETranslations.update_outdated_version_detected}),message:r.formatMessage({id:u.ETranslations.update_hardware_update_requires_bridge}),linkList:{url:{url:d.F3}},"data-sentry-element":"FirmwareUpdateBaseMessageView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"}),(0,v.jsx)(y.nv,{onConfirm:function(){(0,m.Dr)(d.F3)},onConfirmText:r.formatMessage({id:u.ETranslations.global_view_tutorial}),"data-sentry-element":"FirmwareUpdatePageFooter","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"})]})}function ShouldUpdateByWeb(){var e=(0,s.A)();return(0,v.jsxs)(i.Stack,{"data-sentry-element":"Stack","data-sentry-component":"ShouldUpdateByWeb","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx",children:[(0,v.jsx)(k.u,{icon:"InfoCircleOutline",title:e.formatMessage({id:u.ETranslations.update_update_in_official_web_tool}),message:e.formatMessage({id:u.ETranslations.update_update_in_official_web_tool_desc}),linkList:{url:{url:d.BZ}},"data-sentry-element":"FirmwareUpdateBaseMessageView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"}),(0,v.jsx)(y.nv,{onConfirm:function(){(0,m.Dr)(d.BZ)},onConfirmText:e.formatMessage({id:u.ETranslations.global_visit_website}),"data-sentry-element":"FirmwareUpdatePageFooter","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"})]})}function HowToUpdateFullResource(){var e=(0,s.A)();return(0,v.jsxs)(i.Stack,{"data-sentry-element":"Stack","data-sentry-component":"HowToUpdateFullResource","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx",children:[(0,v.jsx)(k.u,{icon:"InfoCircleOutline",title:e.formatMessage({id:u.ETranslations.update_outdated_version_detected}),message:e.formatMessage({id:u.ETranslations.update_outdated_version_detected_desc}),linkList:{url:{url:d.Kj}},"data-sentry-element":"FirmwareUpdateBaseMessageView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"}),(0,v.jsx)(y.nv,{onConfirm:function(){(0,m.Dr)(d.Kj)},onConfirmText:e.formatMessage({id:u.ETranslations.global_view_tutorial}),"data-sentry-element":"FirmwareUpdatePageFooter","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"})]})}function EnterBootModeGuide({deviceType:e}){var r=(0,s.A)();return"mini"===e?(0,v.jsxs)(i.Stack,{mb:"$6",children:[(0,v.jsx)(i.Image,{w:353,h:224,source:f}),(0,v.jsx)(i.SizableText,{size:"$headingMd",children:r.formatMessage({id:u.ETranslations.update_manually_entering_bootloader_mode})}),(0,v.jsx)(i.SizableText,{mt:"$2",color:"$textSubdued",children:r.formatMessage({id:u.ETranslations.update_manually_entering_bootloader_mode_desc})})]}):(0,v.jsx)(i.Stack,{mb:"$6","data-sentry-element":"Stack","data-sentry-component":"EnterBootModeGuide","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx",children:(0,v.jsx)(i.RichSizeableText,{mt:"$2",linkList:{url:{url:d.zz}},"data-sentry-element":"RichSizeableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx",children:u.ETranslations.update_follow_online_tutorial_to_proceed_manually})})}function useFirmwareUpdateErrors({error:e,onRetry:r,result:a,lastFirmwareTipMessage:t}){var i=(0,s.A)(),p=i.formatMessage({id:u.ETranslations.global_retry});return(0,n.useMemo)((function(){if((0,c.R4)({error:e,code:[o.HardwareErrorCode.PinCancelled,o.HardwareErrorCode.ActionCancelled,o.HardwareErrorCode.DeviceInterruptedFromOutside]}))return{content:(0,v.jsx)(CommonError,{icon:"CrossedLargeOutline",title:i.formatMessage({id:u.ETranslations.update_operation_canceled}),message:i.formatMessage({id:u.ETranslations.update_operation_canceled_desc})}),onRetryHandler:r,retryText:p};if((0,c.R4)({error:e,code:o.HardwareErrorCode.FirmwareUpdateDownloadFailed}))return{content:(0,v.jsx)(CommonError,{icon:"DownloadOutline",title:i.formatMessage({id:u.ETranslations.update_download_failed}),message:i.formatMessage({id:u.ETranslations.update_check_connection_try_again})}),onRetryHandler:r,retryText:p};if((0,c.R4)({error:e,code:o.HardwareErrorCode.PinInvalid}))return{content:(0,v.jsx)(CommonError,{icon:"CrossedLargeOutline",message:i.formatMessage({id:u.ETranslations.hardware_invalid_pin_error})}),onRetryHandler:r,retryText:p};if((0,c.R4)({error:e,code:o.HardwareErrorCode.FirmwareUpdateManuallyEnterBoot})||(0,c.R4)({error:e,code:o.HardwareErrorCode.FirmwareUpdateAutoEnterBootFailure})||e&&t===g.rn.AutoRebootToBootloader)return{content:(0,v.jsx)(CommonError,{icon:"CrossedLargeOutline",title:i.formatMessage({id:u.ETranslations.update_manually_entering_bootloader_mode})}),detail:(0,v.jsx)(EnterBootModeGuide,{deviceType:a?.deviceType}),onRetryHandler:r,retryText:"mini"===a?.deviceType?i.formatMessage({id:u.ETranslations.update_verify_status_and_continue}):p};if((0,c.R4)({error:e,code:[o.HardwareErrorCode.BridgeNetworkError]}))return{content:(0,v.jsx)(CommonError,{icon:"CrossedLargeOutline",title:i.formatMessage({id:u.ETranslations.update_bridge_network_error}),message:i.formatMessage({id:u.ETranslations.update_unable_to_connect_to_bridge})}),onRetryHandler:r,retryText:p};if((0,c.R4)({error:e,code:[o.HardwareErrorCode.BridgeTimeoutError]}))return{content:(0,v.jsx)(CommonError,{icon:"CrossedLargeOutline",title:i.formatMessage({id:u.ETranslations.update_bridge_timeout_error}),message:i.formatMessage({id:u.ETranslations.update_connection_to_bridge_timed_out})}),onRetryHandler:r,retryText:p};if((0,c.R4)({error:e,code:[o.HardwareErrorCode.BridgeNotInstalled,l.o.NeedOneKeyBridge]}))return{content:(0,v.jsx)(k.u,{icon:"CrossedLargeOutline",tone:"destructive",title:i.formatMessage({id:u.ETranslations.update_bridge_not_installed}),message:i.formatMessage({id:u.ETranslations.update_hardware_update_requires_bridge}),linkList:{url:{url:d.F3}}}),onRetryHandler:r,retryText:p};if((0,c.R4)({error:e,code:l.o.NeedOneKeyBridgeUpgrade}))return{content:(0,v.jsx)(ShouldUpdateBridge,{result:a}),retryText:p};if((0,c.R4)({error:e,code:l.o.NeedFirmwareUpgradeFromWeb}))return{content:(0,v.jsx)(ShouldUpdateByWeb,{}),retryText:p};if((0,c.R4)({error:e,code:o.HardwareErrorCode.UseDesktopToUpdateFirmware}))return{content:(0,v.jsx)(HowToUpdateFullResource,{}),retryText:p};if(e){var n=e?.message;return 4500===e.code&&(n=i.formatMessage({id:u.ETranslations.feedback_hw_polling_time_out})),{content:(0,v.jsx)(CommonError,{icon:"CrossedLargeOutline",message:n,displayTroubleshooting:!0}),onRetryHandler:r,retryText:p}}return{content:null,retryText:p}}),[i,e,t,p,r,a])}var x={ShouldUpdateBridge,CommonError,EnterBootModeGuide,WorkflowErrors:function WorkflowErrors({onRetry:e,error:r,result:a}){var t=(0,s.A)(),{onRetryHandler:n,content:o,retryText:i}=useFirmwareUpdateErrors({error:r,onRetry:e,result:a,lastFirmwareTipMessage:void 0});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(y.nv,{onConfirm:n,onConfirmText:i||t.formatMessage({id:u.ETranslations.global_retry}),"data-sentry-element":"FirmwareUpdatePageFooter","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"}),o]})},InstallingErrors:function InstallingErrors({retryInfo:e,result:r,lastFirmwareTipMessage:a}){var o=(0,s.A)(),[,i]=(0,p.useFirmwareUpdateStepInfoAtom)(),d=(0,n.useCallback)((0,t.A)((function*(){if(!e)return null;i({step:p.EFirmwareUpdateSteps.updateStart,payload:{startAtTime:Date.now()}}),yield w.A.serviceFirmwareUpdate.retryUpdateTask({id:e?.id,connectId:r?.updatingConnectId,releaseResult:r})})),[r,e,i]),{content:l,detail:c,onRetryHandler:m,retryText:g}=useFirmwareUpdateErrors({onRetry:d,result:r,lastFirmwareTipMessage:a,error:e?.error});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(y.nv,{onConfirm:m,onConfirmText:g||o.formatMessage({id:u.ETranslations.global_retry}),"data-sentry-element":"FirmwareUpdatePageFooter","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"}),l,c]})}}},336293:(e,r,a)=>{a.d(r,{X:()=>FirmwareUpdateExitPrevent,U:()=>ForceExtensionUpdatingFromExpandTab});var t=a(334025),n=a(908867),o=a(334439),s=a(514041),i=a(355931),p=a(493360),d=a(490343),l=a(663522),c=a(498356),u=a(326745),m=a(773831),g=!1;function ForceExtensionUpdatingFromExpandTab(){return function useExtensionUpdatingFromExpandTab(){var e=(0,u.u)(),r=(0,m.B)();(0,s.useEffect)((function(){l.Ay.isExtensionUiPopup&&(r.openChangeLogOfExtension(e.params),window.close())}),[r,e.params])}(),null}function FirmwareUpdateExitPrevent({shouldPreventRemove:e=!0}){var r=(0,n.A)(),a=r.formatMessage({id:o.ETranslations.update_quit_update}),u=r.formatMessage({id:o.ETranslations.update_quit_update_desc});return(0,t.Wg)(),function useModalExitPrevent({title:e,message:r,shouldPreventRemove:a=!0}){var t=(0,n.A)(),i=(0,c.A)(),p=(0,s.useCallback)((function({data:a}){g||(g=!0,d.Dialog.show({title:e,description:r,onConfirmText:t.formatMessage({id:o.ETranslations.global_quit}),onConfirm:function(){i.dispatch(a.action)},onCancelText:t.formatMessage({id:o.ETranslations.global_cancel}),onClose:function(){g=!1}}))}),[r,i,e,t]);(0,d.usePreventRemove)(a,p)}({shouldPreventRemove:e,title:a,message:u}),function useAppExitPrevent({message:e,title:r,shouldPreventExitOnAndroid:a=!0}){var t=(0,n.A)();(0,s.useEffect)((function(){if(l.Ay.isRuntimeBrowser&&!l.Ay.isExtensionUiPopup){var fn=function(r){return r.preventDefault(),r.returnValue=!0,e};return window.addEventListener("beforeunload",fn),function(){window.removeEventListener("beforeunload",fn)}}}),[e]),(0,s.useEffect)((function(){if(a){var n=p.A.addEventListener("hardwareBackPress",(function(){return i.A.alert(r,e,[{text:t.formatMessage({id:o.ETranslations.global_cancel}),onPress:function(){},style:"cancel"},{text:t.formatMessage({id:o.ETranslations.global_quit}),onPress:function(){return p.A.exitApp()}}],{cancelable:!1}),!0}));return function(){return n.remove()}}}),[e,r,t,a])}({title:a,message:u,shouldPreventExitOnAndroid:!1}),null}},225555:(e,r,a)=>{a.d(r,{nv:()=>p,oh:()=>FirmwareUpdatePageLayout});var t=a(908867),n=a(490343),o=a(334439),s=a(498356),i=a(831085);function FirmwareUpdatePageHeader(){var e=(0,t.A)();return(0,i.jsx)(n.Page.Header,{dismissOnOverlayPress:!1,title:e.formatMessage({id:o.ETranslations.update_hardware_update}),"data-sentry-element":"unknown","data-sentry-component":"FirmwareUpdatePageHeader","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx"})}var p=n.Page.Footer;function FirmwareUpdatePageLayout({children:e}){(0,s.A)();return(0,i.jsxs)(n.Stack,{"data-sentry-element":"Stack","data-sentry-component":"FirmwareUpdatePageLayout","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx",children:[(0,i.jsx)(FirmwareUpdatePageHeader,{"data-sentry-element":"FirmwareUpdatePageHeader","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx"}),(0,i.jsx)(n.Page.Body,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx",children:(0,i.jsx)(n.Stack,{p:"$5","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx",children:e})})]})}},99202:(e,r,a)=>{a.d(r,{D:()=>FirmwareUpdateProgressBar,w:()=>FirmwareUpdateProgressBarView});var t=a(460986),n=a.n(t),o=a(514041),s=a(908867),i=a(490343),p=a(471169),d=a(334439),l=a(284908),c=a(100645),u=a(643087),m=a(394764),g=a(443791),w=a(831085),f=10;function FirmwareUpdateProgressBarView({totalStep:e,currentStep:r,title:a,fromVersion:t,toVersion:n,progress:p,desc:l}){var c=(0,s.A)(),u=(0,o.useMemo)((function(){return e&&r?e<=1?null:(0,w.jsx)(i.SizableText,{size:"$bodyMd",color:"$textSubdued",children:c.formatMessage({id:d.ETranslations.global_step_str},{step:`${r}/${e}`})}):(0,w.jsx)(i.Skeleton,{width:120,height:16})}),[c,r,e]),m=(0,o.useMemo)((function(){return n?(0,w.jsx)(g.Y,{fromVersion:t,toVersion:n}):(0,w.jsx)(i.Skeleton,{width:80,height:16})}),[t,n]);return(0,w.jsxs)(i.Stack,{py:"$6","data-sentry-element":"Stack","data-sentry-component":"FirmwareUpdateProgressBarView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx",children:[u,(0,w.jsx)(i.SizableText,{size:"$heading2xl",my:"$3","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx",children:a}),m,(0,w.jsx)(i.Stack,{mt:"$12",mb:"$3","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx",children:(0,w.jsx)(i.Progress,{size:"medium",value:p,"data-sentry-element":"Progress","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx"})}),(0,w.jsx)(i.SizableText,{size:"$bodyLg",color:"$textSubdued","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx",children:l})]})}function FirmwareUpdateProgressBar({lastFirmwareTipMessage:e,isDone:r}){var a=(0,s.A)(),[t]=(0,p.useFirmwareUpdateStepInfoAtom)(),[g]=(0,p.useHardwareUiStateAtom)(),[k]=(0,p.useHardwareUiStateCompletedAtom)(),[y,v]=(0,o.useState)(1),[x]=(0,p.useFirmwareUpdateRetryAtom)(),h=(0,o.useRef)(y);h.current=y;var F=(0,o.useRef)(f),U=(0,o.useCallback)((function(){return a.formatMessage({id:d.ETranslations.global_checking_device})}),[a]),[_,E]=(0,o.useState)(U()),b=(0,o.useMemo)((function(){if(t?.step===p.EFirmwareUpdateSteps.installing)return t.payload.installingTarget?.updateInfo?.firmwareType||void 0}),[t.payload,t?.step]),{totalStep:S,currentStep:T}=(0,o.useMemo)((function(){if(t?.step===p.EFirmwareUpdateSteps.installing){var e=t?.payload?.installingTarget;if(e)return{totalStep:e.totalPhase.length,currentStep:e.totalPhase.findIndex((function(r){return r===e.currentPhase}))+1}}return{totalPhase:null,currentPhase:null}}),[t.payload,t?.step]),A=(0,o.useMemo)((function(){if(t?.step===p.EFirmwareUpdateSteps.installing)return{fromVersion:t.payload.installingTarget?.updateInfo.fromVersion||void 0,toVersion:t.payload.installingTarget?.updateInfo.toVersion||void 0}}),[t.payload,t?.step]),M=g?.payload?.firmwareTipData?.message,j=g?.payload?.firmwareProgress,C=l.Ay.isConfirmOnDeviceAction(g),L=([c.rn.CheckLatestUiResource,c.rn.DownloadLatestUiResource,c.rn.DownloadLatestUiResourceSuccess,c.rn.UpdateSysResource,c.rn.UpdateSysResourceSuccess].includes(e),(0,m.Z)(b)),I=(0,o.useRef)(j);I.current=j;var B=(0,o.useRef)([]),P=(0,o.useMemo)((function(){var t=a.formatMessage({id:d.ETranslations.global_preparing});return e&&(t=a.formatMessage({id:d.ETranslations.global_updating})),b&&(t=a.formatMessage({id:d.ETranslations.global_updating_type},{type:b}),"ble"===b&&(t=a.formatMessage({id:d.ETranslations.global_updating_type},{type:a.formatMessage({id:d.ETranslations.global_bluetooth})}))),r&&(t=a.formatMessage({id:d.ETranslations.global_done})),t}),[a,b,r,e]),V=(0,o.useCallback)((function(e){var r=[{type:["checking"],progress:function(){return 1},progressMax:function(){return f},desc:function(){return a.formatMessage({id:d.ETranslations.update_checking_device_if_no_restart})}},{type:[c.rn.CheckLatestUiResource],progress:function(){return 2},desc:function(){return a.formatMessage({id:d.ETranslations.update_checking_latest_ui_resources})}},{type:[c.rn.DownloadLatestUiResource],progress:function(){return 3},desc:function(){return a.formatMessage({id:d.ETranslations.update_downloading_latest_ui_resources})}},{type:[c.rn.DownloadLatestUiResourceSuccess],progress:function(){return 5},desc:function(){return a.formatMessage({id:d.ETranslations.update_download_success})}},{type:[c.rn.UpdateSysResource],progress:function(){return 7},desc:function(){return a.formatMessage({id:d.ETranslations.update_updating_ui_resources})}},{type:[c.rn.UpdateSysResourceSuccess],progress:function(){return 9},desc:function(){return a.formatMessage({id:d.ETranslations.update_update_ui_resources_success})}},{type:[c.rn.AutoRebootToBootloader],progress:function(){return 10},desc:function(){return a.formatMessage({id:d.ETranslations.update_reboot_to_bootloader_mode})}},{type:[c.rn.GoToBootloaderSuccess],progress:function(){return 12},desc:function(){return a.formatMessage({id:d.ETranslations.update_reboot_success})}},{type:[c.rn.DownloadFirmware,c.rn.DownloadLatestBootloaderResource],progress:function(){return 14},desc:function(){return a.formatMessage({id:d.ETranslations.update_downloading})}},{type:[c.rn.DownloadFirmwareSuccess,c.rn.DownloadLatestBootloaderResourceSuccess],progress:function(){return 20},desc:function(){return a.formatMessage({id:d.ETranslations.update_download_success})}},{type:[c.rn.FirmwareEraseSuccess],progress:function(){return 25},desc:function(){return a.formatMessage({id:d.ETranslations.update_transferring_data})}},{type:["installing"],progress:function(){var e,r=30+.7*(null!=(e=I.current)?e:0);return r>=99&&(r=99),r},desc:function(){return 100===I.current?a.formatMessage({id:d.ETranslations.update_installing}):a.formatMessage({id:d.ETranslations.update_transferring_data})}},{type:["done"],progress:function(){return 100},desc:function(){return a.formatMessage({id:d.ETranslations.update_update_completed})}}],t=r.findIndex((function(r){return r.type.includes(e)}));if(t>=0){var n,o=r[t],s=o.progress(),i=h.current;v((function(){var e=Math.max(s,i);return h.current=e,e})),E(o.desc());var p=r[t+1],l=null!=(n=o?.progressMax?.())?n:p?.progress();F.current=l||99}}),[a]),R=(0,o.useRef)(V);R.current=V,(0,o.useEffect)((function(){x||b&&L&&b!==L&&(v(1),h.current=1,F.current=99,R.current("checking"))}),[b,L,x]),(0,o.useEffect)((function(){t?.step!==p.EFirmwareUpdateSteps.updateStart&&b||E(U())}),[U,b,t?.step]),(0,o.useEffect)((function(){var e=setInterval((function(){if(!x&&!r&&!C){var e=h.current;v((function(){if(e>=F.current)return F.current;if(e>=99)return 99;var r=Math.min(e+1,F.current,99);return h.current=r,r}))}}),2e3);return function(){clearInterval(e)}}),[b,C,r,x]),(0,o.useEffect)((function(){r&&setTimeout((function(){R.current("done")}),1e3)}),[r]),(0,o.useEffect)((function(){M&&B.current.push(M)}),[M]),(0,o.useEffect)((function(){n()(j)&&R.current("installing")}),[j]),(0,o.useEffect)((function(){k?.action===p.EHardwareUiStateAction.CLOSE_UI_WINDOW&&u.A.serviceHardwareUI.closeHardwareUiStateDialog({skipDeviceCancel:!0,connectId:void 0})}),[k?.action]),(0,o.useEffect)((function(){e&&R.current(e)}),[e]);var[$,D]=(0,o.useState)(!1),z=(0,o.useMemo)((function(){0}),[j,e,y,$]);return(0,w.jsxs)(i.Stack,{"data-sentry-element":"Stack","data-sentry-component":"FirmwareUpdateProgressBar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx",children:[(0,w.jsx)(FirmwareUpdateProgressBarView,{totalStep:S,currentStep:T,title:P,progress:y,desc:_,fromVersion:A?.fromVersion,toVersion:A?.toVersion,"data-sentry-element":"FirmwareUpdateProgressBarView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx"}),z]})}},355422:(e,r,a)=>{a.d(r,{N:()=>FirmwareUpdateWalletProfile});var t=a(908867),n=a(490343),o=a(334439),s=a(593827),i=a(831085);function DeviceAvatar({deviceType:e,size:r}){return(0,i.jsx)(s.L,{img:e||"unknown",wallet:void 0,size:r,"data-sentry-element":"WalletAvatar","data-sentry-component":"DeviceAvatar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/DeviceAvatar/DeviceAvatar.tsx"})}function FirmwareUpdateWalletProfile({result:e}){var r=(0,t.A)();return(0,i.jsxs)(n.Stack,{onPress:function(){},"data-sentry-element":"Stack","data-sentry-component":"FirmwareUpdateWalletProfile","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateWalletProfile.tsx",children:[(0,i.jsx)(DeviceAvatar,{size:"$14",deviceType:e?.deviceType||"unknown","data-sentry-element":"DeviceAvatar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateWalletProfile.tsx"}),(0,i.jsxs)(n.SizableText,{mt:"$5",size:"$heading2xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateWalletProfile.tsx",children:[r.formatMessage({id:o.ETranslations.update_new_hardware_updates})," "]})]})}},296437:(e,r,a)=>{a.d(r,{Y:()=>FirmwareUpdateWarningMessage});var t=a(908867),n=a(490343),o=a(334439),s=(a(663522),a(831085));function FirmwareUpdateWarningMessage(){var e=(0,t.A)();return(0,s.jsx)(n.Alert,{type:"warning",title:e.formatMessage({id:o.ETranslations.update_keep_usb_connected_and_app_active}),fullBleed:!0,mx:"$-5","data-sentry-element":"Alert","data-sentry-component":"FirmwareUpdateWarningMessage","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateWarningMessage.tsx"})}},443791:(e,r,a)=>{a.d(r,{Y:()=>FirmwareVersionProgressBar});var t=a(514041),n=a(908867),o=a(302722),s=a.n(o),i=a(490343),p=a(334439),d=a(831085);function FirmwareVersionProgressBar({fromVersion:e="",toVersion:r=""}){var a=(0,n.A)().formatMessage({id:p.ETranslations.global_unknown}),o=(0,t.useCallback)((function(e){return!!e&&(!!s().valid(e)&&!s().eq(e,"0.0.0"))}),[]);return(0,d.jsxs)(i.XStack,{gap:"$2.5",alignItems:"center","data-sentry-element":"XStack","data-sentry-component":"FirmwareVersionProgressBar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareVersionProgressBar.tsx",children:[(0,d.jsx)(i.Badge,{badgeType:"default",badgeSize:"lg","data-sentry-element":"Badge","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareVersionProgressBar.tsx",children:o(e)?e:a}),(0,d.jsx)(i.Icon,{name:"ArrowRightSolid",size:"$4","data-sentry-element":"Icon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareVersionProgressBar.tsx"}),(0,d.jsx)(i.Badge,{badgeType:"info",badgeSize:"lg","data-sentry-element":"Badge","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareVersionProgressBar.tsx",children:r?.length>0?r:a})]})}},870264:(e,r,a)=>{a.r(r),a.d(r,{default:()=>f});var t=a(586330),n=a(514041),o=a(490343),s=a(471169),i=a(643087),p=a(498356),d=a(326745),l=a(88569),c=a(411252),u=a(336293),m=a(225555),g=a(296437),w=a(831085);const f=function PageFirmwareUpdateInstall(){var e=(0,d.u)(),{result:r}=e.params,a=(0,p.A)(),[f]=(0,s.useFirmwareUpdateStepInfoAtom)(),k=(0,n.useMemo)((function(){if(f.step===s.EFirmwareUpdateSteps.updateStart||f.step===s.EFirmwareUpdateSteps.installing||f.step===s.EFirmwareUpdateSteps.updateDone){var e=f.step===s.EFirmwareUpdateSteps.updateDone;return(0,w.jsxs)(w.Fragment,{children:[e?null:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(g.Y,{}),(0,w.jsx)(u.X,{})]}),(0,w.jsx)(l.m,{result:r,isDone:e})]})}return f.step===s.EFirmwareUpdateSteps.error?(requestAnimationFrame((function(){a.pop()})),(0,w.jsx)(u.X,{shouldPreventRemove:!1})):(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(c.p,{})})}),[f.step,r,a]);return(0,w.jsx)(o.Page,{scrollEnabled:!0,onUnmounted:(0,t.A)((function*(){yield i.A.serviceFirmwareUpdate.exitUpdateWorkflow(),r?.originalConnectId&&(yield i.A.serviceHardware.cancel({connectId:r.originalConnectId,forceDeviceResetToHome:!0}))})),"data-sentry-element":"Page","data-sentry-component":"PageFirmwareUpdateInstall","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/pages/PageFirmwareUpdateInstall.tsx",children:(0,w.jsxs)(m.oh,{"data-sentry-element":"FirmwareUpdatePageLayout","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/pages/PageFirmwareUpdateInstall.tsx",children:[(0,w.jsx)(u.U,{"data-sentry-element":"ForceExtensionUpdatingFromExpandTab","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/pages/PageFirmwareUpdateInstall.tsx"}),k]})})}},334025:(e,r,a)=>{a.d(r,{Wg:()=>useKeepAwake});var t,n=a(586330),o=a(72631),s=a(514041),i=a(683180),p=a(34546);!function(e){e.RELEASE="release"}(t||(t={}));var d={};const l={isAvailableAsync:()=>(0,n.A)((function*(){return!!i.A.isDOMAvailable&&"wakeLock"in navigator}))(),activate:e=>(0,n.A)((function*(){if(i.A.isDOMAvailable){var r=yield navigator.wakeLock.request("screen");d[e]=r}}))(),deactivate:e=>(0,n.A)((function*(){if(i.A.isDOMAvailable){if(!d[e])throw new p.A("ERR_KEEP_AWAKE_TAG_INVALID",`The wake lock with tag ${e} has not activated yet`);d[e].release?.(),delete d[e]}}))(),addListenerForTag(e,r){var eventListener=function(){r({state:t.RELEASE})},a=d[e];return a&&("addEventListener"in a?a.addEventListener?.("release",eventListener):a.onrelease=eventListener),{remove:function(){var r=d[e];r&&(r.removeEventListener?r.removeEventListener("release",eventListener):r.onrelease=null)}}}};var c="ExpoKeepAwakeDefaultTag";function useKeepAwake(e=c,r){(0,s.useEffect)((function(){var a=!0;return activateKeepAwakeAsync(e).then((function(){a&&l.addListenerForTag&&r?.listener&&function addListener(e,r){if(!l.addListenerForTag)throw new o.V("ExpoKeepAwake","addListenerForTag");var a="string"==typeof e?e:c,t="function"==typeof e?e:r;return l.addListenerForTag(a,t)}(e,r.listener)})),function(){a=!1,r?.suppressDeactivateWarnings?deactivateKeepAwake(e).catch((function(){})):deactivateKeepAwake(e)}}),[e])}function activateKeepAwakeAsync(){return _activateKeepAwakeAsync.apply(this,arguments)}function _activateKeepAwakeAsync(){return(_activateKeepAwakeAsync=(0,n.A)((function*(e=c){yield l.activate?.(e)}))).apply(this,arguments)}function deactivateKeepAwake(){return _deactivateKeepAwake.apply(this,arguments)}function _deactivateKeepAwake(){return(_deactivateKeepAwake=(0,n.A)((function*(e=c){yield l.deactivate?.(e)}))).apply(this,arguments)}}}]);
//# sourceMappingURL=24087.8a6113f921.chunk.js.map