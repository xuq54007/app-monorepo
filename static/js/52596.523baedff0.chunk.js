!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="cbf5cde9-402c-4fde-9cd1-d0591da396be",e._sentryDebugIdIdentifier="sentry-dbid-cbf5cde9-402c-4fde-9cd1-d0591da396be")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[52596],{593827:(e,r,a)=>{a.d(r,{L:()=>WalletAvatar});var o=a(503668),t=a.n(o),n=a(490343),s=a(491180),i=a(258988),p=a(831085);function WalletAvatarBase({size:e,img:r,wallet:a}){var o,t,l=r||a?.avatarInfo?.img;return l?s.A.isHwHiddenWallet({wallet:a})?(0,p.jsx)(n.Icon,{size:"$10",name:"LockSolid",color:"$iconSubdued"}):(0,p.jsxs)(n.Image,{size:e,"data-sentry-element":"Image","data-sentry-component":"WalletAvatarBase","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx",children:[(0,p.jsx)(n.Image.Source,{source:null!=(o=i.UO[l])?o:i.UO.bear,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx"}),(0,p.jsx)(n.Image.Fallback,{delayMs:300,justifyContent:"center",alignItems:"center","data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx",children:(0,p.jsx)(n.SizableText,{"data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx",children:null!=(t=a?.avatarInfo?.emoji)?t:""})})]}):null}function WalletAvatar({size:e="$10",status:r,badge:a,img:o,wallet:s}){return(0,p.jsxs)(n.Stack,{w:e,h:e,justifyContent:"center",alignItems:"center","data-sentry-element":"Stack","data-sentry-component":"WalletAvatar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx",children:[(0,p.jsx)(WalletAvatarBase,{size:e,img:o,wallet:s,"data-sentry-element":"WalletAvatarBase","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx"}),"connected"===r?(0,p.jsx)(n.Stack,{position:"absolute",bottom:-2,right:-2,bg:"$bgSidebar",p:"$0.5",borderRadius:"$full",zIndex:"$1",children:(0,p.jsx)(n.Stack,{borderRadius:"$full",w:"$2.5",h:"$2.5",bg:"$bgSuccessStrong"})}):null,t()(a)?null:(0,p.jsx)(n.Stack,{position:"absolute",h:"$4",px:"$0.5",justifyContent:"center",bottom:-2,right:-1,bg:"$bgSubdued",borderRadius:"$full",zIndex:"$1",children:(0,p.jsx)(n.SizableText,{size:"$bodySm",textAlign:"center",children:a})})]})}},57597:(e,r,a)=>{a.r(r),a.d(r,{FirmwareUpdateGalleryDemo:()=>FirmwareUpdateGalleryDemo,default:()=>stories_FirmwareUpdateGallery});var o=a(324586),t=a(586330),n=a(490343),s=a(643087),i=a(325809),p=a(162616),l=a(973066),d=a(139499),c=a(88569),m=a(411252),u=a(853748),w=a(99202),g=a(296437),y=a(349521),k=a(773831),f=a(282029),h={features:{vendor:"trezor.io",major_version:2,minor_version:99,patch_version:99,bootloader_mode:null,device_id:"851D737A09073D51A26A8EEB",pin_protection:!0,passphrase_protection:null,language:"zh_hk",label:"OneKey Touch",initialized:!0,revision:"fccbac81cef7877e6e3b761677ff0d83808380ad",bootloader_hash:null,imported:null,unlocked:!1,_passphrase_cached:null,firmware_present:null,needs_backup:null,flags:null,model:"T",fw_major:null,fw_minor:null,fw_patch:null,fw_vendor:null,unfinished_backup:null,no_backup:null,recovery_mode:null,capabilities:[1,2,3,4,5,6,7,9,10,11,12,13,14,15,16,17],sd_card_present:!0,sd_protection:null,wipe_code_protection:null,session_id:"47d8463911f0354f4dc1fa45d403984c43a921926f04bd7f6581c52e6973bd2d",passphrase_always_on_device:null,auto_lock_delay_ms:null,display_rotation:null,experimental_features:null,offset:null,ble_name:"Touch 3F3B",ble_ver:"2.1.0",ble_enable:!0,se_enable:null,se_ver:null,backup_only:null,onekey_version:"4.9.0",onekey_serial:null,bootloader_version:"2.4.9",serial_no:"TC01WBD202207290844270000046",spi_flash:null,initstates:null,NFT_voucher:null,cpu_info:null,pre_firmware:null,coin_switch:null,build_id:"746f7563682e342e392e302d537461626c652d303431302d66636362616338",boardloader_version:"1.0.0",busy:!1,onekey_device_type:"TOUCH",onekey_se_type:"SE608A",onekey_board_version:"1.0.0",onekey_board_hash:null,onekey_boot_version:"2.4.9",onekey_boot_hash:null,onekey_se01_version:null,onekey_se01_hash:null,onekey_se01_build_id:null,onekey_firmware_version:"4.9.0",onekey_firmware_hash:null,onekey_firmware_build_id:null,onekey_serial_no:"TC01WBD202207290844270000046",onekey_boot_build_id:null,onekey_ble_name:"Touch 3F3B",onekey_ble_version:"2.1.0",onekey_ble_build_id:null,onekey_ble_hash:null,onekey_se02_version:null,onekey_se03_version:null,onekey_se04_version:null},deviceType:"touch",deviceName:"OneKey Touch",deviceUUID:"TC01WBD202207290844270000046",hasUpgrade:!0,isBootloaderMode:!1,updateInfos:{firmware:{hasUpgrade:!0,hasUpgradeForce:!1,fromVersion:"4.9.0",toVersion:"4.9.1",releasePayload:{status:"outdated",changelog:[{"zh-CN":"### âœ¨ æ–°åŠŸèƒ½\r\n- æ”¯æŒ Manta, Neurai ä»¥åŠ Nervos ç½‘ç»œ\r\n- æ”¯æŒ LNURL Auth æˆæƒç­¾å\r\n- æ”¯æŒåœ¨è®¾å¤‡ä¿¡æ¯ä¸­ï¼ŒæŸ¥çœ‹å›ºä»¶ç‰ˆæœ¬å·\r\n- æ–°å¢åœ¨ Celestia ç½‘ç»œä¸‹çš„ç²¾åº¦å±•ç¤º\r\n\r\n### ğŸ é—®é¢˜ä¿®å¤\r\n- ä¿®å¤åœ¨ Astar ç½‘ç»œä¸‹ï¼ŒæŸ¥çœ‹è½¬è´¦æ•°æ®å¡æ­»çš„é—®é¢˜\r\n- ä¿®å¤åœ¨é—ªç”µç½‘ç»œä¸‹ï¼Œç­¾åä¿¡æ¯é¡µé¢æ–‡æ¡ˆç¼ºå¤±çš„é—®é¢˜\r\n- ä¿®å¤åœ¨æ ¸å¯¹åŠ©è®°è¯è¿‡ç¨‹ä¸­å¼‚å¸¸é€€å‡ºï¼Œå†æ¬¡è¿›å…¥æœªè§¦å‘æ ¡éªŒPINç åŠé€€å‡ºé”å±å¤±æ•ˆçš„é—®é¢˜\r\n\r\n### ğŸ’ æ”¹è¿›\r\n- ä¼˜åŒ–åœ¨ Sui ç½‘ç»œä¸‹ï¼Œåˆ†åŒ…å¤„ç†ç­¾åæ•°æ®çš„é€»è¾‘\r\n- ä¼˜åŒ–åœ¨ BTC ç½‘ç»œä¸‹çš„ç­¾åäº¤æ˜“è¿‡ç¨‹ä¸­ï¼ŒOP_RETURN å¯å±•ç¤ºåŸæ–‡\r\n- ä¼˜åŒ–åœ¨æ³¢å¡ç½‘ç»œä¸‹ï¼Œå°†æ”¯æŒå±•ç¤ºæ›´å¤šçš„ç­¾åä¿¡æ¯ç»†èŠ‚\r\n","en-US":"### âœ¨ New Features\r\n- Support for Manta, Neurai, and Nervos networks.\r\n- Support for LNURL Auth authorization signing.\r\n- Ability to view firmware version in device information.\r\n- New precision display under the Celestia network.\r\n\r\n### ğŸ Bug Fixes\r\n- Fixed a freeze when viewing transfer data on the Astar network.\r\n- Fixed missing text on the signature information page on the Lightning network.\r\n- Fixed an issue where re-entering the app after an abnormal exit during recovery phrase verification did not trigger PIN verification and the lock screen was ineffective.\r\n\r\n### ğŸ’ Improvements\r\n- Optimized packet handling logic for signing data on the Sui network.\r\n- Enhanced the display of original text in OP_RETURN during signing transactions on the BTC network.\r\n- Improved the display of detailed signature information on the Polkadot network.\r\n"}],release:{required:!1,version:[4,9,1],bootloaderResource:"https://web.onekey-asset.com/hardware/touch/bootloader/v2.4.9/bootloader.2.4.9-Stable-0807-3e033eb.signed.bin",bootloaderVersion:[2,4,8],fullResource:"https://web.onekey-asset.com/hardware/touch/resource/res-4.9.0.zip",fullResourceRange:["3.5.0","4.0.0"],resource:"https://web.onekey-asset.com/hardware/touch/resource/resource-4.0.0-4.9.0.zip",url:"https://web.onekey-asset.com/hardware/touch/firmware/v4.9.0/touch.4.9.0-Stable-0410-fccbac8.signed.bin",fingerprint:"",changelog:{"zh-CN":"### âœ¨ æ–°åŠŸèƒ½\r\n- æ”¯æŒ Manta, Neurai ä»¥åŠ Nervos ç½‘ç»œ\r\n- æ”¯æŒ LNURL Auth æˆæƒç­¾å\r\n- æ”¯æŒåœ¨è®¾å¤‡ä¿¡æ¯ä¸­ï¼ŒæŸ¥çœ‹å›ºä»¶ç‰ˆæœ¬å·\r\n- æ–°å¢åœ¨ Celestia ç½‘ç»œä¸‹çš„ç²¾åº¦å±•ç¤º\r\n\r\n### ğŸ é—®é¢˜ä¿®å¤\r\n- ä¿®å¤åœ¨ Astar ç½‘ç»œä¸‹ï¼ŒæŸ¥çœ‹è½¬è´¦æ•°æ®å¡æ­»çš„é—®é¢˜\r\n- ä¿®å¤åœ¨é—ªç”µç½‘ç»œä¸‹ï¼Œç­¾åä¿¡æ¯é¡µé¢æ–‡æ¡ˆç¼ºå¤±çš„é—®é¢˜\r\n- ä¿®å¤åœ¨æ ¸å¯¹åŠ©è®°è¯è¿‡ç¨‹ä¸­å¼‚å¸¸é€€å‡ºï¼Œå†æ¬¡è¿›å…¥æœªè§¦å‘æ ¡éªŒPINç åŠé€€å‡ºé”å±å¤±æ•ˆçš„é—®é¢˜\r\n\r\n### ğŸ’ æ”¹è¿›\r\n- ä¼˜åŒ–åœ¨ Sui ç½‘ç»œä¸‹ï¼Œåˆ†åŒ…å¤„ç†ç­¾åæ•°æ®çš„é€»è¾‘\r\n- ä¼˜åŒ–åœ¨ BTC ç½‘ç»œä¸‹çš„ç­¾åäº¤æ˜“è¿‡ç¨‹ä¸­ï¼ŒOP_RETURN å¯å±•ç¤ºåŸæ–‡\r\n- ä¼˜åŒ–åœ¨æ³¢å¡ç½‘ç»œä¸‹ï¼Œå°†æ”¯æŒå±•ç¤ºæ›´å¤šçš„ç­¾åä¿¡æ¯ç»†èŠ‚\r\n","en-US":"### âœ¨ New Features\r\n- Support for Manta, Neurai, and Nervos networks.\r\n- Support for LNURL Auth authorization signing.\r\n- Ability to view firmware version in device information.\r\n- New precision display under the Celestia network.\r\n\r\n### ğŸ Bug Fixes\r\n- Fixed a freeze when viewing transfer data on the Astar network.\r\n- Fixed missing text on the signature information page on the Lightning network.\r\n- Fixed an issue where re-entering the app after an abnormal exit during recovery phrase verification did not trigger PIN verification and the lock screen was ineffective.\r\n\r\n### ğŸ’ Improvements\r\n- Optimized packet handling logic for signing data on the Sui network.\r\n- Enhanced the display of original text in OP_RETURN during signing transactions on the BTC network.\r\n- Improved the display of detailed signature information on the Polkadot network.\r\n"}},bootloaderMode:!1,features:{vendor:"trezor.io",major_version:2,minor_version:99,patch_version:99,bootloader_mode:null,device_id:"851D737A09073D51A26A8EEB",pin_protection:!0,passphrase_protection:null,language:"zh_hk",label:"OneKey Touch",initialized:!0,revision:"fccbac81cef7877e6e3b761677ff0d83808380ad",bootloader_hash:null,imported:null,unlocked:!1,_passphrase_cached:null,firmware_present:null,needs_backup:null,flags:null,model:"T",fw_major:null,fw_minor:null,fw_patch:null,fw_vendor:null,unfinished_backup:null,no_backup:null,recovery_mode:null,capabilities:[1,2,3,4,5,6,7,9,10,11,12,13,14,15,16,17],sd_card_present:!0,sd_protection:null,wipe_code_protection:null,session_id:"47d8463911f0354f4dc1fa45d403984c43a921926f04bd7f6581c52e6973bd2d",passphrase_always_on_device:null,auto_lock_delay_ms:null,display_rotation:null,experimental_features:null,offset:null,ble_name:"Touch 3F3B",ble_ver:"2.1.0",ble_enable:!0,se_enable:null,se_ver:null,backup_only:null,onekey_version:"4.9.0",onekey_serial:null,bootloader_version:"2.4.9",serial_no:"TC01WBD202207290844270000046",spi_flash:null,initstates:null,NFT_voucher:null,cpu_info:null,pre_firmware:null,coin_switch:null,build_id:"746f7563682e342e392e302d537461626c652d303431302d66636362616338",boardloader_version:"1.0.0",busy:!1,onekey_device_type:"TOUCH",onekey_se_type:"SE608A",onekey_board_version:"1.0.0",onekey_board_hash:null,onekey_boot_version:"2.4.9",onekey_boot_hash:null,onekey_se01_version:null,onekey_se01_hash:null,onekey_se01_build_id:null,onekey_firmware_version:"4.9.0",onekey_firmware_hash:null,onekey_firmware_build_id:null,onekey_serial_no:"TC01WBD202207290844270000046",onekey_boot_build_id:null,onekey_ble_name:"Touch 3F3B",onekey_ble_version:"2.1.0",onekey_ble_build_id:null,onekey_ble_hash:null,onekey_se02_version:null,onekey_se03_version:null,onekey_se04_version:null}},changelog:{"zh-CN":"### âœ¨ æ–°åŠŸèƒ½\r\n- æ”¯æŒ Manta, Neurai ä»¥åŠ Nervos ç½‘ç»œ\r\n- æ”¯æŒ LNURL Auth æˆæƒç­¾å\r\n- æ”¯æŒåœ¨è®¾å¤‡ä¿¡æ¯ä¸­ï¼ŒæŸ¥çœ‹å›ºä»¶ç‰ˆæœ¬å·\r\n- æ–°å¢åœ¨ Celestia ç½‘ç»œä¸‹çš„ç²¾åº¦å±•ç¤º\r\n\r\n### ğŸ é—®é¢˜ä¿®å¤\r\n- ä¿®å¤åœ¨ Astar ç½‘ç»œä¸‹ï¼ŒæŸ¥çœ‹è½¬è´¦æ•°æ®å¡æ­»çš„é—®é¢˜\r\n- ä¿®å¤åœ¨é—ªç”µç½‘ç»œä¸‹ï¼Œç­¾åä¿¡æ¯é¡µé¢æ–‡æ¡ˆç¼ºå¤±çš„é—®é¢˜\r\n- ä¿®å¤åœ¨æ ¸å¯¹åŠ©è®°è¯è¿‡ç¨‹ä¸­å¼‚å¸¸é€€å‡ºï¼Œå†æ¬¡è¿›å…¥æœªè§¦å‘æ ¡éªŒPINç åŠé€€å‡ºé”å±å¤±æ•ˆçš„é—®é¢˜\r\n\r\n### ğŸ’ æ”¹è¿›\r\n- ä¼˜åŒ–åœ¨ Sui ç½‘ç»œä¸‹ï¼Œåˆ†åŒ…å¤„ç†ç­¾åæ•°æ®çš„é€»è¾‘\r\n- ä¼˜åŒ–åœ¨ BTC ç½‘ç»œä¸‹çš„ç­¾åäº¤æ˜“è¿‡ç¨‹ä¸­ï¼ŒOP_RETURN å¯å±•ç¤ºåŸæ–‡\r\n- ä¼˜åŒ–åœ¨æ³¢å¡ç½‘ç»œä¸‹ï¼Œå°†æ”¯æŒå±•ç¤ºæ›´å¤šçš„ç­¾åä¿¡æ¯ç»†èŠ‚\r\n","en-US":"### âœ¨ New Features\r\n- Support for Manta, Neurai, and Nervos networks.\r\n- Support for LNURL Auth authorization signing."},firmwareType:"firmware"},ble:{hasUpgrade:!0,hasUpgradeForce:!1,fromVersion:"2.1.0",toVersion:"2.1.1",releasePayload:{status:"outdated",changelog:[{"zh-CN":"### ğŸ é—®é¢˜ä¿®å¤\r\n- å……ç”µç”µé‡æ˜¾ç¤ºé—®é¢˜\r\n- å…³é—­è“ç‰™åï¼Œèƒ½å¤Ÿæ­£ç¡®å…³æœº\r\n","en-US":"### ğŸ Bug Fixes\r\n- Fixed charging power display problem\r\n- After turning off bluetooth, it can shut down properly\r\n"}],release:{required:!1,version:[2,1,1],webUpdate:"https://common.onekey-asset.com/hw/touch/2.1.0/touch_ble_signed-2022-1102_2.1.0.bin",fingerprint:"",changelog:{"zh-CN":"### ğŸ é—®é¢˜ä¿®å¤\r\n- å……ç”µç”µé‡æ˜¾ç¤ºé—®é¢˜\r\n- å…³é—­è“ç‰™åï¼Œèƒ½å¤Ÿæ­£ç¡®å…³æœº\r\n","en-US":"### ğŸ Bug Fixes\r\n- Fixed charging power display problem\r\n- After turning off bluetooth, it can shut down properly\r\n"}},bootloaderMode:!1,features:{vendor:"trezor.io",major_version:2,minor_version:99,patch_version:99,bootloader_mode:null,device_id:"851D737A09073D51A26A8EEB",pin_protection:!0,passphrase_protection:null,language:"zh_hk",label:"OneKey Touch",initialized:!0,revision:"fccbac81cef7877e6e3b761677ff0d83808380ad",bootloader_hash:null,imported:null,unlocked:!1,_passphrase_cached:null,firmware_present:null,needs_backup:null,flags:null,model:"T",fw_major:null,fw_minor:null,fw_patch:null,fw_vendor:null,unfinished_backup:null,no_backup:null,recovery_mode:null,capabilities:[1,2,3,4,5,6,7,9,10,11,12,13,14,15,16,17],sd_card_present:!0,sd_protection:null,wipe_code_protection:null,session_id:"47d8463911f0354f4dc1fa45d403984c43a921926f04bd7f6581c52e6973bd2d",passphrase_always_on_device:null,auto_lock_delay_ms:null,display_rotation:null,experimental_features:null,offset:null,ble_name:"Touch 3F3B",ble_ver:"2.1.0",ble_enable:!0,se_enable:null,se_ver:null,backup_only:null,onekey_version:"4.9.0",onekey_serial:null,bootloader_version:"2.4.9",serial_no:"TC01WBD202207290844270000046",spi_flash:null,initstates:null,NFT_voucher:null,cpu_info:null,pre_firmware:null,coin_switch:null,build_id:"746f7563682e342e392e302d537461626c652d303431302d66636362616338",boardloader_version:"1.0.0",busy:!1,onekey_device_type:"TOUCH",onekey_se_type:"SE608A",onekey_board_version:"1.0.0",onekey_board_hash:null,onekey_boot_version:"2.4.9",onekey_boot_hash:null,onekey_se01_version:null,onekey_se01_hash:null,onekey_se01_build_id:null,onekey_firmware_version:"4.9.0",onekey_firmware_hash:null,onekey_firmware_build_id:null,onekey_serial_no:"TC01WBD202207290844270000046",onekey_boot_build_id:null,onekey_ble_name:"Touch 3F3B",onekey_ble_version:"2.1.0",onekey_ble_build_id:null,onekey_ble_hash:null,onekey_se02_version:null,onekey_se03_version:null,onekey_se04_version:null}},changelog:{"zh-CN":"### ğŸ é—®é¢˜ä¿®å¤\r\n- å……ç”µç”µé‡æ˜¾ç¤ºé—®é¢˜\r\n- å…³é—­è“ç‰™åï¼Œèƒ½å¤Ÿæ­£ç¡®å…³æœº\r\n","en-US":"### ğŸ Bug Fixes\r\n- Fixed charging power display problem\r\n- After turning off bluetooth, it can shut down properly\r\n"},firmwareType:"ble"},bootloader:{hasUpgrade:!0,hasUpgradeForce:!1,fromVersion:"2.4.9",toVersion:"2.4.8",releasePayload:{status:"valid",changelog:[{"zh-CN":"### âœ¨ æ–°åŠŸèƒ½\r\n- æ”¯æŒ Manta, Neurai ä»¥åŠ Nervos ç½‘ç»œ\r\n- æ”¯æŒ LNURL Auth æˆæƒç­¾å\r\n- æ”¯æŒåœ¨è®¾å¤‡ä¿¡æ¯ä¸­ï¼ŒæŸ¥çœ‹å›ºä»¶ç‰ˆæœ¬å·\r\n- æ–°å¢åœ¨ Celestia ç½‘ç»œä¸‹çš„ç²¾åº¦å±•ç¤º\r\n\r\n### ğŸ é—®é¢˜ä¿®å¤\r\n- ä¿®å¤åœ¨ Astar ç½‘ç»œä¸‹ï¼ŒæŸ¥çœ‹è½¬è´¦æ•°æ®å¡æ­»çš„é—®é¢˜\r\n- ä¿®å¤åœ¨é—ªç”µç½‘ç»œä¸‹ï¼Œç­¾åä¿¡æ¯é¡µé¢æ–‡æ¡ˆç¼ºå¤±çš„é—®é¢˜\r\n- ä¿®å¤åœ¨æ ¸å¯¹åŠ©è®°è¯è¿‡ç¨‹ä¸­å¼‚å¸¸é€€å‡ºï¼Œå†æ¬¡è¿›å…¥æœªè§¦å‘æ ¡éªŒPINç åŠé€€å‡ºé”å±å¤±æ•ˆçš„é—®é¢˜\r\n\r\n### ğŸ’ æ”¹è¿›\r\n- ä¼˜åŒ–åœ¨ Sui ç½‘ç»œä¸‹ï¼Œåˆ†åŒ…å¤„ç†ç­¾åæ•°æ®çš„é€»è¾‘\r\n- ä¼˜åŒ–åœ¨ BTC ç½‘ç»œä¸‹çš„ç­¾åäº¤æ˜“è¿‡ç¨‹ä¸­ï¼ŒOP_RETURN å¯å±•ç¤ºåŸæ–‡\r\n- ä¼˜åŒ–åœ¨æ³¢å¡ç½‘ç»œä¸‹ï¼Œå°†æ”¯æŒå±•ç¤ºæ›´å¤šçš„ç­¾åä¿¡æ¯ç»†èŠ‚\r\n","en-US":"### âœ¨ New Features\r\n- Support for Manta, Neurai, and Nervos networks.\r\n- Support for LNURL Auth authorization signing.\r\n- Ability to view firmware version in device information.\r\n- New precision display under the Celestia network.\r\n\r\n### ğŸ Bug Fixes\r\n- Fixed a freeze when viewing transfer data on the Astar network.\r\n- Fixed missing text on the signature information page on the Lightning network.\r\n- Fixed an issue where re-entering the app after an abnormal exit during recovery phrase verification did not trigger PIN verification and the lock screen was ineffective.\r\n\r\n### ğŸ’ Improvements\r\n- Optimized packet handling logic for signing data on the Sui network.\r\n- Enhanced the display of original text in OP_RETURN during signing transactions on the BTC network.\r\n- Improved the display of detailed signature information on the Polkadot network.\r\n"}],release:{required:!1,version:[4,9,1],bootloaderResource:"https://web.onekey-asset.com/hardware/touch/bootloader/v2.4.9/bootloader.2.4.9-Stable-0807-3e033eb.signed.bin",bootloaderVersion:[2,4,8],fullResource:"https://web.onekey-asset.com/hardware/touch/resource/res-4.9.0.zip",fullResourceRange:["3.5.0","4.0.0"],resource:"https://web.onekey-asset.com/hardware/touch/resource/resource-4.0.0-4.9.0.zip",url:"https://web.onekey-asset.com/hardware/touch/firmware/v4.9.0/touch.4.9.0-Stable-0410-fccbac8.signed.bin",fingerprint:"",changelog:{"zh-CN":"### âœ¨ æ–°åŠŸèƒ½\r\n- æ”¯æŒ Manta, Neurai ä»¥åŠ Nervos ç½‘ç»œ\r\n- æ”¯æŒ LNURL Auth æˆæƒç­¾å\r\n- æ”¯æŒåœ¨è®¾å¤‡ä¿¡æ¯ä¸­ï¼ŒæŸ¥çœ‹å›ºä»¶ç‰ˆæœ¬å·\r\n- æ–°å¢åœ¨ Celestia ç½‘ç»œä¸‹çš„ç²¾åº¦å±•ç¤º\r\n\r\n### ğŸ é—®é¢˜ä¿®å¤\r\n- ä¿®å¤åœ¨ Astar ç½‘ç»œä¸‹ï¼ŒæŸ¥çœ‹è½¬è´¦æ•°æ®å¡æ­»çš„é—®é¢˜\r\n- ä¿®å¤åœ¨é—ªç”µç½‘ç»œä¸‹ï¼Œç­¾åä¿¡æ¯é¡µé¢æ–‡æ¡ˆç¼ºå¤±çš„é—®é¢˜\r\n- ä¿®å¤åœ¨æ ¸å¯¹åŠ©è®°è¯è¿‡ç¨‹ä¸­å¼‚å¸¸é€€å‡ºï¼Œå†æ¬¡è¿›å…¥æœªè§¦å‘æ ¡éªŒPINç åŠé€€å‡ºé”å±å¤±æ•ˆçš„é—®é¢˜\r\n\r\n### ğŸ’ æ”¹è¿›\r\n- ä¼˜åŒ–åœ¨ Sui ç½‘ç»œä¸‹ï¼Œåˆ†åŒ…å¤„ç†ç­¾åæ•°æ®çš„é€»è¾‘\r\n- ä¼˜åŒ–åœ¨ BTC ç½‘ç»œä¸‹çš„ç­¾åäº¤æ˜“è¿‡ç¨‹ä¸­ï¼ŒOP_RETURN å¯å±•ç¤ºåŸæ–‡\r\n- ä¼˜åŒ–åœ¨æ³¢å¡ç½‘ç»œä¸‹ï¼Œå°†æ”¯æŒå±•ç¤ºæ›´å¤šçš„ç­¾åä¿¡æ¯ç»†èŠ‚\r\n","en-US":"### âœ¨ New Features\r\n- Support for Manta, Neurai, and Nervos networks.\r\n- Support for LNURL Auth authorization signing.\r\n- Ability to view firmware version in device information.\r\n- New precision display under the Celestia network.\r\n\r\n### ğŸ Bug Fixes\r\n- Fixed a freeze when viewing transfer data on the Astar network.\r\n- Fixed missing text on the signature information page on the Lightning network.\r\n- Fixed an issue where re-entering the app after an abnormal exit during recovery phrase verification did not trigger PIN verification and the lock screen was ineffective.\r\n\r\n### ğŸ’ Improvements\r\n- Optimized packet handling logic for signing data on the Sui network.\r\n- Enhanced the display of original text in OP_RETURN during signing transactions on the BTC network.\r\n- Improved the display of detailed signature information on the Polkadot network.\r\n"}},bootloaderMode:!1,shouldUpdate:!1},changelog:{"zh-CN":"### ğŸ é—®é¢˜ä¿®å¤\r\n- xxxxx","en-US":"### ğŸ Bug Fixes\r\n- xxxx\r\n"},firmwareType:"bootloader"},bridge:{shouldUpdate:!1,status:"valid",releaseVersion:"2.2.0"}}},x=a(471169),v=a(507140),_=a(318822),F=a(714191),b=a(100645),U=a(654004),S=a(831085);function ownKeys(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.push.apply(a,o)}return a}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(a),!0).forEach((function(r){(0,o.A)(e,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}function ForceOpenHomeDeviceUpdateFirmwareModal(){var{activeAccount:e}=(0,p.LH)({num:0}),r=e.device?.connectId,a=(0,k.B)();return(0,S.jsx)(n.Button,{onPress:(0,t.A)((function*(){a.openChangeLogModal({connectId:r})})),"data-sentry-element":"Button","data-sentry-component":"ForceOpenHomeDeviceUpdateFirmwareModal","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"NormalModeUpdate"})}function ResetDetectTimeCheck(){var{activeAccount:e}=(0,p.LH)({num:0}),r=e.device?.connectId;return(0,S.jsx)(n.Button,{onPress:function(){r&&s.A.serviceFirmwareUpdate.resetShouldDetectTimeCheck({connectId:r})},"data-sentry-element":"Button","data-sentry-component":"ResetDetectTimeCheck","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"ResetDetectTimeCheck"})}function BootloaderModeUpdateButton(){var[e]=(0,x.useFirmwareUpdateRetryAtom)(),r=(0,k.B)();return(0,S.jsx)(n.Button,{onPress:function(){r.showBootloaderMode({connectId:void 0})},"data-sentry-element":"Button","data-sentry-component":"BootloaderModeUpdateButton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"BootloaderModeUpdate"})}function ClearUpdateInfoDetectCacheButton(){var[,e]=(0,x.useFirmwareUpdatesDetectStatusPersistAtom)();return(0,S.jsx)(n.Button,{onPress:function(){e(void 0)},"data-sentry-element":"Button","data-sentry-component":"ClearUpdateInfoDetectCacheButton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"ClearUpdateInfoDetectCache"})}function FirmwareUpdateGalleryDemo(){return(0,S.jsx)(i.b8,{config:{sceneName:F.Zs.home},enabledNum:[0],"data-sentry-element":"AccountSelectorProviderMirror","data-sentry-component":"FirmwareUpdateGalleryDemo","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:(0,S.jsx)(n.Stack,{gap:"$2","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(ForceOpenHomeDeviceUpdateFirmwareModal,{"data-sentry-element":"ForceOpenHomeDeviceUpdateFirmwareModal","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(BootloaderModeUpdateButton,{"data-sentry-element":"BootloaderModeUpdateButton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(ClearUpdateInfoDetectCacheButton,{"data-sentry-element":"ClearUpdateInfoDetectCacheButton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(ResetDetectTimeCheck,{"data-sentry-element":"ResetDetectTimeCheck","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(n.Button,{onPress:function(){_.iL.emit(_.Tu.ShowFirmwareUpdateForce,{connectId:void 0}),_.iL.emit(_.Tu.ShowFirmwareUpdateForce,{connectId:void 0}),n.Toast.message({title:"ForceUpdateDialog"})},"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"ForceUpdateDialog"})]})})})}function FirmwareUpdateErrorDemo({error:e,onRetry:r,result:a}){var{onRetryHandler:o,content:t,detail:n,retryText:s}=(0,u.RH)({error:e,onRetry:r,result:a,lastFirmwareTipMessage:void 0});return(0,S.jsxs)(S.Fragment,{children:[t,n]})}function StaticUIDialog(){var e=(0,n.useForm)({defaultValues:{contentType:f.g2.default}});return(0,S.jsxs)(n.Form,{form:e,"data-sentry-element":"Form","data-sentry-component":"StaticUIDialog","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:[(0,S.jsx)(n.Form.Field,{name:"contentType",label:"contentType","data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:(0,S.jsx)(n.Select,{title:"",items:Object.keys(f.g2).map((function(e){return{label:e,value:e}})),"data-sentry-element":"Select","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"})}),(0,S.jsx)(n.Button,{onPress:function(){n.Dialog.show({showFooter:!1,renderContent:(0,S.jsx)(f.CN,_objectSpread(_objectSpread({},e.getValues()),{},{errorObj:{code:800},onActionPress:function(){alert("onActionPress")},onContinuePress:function(){alert("onContinuePress")}}))})},"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"FirmwareVerify UI Dialog"})]})}function FirmwareUpdateGalleryStaticUI(){var e=(0,k.B)();return(0,S.jsxs)(n.Stack,{mt:"$8","data-sentry-element":"Stack","data-sentry-component":"FirmwareUpdateGalleryStaticUI","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:[(0,S.jsxs)(n.Stack,{my:"$8","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:[(0,S.jsx)(n.SizableText,{size:"$heading5xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"* é¦–é¡µæ›´æ–°æç¤º"}),(0,S.jsx)(y.F,{message:"Firmware 3.6.0 is available","data-sentry-element":"FirmwareUpdateReminderAlert","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(n.Button,{onPress:function(){e.showBootloaderMode({connectId:void 0})},"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"Bootloader æ¨¡å¼æ›´æ–°æç¤º"}),(0,S.jsx)(n.Button,{onPress:function(){e.showForceUpdate({connectId:void 0})},"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"å¼ºæ›´æç¤º"})]}),(0,S.jsxs)(n.Stack,{my:"$8","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:[(0,S.jsx)(n.SizableText,{size:"$heading5xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"* æ›´æ–°æ£€æµ‹ä¸­"}),(0,S.jsx)(d.k,{connectId:void 0,"data-sentry-element":"FirmwareCheckingLoading","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"})]}),(0,S.jsxs)(n.Stack,{my:"$8","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:[(0,S.jsx)(n.SizableText,{size:"$heading5xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"* æ›´æ–°æ—¥å¿—ï¼ˆæœ‰æ›´æ–°ï¼‰"}),(0,S.jsx)(l.z,{result:h,"data-sentry-element":"FirmwareChangeLogView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"})]}),(0,S.jsxs)(n.Stack,{my:"$8","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:[(0,S.jsx)(n.SizableText,{size:"$heading5xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"* å·²ç»æ˜¯æœ€æ–°å›ºä»¶ï¼ˆæ— æ›´æ–°ï¼‰"}),(0,S.jsx)(m.p,{"data-sentry-element":"FirmwareLatestVersionInstalled","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"})]}),(0,S.jsx)(n.Stack,{my:"$8","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:(0,S.jsx)(n.Button,{onPress:function(){e.showCheckList({result:h})},"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"* å‡çº§å‰æ£€æŸ¥é¡¹"})}),(0,S.jsxs)(n.Stack,{my:"$8","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:[(0,S.jsx)(n.SizableText,{size:"$heading5xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"* å‡çº§é”™è¯¯"}),(0,S.jsx)(n.SizableText,{size:"$heading2xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"** é€šç”¨é”™è¯¯ï¼ˆç›´æ¥ä¿®æ”¹ Error ç±»å‹çš„ defaultMessageï¼‰"}),(0,S.jsx)(FirmwareUpdateErrorDemo,{result:h,error:new v.CJ,"data-sentry-element":"FirmwareUpdateErrorDemo","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(FirmwareUpdateErrorDemo,{result:h,error:new v.kG,"data-sentry-element":"FirmwareUpdateErrorDemo","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(n.SizableText,{size:"$heading2xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"** éœ€è¦æ‰‹åŠ¨è¿›å…¥ boot æ¨¡å¼"}),(0,S.jsx)(FirmwareUpdateErrorDemo,{result:h,error:new v.e9,"data-sentry-element":"FirmwareUpdateErrorDemo","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(n.SizableText,{size:"$heading2xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"** æ‰‹åŠ¨è¿›å…¥ boot æ¨¡å¼(mini)"}),(0,S.jsx)(u._V,{deviceType:"mini","data-sentry-element":"EnterBootModeGuide","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(n.SizableText,{size:"$heading2xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"** æ‰‹åŠ¨è¿›å…¥ boot æ¨¡å¼(classic)"}),(0,S.jsx)(u._V,{deviceType:"classic","data-sentry-element":"EnterBootModeGuide","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(n.SizableText,{size:"$heading2xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"** éœ€è¦å®‰è£…æˆ–æ£€æŸ¥ bridge çŠ¶æ€"}),(0,S.jsx)(n.SizableText,{"data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"TODO"}),(0,S.jsx)(n.SizableText,{size:"$heading2xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"** éœ€è¦æ‰‹åŠ¨å‡çº§ bridge"}),(0,S.jsx)(FirmwareUpdateErrorDemo,{result:h,error:new v.J6,"data-sentry-element":"FirmwareUpdateErrorDemo","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(n.SizableText,{size:"$heading2xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"** éœ€è¦åœ¨ç½‘é¡µç«¯å‡çº§"}),(0,S.jsx)(FirmwareUpdateErrorDemo,{result:h,error:new v.Kb,"data-sentry-element":"FirmwareUpdateErrorDemo","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(n.SizableText,{size:"$heading2xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"** éœ€è¦æ‰‹åŠ¨å‡çº§å…¨é‡èµ„æº"}),(0,S.jsx)(FirmwareUpdateErrorDemo,{result:h,error:new v.Rw,"data-sentry-element":"FirmwareUpdateErrorDemo","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"})]}),(0,S.jsxs)(n.Stack,{my:"$8","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:[(0,S.jsx)(n.SizableText,{size:"$heading5xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"* å®‰è£…è¿›åº¦"}),(0,S.jsx)(n.SizableText,{size:"$heading2xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"** å®‰è£…æé†’"}),(0,S.jsx)(g.Y,{"data-sentry-element":"FirmwareUpdateWarningMessage","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(n.SizableText,{size:"$heading2xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"** å®‰è£…ä¸­"}),(0,S.jsx)(w.w,{currentStep:void 0,totalStep:void 0,title:"Preparing...",progress:12,desc:"Checking device...",fromVersion:"",toVersion:"","data-sentry-element":"FirmwareUpdateProgressBarView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(w.w,{currentStep:1,totalStep:1,title:"Preparing...(Only One Step, no step text bar is displayed)",progress:12,desc:"Checking device...",fromVersion:"",toVersion:"","data-sentry-element":"FirmwareUpdateProgressBarView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(w.w,{currentStep:1,totalStep:3,title:"Updating firmware...",progress:20,desc:"Downloading...",fromVersion:void 0,toVersion:"1.0.1","data-sentry-element":"FirmwareUpdateProgressBarView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(w.w,{currentStep:2,totalStep:3,title:"Updating bluetooth...",progress:50,desc:"Transferring...",fromVersion:"1.0.0",toVersion:"1.0.1","data-sentry-element":"FirmwareUpdateProgressBarView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(n.SizableText,{size:"$heading2xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"** å®‰è£…å‡ºé”™é‡è¯•(å’Œå‰é¢çš„ Error ç»„ä»¶å…±äº« UI)"}),(0,S.jsx)(c.V,{result:h,tipMessage:b.rn.FirmwareEraseSuccess,retryInfo:{id:0,error:new v.e9},"data-sentry-element":"FirmwareInstallingViewBase","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"}),(0,S.jsx)(n.SizableText,{size:"$heading2xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"** å®‰è£…å®Œæˆ"}),(0,S.jsx)(c.V,{result:h,isDone:!0,tipMessage:b.rn.AutoRebootToBootloader,retryInfo:void 0,"data-sentry-element":"FirmwareInstallingViewBase","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"})]}),(0,S.jsxs)(n.Stack,{my:"$8","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:[(0,S.jsx)(n.SizableText,{size:"$heading2xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx",children:"* StaticUIDialog"}),(0,S.jsx)(StaticUIDialog,{"data-sentry-element":"StaticUIDialog","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"})]})]})}const stories_FirmwareUpdateGallery=function(){return(0,S.jsx)(U.P,{description:"--",suggestions:["--"],boundaryConditions:["--"],elements:[{title:"--",element:(0,S.jsxs)(n.Stack,{gap:"$1",children:[(0,S.jsx)(FirmwareUpdateGalleryDemo,{}),(0,S.jsx)(FirmwareUpdateGalleryStaticUI,{})]})}],"data-sentry-element":"Layout","data-sentry-component":"FirmwareUpdateGallery","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/FirmwareUpdateGallery.tsx"})}},654004:(e,r,a)=>{a.d(r,{P:()=>Layout});var o=a(586330),t=a(654266),n=a(490343),s=a(765388),i=a(643087),p=a(498356),l=a(193068),d=a(831085),FormattedText=function({text:e}){return"string"==typeof e?(0,d.jsx)(n.Stack,{children:(0,d.jsxs)(n.SizableText,{children:[e,"ã€‚ "]})}):Array.isArray(e)&&0===e.length?null:(0,d.jsx)(n.Stack,{"data-sentry-element":"Stack","data-sentry-component":"FormattedText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:(0,d.jsx)(n.Stack,{gap:"$1","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:e.map((function(r,a){return(0,d.jsx)(n.Stack,{children:(0,d.jsxs)(n.SizableText,{children:[a+1,". ",r,a===e.length-1?"ã€‚":"ï¼›"]})},a.toString())}))})})};function Layout({description:e="",suggestions:r=[],boundaryConditions:a=[],elements:c=[],scrollEnabled:m=!0,contentInsetAdjustmentBehavior:u="never",skipLoading:w=!1,children:g}){var y=(0,s.U6)(),k=(0,p.A)();return(0,d.jsx)(n.Page,{skipLoading:w,"data-sentry-element":"Page","data-sentry-component":"Layout","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:(0,d.jsx)(n.ScrollView,{maxWidth:"100%",scrollEnabled:m,flex:1,marginBottom:y,paddingHorizontal:"$5",contentContainerStyle:{paddingTop:20,paddingBottom:280},keyboardDismissMode:"on-drag",contentInsetAdjustmentBehavior:u,"data-sentry-element":"ScrollView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:(0,d.jsxs)(n.Stack,{marginHorizontal:"auto",maxWidth:"100%",width:576,gap:"$6","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:[(0,d.jsxs)(n.XStack,{"data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:[(0,d.jsx)(n.IconButton,{icon:"HomeLineOutline",onPress:function(){k.dispatch(t.y9.replace(l.WP.Main,{screen:l.V4.Developer,params:{screen:l.f$.TabDeveloper}}))},"data-sentry-element":"IconButton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx"}),(0,d.jsx)(n.Button,{ml:"$4",onPress:(0,o.A)((function*(){yield i.A.serviceSetting.setTheme("light")})),"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:"Light Theme"}),(0,d.jsx)(n.Button,{ml:"$4",variant:"primary",onPress:(0,o.A)((function*(){yield i.A.serviceSetting.setTheme("dark")})),"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:"Dark Theme"})]}),e?(0,d.jsxs)(n.Stack,{gap:"$2",children:[(0,d.jsx)(n.Stack,{children:(0,d.jsx)(n.SizableText,{size:"$headingXl",children:"ä½¿ç”¨è¯´æ˜"})}),(0,d.jsx)(n.Stack,{children:(0,d.jsx)(FormattedText,{text:e})})]}):null,r?(0,d.jsxs)(n.Stack,{gap:"$2",children:[(0,d.jsx)(n.Stack,{children:(0,d.jsx)(n.SizableText,{size:"$headingXl",children:"ä½¿ç”¨å»ºè®®"})}),(0,d.jsx)(FormattedText,{text:r})]}):null,a?.length>0?(0,d.jsxs)(n.Stack,{gap:"$2",children:[(0,d.jsx)(n.Stack,{children:(0,d.jsx)(n.SizableText,{size:"$headingXl",children:"æ³¨æ„äº‹é¡¹"})}),(0,d.jsx)(FormattedText,{text:a})]}):null,(0,d.jsxs)(n.Stack,{gap:"$2","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:[(0,d.jsx)(n.Stack,{"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:(0,d.jsx)(n.SizableText,{size:"$headingXl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:"ç»„ä»¶æ¡ˆä¾‹"})}),(0,d.jsx)(n.Stack,{"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:c?.map((function(e,r){return(0,d.jsxs)(n.Stack,{gap:"$2",pb:"$8",mb:"$8",borderBottomWidth:"$px",borderBottomColor:"$borderSubdued",children:[(0,d.jsxs)(n.Stack,{flexDirection:"column",children:[(0,d.jsx)(n.SizableText,{size:"$headingLg",children:e.title}),e.description?(0,d.jsx)(n.Stack,{paddingTop:1,children:(0,d.jsxs)(n.SizableText,{children:[e.description,"ã€‚"]})}):null]}),(0,d.jsx)(n.Stack,{children:"function"==typeof e.element?(0,d.jsx)(e.element,{}):e.element})]},`elements-${r}`)}))}),(0,d.jsx)(n.Stack,{"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:g?(0,d.jsx)(n.Stack,{gap:"$3",children:g}):null})]})]})})})}},973066:(e,r,a)=>{a.d(r,{i:()=>FirmwareChangeLogContentView,z:()=>FirmwareChangeLogView});var o=a(586330),t=a(514041),n=a(908867),s=a(490343),i=a(643087),p=a(471169),l=a(334439),d=a(773831),c=a(225555),m=a(355422),u=a(443791),w=a(831085);function ChangeLogMarkdown({changelog:e}){var[{locale:r}]=(0,p.useSettingsPersistAtom)(),[a,n]=(0,t.useState)(r);return(0,t.useEffect)((function(){(0,o.A)((function*(){"system"===r&&n(yield i.A.serviceSetting.getCurrentLocale())}))()}),[r]),(0,w.jsx)(s.Markdown,{"data-sentry-element":"Markdown","data-sentry-component":"ChangeLogMarkdown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:e?.["zh-CN"===a?"zh-CN":"en-US"]||"No change log found."})}function ChangeLogSection({title:e,icon:r,isDone:a,updateInfo:o}){var i=(0,n.A)(),[p,d]=(0,t.useState)(a),c=(0,t.useCallback)((function(){d(!p)}),[p]);return(0,w.jsxs)(s.Stack,{"data-sentry-element":"Stack","data-sentry-component":"ChangeLogSection","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:[(0,w.jsxs)(s.XStack,{gap:"$3",py:"$2",ai:"center",onPress:c,"data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:[(0,w.jsx)(s.Icon,{name:r,size:"$5","data-sentry-element":"Icon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx"}),(0,w.jsxs)(s.Stack,{flex:1,"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:[(0,w.jsx)(s.SizableText,{size:"$bodyLgMedium","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:e}),(0,w.jsx)(s.SizableText,{size:"$bodyMd",color:a?"$textSubdued":"$textInfo","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:a?i.formatMessage({id:l.ETranslations.update_updated_to_latest_version},{version:o?.toVersion||i.formatMessage({id:l.ETranslations.global_unknown})}):i.formatMessage({id:l.ETranslations.global_version_is_available},{version:o?.toVersion||i.formatMessage({id:l.ETranslations.global_unknown})})})]}),(0,w.jsx)(s.IconButton,{icon:p?"ChevronDownSmallOutline":"ChevronTopSmallOutline",variant:"tertiary",onPress:c,"data-sentry-element":"IconButton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx"})]}),p?null:(0,w.jsxs)(s.Stack,{bg:"$bgStrong",p:"$5",borderRadius:"$3",children:[(0,w.jsx)(u.Y,{fromVersion:o?.fromVersion,toVersion:o?.toVersion}),(0,w.jsx)(ChangeLogMarkdown,{changelog:o?.changelog})]})]})}function FirmwareChangeLogContentView({result:e,isDone:r}){var a=(0,n.A)();return(0,w.jsxs)(s.Stack,{mt:"$8","data-sentry-element":"Stack","data-sentry-component":"FirmwareChangeLogContentView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:[e?.updateInfos?.bootloader?.hasUpgrade?(0,w.jsx)(ChangeLogSection,{title:a.formatMessage({id:l.ETranslations.global_bootloader}),icon:"StorageOutline",updateInfo:e?.updateInfos?.bootloader,isDone:r}):null,e?.updateInfos?.ble?.hasUpgrade?(0,w.jsx)(ChangeLogSection,{title:a.formatMessage({id:l.ETranslations.global_bluetooth}),icon:"BluetoothOutline",updateInfo:e?.updateInfos?.ble,isDone:r}):null,e?.updateInfos?.firmware?.hasUpgrade?(0,w.jsx)(ChangeLogSection,{title:a.formatMessage({id:l.ETranslations.global_firmware}),icon:"LaunchOutline",updateInfo:e?.updateInfos?.firmware,isDone:r}):null]})}function FirmwareChangeLogView({result:e,onConfirmClick:r}){var a=(0,n.A)(),[,o]=(0,p.useFirmwareUpdateStepInfoAtom)(),{showCheckList:t}=(0,d.B)();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(c.nv,{onConfirmText:a.formatMessage({id:l.ETranslations.update_update_now}),onConfirm:function(){o({step:p.EFirmwareUpdateSteps.showCheckList,payload:void 0}),t({result:e}),r?.()},"data-sentry-element":"FirmwareUpdatePageFooter","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx"}),(0,w.jsxs)(s.Stack,{"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx",children:[(0,w.jsx)(m.N,{result:e,"data-sentry-element":"FirmwareUpdateWalletProfile","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx"}),(0,w.jsx)(FirmwareChangeLogContentView,{result:e,"data-sentry-element":"FirmwareChangeLogContentView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx"})]})]})}},139499:(e,r,a)=>{a.d(r,{k:()=>FirmwareCheckingLoading});var o=a(908867),t=a(490343),n=a(334439),s=a(831085);function FirmwareCheckingLoading({connectId:e}){var r=(0,o.A)();return(0,s.jsxs)(t.Stack,{ai:"center",jc:"center",h:500,"data-sentry-element":"Stack","data-sentry-component":"FirmwareCheckingLoading","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareCheckingLoading.tsx",children:[(0,s.jsx)(t.Spinner,{size:"large","data-sentry-element":"Spinner","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareCheckingLoading.tsx"}),(0,s.jsx)(t.SizableText,{my:"$6",size:"$headingLg","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareCheckingLoading.tsx",children:r.formatMessage({id:n.ETranslations.update_checking_for_updates})}),null]})}},88569:(e,r,a)=>{a.d(r,{m:()=>FirmwareInstallingView,V:()=>FirmwareInstallingViewBase});var o=a(514041),t=a(490343),n=a(471169),s=a(908867),i=a(334439),p=a(773831),l=a(973066),d=a(723337),c=a(225555),m=a(831085);function FirmwareUpdateDone({result:e}){var r=(0,s.A)(),a=(0,p.B)();return(0,m.jsxs)(t.Stack,{"data-sentry-element":"Stack","data-sentry-component":"FirmwareUpdateDone","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateDone.tsx",children:[(0,m.jsx)(d.u,{icon:"CheckRadioSolid",tone:"success",title:r.formatMessage({id:i.ETranslations.update_all_updates_complete}),"data-sentry-element":"FirmwareUpdateBaseMessageView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateDone.tsx"}),(0,m.jsx)(l.i,{result:e,isDone:!0,"data-sentry-element":"FirmwareChangeLogContentView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateDone.tsx"}),(0,m.jsx)(c.nv,{onConfirmText:r.formatMessage({id:i.ETranslations.global_got_it}),onConfirm:function(){a.closeUpdateModal()},"data-sentry-element":"FirmwareUpdatePageFooter","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateDone.tsx"})]})}var u=a(853748),w=a(99202),g=a(355422);function FirmwareInstallingViewBase({result:e,isDone:r,tipMessage:a,retryInfo:n,progressBarKey:s}){(0,m.jsx)(g.N,{result:e});var i=(0,o.useMemo)((function(){return r?(0,m.jsx)(FirmwareUpdateDone,{result:e}):n?(0,m.jsx)(u.uH.InstallingErrors,{retryInfo:n,result:e,lastFirmwareTipMessage:a}):(0,m.jsx)(w.D,{lastFirmwareTipMessage:a,isDone:r},s)}),[r,s,e,n,a]);return(0,m.jsx)(t.Stack,{"data-sentry-element":"Stack","data-sentry-component":"FirmwareInstallingViewBase","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareInstallingView.tsx",children:i})}function FirmwareInstallingView({result:e,isDone:r}){var[a]=(0,n.useFirmwareUpdateStepInfoAtom)(),[t]=(0,n.useFirmwareUpdateRetryAtom)(),[s]=(0,n.useHardwareUiStateAtom)(),i=(0,o.useRef)(0);a.step===n.EFirmwareUpdateSteps.updateStart&&(i.current=a.payload.startAtTime);var p=s?.payload?.firmwareTipData?.message,[l,d]=(0,o.useState)();return(0,o.useEffect)((function(){p&&d(p)}),[p]),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(FirmwareInstallingViewBase,{result:e,isDone:r,tipMessage:l,retryInfo:a.step===n.EFirmwareUpdateSteps.updateStart?void 0:t,progressBarKey:i.current,"data-sentry-element":"FirmwareInstallingViewBase","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareInstallingView.tsx"})})}},411252:(e,r,a)=>{a.d(r,{p:()=>FirmwareLatestVersionInstalled});var o=a(908867),t=a(490343),n=a(334439),s=a(831085);function FirmwareLatestVersionInstalled(){var e=(0,o.A)();return(0,s.jsxs)(t.Stack,{ai:"center",jc:"center",h:500,"data-sentry-element":"Stack","data-sentry-component":"FirmwareLatestVersionInstalled","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareLatestVersionInstalled.tsx",children:[(0,s.jsx)(t.Icon,{size:"$14",name:"CheckRadioSolid",color:"$iconSuccess","data-sentry-element":"Icon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareLatestVersionInstalled.tsx"}),(0,s.jsx)(t.SizableText,{my:"$6",size:"$headingLg","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareLatestVersionInstalled.tsx",children:e.formatMessage({id:n.ETranslations.update_latest_version})})]})}},723337:(e,r,a)=>{a.d(r,{u:()=>FirmwareUpdateBaseMessageView});var o=a(514041),t=a(908867),n=a(490343),s=a(726130),i=a(334439),p=(a(663522),a(831085)),getColors=function(e){switch(e){case"destructive":return{iconWrapperBg:"$bgCritical",iconColor:"$iconCritical"};case"warning":return{iconWrapperBg:"$bgCaution",iconColor:"$iconCaution"};case"success":return{iconWrapperBg:"$bgSuccess",iconColor:"$iconSuccess"};default:return{iconWrapperBg:"$bgStrong",iconColor:"$icon"}}};function UpdateErrorTroubleshooting(){var e,r=(0,t.A)();e=i.ETranslations.update_troubleshoot_connection_issues;var a=r.formatMessage({id:e,defaultMessage:"If you have any questions, please refer to the troubleshooting guide."}).split("\n");return(0,p.jsx)(n.Stack,{"data-sentry-element":"Stack","data-sentry-component":"UpdateErrorTroubleshooting","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateBaseMessageView.tsx",children:a.map((function(e,r){return e.includes("<url>")?(0,p.jsx)(n.RichSizeableText,{size:"$bodyMd",color:"$textSubdued",linkList:{url:{url:s.ks}},children:e},r):(0,p.jsx)(n.SizableText,{size:"$bodyMd",color:"$textSubdued",children:e},r)}))})}function FirmwareUpdateBaseMessageView({icon:e,title:r,tone:a,message:t,linkList:s,displayTroubleshooting:i}){var l=(0,o.useCallback)((function(){return e?.endsWith("Solid")?(0,p.jsx)(n.Icon,{name:e,size:"$14",color:getColors(a).iconColor}):(0,p.jsx)(n.Stack,{alignSelf:"flex-start",p:"$3",borderRadius:"$full",bg:getColors(a).iconWrapperBg,children:(0,p.jsx)(n.Icon,{name:e,size:"$7",color:getColors(a).iconColor})})}),[e,a]);return(0,p.jsxs)(n.Stack,{py:"$6",gap:"$5","data-sentry-element":"Stack","data-sentry-component":"FirmwareUpdateBaseMessageView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateBaseMessageView.tsx",children:[(0,p.jsxs)(n.Stack,{"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateBaseMessageView.tsx",children:[e?l():null,r?(0,p.jsx)(n.SizableText,{my:"$4",size:"$heading2xl",children:r}):null,t?(0,p.jsx)(n.RichSizeableText,{size:"$bodyLg",color:"$textSubdued",linkList:s,children:t}):null]}),i?(0,p.jsx)(UpdateErrorTroubleshooting,{}):null]})}},853748:(e,r,a)=>{a.d(r,{_V:()=>EnterBootModeGuide,uH:()=>x,RH:()=>useFirmwareUpdateErrors});var o=a(586330),t=a(514041),n=a(813362),s=a(908867),i=a(490343),p=a(471169),l=a(726130),d=a(319357),c=a(514527),m=a(334439),u=a(117746),w=a(100645),g=a(643087);const y=a.p+"static/media/enter-boot-guide-mini.e82812de54d81a27fd02.png";var k=a(723337),f=a(225555),h=a(831085);function CommonError({message:e,title:r,icon:a,displayTroubleshooting:o}){var t=(0,s.A)();return(0,h.jsx)(k.u,{icon:a,tone:"destructive",title:r||t.formatMessage({id:m.ETranslations.global_an_error_occurred}),message:e,displayTroubleshooting:o,"data-sentry-element":"FirmwareUpdateBaseMessageView","data-sentry-component":"CommonError","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"})}function ShouldUpdateBridge({result:e}){var r=(0,s.A)();return(0,h.jsxs)(i.Stack,{"data-sentry-element":"Stack","data-sentry-component":"ShouldUpdateBridge","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx",children:[(0,h.jsx)(k.u,{icon:"InfoCircleOutline",title:r.formatMessage({id:m.ETranslations.update_outdated_version_detected}),message:r.formatMessage({id:m.ETranslations.update_hardware_update_requires_bridge}),linkList:{url:{url:l.F3}},"data-sentry-element":"FirmwareUpdateBaseMessageView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"}),(0,h.jsx)(f.nv,{onConfirm:function(){(0,u.Dr)(l.F3)},onConfirmText:r.formatMessage({id:m.ETranslations.global_view_tutorial}),"data-sentry-element":"FirmwareUpdatePageFooter","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"})]})}function ShouldUpdateByWeb(){var e=(0,s.A)();return(0,h.jsxs)(i.Stack,{"data-sentry-element":"Stack","data-sentry-component":"ShouldUpdateByWeb","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx",children:[(0,h.jsx)(k.u,{icon:"InfoCircleOutline",title:e.formatMessage({id:m.ETranslations.update_update_in_official_web_tool}),message:e.formatMessage({id:m.ETranslations.update_update_in_official_web_tool_desc}),linkList:{url:{url:l.BZ}},"data-sentry-element":"FirmwareUpdateBaseMessageView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"}),(0,h.jsx)(f.nv,{onConfirm:function(){(0,u.Dr)(l.BZ)},onConfirmText:e.formatMessage({id:m.ETranslations.global_visit_website}),"data-sentry-element":"FirmwareUpdatePageFooter","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"})]})}function HowToUpdateFullResource(){var e=(0,s.A)();return(0,h.jsxs)(i.Stack,{"data-sentry-element":"Stack","data-sentry-component":"HowToUpdateFullResource","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx",children:[(0,h.jsx)(k.u,{icon:"InfoCircleOutline",title:e.formatMessage({id:m.ETranslations.update_outdated_version_detected}),message:e.formatMessage({id:m.ETranslations.update_outdated_version_detected_desc}),linkList:{url:{url:l.Kj}},"data-sentry-element":"FirmwareUpdateBaseMessageView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"}),(0,h.jsx)(f.nv,{onConfirm:function(){(0,u.Dr)(l.Kj)},onConfirmText:e.formatMessage({id:m.ETranslations.global_view_tutorial}),"data-sentry-element":"FirmwareUpdatePageFooter","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"})]})}function EnterBootModeGuide({deviceType:e}){var r=(0,s.A)();return"mini"===e?(0,h.jsxs)(i.Stack,{mb:"$6",children:[(0,h.jsx)(i.Image,{w:353,h:224,source:y}),(0,h.jsx)(i.SizableText,{size:"$headingMd",children:r.formatMessage({id:m.ETranslations.update_manually_entering_bootloader_mode})}),(0,h.jsx)(i.SizableText,{mt:"$2",color:"$textSubdued",children:r.formatMessage({id:m.ETranslations.update_manually_entering_bootloader_mode_desc})})]}):(0,h.jsx)(i.Stack,{mb:"$6","data-sentry-element":"Stack","data-sentry-component":"EnterBootModeGuide","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx",children:(0,h.jsx)(i.RichSizeableText,{mt:"$2",linkList:{url:{url:l.zz}},"data-sentry-element":"RichSizeableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx",children:m.ETranslations.update_follow_online_tutorial_to_proceed_manually})})}function useFirmwareUpdateErrors({error:e,onRetry:r,result:a,lastFirmwareTipMessage:o}){var i=(0,s.A)(),p=i.formatMessage({id:m.ETranslations.global_retry});return(0,t.useMemo)((function(){if((0,c.R4)({error:e,code:[n.HardwareErrorCode.PinCancelled,n.HardwareErrorCode.ActionCancelled,n.HardwareErrorCode.DeviceInterruptedFromOutside]}))return{content:(0,h.jsx)(CommonError,{icon:"CrossedLargeOutline",title:i.formatMessage({id:m.ETranslations.update_operation_canceled}),message:i.formatMessage({id:m.ETranslations.update_operation_canceled_desc})}),onRetryHandler:r,retryText:p};if((0,c.R4)({error:e,code:n.HardwareErrorCode.FirmwareUpdateDownloadFailed}))return{content:(0,h.jsx)(CommonError,{icon:"DownloadOutline",title:i.formatMessage({id:m.ETranslations.update_download_failed}),message:i.formatMessage({id:m.ETranslations.update_check_connection_try_again})}),onRetryHandler:r,retryText:p};if((0,c.R4)({error:e,code:n.HardwareErrorCode.PinInvalid}))return{content:(0,h.jsx)(CommonError,{icon:"CrossedLargeOutline",message:i.formatMessage({id:m.ETranslations.hardware_invalid_pin_error})}),onRetryHandler:r,retryText:p};if((0,c.R4)({error:e,code:n.HardwareErrorCode.FirmwareUpdateManuallyEnterBoot})||(0,c.R4)({error:e,code:n.HardwareErrorCode.FirmwareUpdateAutoEnterBootFailure})||e&&o===w.rn.AutoRebootToBootloader)return{content:(0,h.jsx)(CommonError,{icon:"CrossedLargeOutline",title:i.formatMessage({id:m.ETranslations.update_manually_entering_bootloader_mode})}),detail:(0,h.jsx)(EnterBootModeGuide,{deviceType:a?.deviceType}),onRetryHandler:r,retryText:"mini"===a?.deviceType?i.formatMessage({id:m.ETranslations.update_verify_status_and_continue}):p};if((0,c.R4)({error:e,code:[n.HardwareErrorCode.BridgeNetworkError]}))return{content:(0,h.jsx)(CommonError,{icon:"CrossedLargeOutline",title:i.formatMessage({id:m.ETranslations.update_bridge_network_error}),message:i.formatMessage({id:m.ETranslations.update_unable_to_connect_to_bridge})}),onRetryHandler:r,retryText:p};if((0,c.R4)({error:e,code:[n.HardwareErrorCode.BridgeTimeoutError]}))return{content:(0,h.jsx)(CommonError,{icon:"CrossedLargeOutline",title:i.formatMessage({id:m.ETranslations.update_bridge_timeout_error}),message:i.formatMessage({id:m.ETranslations.update_connection_to_bridge_timed_out})}),onRetryHandler:r,retryText:p};if((0,c.R4)({error:e,code:[n.HardwareErrorCode.BridgeNotInstalled,d.o.NeedOneKeyBridge]}))return{content:(0,h.jsx)(k.u,{icon:"CrossedLargeOutline",tone:"destructive",title:i.formatMessage({id:m.ETranslations.update_bridge_not_installed}),message:i.formatMessage({id:m.ETranslations.update_hardware_update_requires_bridge}),linkList:{url:{url:l.F3}}}),onRetryHandler:r,retryText:p};if((0,c.R4)({error:e,code:d.o.NeedOneKeyBridgeUpgrade}))return{content:(0,h.jsx)(ShouldUpdateBridge,{result:a}),retryText:p};if((0,c.R4)({error:e,code:d.o.NeedFirmwareUpgradeFromWeb}))return{content:(0,h.jsx)(ShouldUpdateByWeb,{}),retryText:p};if((0,c.R4)({error:e,code:n.HardwareErrorCode.UseDesktopToUpdateFirmware}))return{content:(0,h.jsx)(HowToUpdateFullResource,{}),retryText:p};if(e){var t=e?.message;return 4500===e.code&&(t=i.formatMessage({id:m.ETranslations.feedback_hw_polling_time_out})),{content:(0,h.jsx)(CommonError,{icon:"CrossedLargeOutline",message:t,displayTroubleshooting:!0}),onRetryHandler:r,retryText:p}}return{content:null,retryText:p}}),[i,e,o,p,r,a])}var x={ShouldUpdateBridge,CommonError,EnterBootModeGuide,WorkflowErrors:function WorkflowErrors({onRetry:e,error:r,result:a}){var o=(0,s.A)(),{onRetryHandler:t,content:n,retryText:i}=useFirmwareUpdateErrors({error:r,onRetry:e,result:a,lastFirmwareTipMessage:void 0});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(f.nv,{onConfirm:t,onConfirmText:i||o.formatMessage({id:m.ETranslations.global_retry}),"data-sentry-element":"FirmwareUpdatePageFooter","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"}),n]})},InstallingErrors:function InstallingErrors({retryInfo:e,result:r,lastFirmwareTipMessage:a}){var n=(0,s.A)(),[,i]=(0,p.useFirmwareUpdateStepInfoAtom)(),l=(0,t.useCallback)((0,o.A)((function*(){if(!e)return null;i({step:p.EFirmwareUpdateSteps.updateStart,payload:{startAtTime:Date.now()}}),yield g.A.serviceFirmwareUpdate.retryUpdateTask({id:e?.id,connectId:r?.updatingConnectId,releaseResult:r})})),[r,e,i]),{content:d,detail:c,onRetryHandler:u,retryText:w}=useFirmwareUpdateErrors({onRetry:l,result:r,lastFirmwareTipMessage:a,error:e?.error});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(f.nv,{onConfirm:u,onConfirmText:w||n.formatMessage({id:m.ETranslations.global_retry}),"data-sentry-element":"FirmwareUpdatePageFooter","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx"}),d,c]})}}},225555:(e,r,a)=>{a.d(r,{nv:()=>p,oh:()=>FirmwareUpdatePageLayout});var o=a(908867),t=a(490343),n=a(334439),s=a(498356),i=a(831085);function FirmwareUpdatePageHeader(){var e=(0,o.A)();return(0,i.jsx)(t.Page.Header,{dismissOnOverlayPress:!1,title:e.formatMessage({id:n.ETranslations.update_hardware_update}),"data-sentry-element":"unknown","data-sentry-component":"FirmwareUpdatePageHeader","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx"})}var p=t.Page.Footer;function FirmwareUpdatePageLayout({children:e}){(0,s.A)();return(0,i.jsxs)(t.Stack,{"data-sentry-element":"Stack","data-sentry-component":"FirmwareUpdatePageLayout","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx",children:[(0,i.jsx)(FirmwareUpdatePageHeader,{"data-sentry-element":"FirmwareUpdatePageHeader","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx"}),(0,i.jsx)(t.Page.Body,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx",children:(0,i.jsx)(t.Stack,{p:"$5","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx",children:e})})]})}},99202:(e,r,a)=>{a.d(r,{D:()=>FirmwareUpdateProgressBar,w:()=>FirmwareUpdateProgressBarView});var o=a(460986),t=a.n(o),n=a(514041),s=a(908867),i=a(490343),p=a(471169),l=a(334439),d=a(284908),c=a(100645),m=a(643087),u=a(394764),w=a(443791),g=a(831085),y=10;function FirmwareUpdateProgressBarView({totalStep:e,currentStep:r,title:a,fromVersion:o,toVersion:t,progress:p,desc:d}){var c=(0,s.A)(),m=(0,n.useMemo)((function(){return e&&r?e<=1?null:(0,g.jsx)(i.SizableText,{size:"$bodyMd",color:"$textSubdued",children:c.formatMessage({id:l.ETranslations.global_step_str},{step:`${r}/${e}`})}):(0,g.jsx)(i.Skeleton,{width:120,height:16})}),[c,r,e]),u=(0,n.useMemo)((function(){return t?(0,g.jsx)(w.Y,{fromVersion:o,toVersion:t}):(0,g.jsx)(i.Skeleton,{width:80,height:16})}),[o,t]);return(0,g.jsxs)(i.Stack,{py:"$6","data-sentry-element":"Stack","data-sentry-component":"FirmwareUpdateProgressBarView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx",children:[m,(0,g.jsx)(i.SizableText,{size:"$heading2xl",my:"$3","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx",children:a}),u,(0,g.jsx)(i.Stack,{mt:"$12",mb:"$3","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx",children:(0,g.jsx)(i.Progress,{size:"medium",value:p,"data-sentry-element":"Progress","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx"})}),(0,g.jsx)(i.SizableText,{size:"$bodyLg",color:"$textSubdued","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx",children:d})]})}function FirmwareUpdateProgressBar({lastFirmwareTipMessage:e,isDone:r}){var a=(0,s.A)(),[o]=(0,p.useFirmwareUpdateStepInfoAtom)(),[w]=(0,p.useHardwareUiStateAtom)(),[k]=(0,p.useHardwareUiStateCompletedAtom)(),[f,h]=(0,n.useState)(1),[x]=(0,p.useFirmwareUpdateRetryAtom)(),v=(0,n.useRef)(f);v.current=f;var _=(0,n.useRef)(y),F=(0,n.useCallback)((function(){return a.formatMessage({id:l.ETranslations.global_checking_device})}),[a]),[b,U]=(0,n.useState)(F()),S=(0,n.useMemo)((function(){if(o?.step===p.EFirmwareUpdateSteps.installing)return o.payload.installingTarget?.updateInfo?.firmwareType||void 0}),[o.payload,o?.step]),{totalStep:T,currentStep:C}=(0,n.useMemo)((function(){if(o?.step===p.EFirmwareUpdateSteps.installing){var e=o?.payload?.installingTarget;if(e)return{totalStep:e.totalPhase.length,currentStep:e.totalPhase.findIndex((function(r){return r===e.currentPhase}))+1}}return{totalPhase:null,currentPhase:null}}),[o.payload,o?.step]),j=(0,n.useMemo)((function(){if(o?.step===p.EFirmwareUpdateSteps.installing)return{fromVersion:o.payload.installingTarget?.updateInfo.fromVersion||void 0,toVersion:o.payload.installingTarget?.updateInfo.toVersion||void 0}}),[o.payload,o?.step]),D=w?.payload?.firmwareTipData?.message,E=w?.payload?.firmwareProgress,B=d.Ay.isConfirmOnDeviceAction(w),z=([c.rn.CheckLatestUiResource,c.rn.DownloadLatestUiResource,c.rn.DownloadLatestUiResourceSuccess,c.rn.UpdateSysResource,c.rn.UpdateSysResourceSuccess].includes(e),(0,u.Z)(S)),M=(0,n.useRef)(E);M.current=E;var G=(0,n.useRef)([]),A=(0,n.useMemo)((function(){var o=a.formatMessage({id:l.ETranslations.global_preparing});return e&&(o=a.formatMessage({id:l.ETranslations.global_updating})),S&&(o=a.formatMessage({id:l.ETranslations.global_updating_type},{type:S}),"ble"===S&&(o=a.formatMessage({id:l.ETranslations.global_updating_type},{type:a.formatMessage({id:l.ETranslations.global_bluetooth})}))),r&&(o=a.formatMessage({id:l.ETranslations.global_done})),o}),[a,S,r,e]),I=(0,n.useCallback)((function(e){var r=[{type:["checking"],progress:function(){return 1},progressMax:function(){return y},desc:function(){return a.formatMessage({id:l.ETranslations.update_checking_device_if_no_restart})}},{type:[c.rn.CheckLatestUiResource],progress:function(){return 2},desc:function(){return a.formatMessage({id:l.ETranslations.update_checking_latest_ui_resources})}},{type:[c.rn.DownloadLatestUiResource],progress:function(){return 3},desc:function(){return a.formatMessage({id:l.ETranslations.update_downloading_latest_ui_resources})}},{type:[c.rn.DownloadLatestUiResourceSuccess],progress:function(){return 5},desc:function(){return a.formatMessage({id:l.ETranslations.update_download_success})}},{type:[c.rn.UpdateSysResource],progress:function(){return 7},desc:function(){return a.formatMessage({id:l.ETranslations.update_updating_ui_resources})}},{type:[c.rn.UpdateSysResourceSuccess],progress:function(){return 9},desc:function(){return a.formatMessage({id:l.ETranslations.update_update_ui_resources_success})}},{type:[c.rn.AutoRebootToBootloader],progress:function(){return 10},desc:function(){return a.formatMessage({id:l.ETranslations.update_reboot_to_bootloader_mode})}},{type:[c.rn.GoToBootloaderSuccess],progress:function(){return 12},desc:function(){return a.formatMessage({id:l.ETranslations.update_reboot_success})}},{type:[c.rn.DownloadFirmware,c.rn.DownloadLatestBootloaderResource],progress:function(){return 14},desc:function(){return a.formatMessage({id:l.ETranslations.update_downloading})}},{type:[c.rn.DownloadFirmwareSuccess,c.rn.DownloadLatestBootloaderResourceSuccess],progress:function(){return 20},desc:function(){return a.formatMessage({id:l.ETranslations.update_download_success})}},{type:[c.rn.FirmwareEraseSuccess],progress:function(){return 25},desc:function(){return a.formatMessage({id:l.ETranslations.update_transferring_data})}},{type:["installing"],progress:function(){var e,r=30+.7*(null!=(e=M.current)?e:0);return r>=99&&(r=99),r},desc:function(){return 100===M.current?a.formatMessage({id:l.ETranslations.update_installing}):a.formatMessage({id:l.ETranslations.update_transferring_data})}},{type:["done"],progress:function(){return 100},desc:function(){return a.formatMessage({id:l.ETranslations.update_update_completed})}}],o=r.findIndex((function(r){return r.type.includes(e)}));if(o>=0){var t,n=r[o],s=n.progress(),i=v.current;h((function(){var e=Math.max(s,i);return v.current=e,e})),U(n.desc());var p=r[o+1],d=null!=(t=n?.progressMax?.())?t:p?.progress();_.current=d||99}}),[a]),L=(0,n.useRef)(I);L.current=I,(0,n.useEffect)((function(){x||S&&z&&S!==z&&(h(1),v.current=1,_.current=99,L.current("checking"))}),[S,z,x]),(0,n.useEffect)((function(){o?.step!==p.EFirmwareUpdateSteps.updateStart&&S||U(F())}),[F,S,o?.step]),(0,n.useEffect)((function(){var e=setInterval((function(){if(!x&&!r&&!B){var e=v.current;h((function(){if(e>=_.current)return _.current;if(e>=99)return 99;var r=Math.min(e+1,_.current,99);return v.current=r,r}))}}),2e3);return function(){clearInterval(e)}}),[S,B,r,x]),(0,n.useEffect)((function(){r&&setTimeout((function(){L.current("done")}),1e3)}),[r]),(0,n.useEffect)((function(){D&&G.current.push(D)}),[D]),(0,n.useEffect)((function(){t()(E)&&L.current("installing")}),[E]),(0,n.useEffect)((function(){k?.action===p.EHardwareUiStateAction.CLOSE_UI_WINDOW&&m.A.serviceHardwareUI.closeHardwareUiStateDialog({skipDeviceCancel:!0,connectId:void 0})}),[k?.action]),(0,n.useEffect)((function(){e&&L.current(e)}),[e]);var[R,$]=(0,n.useState)(!1),P=(0,n.useMemo)((function(){0}),[E,e,f,R]);return(0,g.jsxs)(i.Stack,{"data-sentry-element":"Stack","data-sentry-component":"FirmwareUpdateProgressBar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx",children:[(0,g.jsx)(FirmwareUpdateProgressBarView,{totalStep:T,currentStep:C,title:A,progress:f,desc:b,fromVersion:j?.fromVersion,toVersion:j?.toVersion,"data-sentry-element":"FirmwareUpdateProgressBarView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx"}),P]})}},355422:(e,r,a)=>{a.d(r,{N:()=>FirmwareUpdateWalletProfile});var o=a(908867),t=a(490343),n=a(334439),s=a(593827),i=a(831085);function DeviceAvatar({deviceType:e,size:r}){return(0,i.jsx)(s.L,{img:e||"unknown",wallet:void 0,size:r,"data-sentry-element":"WalletAvatar","data-sentry-component":"DeviceAvatar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/DeviceAvatar/DeviceAvatar.tsx"})}function FirmwareUpdateWalletProfile({result:e}){var r=(0,o.A)();return(0,i.jsxs)(t.Stack,{onPress:function(){},"data-sentry-element":"Stack","data-sentry-component":"FirmwareUpdateWalletProfile","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateWalletProfile.tsx",children:[(0,i.jsx)(DeviceAvatar,{size:"$14",deviceType:e?.deviceType||"unknown","data-sentry-element":"DeviceAvatar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateWalletProfile.tsx"}),(0,i.jsxs)(t.SizableText,{mt:"$5",size:"$heading2xl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateWalletProfile.tsx",children:[r.formatMessage({id:n.ETranslations.update_new_hardware_updates})," "]})]})}},296437:(e,r,a)=>{a.d(r,{Y:()=>FirmwareUpdateWarningMessage});var o=a(908867),t=a(490343),n=a(334439),s=(a(663522),a(831085));function FirmwareUpdateWarningMessage(){var e=(0,o.A)();return(0,s.jsx)(t.Alert,{type:"warning",title:e.formatMessage({id:n.ETranslations.update_keep_usb_connected_and_app_active}),fullBleed:!0,mx:"$-5","data-sentry-element":"Alert","data-sentry-component":"FirmwareUpdateWarningMessage","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateWarningMessage.tsx"})}},443791:(e,r,a)=>{a.d(r,{Y:()=>FirmwareVersionProgressBar});var o=a(514041),t=a(908867),n=a(302722),s=a.n(n),i=a(490343),p=a(334439),l=a(831085);function FirmwareVersionProgressBar({fromVersion:e="",toVersion:r=""}){var a=(0,t.A)().formatMessage({id:p.ETranslations.global_unknown}),n=(0,o.useCallback)((function(e){return!!e&&(!!s().valid(e)&&!s().eq(e,"0.0.0"))}),[]);return(0,l.jsxs)(i.XStack,{gap:"$2.5",alignItems:"center","data-sentry-element":"XStack","data-sentry-component":"FirmwareVersionProgressBar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareVersionProgressBar.tsx",children:[(0,l.jsx)(i.Badge,{badgeType:"default",badgeSize:"lg","data-sentry-element":"Badge","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareVersionProgressBar.tsx",children:n(e)?e:a}),(0,l.jsx)(i.Icon,{name:"ArrowRightSolid",size:"$4","data-sentry-element":"Icon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareVersionProgressBar.tsx"}),(0,l.jsx)(i.Badge,{badgeType:"info",badgeSize:"lg","data-sentry-element":"Badge","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareVersionProgressBar.tsx",children:r?.length>0?r:a})]})}},349521:(e,r,a)=>{a.d(r,{F:()=>FirmwareUpdateReminderAlert,a:()=>HomeFirmwareUpdateReminder});var o=a(586330),t=a(514041),n=a(908867),s=a(490343),i=a(471169),p=a(334439),l=a(714191),d=a(643087),c=a(325809),m=a(498356),u=a(911998),w=a(162616),g=a(773831),y=a(318822);function BootloaderModeUpdateReminder(){var e=(0,m.A)(),r=(0,g.B)();return(0,t.useEffect)((function(){var fn=function(e){r.showBootloaderMode({connectId:e.connectId,existsFirmware:e.existsFirmware})};return y.iL.on(y.Tu.ShowFirmwareUpdateFromBootloaderMode,fn),function(){y.iL.off(y.Tu.ShowFirmwareUpdateFromBootloaderMode,fn)}}),[r,e]),null}var k=a(153763),f=a(491180),h=a(831085);function HomeFirmwareUpdateDetectCmp(){var{activeAccount:e}=(0,w.LH)({num:0}),r=e.device?.connectId,a=(0,k.E)(),o=(0,t.useMemo)((function(){return f.A.isHwWallet({walletId:e.wallet?.id})}),[e.wallet?.id]);return(0,t.useEffect)((function(){o&&r&&a&&d.A.serviceFirmwareUpdate.detectActiveAccountFirmwareUpdates({connectId:r})}),[o,r,a]),null}var x=(0,t.memo)((function HomeFirmwareUpdateDetectWithProvider(){var[e]=(0,i.useAppIsLockedAtom)();return e?null:(0,h.jsx)(c.b8,{config:{sceneName:l.Zs.home},enabledNum:[0],children:(0,h.jsx)(HomeFirmwareUpdateDetectCmp,{})})}));function FirmwareUpdateReminderAlert({message:e,onPress:r}){var a=(0,n.A)();return(0,h.jsxs)(s.XStack,{px:"$5",py:"$2",borderTopWidth:"$px",borderBottomWidth:"$px",bg:"$bgInfoSubdued",borderColor:"$borderInfoSubdued",alignItems:"center",gap:"$2",flex:1,"data-sentry-element":"XStack","data-sentry-component":"FirmwareUpdateReminderAlert","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/HomeFirmwareUpdateReminder.tsx",children:[(0,h.jsx)(s.Icon,{size:"$4",name:"DownloadOutline",color:"$iconInfo","data-sentry-element":"Icon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/HomeFirmwareUpdateReminder.tsx"}),(0,h.jsx)(s.SizableText,{flex:1,size:"$bodyMdMedium",color:"$text",numberOfLines:1,"data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/HomeFirmwareUpdateReminder.tsx",children:e}),(0,h.jsx)(s.Button,{size:"small",onPress:r,"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/HomeFirmwareUpdateReminder.tsx",children:a.formatMessage({id:p.ETranslations.global_view})})]})}function HomeFirmwareUpdateReminderCmp(){var e=(0,n.A)(),{activeAccount:r}=(0,w.LH)({num:0}),a=r.device?.connectId,l=(0,g.B)(),[c]=(0,i.useFirmwareUpdatesDetectStatusPersistAtom)(),{result:y}=((0,m.A)(),(0,u.yk)((0,o.A)((function*(){if(a){var e=c?.[a],r=e?.connectId===a&&e?.hasUpgrade;yield d.A.serviceFirmwareUpdate.getFirmwareUpdateDetectInfo({connectId:a});return{shouldUpdate:r,detectResult:e}}})),[a,c])),k=(0,t.useMemo)((function(){if(y?.shouldUpdate){var r="New firmware is available";return y?.detectResult?.toVersion?r=e.formatMessage({id:p.ETranslations.update_firmware_version_available},{version:y?.detectResult?.toVersion}):y?.detectResult?.toVersionBle&&(r=e.formatMessage({id:p.ETranslations.update_bluetooth_version_available},{version:y?.detectResult?.toVersionBle})),(0,h.jsx)(FirmwareUpdateReminderAlert,{message:r,onPress:(0,o.A)((function*(){l.openChangeLogModal({connectId:a})}))})}return null}),[e,l,a,y]);return(0,h.jsxs)(s.XStack,{"data-sentry-element":"XStack","data-sentry-component":"HomeFirmwareUpdateReminderCmp","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/HomeFirmwareUpdateReminder.tsx",children:[(0,h.jsx)(x,{"data-sentry-element":"HomeFirmwareUpdateDetect","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/HomeFirmwareUpdateReminder.tsx"}),(0,h.jsx)(BootloaderModeUpdateReminder,{"data-sentry-element":"BootloaderModeUpdateReminder","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/HomeFirmwareUpdateReminder.tsx"}),k]})}function HomeFirmwareUpdateReminder(){return(0,h.jsx)(c.b8,{config:{sceneName:l.Zs.home},enabledNum:[0],"data-sentry-element":"AccountSelectorProviderMirror","data-sentry-component":"HomeFirmwareUpdateReminder","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/HomeFirmwareUpdateReminder.tsx",children:(0,h.jsx)(HomeFirmwareUpdateReminderCmp,{"data-sentry-element":"HomeFirmwareUpdateReminderCmp","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/HomeFirmwareUpdateReminder.tsx"})})}}}]);
//# sourceMappingURL=52596.523baedff0.chunk.js.map