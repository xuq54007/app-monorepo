{"version":3,"file":"static/js/19179.799c7a0a07.chunk.js","mappings":"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","sources":["webpack://web/../../packages/kit/src/views/Setting/pages/CustomRPC/index.tsx"],"sourcesContent":["import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{useCallback,useEffect,useRef,useState}from'react';import{useIntl}from'react-intl';import{useDebouncedCallback}from'use-debounce';import{ActionList,Badge,Dialog,Divider,ESwitchSize,Empty,Form,IconButton,Input,ListView,Page,SizableText,Skeleton,Spinner,Stack,Switch,XStack,YStack,useForm}from'@onekeyhq/components';import backgroundApiProxy from'@onekeyhq/kit/src/background/instance/backgroundApiProxy';import{ListItem}from'@onekeyhq/kit/src/components/ListItem';import{NetworkAvatar}from'@onekeyhq/kit/src/components/NetworkAvatar';import{usePromiseResult}from'@onekeyhq/kit/src/hooks/usePromiseResult';import useConfigurableChainSelector from'@onekeyhq/kit/src/views/ChainSelector/hooks/useChainSelector';import{ETranslations}from'@onekeyhq/shared/src/locale';import{defaultLogger}from'@onekeyhq/shared/src/logger/logger';import uriUtils from'@onekeyhq/shared/src/utils/uriUtils';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ECustomStatus=function(ECustomStatus){ECustomStatus[\"Fast\"]=\"Fast\";ECustomStatus[\"Normal\"]=\"Normal\";ECustomStatus[\"NotAvailable\"]=\"NotAvailable\";return ECustomStatus;}(ECustomStatus||{});function ListHeaderComponent(){var intl=useIntl();return _jsxs(_Fragment,{children:[_jsx(SizableText,{px:\"$5\",size:\"$bodyLg\",color:\"$textSubdued\",\"data-sentry-element\":\"SizableText\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomRPC/index.tsx\",children:intl.formatMessage({id:ETranslations.custom_rpc_desc})}),_jsx(Divider,{my:\"$5\",\"data-sentry-element\":\"Divider\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomRPC/index.tsx\"})]});}function ListEmptyComponent({onAddCustomRpc}){var intl=useIntl();return _jsx(Empty,{mt:\"$24\",icon:\"BezierNodesOutline\",title:intl.formatMessage({id:ETranslations.custom_rpc_empty_title}),buttonProps:{onPress:function(){return onAddCustomRpc();},children:intl.formatMessage({id:ETranslations.custom_rpc_cta_label})},\"data-sentry-element\":\"Empty\",\"data-sentry-component\":\"ListEmptyComponent\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomRPC/index.tsx\"});}function DialogContent({network,rpcInfo,onConfirm}){var form=useForm({defaultValues:{rpc:rpcInfo?.rpc||''}});var rpcValidRef=useRef(true);var[isLoading,setIsLoading]=useState(false);var intl=useIntl();return _jsxs(_Fragment,{children:[_jsxs(Dialog.Header,{\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomRPC/index.tsx\",children:[_jsx(Stack,{mb:\"$5\",\"data-sentry-element\":\"Stack\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomRPC/index.tsx\",children:_jsx(NetworkAvatar,{networkId:network.id,size:\"$12\",\"data-sentry-element\":\"NetworkAvatar\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomRPC/index.tsx\"})}),_jsx(Dialog.Title,{\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomRPC/index.tsx\",children:intl.formatMessage({id:ETranslations.custom_rpc_edit_dialog_title},{network:network.name})})]}),_jsx(Form,{form:form,\"data-sentry-element\":\"Form\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomRPC/index.tsx\",children:_jsx(Form.Field,{label:\"RPC URL\",name:\"rpc\",rules:{required:{value:true,message:intl.formatMessage({id:ETranslations.form_custom_rpc_error_invalid})},validate:function(value){var errorMessage=intl.formatMessage({id:ETranslations.form_custom_rpc_error_invalid});if(typeof value!=='string'){return errorMessage;}var trimmedValue=value.trim();if(!trimmedValue){return errorMessage;}if(!uriUtils.parseUrl(value)||!rpcValidRef.current){return errorMessage;}}},\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomRPC/index.tsx\",children:_jsx(Input,{autoFocus:true,flex:1,\"data-sentry-element\":\"Input\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomRPC/index.tsx\"})})}),_jsx(Dialog.Footer,{onConfirm:(function(){var _ref=_asyncToGenerator(function*({preventClose,close}){var{serviceCustomRpc}=backgroundApiProxy;setIsLoading(true);var rpcUrl=form.getValues('rpc').trim();var networkId=network.id;try{var _rpcInfo$enabled;rpcValidRef.current=true;yield serviceCustomRpc.measureRpcStatus({rpcUrl,networkId,validateChainId:true});yield serviceCustomRpc.addCustomRpc({rpc:rpcUrl,networkId,enabled:(_rpcInfo$enabled=rpcInfo?.enabled)!=null?_rpcInfo$enabled:true});defaultLogger.setting.page.addCustomRPC({network:networkId});}catch(e){rpcValidRef.current=false;void form.trigger('rpc');preventClose();return;}finally{setIsLoading(false);}yield close();onConfirm();});return function(_x){return _ref.apply(this,arguments);};}()),confirmButtonProps:{loading:isLoading},\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomRPC/index.tsx\"})]});}function CustomRPC(){var intl=useIntl();var{result:customRpcData,run}=usePromiseResult(_asyncToGenerator(function*(){var{serviceNetwork,serviceCustomRpc}=backgroundApiProxy;var _supportNetworks=yield serviceNetwork.getCustomRpcEnabledNetworks();var _customRpcNetworks=yield serviceCustomRpc.getAllCustomRpc();return{supportNetworks:_supportNetworks,customRpcNetworks:_customRpcNetworks};}),[]);var[rpcSpeedMap,setRpcSpeedMap]=useState({});var previousRpcInfosRef=useRef();var measureRpcSpeed=useCallback(function(){var _ref3=_asyncToGenerator(function*(rpcInfo){try{var{responseTime}=yield backgroundApiProxy.serviceCustomRpc.measureRpcStatus({rpcUrl:rpcInfo.rpc,networkId:rpcInfo.networkId});return{responseTime,status:responseTime<800?ECustomStatus.Fast:ECustomStatus.Normal,loading:false};}catch(e){return{responseTime:-1,status:ECustomStatus.NotAvailable,loading:false};}});return function(_x2){return _ref3.apply(this,arguments);};}(),[]);var updateRpcMeasureData=useDebouncedCallback(function(){var _ref4=_asyncToGenerator(function*({currentRpcInfos,previousRpcInfos}){var updatedOrNewRpcInfos=currentRpcInfos.filter(function(current){var previous=previousRpcInfos?.find(function(prev){return prev.networkId===current.networkId;});return!previous||previous.rpc!==current.rpc;});setRpcSpeedMap(function(prev){var newMap=_objectSpread({},prev);updatedOrNewRpcInfos.forEach(function(rpcInfo){newMap[rpcInfo.networkId]=_objectSpread(_objectSpread({},newMap[rpcInfo.networkId]),{},{loading:true});});return newMap;});var updateRpcSpeed=function(networkId,measureData){setRpcSpeedMap(function(prev){return _objectSpread(_objectSpread({},prev),{},{[networkId]:measureData});});};var measurePromises=updatedOrNewRpcInfos.map(function(){var _ref5=_asyncToGenerator(function*(rpcInfo){var measureData=yield measureRpcSpeed(rpcInfo);updateRpcSpeed(rpcInfo.networkId,measureData);});return function(_x4){return _ref5.apply(this,arguments);};}());yield Promise.all(measurePromises);});return function(_x3){return _ref4.apply(this,arguments);};}(),300);useEffect(function(){if(customRpcData?.customRpcNetworks){var currentRpcInfos=customRpcData.customRpcNetworks;var previousRpcInfos=previousRpcInfosRef.current||[];void updateRpcMeasureData({currentRpcInfos,previousRpcInfos});previousRpcInfosRef.current=currentRpcInfos;}},[customRpcData?.customRpcNetworks,updateRpcMeasureData]);var onAddOrEditRpc=useCallback(function({network,rpcInfo}){Dialog.show({renderContent:_jsx(DialogContent,{network:network,rpcInfo:rpcInfo,onConfirm:run})});},[run]);var showChainSelector=useConfigurableChainSelector();var onSelectNetwork=useCallback(function(params){showChainSelector({networkIds:customRpcData?.supportNetworks?.map(function(i){return i.id;}),onSelect:function(network){onAddOrEditRpc({network,rpcInfo:params?.rpcInfo});}});},[showChainSelector,customRpcData?.supportNetworks,onAddOrEditRpc]);var onAddCustomRpc=useCallback(function(){onSelectNetwork();},[onSelectNetwork]);var onDeleteCustomRpc=useCallback(function(){var _ref6=_asyncToGenerator(function*(item){defaultLogger.setting.page.deleteCustomRPC({network:item.networkId});yield backgroundApiProxy.serviceCustomRpc.deleteCustomRpc(item.networkId);setTimeout(function(){void run();},200);});return function(_x5){return _ref6.apply(this,arguments);};}(),[run]);var onToggleCustomRpcEnabledState=useCallback(function(){var _ref7=_asyncToGenerator(function*(item){yield backgroundApiProxy.serviceCustomRpc.updateCustomRpcEnabledStatus({networkId:item.networkId,enabled:!item.enabled});if(item.enabled){defaultLogger.setting.page.turnOffCustomRPC({network:item.networkId});}else{defaultLogger.setting.page.turnOnCustomRPC({network:item.networkId});}setTimeout(function(){void run();},200);});return function(_x6){return _ref7.apply(this,arguments);};}(),[run]);var renderRpcStatus=useCallback(function(item){if(!rpcSpeedMap[item.networkId]||rpcSpeedMap[item.networkId].loading){return _jsx(Skeleton,{w:42,h:\"$5\"});}var badgeType='success';switch(rpcSpeedMap[item.networkId].status){case ECustomStatus.Fast:badgeType='success';break;case ECustomStatus.Normal:badgeType='warning';break;case ECustomStatus.NotAvailable:badgeType='critical';break;default:break;}var text=rpcSpeedMap[item.networkId].status===ECustomStatus.NotAvailable?intl.formatMessage({id:ETranslations.global_not_available}):`${rpcSpeedMap[item.networkId].responseTime}ms`;return _jsx(Badge,{badgeType:badgeType,badgeSize:\"sm\",children:text});},[intl,rpcSpeedMap]);var headerRight=useCallback(function(){return Array.isArray(customRpcData?.customRpcNetworks)&&customRpcData.customRpcNetworks.length>0?_jsx(IconButton,{title:intl.formatMessage({id:ETranslations.custom_rpc_cta_label}),variant:\"tertiary\",icon:\"PlusLargeOutline\",onPress:function(){onAddCustomRpc();}}):null;},[customRpcData?.customRpcNetworks,intl,onAddCustomRpc]);if(!customRpcData?.customRpcNetworks){return _jsx(YStack,{flex:1,alignItems:\"center\",justifyContent:\"center\",children:_jsx(Spinner,{})});}return _jsxs(Page,{\"data-sentry-element\":\"Page\",\"data-sentry-component\":\"CustomRPC\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomRPC/index.tsx\",children:[_jsx(Page.Header,{title:intl.formatMessage({id:ETranslations.custom_rpc_title}),headerRight:headerRight,\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomRPC/index.tsx\"}),_jsx(Page.Body,{\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomRPC/index.tsx\",children:_jsx(ListView,{data:customRpcData.customRpcNetworks,estimatedItemSize:60,keyExtractor:function(item){return item.networkId;},renderItem:function({item}){return _jsxs(ListItem,{testID:\"CustomRpcItemContainer\",children:[_jsx(Switch,{disabled:item.isCustomNetwork,size:ESwitchSize.small,value:item.enabled,onChange:function(){return onToggleCustomRpcEnabledState(item);}}),_jsx(NetworkAvatar,{networkId:item.networkId,size:\"$10\"}),_jsx(ListItem.Text,{flex:1,primary:_jsxs(XStack,{alignItems:\"center\",gap:\"$2\",children:[_jsx(SizableText,{flexShrink:1,numberOfLines:1,size:\"$bodyLgMedium\",color:\"$text\",children:item.network.name}),renderRpcStatus(item)]}),secondary:item.rpc,secondaryTextProps:{numberOfLines:1}}),_jsx(ActionList,{title:intl.formatMessage({id:ETranslations.global_more}),renderTrigger:_jsx(IconButton,{icon:\"DotHorOutline\",variant:\"tertiary\"}),items:[{label:intl.formatMessage({id:ETranslations.global_edit}),icon:'PencilOutline',onPress:function(){return onAddOrEditRpc({network:item.network,rpcInfo:item});}},{label:intl.formatMessage({id:ETranslations.global_delete}),destructive:true,icon:'DeleteOutline',onPress:function(){var _ref8=_asyncToGenerator(function*(){return onDeleteCustomRpc(item);});return function onPress(){return _ref8.apply(this,arguments);};}()}]})]});},ListHeaderComponent:_jsx(ListHeaderComponent,{}),ListEmptyComponent:_jsx(ListEmptyComponent,{onAddCustomRpc:function(){return onSelectNetwork();}}),\"data-sentry-element\":\"ListView\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomRPC/index.tsx\"})})]});}export default CustomRPC;"],"names":["ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","ECustomStatus","ListHeaderComponent","intl","children","SizableText","px","size","color","formatMessage","id","ETranslations","custom_rpc_desc","Divider","my","ListEmptyComponent","onAddCustomRpc","Empty","mt","icon","title","custom_rpc_empty_title","buttonProps","onPress","custom_rpc_cta_label","DialogContent","network","rpcInfo","onConfirm","_ref","form","useForm","defaultValues","rpc","rpcValidRef","useRef","isLoading","setIsLoading","useState","Dialog","Header","Stack","mb","networkId","Title","custom_rpc_edit_dialog_title","name","Form","Field","label","rules","required","value","message","form_custom_rpc_error_invalid","validate","errorMessage","trim","current","Input","autoFocus","flex","Footer","preventClose","close","serviceCustomRpc","rpcUrl","getValues","_rpcInfo$enabled","measureRpcStatus","validateChainId","addCustomRpc","enabled","setting","page","addCustomRPC","trigger","_x","this","confirmButtonProps","loading","CustomRPC","_ref3","_ref4","result","customRpcData","run","serviceNetwork","supportNetworks","getCustomRpcEnabledNetworks","customRpcNetworks","getAllCustomRpc","rpcSpeedMap","setRpcSpeedMap","previousRpcInfosRef","measureRpcSpeed","useCallback","responseTime","status","Fast","Normal","NotAvailable","_x2","updateRpcMeasureData","currentRpcInfos","previousRpcInfos","updatedOrNewRpcInfos","previous","find","prev","newMap","_ref5","measurePromises","map","measureData","updateRpcSpeed","_x4","Promise","all","_x3","useEffect","_ref6","_ref7","onAddOrEditRpc","show","renderContent","showChainSelector","onSelectNetwork","params","networkIds","i","onSelect","onDeleteCustomRpc","item","deleteCustomRPC","deleteCustomRpc","setTimeout","_x5","onToggleCustomRpcEnabledState","updateCustomRpcEnabledStatus","turnOffCustomRPC","turnOnCustomRPC","_x6","renderRpcStatus","Skeleton","w","h","badgeType","text","global_not_available","Badge","badgeSize","headerRight","Array","isArray","IconButton","variant","Page","custom_rpc_title","Body","ListView","data","estimatedItemSize","keyExtractor","renderItem","testID","Switch","disabled","isCustomNetwork","ESwitchSize","small","onChange","Text","primary","XStack","alignItems","gap","flexShrink","numberOfLines","secondary","secondaryTextProps","ActionList","global_more","renderTrigger","items","global_edit","global_delete","destructive","_ref8","YStack","justifyContent","Spinner"],"sourceRoot":""}