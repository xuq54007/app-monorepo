{"version":3,"file":"static/js/60848.bd7f2097ea.chunk.js","mappings":"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","sources":["webpack://web/../../packages/kit/src/views/DAppConnection/pages/DappOpenModalPage.tsx","webpack://web/../../packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx"],"sourcesContent":["import{Page}from'@onekeyhq/components';import{EDAppModalPageStatus}from'@onekeyhq/shared/types/dappConnection';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function useDappCloseHandler(dappApprove,onClose){var handleOnClose=function(extra){if(extra?.flag!==EDAppModalPageStatus.Confirmed){dappApprove.reject();}if(typeof onClose==='function'){onClose(extra);}};return handleOnClose;}function DappOpenModalPage({children,onClose,dappApprove}){var handleOnClose=useDappCloseHandler(dappApprove,onClose);return _jsxs(Page,{scrollEnabled:true,onClose:handleOnClose,\"data-sentry-element\":\"Page\",\"data-sentry-component\":\"DappOpenModalPage\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/DAppConnection/pages/DappOpenModalPage.tsx\",children:[_jsx(Page.Header,{headerShown:false,\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/DAppConnection/pages/DappOpenModalPage.tsx\"}),children]});}export default DappOpenModalPage;","import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{useCallback,useEffect,useState}from'react';import{useRoute}from'@react-navigation/core';import BigNumber from'bignumber.js';import{useIntl}from'react-intl';import{Alert,Dialog,Form,IconButton,Input,Page,Toast,useForm}from'@onekeyhq/components';import backgroundApiProxy from'@onekeyhq/kit/src/background/instance/backgroundApiProxy';import useAppNavigation from'@onekeyhq/kit/src/hooks/useAppNavigation';import useDappApproveAction from'@onekeyhq/kit/src/hooks/useDappApproveAction';import useDappQuery from'@onekeyhq/kit/src/hooks/useDappQuery';import{ETranslations}from'@onekeyhq/shared/src/locale';import{defaultLogger}from'@onekeyhq/shared/src/logger/logger';import accountUtils from'@onekeyhq/shared/src/utils/accountUtils';import uriUtils from'@onekeyhq/shared/src/utils/uriUtils';import{useDappCloseHandler}from\"../../../DAppConnection/pages/DappOpenModalPage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var parseChainId=function(chainId){if(typeof chainId==='number'){return chainId.toString();}if(typeof chainId==='string'){if(chainId.startsWith('0x')){return parseInt(chainId,16).toString();}return chainId;}return'';};function AddCustomNetwork(){var _route$params,_route$params2,_$sourceInfo$id,_ref,_ref2,_ref3,_ref4;var intl=useIntl();var navigation=useAppNavigation();var route=useRoute();var{state,networkId:routeNetworkId,onSuccess,onDeleteSuccess,networkName:routeNetworkName,rpcUrl:routeRpcUrl,chainId:routeChainId,symbol:routeSymbol,blockExplorerUrl:routeBlockExplorerUrl}=(_route$params=route.params)!=null?_route$params:{};var isEditMode=!!((_route$params2=route.params)!=null?_route$params2:{}).chainId;var{$sourceInfo,networkInfo}=useDappQuery();var dappApprove=useDappApproveAction({id:(_$sourceInfo$id=$sourceInfo?.id)!=null?_$sourceInfo$id:'',closeWindowAfterResolved:true});var getInitialChainId=function(){if(routeChainId){return String(routeChainId);}if(networkInfo?.chainId){return parseChainId(networkInfo.chainId);}return'';};var form=useForm({mode:'onBlur',defaultValues:{networkName:(_ref=routeNetworkName!=null?routeNetworkName:networkInfo?.chainName)!=null?_ref:'',rpcUrl:(_ref2=routeRpcUrl!=null?routeRpcUrl:networkInfo?.rpcUrls?.[0])!=null?_ref2:'',chainId:getInitialChainId(),symbol:(_ref3=routeSymbol!=null?routeSymbol:networkInfo?.nativeCurrency?.symbol)!=null?_ref3:'',blockExplorerUrl:(_ref4=routeBlockExplorerUrl!=null?routeBlockExplorerUrl:networkInfo?.blockExplorerUrls?.[0])!=null?_ref4:''}});var[isFetchingChainId,setIsFetchingChainId]=useState(false);var getChainId=useCallback(function(){var _ref5=_asyncToGenerator(function*(rpcUrl){try{setIsFetchingChainId(true);var{chainId}=yield backgroundApiProxy.serviceCustomRpc.getChainIdByRpcUrl({rpcUrl});if(chainId){form.setValue('chainId',parseChainId(chainId));}return chainId;}catch(error){form.setValue('chainId','');throw error;}finally{setIsFetchingChainId(false);}});return function(_x){return _ref5.apply(this,arguments);};}(),[form]);var[symbolDescription,setSymbolDescription]=useState('');var observedChainId=form.watch('chainId');useEffect(function(){function searchChainDataFromServer(){return _searchChainDataFromServer.apply(this,arguments);}function _searchChainDataFromServer(){_searchChainDataFromServer=_asyncToGenerator(function*(){var chainId=new BigNumber(observedChainId);if(!chainId.isInteger()){return;}var chainInfo=yield backgroundApiProxy.serviceCustomRpc.searchCustomNetworkByChainList({chainId:chainId.toString()});if(!chainInfo){return;}var currentSymbol=form.getValues('symbol');if(chainInfo.nativeCurrency?.symbol&&chainInfo.nativeCurrency.symbol!==currentSymbol){setSymbolDescription(intl.formatMessage({id:ETranslations.form_symbol_recommend_text},{chainID:chainId.toString(),symbol:chainInfo.nativeCurrency?.symbol}));}});return _searchChainDataFromServer.apply(this,arguments);}void searchChainDataFromServer();},[observedChainId,form,intl]);var[isLoading,setIsLoading]=useState(false);var onSubmit=useCallback(_asyncToGenerator(function*(){try{var isValid=yield form.trigger();if(!isValid){return;}setIsLoading(true);var{networkName,rpcUrl,chainId,symbol,blockExplorerUrl}=form.getValues();var finalChainId=parseInt(chainId,10);try{if(!finalChainId){var chainIdFromRpc=yield getChainId(rpcUrl);if(chainIdFromRpc){finalChainId=chainIdFromRpc;}}if(!finalChainId){Toast.error({title:intl.formatMessage({id:ETranslations.form_rpc_url_invalid})});return;}}catch(error){Toast.error({title:intl.formatMessage({id:ETranslations.form_rpc_url_invalid})});return;}var networkId=accountUtils.buildCustomEvmNetworkId({chainId:finalChainId.toString()});var existingNetwork=yield backgroundApiProxy.serviceNetwork.getNetworkSafe({networkId});if(existingNetwork&&!existingNetwork.isCustomNetwork){Toast.error({title:intl.formatMessage({id:ETranslations.custom_network_network_exists_feedback_text})});return;}var params={networkName,rpcUrl,chainId:finalChainId,symbol,blockExplorerUrl};yield backgroundApiProxy.serviceCustomRpc.upsertCustomNetwork(params);var network=yield backgroundApiProxy.serviceNetwork.getNetwork({networkId});void dappApprove.resolve({result:network});setTimeout(function(){onSuccess?.(network);defaultLogger.account.wallet.customNetworkAdded({chainID:String(finalChainId)});},500);Toast.success({title:intl.formatMessage({id:isEditMode?ETranslations.feedback_change_saved:ETranslations.custom_network_add_custom_network_successfully_toast_text})});navigation.pop();}catch(error){Toast.error({title:intl.formatMessage({id:ETranslations.custom_network_add_custom_network_failed_toast_text})});}finally{setIsLoading(false);}}),[form,dappApprove,intl,navigation,getChainId,onSuccess,isEditMode]);var onDelete=useCallback(_asyncToGenerator(function*(){if(!routeNetworkId){return;}Dialog.show({title:intl.formatMessage({id:ETranslations.custom_network_remove_network_dialog_title}),description:intl.formatMessage({id:ETranslations.custom_network_remove_network_dialog_description}),showCancelButton:true,onConfirmText:intl.formatMessage({id:ETranslations.global_remove}),confirmButtonProps:{variant:'destructive'},onConfirm:function(){var _ref8=_asyncToGenerator(function*({close}){yield backgroundApiProxy.serviceCustomRpc.deleteCustomNetwork({networkId:routeNetworkId});Toast.success({title:intl.formatMessage({id:ETranslations.explore_removed_success})});navigation.pop();onDeleteSuccess?.();yield close();});return function onConfirm(_x2){return _ref8.apply(this,arguments);};}()});}),[routeNetworkId,intl,navigation,onDeleteSuccess]);var headerRight=useCallback(function(){if(state!=='edit'){return null;}return _jsx(IconButton,{title:intl.formatMessage({id:ETranslations.global_remove}),icon:\"DeleteOutline\",variant:\"tertiary\",iconColor:\"$iconSubdued\",onPress:function(){return onDelete();}});},[state,intl,onDelete]);var handleOnClose=useDappCloseHandler(dappApprove);return _jsxs(Page,{scrollEnabled:true,onClose:handleOnClose,\"data-sentry-element\":\"Page\",\"data-sentry-component\":\"AddCustomNetwork\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\",children:[_jsx(Page.Header,{title:intl.formatMessage({id:ETranslations.custom_network_add_network_action_text}),headerRight:headerRight,\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\"}),_jsxs(Page.Body,{px:\"$5\",gap:\"$5\",\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\",children:[_jsx(Alert,{icon:\"ErrorOutline\",type:\"warning\",title:intl.formatMessage({id:ETranslations.custom_network_form_alert_text}),\"data-sentry-element\":\"Alert\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\"}),_jsxs(Form,{form:form,\"data-sentry-element\":\"Form\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\",children:[_jsx(Form.Field,{name:\"networkName\",label:intl.formatMessage({id:ETranslations.form_network_name_label}),rules:{required:{value:true,message:intl.formatMessage({id:ETranslations.address_book_add_address_name_required})}},\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\",children:_jsx(Input,{size:\"large\",$gtMd:{size:'medium'},\"data-sentry-element\":\"Input\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\"})}),_jsx(Form.Field,{name:\"rpcUrl\",label:\"RPC URL\",rules:{required:{value:true,message:intl.formatMessage({id:ETranslations.address_book_add_address_name_required})},validate:function(){var _ref9=_asyncToGenerator(function*(value){if(!value)return undefined;if(!uriUtils.parseUrl(value)){return intl.formatMessage({id:ETranslations.form_rpc_url_invalid});}if(!value.startsWith('http')){return intl.formatMessage({id:ETranslations.form_rpc_url_prefix_required});}try{var chainId=yield getChainId(value);if(!chainId){return intl.formatMessage({id:ETranslations.form_rpc_url_invalid});}}catch(error){return intl.formatMessage({id:ETranslations.form_rpc_url_invalid});}return undefined;});return function validate(_x3){return _ref9.apply(this,arguments);};}()},\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\",children:_jsx(Input,_objectSpread(_objectSpread({size:\"large\",$gtMd:{size:'medium'}},isFetchingChainId&&{addOns:[{loading:true}]}),{},{\"data-sentry-element\":\"Input\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\"}))}),_jsx(Form.Field,{name:\"chainId\",label:\"Chain ID\",disabled:true,\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\",children:_jsx(Input,{size:\"large\",$gtMd:{size:'medium'},editable:false,\"data-sentry-element\":\"Input\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\"})}),_jsx(Form.Field,{name:\"symbol\",label:intl.formatMessage({id:ETranslations.manage_token_custom_token_symbol}),description:symbolDescription,rules:{required:{value:true,message:intl.formatMessage({id:ETranslations.address_book_add_address_name_required})}},\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\",children:_jsx(Input,{size:\"large\",$gtMd:{size:'medium'},\"data-sentry-element\":\"Input\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\"})}),_jsx(Form.Field,{name:\"blockExplorerUrl\",label:intl.formatMessage({id:ETranslations.form_block_explorer_url_label}),optional:true,rules:{validate:function(value){if(!value)return undefined;if(!uriUtils.parseUrl(value)){return intl.formatMessage({id:ETranslations.form_rpc_url_invalid});}if(!value.startsWith('http')){return intl.formatMessage({id:ETranslations.form_rpc_url_prefix_required});}return undefined;}},\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\",children:_jsx(Input,{size:\"large\",$gtMd:{size:'medium'},\"data-sentry-element\":\"Input\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\"})})]})]}),_jsx(Page.Footer,{onConfirmText:intl.formatMessage({id:ETranslations.action_save}),onCancelText:intl.formatMessage({id:ETranslations.global_cancel}),confirmButtonProps:{loading:isLoading},onConfirm:function(){return form.handleSubmit(onSubmit)();},onCancel:function(){return dappApprove.reject();},\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/CustomNetwork/index.tsx\"})]});}export default AddCustomNetwork;"],"names":["useDappCloseHandler","dappApprove","onClose","extra","flag","Confirmed","reject","DappOpenModalPage","children","handleOnClose","Page","scrollEnabled","Header","headerShown","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","parseChainId","chainId","toString","startsWith","parseInt","AddCustomNetwork","_route$params","_route$params2","_$sourceInfo$id","_ref","_ref2","_ref3","_ref4","_ref5","intl","navigation","route","state","networkId","routeNetworkId","onSuccess","onDeleteSuccess","networkName","routeNetworkName","rpcUrl","routeRpcUrl","routeChainId","symbol","routeSymbol","blockExplorerUrl","routeBlockExplorerUrl","params","isEditMode","$sourceInfo","networkInfo","id","closeWindowAfterResolved","form","useForm","mode","defaultValues","chainName","rpcUrls","String","nativeCurrency","blockExplorerUrls","isFetchingChainId","setIsFetchingChainId","useState","getChainId","useCallback","serviceCustomRpc","getChainIdByRpcUrl","setValue","error","_x","this","symbolDescription","setSymbolDescription","observedChainId","watch","useEffect","_searchChainDataFromServer","isInteger","chainInfo","searchCustomNetworkByChainList","currentSymbol","getValues","formatMessage","ETranslations","form_symbol_recommend_text","chainID","searchChainDataFromServer","_ref9","isLoading","setIsLoading","onSubmit","trigger","finalChainId","chainIdFromRpc","Toast","title","form_rpc_url_invalid","buildCustomEvmNetworkId","existingNetwork","serviceNetwork","getNetworkSafe","isCustomNetwork","custom_network_network_exists_feedback_text","upsertCustomNetwork","network","getNetwork","resolve","result","setTimeout","account","wallet","customNetworkAdded","success","feedback_change_saved","custom_network_add_custom_network_successfully_toast_text","pop","custom_network_add_custom_network_failed_toast_text","onDelete","_ref8","Dialog","show","custom_network_remove_network_dialog_title","description","custom_network_remove_network_dialog_description","showCancelButton","onConfirmText","global_remove","confirmButtonProps","variant","onConfirm","close","deleteCustomNetwork","explore_removed_success","_x2","headerRight","IconButton","icon","iconColor","onPress","custom_network_add_network_action_text","Body","px","gap","Alert","type","custom_network_form_alert_text","Form","Field","name","label","form_network_name_label","rules","required","value","message","address_book_add_address_name_required","Input","size","$gtMd","validate","form_rpc_url_prefix_required","_x3","addOns","loading","disabled","editable","manage_token_custom_token_symbol","form_block_explorer_url_label","optional","Footer","action_save","onCancelText","global_cancel","handleSubmit","onCancel"],"sourceRoot":""}