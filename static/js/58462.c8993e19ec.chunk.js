!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="06e01fcf-d1d3-49cc-8883-f30ef49acd1a",e._sentryDebugIdIdentifier="sentry-dbid-06e01fcf-d1d3-49cc-8883-f30ef49acd1a")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[58462],{451661:e=>{var t=10,r=41,n=107,i=9,a=25,o=10;function inputBytes(e){return r+(e.script?e.script.length:n)}function outputBytes(e){return e.script?o+e.script.length+(e.script.length>=74?2:1):i+(e.script?e.script.length:a)}function dustThreshold(e,t){return inputBytes({})*t}function transactionBytes(e,r){return t+e.reduce((function(e,t){return e+inputBytes(t)}),0)+r.reduce((function(e,t){return e+outputBytes(t)}),0)}function uintOrNaN(e){return"number"!=typeof e?NaN:isFinite(e)?Math.floor(e)!==e||e<0?NaN:e:NaN}function sumOrNaN(e){return e.reduce((function(e,t){return e+uintOrNaN(t.value)}),0)}var s=outputBytes({});e.exports={dustThreshold,finalize:function finalize(e,t,r){var n=transactionBytes(e,t),i=r*(n+s),a=sumOrNaN(e)-(sumOrNaN(t)+i);a>dustThreshold(0,r)&&(t=t.concat({value:a}));var o=sumOrNaN(e)-sumOrNaN(t);return isFinite(o)?{inputs:e,outputs:t,fee:o}:{fee:r*n}},inputBytes,outputBytes,sumOrNaN,sumForgiving:function sumForgiving(e){return e.reduce((function(e,t){return e+(isFinite(t.value)?t.value:0)}),0)},transactionBytes,uintOrNaN}},940916:(e,t,r)=>{"use strict";r.d(t,{G:()=>b});var n=r(482451),i=r.n(n),a=r(324586),o=r(586330),s=r(230414),c=r(507140),u=r(606777),d=r(401349),l=r(404727),p=r(180556),f=r(929296),h=r(195309),y=r(972715),g=r(901048).Buffer;function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,y.A)(e);if(t){var i=(0,y.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,h.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var w=function(e){(0,f.A)(ChainSigner,e);var t=_createSuper(ChainSigner);function ChainSigner(e,r,n){var i,a=(0,d.N)(n,{key:e,chainCode:g.alloc(32)},r).key.toString("hex");return(i=t.call(this,a,n)).encryptedPrivateKey=e,i.password=r,i.curve=n,i}var r,n=ChainSigner.prototype;return n.getPrvkey=function getPrvkey(){return Promise.resolve((0,d.Yc)(this.password,this.encryptedPrivateKey))},n.getPrvkeyHex=(r=(0,o.A)((function*(){return u.A.bytesToHex(yield this.getPrvkey())})),function getPrvkeyHex(){return r.apply(this,arguments)}),n.sign=function sign(e){var t=(0,d._S)(this.curve,this.encryptedPrivateKey,e,this.password);return"secp256k1"===this.curve?Promise.resolve([t.slice(0,-1),t[t.length-1]]):Promise.resolve([t,0])},(0,s.A)(ChainSigner)}(function(){function Verifier(e,t){this.curve=t,this.compressedPublicKey=g.from(e,"hex"),this.uncompressedPublicKey=(0,d.sA)(t,this.compressedPublicKey)}var e,t=Verifier.prototype;return t.getPubkey=function getPubkey(e){return Promise.resolve(e?this.compressedPublicKey:this.uncompressedPublicKey)},t.getPubkeyHex=(e=(0,o.A)((function*(e){return u.A.bytesToHex(yield this.getPubkey(e))})),function getPubkeyHex(t){return e.apply(this,arguments)}),t.verify=function verify(){return Promise.resolve(g.from([]))},t.verifySignature=function verifySignature({publicKey:e,digest:t,signature:r}){var n=u.A.toBuffer(e),i=u.A.toBuffer(t),a=u.A.toBuffer(r),{curve:o}=this,s=(0,d.MX)(o,n,i,a);return Promise.resolve(s)},(0,s.A)(Verifier)}());function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,a.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=function(){function CoreChainApiBase(){}var e,t,r,n,a,f,h,y,g=CoreChainApiBase.prototype;return g.baseGetCurve=function baseGetCurve(e){switch(e){case"ed25519":return d.ev;case"secp256k1":return d.bI;case"nistp256":return d.OX;default:throw new c.He("Unsupported curve")}},g.baseCreateSigner=(e=(0,o.A)((function*({curve:e,privateKey:t,password:r}){if(void 0===r)throw new c.He("Software signing requires a password.");var n=u.A.toBuffer(t);return Promise.resolve(new w(n,r,e))})),function baseCreateSigner(t){return e.apply(this,arguments)}),g.baseGetSingleSigner=(t=(0,o.A)((function*({payload:e,curve:t}){var r=yield this.getPrivateKeys(e),n=e.account.path,i=r[n],a=e?.relPaths?.[0];if(!i&&a&&(i=r[[n,a].join("/")]),!i)throw new Error(`No private key found: ${n}`);return this.baseCreateSigner({curve:t,privateKey:i,password:e.password})})),function baseGetSingleSigner(e){return t.apply(this,arguments)}),g.baseGetPrivateKeys=(r=(0,o.A)((function*({payload:e,curve:t}){var{credentials:r,account:n,password:i,relPaths:a}=e,o={};if(r.hd&&r.imported)throw new c.He("getPrivateKeys ERROR: hd and imported credentials can NOT both set.");if(r.hd&&(o=yield this.baseGetPrivateKeysHd({curve:t,account:n,hdCredential:r.hd,password:i,relPaths:a})),r.imported){var{privateKey:s}=(0,d.VV)({password:i,credential:r.imported}),l=u.A.bytesToHex((0,d.w)(i,s));o[n.path]=l,o[""]=l}if(!Object.keys(o).length)throw new Error("No private keys found");return o})),function baseGetPrivateKeys(e){return r.apply(this,arguments)}),g.baseGetPrivateKeysHd=(n=(0,o.A)((function*({curve:e,password:t,account:r,relPaths:n,hdCredential:i}){var{path:a}=r,o=a.split("/"),s=n||[o.pop()],l=o.join("/");if(0===s.length)throw new c.He("getPrivateKeysHd ERROR: relPaths is empty.");return(0,d.Wu)(e,i,t,l,s).reduce((function(e,t){return _objectSpread(_objectSpread({},e),{},{[t.path]:u.A.bytesToHex(t.extendedKey.key)})}),{})})),function baseGetPrivateKeysHd(e){return n.apply(this,arguments)}),g.baseGetAddressesFromHd=(a=(0,o.A)((function*(e,t){var r=this,{curve:n,generateFrom:a}=t,{template:s,hdCredential:l,password:f,indexes:h}=e,{pathPrefix:y,pathSuffix:g}=(0,p.Ah)(s),w=h.map((function(e){return g.replace("{index}",e.toString())})),b="privateKey"===a,v=[],A=[];b?A=(0,d.Wu)(n,l,f,y,w):v=yield(0,d.MJ)({curveName:n,hdCredential:l,password:f,prefix:y,relPaths:w});var m=b?A:v;if(m.length!==h.length)throw new c.He("Unable to get publick key.");var k,x=yield Promise.all(m.map((k=(0,o.A)((function*(t){var n,a,{path:o,extendedKey:{key:s}}=t;if(b){var c=u.A.bytesToHex((0,d.Yc)(f,s));a=yield r.getAddressFromPrivate({networkInfo:e.networkInfo,privateKeyRaw:c,privateKeyInfo:t})}else n=s.toString("hex"),a=yield r.getAddressFromPublic({networkInfo:e.networkInfo,publicKey:n,publicKeyInfo:t});return i()({publicKey:n,path:o},a)})),function(e){return k.apply(this,arguments)})));return{addresses:x}})),function baseGetAddressesFromHd(e,t){return a.apply(this,arguments)}),g.baseGetCredentialsType=function baseGetCredentialsType({credentials:e}){if(e.hd&&e.imported)throw new c.He("getCredentialsType ERROR: hd and imported credentials can NOT both set.");if(e.hd)return l.ECoreCredentialType.hd;if(e.imported)return l.ECoreCredentialType.imported;throw new c.He("getCredentialsType ERROR: no credentials found")},g.baseGetDefaultPrivateKey=(f=(0,o.A)((function*(e){var t=yield this.getPrivateKeys(e),[r]=Object.values(t);return{privateKeyRaw:r}})),function baseGetDefaultPrivateKey(e){return f.apply(this,arguments)}),g.validateXpub=(h=(0,o.A)((function*(e){throw new c.MS})),function validateXpub(e){return h.apply(this,arguments)}),g.validateXprvt=(y=(0,o.A)((function*(e){throw new c.MS})),function validateXprvt(e){return y.apply(this,arguments)}),(0,s.A)(CoreChainApiBase)}()},896243:(e,t,r)=>{"use strict";r.d(t,{A:()=>O,h:()=>handleSignData});var n=r(586330),i=r(230414),a=r(929296),o=r(195309),s=r(972715),c=r(243878),u=r(775500),d=r(882926),l=r(614555),p=r(146586),f=r(773481),h=r(478261),y=r(443618);const g="benfenprivkey";class Signer{async signWithIntent(e,t){const r=(0,c.ib)(t,e),n=(0,l.S)(r,{dkLen:32});return{signature:(0,u.C)({signature:await this.sign(n),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:(0,h.o)(e)}}async signTransactionBlock(e){return this.signWithIntent(e,c.fn.TransactionData)}async signPersonalMessage(e){return this.signWithIntent(f.jy.vector(f.jy.u8()).serialize(e).toBytes(),c.fn.PersonalMessage)}toHexAddress(){return this.getPublicKey().toHexAddress()}}class Keypair extends Signer{export(){return{schema:this.getKeyScheme(),privateKey:this.getSecretKey()}}}var w=r(887971),b=r(715460);function nfkd(e){if("string"!=typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function normalize(e){const t=nfkd(e),r=t.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:r}}const salt=e=>nfkd(`mnemonic${e}`);var v=r(821944);function isValidHardenedPath(e){return!!new RegExp("^m\\/44'\\/728'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}function mnemonics_mnemonicToSeed(e){return function mnemonicToSeedSync(e,t=""){return(0,w.A)(b.Zf,normalize(e).nfkd,salt(t),{c:2048,dkLen:64})}(e,"")}var A=r(97713);const m=new RegExp("^m(\\/[0-9]+')+$"),replaceDerive=e=>e.replace("'",""),derivePath=(e,t,r=2147483648)=>{if(!(e=>!!m.test(e)&&!e.split("/").slice(1).map(replaceDerive).some(isNaN))(e))throw new Error("Invalid derivation path");const{key:n,chainCode:i}=(e=>{const t=A.w.create(b.Zf,"ed25519 seed").update((0,v.i)(e)).digest();return{key:t.slice(0,32),chainCode:t.slice(32)}})(t);return e.split("/").slice(1).map(replaceDerive).map((e=>parseInt(e,10))).reduce(((e,t)=>(({key:e,chainCode:t},r)=>{const n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);const i=new Uint8Array(1+e.length+n.byteLength);i.set(new Uint8Array(1).fill(0)),i.set(e,1),i.set(new Uint8Array(n,0,n.byteLength),e.length+1);const a=A.w.create(b.Zf,t).update(i).digest();return{key:a.slice(0,32),chainCode:a.slice(32)}})(e,t+r)),{key:n,chainCode:i})};var k=r(322998);const x="m/44'/728'/0'/0'/0'";class Ed25519Keypair extends Keypair{constructor(e){super(),this.keypair=e||d.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new Ed25519Keypair(d.sign.keyPair())}static fromSecretKey(e,t){const r=e.length;if(32!==r)throw new Error(`Wrong secretKey size. Expected 32 bytes, got ${r}.`);const n=d.sign.keyPair.fromSeed(e);if(!t||!t.skipValidation){const e=(new TextEncoder).encode("benfen validation"),t=d.sign.detached(e,n.secretKey);if(!d.sign.detached.verify(e,t,n.publicKey))throw new Error("provided secretKey is invalid")}return new Ed25519Keypair(n)}getPublicKey(){return new k.G(this.keypair.publicKey)}getSecretKey(){return function encodeBenfenPrivateKey(e,t){if(32!==e.length)throw new Error("Invalid bytes length");const r=y.uD[t],n=new Uint8Array(e.length+1);return n.set([r]),n.set(e,1),p.bech32.encode(g,p.bech32.toWords(n))}(this.keypair.secretKey.slice(0,32),this.getKeyScheme())}async sign(e){return this.signData(e)}signData(e){return d.sign.detached(e,this.keypair.secretKey)}static deriveKeypair(e,t){if(null==t&&(t=x),!isValidHardenedPath(t))throw new Error("Invalid derivation path");const{key:r}=derivePath(t,function mnemonicToSeedHex(e){return(0,v.J)(mnemonics_mnemonicToSeed(e))}(e));return Ed25519Keypair.fromSecretKey(r)}static deriveKeypairFromSeed(e,t){if(null==t&&(t=x),!isValidHardenedPath(t))throw new Error("Invalid derivation path");const{key:r}=derivePath(t,e);return Ed25519Keypair.fromSecretKey(r)}}var T=r(327042),I=r(825145),S=r(606777),P=r(424754),C=r(940916),B=r(401349),K=r(404727);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var E="ed25519";function handleSignData(e){return(0,c.ib)(c.fn.TransactionData,e)}var O=function(e){(0,a.A)(CoreChainSoftware,e);var t=_createSuper(CoreChainSoftware);function CoreChainSoftware(){return t.apply(this,arguments)}var r,o,s,c,d,p,f,y=CoreChainSoftware.prototype;return y.getExportedSecretKey=(r=(0,n.A)((function*(e){var{password:t,keyType:r,credentials:n}=e,{privateKeyRaw:i}=yield this.baseGetDefaultPrivateKey(e);if(!i)throw new Error("privateKeyRaw is required");if(r===K.ECoreApiExportedSecretKeyType.privateKey)return`0x${(0,B.Yc)(t,i).toString("hex")}`;throw new Error(`SecretKey type not support: ${r}`)})),function getExportedSecretKey(e){return r.apply(this,arguments)}),y.getPrivateKeys=(o=(0,n.A)((function*(e){return this.baseGetPrivateKeys({payload:e,curve:E})})),function getPrivateKeys(e){return o.apply(this,arguments)}),y.signTransaction=(s=(0,n.A)((function*(e){var{unsignedTx:t,account:{pub:r}}=e,n=yield this.baseGetSingleSigner({payload:e,curve:E});if(!t.rawTxUnsigned)throw new Error("unsignedTx.rawTxUnsigned is undefined");var i=yield n.getPrvkey(),a=Ed25519Keypair.fromSecretKey(i),o=S.A.toBuffer(t.rawTxUnsigned),s=handleSignData(o),c=(0,l.S)(s,{dkLen:32}),d=a.getPublicKey(),p=a.signData(c),f=a.getKeyScheme(),y=(0,u.C)({signature:p,signatureScheme:f,publicKey:d});return{txid:"",rawTx:(0,h.o)(o),signatureScheme:"ed25519",signature:y,publicKey:P.A.addHexPrefix((0,I.wT)(r)),encodedTx:t.encodedTx}})),function signTransaction(e){return s.apply(this,arguments)}),y.signMessage=(c=(0,n.A)((function*(e){var t=e.unsignedMsg,r=yield this.baseGetSingleSigner({payload:e,curve:E}),n=yield r.getPrvkey(),i=Ed25519Keypair.fromSecretKey(n),a=S.A.toBuffer(t.message);return(yield i.signPersonalMessage(a)).signature})),function signMessage(e){return c.apply(this,arguments)}),y.getAddressFromPrivate=(d=(0,n.A)((function*(e){var t,{privateKeyRaw:r}=e;if(P.A.isHexString(r)&&(t=S.A.toBuffer(r,"hex")),!t)throw new Error("Invalid private key");var n=this.baseGetCurve(E).publicFromPrivate(t);return this.getAddressFromPublic({publicKey:S.A.bytesToHex(n),networkInfo:e.networkInfo})})),function getAddressFromPrivate(e){return d.apply(this,arguments)}),y.getAddressFromPublic=(p=(0,n.A)((function*(e){var{publicKey:t}=e,r=new k.G(S.A.toBuffer(t)).toHexAddress(),n=(0,T.$u)(r);return Promise.resolve({address:n,publicKey:t})})),function getAddressFromPublic(e){return p.apply(this,arguments)}),y.getAddressesFromHd=(f=(0,n.A)((function*(e){return this.baseGetAddressesFromHd(e,{curve:E})})),function getAddressesFromHd(e){return f.apply(this,arguments)}),(0,i.A)(CoreChainSoftware)}(C.G)},180556:(e,t,r)=>{"use strict";r.d(t,{Ac:()=>estimateTxSize,Ah:()=>slicePathTemplate,vN:()=>getUtxoAccountPrefixPath,zf:()=>getBIP44Path});var n=r(451661),i=r.n(n),a=r(491180);function slicePathTemplate(e){return a.A.slicePathTemplate(e)}function getUtxoAccountPrefixPath({fullPath:e}){var t=e.split("/");return t.pop(),t.pop(),t.join("/")}function getBIP44Path(e,t){var r="";for(var[n,i]of Object.entries(e.addresses))if(i===t){r=n;break}return`${e.path}/${r}`}function estimateTxSize(e,t){return i().transactionBytes(e,t)}},959341:(e,t,r)=>{"use strict";r.d(t,{L:()=>g});var n=r(503668),i=r.n(n),a=r(586330),o=r(230414),s=r(929296),c=r(195309),u=r(972715),d=r(507140),l=r(296827),p=r(491180),f=r(584186),h=r(746661),y=r(583354);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,u.A)(e);if(t){var i=(0,u.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var g=function(e){(0,s.A)(KeyringBase,e);var t=_createSuper(KeyringBase);function KeyringBase(e){var r;if((r=t.call(this,e.options)).vault=e,r.vault.networkId!==e.options.networkId)throw new Error("KeyringBase ERROR: networkId not match1");if(r.networkId!==e.options.networkId)throw new Error("KeyringBase ERROR: networkId not match2");return r}var r,n,c,u,g,w=KeyringBase.prototype;return w.isKeyringImported=function isKeyringImported(){return this.keyringType===y.U.imported},w.isKeyringHd=function isKeyringHd(){return this.keyringType===y.U.hd},w.isKeyringHardware=function isKeyringHardware(){return this.keyringType===y.U.hardware},w.isKeyringWatching=function isKeyringWatching(){return this.keyringType===y.U.watching},w.basePrepareHdNormalAccounts=(r=(0,a.A)((function*(e,t){var{walletId:r}=this;if(!r)throw new Error("walletId is not defined");var{names:n,deriveInfo:i,indexes:a}=e,{coinType:o,template:s,namePrefix:c,idSuffix:u}=i;if(!o)throw new Error("coinType is not defined");for(var d=yield this.getVaultSettings(),{accountType:l}=d,{buildAddressesInfo:f}=t,y=a,g=yield f({usedIndexes:y}),w=[],b=0;b<g.length;b+=1){var{path:v,publicKey:A,address:m,addresses:k,relPath:x}=g[b];if(!v)throw new Error("KeyringHD prepareAccounts ERROR: path not found");if(l===h.rX.VARIANT&&!k)throw new Error("addresses is required for variant account");if(l===h.rX.VARIANT&&m)throw new Error("address should not set for variant account");var T=y[b],I=n?.[b]||p.A.buildHDAccountName({pathIndex:T,namePrefix:c}),S=p.A.buildHDAccountId({walletId:r,path:v,idSuffix:u}),P=p.A.buildIndexedAccountId({walletId:r,index:T});w.push({id:S,name:I,type:l,path:v,pathIndex:T,relPath:x,indexedAccountId:P,coinType:o,impl:d.impl,pub:A,address:m,addresses:k,template:s})}return w})),function basePrepareHdNormalAccounts(e,t){return r.apply(this,arguments)}),w.basePrepareHdUtxoAccounts=(n=(0,a.A)((function*(e,t){var{walletId:r}=this;if(!r)throw new Error("walletId is undefined");var{indexes:n,deriveInfo:a,names:o,skipCheckAccountExist:s=!0}=e,{coinType:c,template:u,namePrefix:d}=a;if(!c)throw new Error("coinType is not defined");var y=yield this.getVaultSettings(),{accountType:g}=y;if(g!==h.rX.UTXO)throw new Error("accountType is not utxo");var{checkIsAccountUsed:w,buildAddressesInfo:b}=t,v=[...n];l.U.account.accountCreatePerf.utxoBuildAddressesInfo();var A=yield b({usedIndexes:v});l.U.account.accountCreatePerf.utxoBuildAddressesInfoDone(),l.U.account.accountCreatePerf.buildDBUtxoAccounts();var m=[],k=0;for(var{path:x,relPath:T,publicKey:I,xpub:S,xpubSegwit:P,address:C,addresses:B}of A){if(!x||i()(S)||!B)throw new Error("basePrepareHdUtxoAccounts ERROR: path or xpub or addresses is undefined");if(!T)throw new Error("basePrepareHdUtxoAccounts ERROR: relPath is undefined");var K=d,E=v[k],O=o?.[k]||`${K} #${E+1}`,N=`${this.walletId}--${x}`,_=p.A.buildIndexedAccountId({walletId:this.walletId,index:E});m.push({id:N,name:O,type:g,path:x,pathIndex:E,indexedAccountId:_,relPath:T,coinType:c,impl:y.impl,pub:I,xpub:S,xpubSegwit:P,address:C,addresses:B,template:u});var R=k===A.length-1;if(!s&&!R&&w){var{isUsed:H}=yield w({xpub:S,xpubSegwit:P,address:C});if(!H)break;yield f.A.wait(200)}k+=1}return l.U.account.accountCreatePerf.buildDBUtxoAccountsDone(),m})),function basePrepareHdUtxoAccounts(e,t){return n.apply(this,arguments)}),w.batchGetAddresses=(c=(0,a.A)((function*(e){return[]})),function batchGetAddresses(e){return c.apply(this,arguments)}),w.exportAccountSecretKeys=(u=(0,a.A)((function*(e){throw new d.MS})),function exportAccountSecretKeys(e){return u.apply(this,arguments)}),w.buildHwAllNetworkPrepareAccountsParams=(g=(0,a.A)((function*(e){})),function buildHwAllNetworkPrepareAccountsParams(e){return g.apply(this,arguments)}),w.buildPrepareAccountsPrefixedPath=function buildPrepareAccountsPrefixedPath(e){throw new d.MS},(0,o.A)(KeyringBase)}(r(466062).y);!function(e){(0,s.A)(KeyringBaseMock,e);var t=_createSuper(KeyringBaseMock);function KeyringBaseMock(){return t.apply(this,arguments)}(0,o.A)(KeyringBaseMock)}(g)},597194:(e,t,r)=>{"use strict";r.d(t,{g:()=>d});var n=r(586330),i=r(230414),a=r(929296),o=r(195309),s=r(972715),c=r(507140),u=r(583354);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var d=function(e){(0,a.A)(KeyringExternalBase,e);var t=_createSuper(KeyringExternalBase);function KeyringExternalBase(...e){var r;return(r=t.call(this,...e)).keyringType=u.U.external,r}var r,o,s,d=KeyringExternalBase.prototype;return d.baseSignMessageByExternalWallet=(r=(0,n.A)((function*(e){return this.backgroundApi.serviceDappSide.signMessage({account:yield this.vault.getAccount(),networkId:this.networkId,params:e})})),function baseSignMessageByExternalWallet(e){return r.apply(this,arguments)}),d.baseSendTransactionByExternalWallet=(o=(0,n.A)((function*(e){return this.backgroundApi.serviceDappSide.sendTransaction({account:yield this.vault.getAccount(),networkId:this.networkId,params:e})})),function baseSendTransactionByExternalWallet(e){return o.apply(this,arguments)}),d.prepareAccounts=function prepareAccounts(e){throw new c.He("prepareAccounts is not supported for external accounts, use serviceAccount directly")},d.basePrepareExternalAccounts=(s=(0,n.A)((function*(e){return[]})),function basePrepareExternalAccounts(e){return s.apply(this,arguments)}),(0,i.A)(KeyringExternalBase)}(r(959341).L)},64238:(e,t,r)=>{"use strict";r.d(t,{V:()=>g});var n=r(586330),i=r(230414),a=r(929296),o=r(195309),s=r(972715),c=r(180556),u=r(688815),d=r(507140),l=r(514527),p=r(272615),f=r(296827),h=r(100645),y=r(583354);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var g=function(e){(0,a.A)(KeyringHardwareBase,e);var t=_createSuper(KeyringHardwareBase);function KeyringHardwareBase(...e){var r;return(r=t.call(this,...e)).keyringType=y.U.hardware,r}var r,o,s,g,w,b=KeyringHardwareBase.prototype;return b.getHardwareSDKInstance=(r=(0,n.A)((function*(){var e;f.U.account.accountCreatePerf.getHardwareSDKInstance();var t=null!=(e=yield u.A?.$backgroundApiProxy?.backgroundApi?.serviceHardware?.getSDKInstance?.())?e:p.Hk;return f.U.account.accountCreatePerf.getHardwareSDKInstanceDone(),t})),function getHardwareSDKInstance(){return r.apply(this,arguments)}),b.baseGetDeviceAccountData=(o=(0,n.A)((function*({params:e,usedIndexes:t,sdkGetDataFn:r,errorMessage:i}){var{deriveInfo:a,deviceParams:o}=e,{dbDevice:s,confirmOnDevice:u}=o,{connectId:p,deviceId:f}=s,{template:y,coinName:g}=a,{pathPrefix:w,pathSuffix:b}=(0,c.Ah)(y),showOnOnekeyFn=function(e){return u===h.hz.EveryItem||u===h.hz.LastItem&&e===t[t.length-1]},v=yield(0,l.bL)((0,n.A)((function*(){return r({connectId:p,deviceId:f,pathPrefix:w,pathSuffix:b,template:y,coinName:g,showOnOnekeyFn})})));if(!v||v.length!==t.length)throw new d.He(i);return v})),function baseGetDeviceAccountData(e){return o.apply(this,arguments)}),b.baseGetDeviceAccountPublicKeys=(s=(0,n.A)((function*({params:e,usedIndexes:t,sdkGetPublicKeysFn:r}){return this.baseGetDeviceAccountData({params:e,usedIndexes:t,sdkGetDataFn:r,errorMessage:"Unable to get public keys."})})),function baseGetDeviceAccountPublicKeys(e){return s.apply(this,arguments)}),b.baseGetDeviceAccountAddresses=(g=(0,n.A)((function*({params:e,usedIndexes:t,sdkGetAddressFn:r}){return this.baseGetDeviceAccountData({params:e,usedIndexes:t,sdkGetDataFn:r,errorMessage:"Unable to get addresses."})})),function baseGetDeviceAccountAddresses(e){return g.apply(this,arguments)}),b.getAllNetworkPrepareAccounts=(w=(0,n.A)((function*({hwSdkNetwork:e,params:t,usedIndexes:r,buildPath:n,buildResultAccount:i}){if(e){var{hwAllNetworkPrepareAccountsResponse:a}=t;if(a?.length){var o=[],_loop=function*(){var t=yield n({index:s}),r=a?.find((function(r){return r.network&&r.path===t&&r.network===e}));r&&r.success&&o.push(i({account:r,index:s}))};for(var s of r)yield*_loop();if(o.length===r.length)return{success:!0,payload:o};var c=a?.find((function(e){return!e.success&&!!e.payload?.error}));if(!c?.success&&c?.payload?.error){if(-1!==c?.payload?.error?.indexOf("Failure_DataError,Forbidden key path"))throw new d.OZ;throw(0,l.MP)(c.payload)}throw new d.He("SDK GetAllNetworkAccounts Failed")}}})),function getAllNetworkPrepareAccounts(e){return w.apply(this,arguments)}),(0,i.A)(KeyringHardwareBase)}(r(959341).L)},129441:(e,t,r)=>{"use strict";r.d(t,{R:()=>c});var n=r(230414),i=r(929296),a=r(195309),o=r(972715),s=r(583354);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,o.A)(e);if(t){var i=(0,o.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,a.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var c=function(e){(0,i.A)(KeyringHdBase,e);var t=_createSuper(KeyringHdBase);function KeyringHdBase(...e){var r;return(r=t.call(this,...e)).keyringType=s.U.hd,r}return(0,n.A)(KeyringHdBase)}(r(448648).w)},275061:(e,t,r)=>{"use strict";r.d(t,{V:()=>c});var n=r(230414),i=r(929296),a=r(195309),o=r(972715),s=r(583354);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,o.A)(e);if(t){var i=(0,o.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,a.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var c=function(e){(0,i.A)(KeyringImportedBase,e);var t=_createSuper(KeyringImportedBase);function KeyringImportedBase(...e){var r;return(r=t.call(this,...e)).keyringType=s.U.imported,r}return(0,n.A)(KeyringImportedBase)}(r(448648).w)},448648:(e,t,r)=>{"use strict";r.d(t,{w:()=>b});var n=r(324586),i=r(503668),a=r.n(i),o=r(586330),s=r(230414),c=r(929296),u=r(195309),d=r(972715),l=r(401349),p=r(507140),f=r(296827),h=r(491180),y=r(825145),g=r(482407),w=r(150673);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,d.A)(e);if(t){var i=(0,d.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var b=function(e){(0,c.A)(KeyringSoftwareBase,e);var t=_createSuper(KeyringSoftwareBase);function KeyringSoftwareBase(){return t.apply(this,arguments)}var r,n,i,u,d,b,v,A,m,k,x,T=KeyringSoftwareBase.prototype;return T.baseGetCredentialsInfo=(r=(0,o.A)((function*({password:e}){var t,r;return(0,g.Gb)(e),this.isKeyringHd()&&(t=(yield w.A.getCredential((0,y.wT)(this.walletId))).credential),this.isKeyringImported()&&(r=(yield w.A.getCredential(this.accountId)).credential),{hd:t,imported:r}})),function baseGetCredentialsInfo(e){return r.apply(this,arguments)}),T.baseSignTransactionBtc=(n=(0,o.A)((function*(e){if(!this.coreApi)throw new Error("coreApi is not defined");var t=this.vault,{password:r,unsignedTx:n,signOnly:i}=e,a=yield this.baseGetCredentialsInfo(e),o=yield this.getCoreApiNetworkInfo(),{account:s,btcExtraInfo:c,relPaths:u}=yield t.prepareBtcSignExtraInfo({unsignedTx:n});return yield this.coreApi.signTransaction({networkInfo:o,unsignedTx:n,account:s,relPaths:u,password:r,credentials:a,btcExtraInfo:c,signOnly:i})})),function baseSignTransactionBtc(e){return n.apply(this,arguments)}),T.baseSignTransaction=(i=(0,o.A)((function*(e){if(!this.coreApi)throw new Error("coreApi is not defined");var{password:t,unsignedTx:r}=e,n=yield this.vault.getAccount(),i=yield this.baseGetCredentialsInfo(e),a=yield this.getCoreApiNetworkInfo();return yield this.coreApi.signTransaction({networkInfo:a,password:t,account:n,credentials:i,unsignedTx:r})})),function baseSignTransaction(e){return i.apply(this,arguments)}),T.baseSignMessage=(u=(0,o.A)((function*(e){var t=this;if(!this.coreApi)throw new Error("coreApi is not defined");var{password:r,messages:n}=e,i=yield this.vault.getAccount(),a=yield this.baseGetCredentialsInfo(e),o=yield this.getCoreApiNetworkInfo();return yield Promise.all(n.map((function(e){return(0,y.wT)(t.coreApi).signMessage({networkInfo:o,unsignedMsg:e,account:i,password:r,credentials:a})})))})),function baseSignMessage(e){return u.apply(this,arguments)}),T.baseSignMessageBtc=(d=(0,o.A)((function*(e){var t=this;if(!this.coreApi)throw new Error("coreApi is not defined");var r,n=this.vault,{password:i,messages:a}=e,s=yield this.baseGetCredentialsInfo(e),c=yield this.getCoreApiNetworkInfo(),u=yield Promise.all(a.map((r=(0,o.A)((function*(e){var{account:r,btcExtraInfo:a,relPaths:o}=yield n.prepareBtcSignExtraInfo({unsignedMessage:e});return(0,y.wT)(t.coreApi).signMessage({networkInfo:c,unsignedMsg:e,account:r,relPaths:o,password:i,credentials:s,btcExtraInfo:a})})),function(e){return r.apply(this,arguments)})));return u})),function baseSignMessageBtc(e){return d.apply(this,arguments)}),T.basePrepareAccountsImported=(b=(0,o.A)((function*(e,t={}){if(!this.coreApi)throw new Error("coreApi is not defined");var{name:r,importedCredential:n,password:i,networks:a,createAtNetwork:o}=e,{privateKey:s}=(0,l.VV)({credential:n,password:i}),c=yield this.getVaultSettings(),{onlyAvailableOnCertainNetworks:u}=t,d=t.accountType||c.accountType,p=t.impl||c.impl,f=t.coinType||e.deriveInfo?.coinType||c.coinTypeDefault,y=yield this.getCoreApiNetworkInfo(),g=s,{address:w,addresses:b,publicKey:v}=yield this.coreApi.getAddressFromPrivate({networkInfo:y,privateKeyRaw:g,addressEncoding:e.deriveInfo?.addressEncoding}),A="";if(u&&!(A=b?.[o]||""))throw new Error(`imported account address is empty of network: ${o}`);var m=h.A.buildImportedAccountId({coinType:f,pub:v,address:A,addressEncoding:e.deriveInfo?.addressEncoding});return Promise.resolve([{id:m,name:r||"",type:d,path:"",coinType:f,impl:p,networks:u?a:void 0,createAtNetwork:o,pub:v,address:w,addresses:b}])})),function basePrepareAccountsImported(e){return b.apply(this,arguments)}),T.basePrepareAccountsImportedUtxo=(v=(0,o.A)((function*(e){if(!this.coreApi)throw new Error("coreApi is not defined");var{name:t,importedCredential:r,password:n,createAtNetwork:i,deriveInfo:o}=e,{privateKey:s}=(0,l.VV)({credential:r,password:n}),c=o?.addressEncoding,u=yield this.getVaultSettings(),{coinTypeDefault:d,accountType:p}=u,f=yield this.getCoreApiNetworkInfo(),y=s,{address:g,addresses:w,publicKey:b,xpub:v,relPath:A,xpubSegwit:m,path:k}=yield this.coreApi.getAddressFromPrivate({networkInfo:f,privateKeyRaw:y,addressEncoding:c});if(a()(v)||!w)throw new Error("xpub or addresses is undefined");var x=h.A.buildImportedAccountId({coinType:d,xpub:v||b,addressEncoding:c});return Promise.resolve([{id:x,name:t||"",type:p,path:k||"",relPath:A,coinType:d,impl:u.impl,xpub:v,xpubSegwit:m,pub:b,address:g,addresses:w,createAtNetwork:i}])})),function basePrepareAccountsImportedUtxo(e){return v.apply(this,arguments)}),T.basePrepareAccountsHd=(A=(0,o.A)((function*(e){var t,r=this,{template:n,addressEncoding:i}=e.deriveInfo,{password:a}=e,s=yield this.getCoreApiNetworkInfo();return this.basePrepareHdNormalAccounts(e,{buildAddressesInfo:(t=(0,o.A)((function*({usedIndexes:e}){if(!r.coreApi)throw new Error("coreApi is not defined");var t=yield r.baseGetCredentialsInfo({password:a}),{addresses:o}=yield r.coreApi.getAddressesFromHd({networkInfo:s,template:n,hdCredential:(0,y.wT)(t.hd),password:a,indexes:e,addressEncoding:i});return o})),function buildAddressesInfo(e){return t.apply(this,arguments)})})})),function basePrepareAccountsHd(e){return A.apply(this,arguments)}),T.basePrepareAccountsHdUtxo=(m=(0,o.A)((function*(e,t){var r,n=this,{password:i,indexes:a,deriveInfo:s,names:c,skipCheckAccountExist:u}=e,d=e?.deriveInfo?.addressEncoding;return this.basePrepareHdUtxoAccounts(e,_objectSpread(_objectSpread({},t),{},{buildAddressesInfo:(r=(0,o.A)((function*({usedIndexes:e}){var{coinType:t,template:r,namePrefix:a}=s;f.U.account.accountCreatePerf.getCredentialsInfo();var o=yield n.baseGetCredentialsInfo({password:i});if(!n.coreApi)throw new Error("coreApi is undefined");f.U.account.accountCreatePerf.getAddressesFromHd();var{addresses:c}=yield n.coreApi.getAddressesFromHd({networkInfo:yield n.getCoreApiNetworkInfo(),template:r,hdCredential:(0,y.wT)(o.hd),password:i,indexes:e,addressEncoding:d});if(c.length!==e.length)throw new p.He("Unable to get address");return f.U.account.accountCreatePerf.getAddressesFromHdDone(),c})),function buildAddressesInfo(e){return r.apply(this,arguments)})}))})),function basePrepareAccountsHdUtxo(e,t){return m.apply(this,arguments)}),T.baseExportAccountSecretKeys=(k=(0,o.A)((function*(e){var{password:t,keyType:r,relPaths:n}=e,i=yield this.vault.getAccount(),a=yield this.getCoreApiNetworkInfo(),o=yield this.baseGetCredentialsInfo({password:t}),{deriveInfo:s}=yield this.backgroundApi.serviceNetwork.getDeriveTypeByTemplate({networkId:this.networkId,template:i.template}),c=s?.addressEncoding;if(!this.coreApi)throw new Error("coreApi is not defined");return this.coreApi.getExportedSecretKey({networkInfo:a,password:t,credentials:o,account:i,relPaths:n,keyType:r,addressEncoding:c})})),function baseExportAccountSecretKeys(e){return k.apply(this,arguments)}),T.baseGetPrivateKeys=(x=(0,o.A)((function*(e){var{password:t,relPaths:r}=e;if(!this.coreApi)throw new Error("coreApi is not defined");var n=yield this.vault.getAccount(),i=yield this.baseGetCredentialsInfo({password:t}),a=yield this.getCoreApiNetworkInfo();return yield this.coreApi.getPrivateKeys({networkInfo:a,password:t,account:n,relPaths:r,credentials:i})})),function baseGetPrivateKeys(e){return x.apply(this,arguments)}),(0,s.A)(KeyringSoftwareBase)}(r(959341).L)},7440:(e,t,r)=>{"use strict";r.d(t,{w:()=>y});var n=r(586330),i=r(230414),a=r(929296),o=r(195309),s=r(972715),c=r(507140),u=r(334439),d=r(849726),l=r(491180),p=r(825145),f=r(746661),h=r(583354);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var y=function(e){(0,a.A)(KeyringWatchingBase,e);var t=_createSuper(KeyringWatchingBase);function KeyringWatchingBase(...e){var r;return(r=t.call(this,...e)).keyringType=h.U.watching,r}var r,o,s,y,g=KeyringWatchingBase.prototype;return g.signTransaction=(r=(0,n.A)((function*(){throw new c.He(d.a.intl.formatMessage({id:u.ETranslations.wallet_error_trade_with_watched_acocunt}))})),function signTransaction(){return r.apply(this,arguments)}),g.signMessage=(o=(0,n.A)((function*(){throw new c.He(d.a.intl.formatMessage({id:u.ETranslations.wallet_error_trade_with_watched_acocunt}))})),function signMessage(){return o.apply(this,arguments)}),g.basePrepareUtxoWatchingAccounts=(s=(0,n.A)((function*(e){var{address:t,xpub:r,networks:n,createAtNetwork:i,name:a,deriveInfo:o,isUrlAccount:s,addresses:c}=e;if(!t&&!r)throw new Error("basePrepareUtxoWatchingAccounts ERROR: address and xpub are not defined");var u=yield this.getCoreApiNetworkInfo(),d=yield this.getVaultSettings(),h=d.coinTypeDefault,y=o?.addressEncoding,g=l.A.buildWatchingAccountId({coinType:h,address:t,xpub:r,addressEncoding:y,isUrlAccount:s}),w="",b=r;if(!t&&r){(0,p.wT)(this.coreApi);var v=yield this.coreApi?.getAddressFromPublic({publicKey:r,addressEncoding:y,networkInfo:u});w=v?.address||"",b=v?.xpubSegwit||b||r}return[{id:g,name:a,type:f.rX.UTXO,relPath:"0/0",coinType:h,impl:d.impl,networks:n,createAtNetwork:i,address:w||t||"",xpub:r||"",xpubSegwit:b,path:"",addresses:c||{}}]})),function basePrepareUtxoWatchingAccounts(e){return s.apply(this,arguments)}),g.basePrepareSimpleWatchingAccounts=(y=(0,n.A)((function*(e,t={}){var{address:r,name:n,networks:i,createAtNetwork:a,isUrlAccount:o}=e;if(!r)throw new c.q4;if(!a)throw new Error("basePrepareSimpleWatchingAccounts ERROR: createAtNetwork is not defined");var{onlyAvailableOnCertainNetworks:s=!1}=t,u=yield this.getVaultSettings(),d=t.coinType||u.coinTypeDefault,p=t.impl||u.impl,h={id:l.A.buildWatchingAccountId({coinType:d,address:r,isUrlAccount:o}),name:n||"",type:f.rX.SIMPLE,coinType:d,impl:p,networks:s?i:void 0,createAtNetwork:a,address:r,pub:"",path:""};return Promise.resolve([h])})),function basePrepareSimpleWatchingAccounts(e){return y.apply(this,arguments)}),(0,i.A)(KeyringWatchingBase)}(r(959341).L)},34344:(e,t,r)=>{"use strict";r.d(t,{S:()=>j});var n=r(839850),i=r(638403),a=r.n(i),o=r(603514),s=r.n(o),c=r(503668),u=r.n(c),d=r(324586),l=r(3326),p=r.n(l),f=r(586330),h=r(230414),y=r(929296),g=r(195309),w=r(972715),b=r(333215),v=r(27103),A=r(241440),m=r(401349),k=r(625931),x=r(507140),T=r(663522),I=r(491180),S=r(983517),P=r(424754),C=r(469365),B=r(482407),K=r(914257),E=r(796151),O=r(884894),N=r(369387),_=r(232471),R=r(466062),H=["accountId"],D=["accountId"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,d.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,w.A)(e);if(t){var i=(0,w.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,g.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}if(T.Ay.isExtensionUi)throw new Error("engine/VaultBase is not allowed imported from ui");var j=function(e){(0,y.A)(VaultBase,e);var t=_createSuper(VaultBase);function VaultBase(...e){var r;return(r=t.call(this,...e)).uuid=(0,B.lk)(),r.mutexBuildOnChainHistoryTxGetDBAccount=new v.jf(1),r}var r,i,o,c,d,l,g,w,m,T,P,E,R,j,F,M,U,W,V,L,G,q,z,$,Z,X,J,Y,Q,ee,te,re,ne,ie,ae,oe,se,ce,ue,de,le,pe,fe,he,ye=VaultBase.prototype;return ye.init=(r=(0,f.A)((function*(e){yield this.initKeyring(e)})),function init(e){return r.apply(this,arguments)}),ye.initKeyring=(i=(0,f.A)((function*(e){this.options.isChainOnly||(this.keyring=yield e.keyringCreator(this))})),function initKeyring(e){return i.apply(this,arguments)}),ye.broadcastTransaction=(o=(0,f.A)((function*(e){var{signedTx:t}=e,r=yield this.backgroundApi.serviceSend.broadcastTransaction(e);return _objectSpread(_objectSpread({},t),{},{txid:r,encodedTx:t.encodedTx})})),function broadcastTransaction(e){return o.apply(this,arguments)}),ye.broadcastTransactionFromCustomRpc=(c=(0,f.A)((function*(e){throw new x.MS})),function broadcastTransactionFromCustomRpc(e){return c.apply(this,arguments)}),ye.validateSendAmount=(d=(0,f.A)((function*(e){return Promise.resolve(!0)})),function validateSendAmount(e){return d.apply(this,arguments)}),ye.buildOnChainHistoryTxExtraInfo=(l=(0,f.A)((function*({onChainHistoryTx:e}){return null})),function buildOnChainHistoryTxExtraInfo(e){return l.apply(this,arguments)}),ye.precheckUnsignedTx=(g=(0,f.A)((function*(e){return Promise.resolve(!0)})),function precheckUnsignedTx(e){return g.apply(this,arguments)}),ye.buildEstimateFeeParams=(w=(0,f.A)((function*({encodedTx:e}){return Promise.resolve({encodedTx:e})})),function buildEstimateFeeParams(e){return w.apply(this,arguments)}),ye.buildParseTransactionParams=(m=(0,f.A)((function*({encodedTx:e}){return Promise.resolve({encodedTx:e})})),function buildParseTransactionParams(e){return m.apply(this,arguments)}),ye.buildFetchHistoryListParams=(T=(0,f.A)((function*(e){return Promise.resolve({})})),function buildFetchHistoryListParams(e){return T.apply(this,arguments)}),ye.buildHistoryTx=(P=(0,f.A)((function*(e){var{historyTxToMerge:t,decodedTx:r,signedTx:n,isSigner:i,isLocalCreated:a,dbAccount:o}=e,s=e.accountAddress||"",c=e.xpub,u=n?.txid||r?.txid||"";if(!u)throw new Error("buildHistoryTx txid not found");var{accountId:d,networkId:l}=r;try{var[p,f]=yield Promise.all([this.backgroundApi.serviceAccount.getAccountAddressForApi({dbAccount:o,accountId:d,networkId:l}),this.backgroundApi.serviceAccount.getAccountXpub({dbAccount:o,accountId:d,networkId:l})]);s=p,c=f}catch(e){}r.txid=u||r.txid,r.owner=s,r.xpub=c,i&&(r.signer=s);var h=_objectSpread(_objectSpread({id:I.A.buildLocalHistoryId({networkId:l,txid:u,accountAddress:s,xpub:c}),isLocalCreated:Boolean(a)},t),{},{decodedTx:r});return Promise.resolve(h)})),function buildHistoryTx(e){return P.apply(this,arguments)}),ye.fixOnChainHistoryAccountData=function fixOnChainHistoryAccountData(e){var{accountId:t,networkId:r,accountAddress:n,xpub:i,onChainHistoryTx:a,allNetworkHistoryExtraItems:o}=e,s=t,c=r,d=n,l=i;if(r===(0,k.V)().onekeyall){var p=o?.find((function(e){var[t,r]=a.key.split("_");return u()(e.accountXpub)?e.networkId===a.networkId:e.networkId===a.networkId&&e.accountXpub===r}));p&&(s=p.accountId,c=p.networkId,d=p.accountAddress,l=p.accountXpub)}return{accountId:s,networkId:c,accountAddress:d,xpub:l}},ye.buildOnChainHistoryTx=(E=(0,f.A)((function*(e){var t=this,{onChainHistoryTx:r,tokens:n,nfts:i,allNetworkHistoryExtraItems:a,dbAccountCache:o}=e,{accountId:s,networkId:c,accountAddress:u,xpub:d}=this.fixOnChainHistoryAccountData({accountId:e.accountId,networkId:e.networkId,accountAddress:e.accountAddress,xpub:e.xpub,onChainHistoryTx:r,allNetworkHistoryExtraItems:a});e.accountId;var l,p=`${s}`;o&&(yield this.mutexBuildOnChainHistoryTxGetDBAccount.runExclusive((0,f.A)((function*(){l=o?.[p],l||(l=yield t.backgroundApi.serviceAccount.getDBAccountSafe({accountId:s}))&&(o[p]=l)}))));var h=yield this.backgroundApi.serviceNetwork.getVaultSettings({networkId:c});try{var y=yield this.buildHistoryTxAction({tx:r,tokens:n,nfts:i}),g={txid:r.tx,owner:u,signer:r.from,to:r.to,nonce:r.nonce,actions:[y],status:(0,C.RJ)(r.status),networkId:c,accountId:s,xpub:d,totalFeeInNative:r.gasFee,totalFeeFiatValue:r.gasFeeFiatValue,nativeAmount:h.isUtxo?r.value:void 0,extraInfo:yield this.buildOnChainHistoryTxExtraInfo({onChainHistoryTx:r}),payload:{type:r.type,value:r.value,label:r.label}};return g.updatedAt=new Date(1e3*r.timestamp).getTime(),g.createdAt=g.updatedAt,g.isFinal=!0,yield this.buildHistoryTx({dbAccount:l,decodedTx:g,accountAddress:u,xpub:d})}catch(e){return null}})),function buildOnChainHistoryTx(e){return E.apply(this,arguments)}),ye.buildHistoryTxAction=(R=(0,f.A)((function*({tx:e,tokens:t,nfts:r}){return e.type===N.mz.Approve&&e.tokenApprove?this.buildHistoryTxApproveAction({tx:e,tokens:t,nfts:r,tokenApprove:e.tokenApprove}):s()(e.sends)&&s()(e.receives)?e.type?this.buildHistoryTxFunctionCallAction({tx:e}):this.buildHistoryTxUnknownAction({tx:e}):this.buildHistoryTransferAction({tx:e,tokens:t,nfts:r})})),function buildHistoryTxAction(e){return R.apply(this,arguments)}),ye.buildHistoryTxFunctionCallAction=(j=(0,f.A)((function*({tx:e}){return yield this.getNetwork(),{type:_.kF.FUNCTION_CALL,functionCall:{from:e.from,to:e.to,functionName:e.label,functionHash:e.functionCode,args:e.params}}})),function buildHistoryTxFunctionCallAction(e){return j.apply(this,arguments)}),ye.buildHistoryTxUnknownAction=(F=(0,f.A)((function*({tx:e}){return yield this.getNetwork(),{type:_.kF.UNKNOWN,unknownAction:{from:e.from,to:e.to,label:e.label}}})),function buildHistoryTxUnknownAction(e){return F.apply(this,arguments)}),ye.buildHistoryTransferAction=(M=(0,f.A)((function*({tx:e,tokens:t,nfts:r}){var n=this;return{type:_.kF.ASSET_TRANSFER,assetTransfer:{from:e.from,to:e.to,label:e.label,sends:e.sends.map((function(e){return n.buildHistoryTransfer({transfer:e,tokens:t,nfts:r})})),receives:e.receives.map((function(e){return n.buildHistoryTransfer({transfer:e,tokens:t,nfts:r})}))}}})),function buildHistoryTransferAction(e){return M.apply(this,arguments)}),ye.buildHistoryTransfer=function buildHistoryTransfer({transfer:e,tokens:t,nfts:r}){var{icon:n,symbol:i,name:a,isNFT:o,isNative:s,price:c}=(0,C.vS)({key:e.key,tokenAddress:e.token,tokens:t,nfts:r});return{from:e.from,to:e.to,tokenIdOnNetwork:e.token,amount:e.amount,label:e.label,isOwn:e.isOwn,icon:n,name:a,symbol:i,isNFT:o,isNative:s,price:c}},ye.buildHistoryTxApproveAction=function buildHistoryTxApproveAction({tx:e,tokens:t,nfts:r,tokenApprove:n}){var{icon:i,symbol:a,name:o,decimals:s}=(0,C.vS)({key:n.key,tokenAddress:n.token,tokens:t,nfts:r});return{type:_.kF.TOKEN_APPROVE,tokenApprove:{from:e.from,to:e.to,spender:n.spender,icon:i,name:o,symbol:a,decimals:s,label:e.label,tokenIdOnNetwork:n.token,amount:new A.A(n.amount).shiftedBy(-s).toFixed(),isInfiniteAmount:n.isInfiniteAmount}}},ye.buildTxTransferAssetAction=(U=(0,f.A)((function*(e){var{from:t,to:r,transfers:n,data:i,application:a,isInternalSwap:o,isInternalStaking:s,internalStakingLabel:c,swapReceivedAddress:u,swapReceivedNetworkId:d}=e,[l,p]=yield Promise.all([this.getAccountAddress(),this.getNetwork()]),f=new A.A(0),h={from:t,to:r,sends:[],receives:[],application:a,isInternalSwap:o,isInternalStaking:s,internalStakingLabel:c,swapReceivedAddress:u,swapReceivedNetworkId:d};return n.forEach((function(e){(0,K.SF)({from:e.from,to:e.to,accountAddress:l})===_.z.OUT?(h.sends.push(e),e.isNative&&(f=f.plus(new A.A(e.amount)))):h.receives.push(e)})),h.nativeAmount=f.toFixed(),h.nativeAmountValue=S.A.convertAmountToChainValue({value:f,network:p}),{type:_.kF.ASSET_TRANSFER,data:i,assetTransfer:h}})),function buildTxTransferAssetAction(e){return U.apply(this,arguments)}),ye.buildInternalSwapAction=(W=(0,f.A)((function*(e){var t,r,n,i,a,{swapData:o,swapInfo:s,swapToAddress:c}=e,u=s.sender.token,d=s.receiver.token,l=s.swapBuildResData.result.info,p=s.swapBuildResData.result.fee?.otherFeeInfos,f=[],h=[{from:s.accountAddress,to:"",tokenIdOnNetwork:u.contractAddress,icon:null!=(t=u.logoURI)?t:"",name:null!=(r=u.name)?r:"",symbol:u.symbol,amount:s.sender.amount,isNFT:!1,isNative:u.isNative,networkId:s.sender.accountInfo.networkId},{from:"",to:s.receivingAddress,tokenIdOnNetwork:d.contractAddress,icon:null!=(n=d.logoURI)?n:"",name:null!=(i=d.name)?i:"",symbol:d.symbol,amount:s.receiver.amount,isNFT:!1,isNative:d.isNative,networkId:s.receiver.accountInfo.networkId}];return p&&p.forEach((function(e){var t,r;e.token.contractAddress===h[0].tokenIdOnNetwork?h[0].amount=new A.A(h[0].amount).plus(e.amount).toFixed():f.push({from:s.accountAddress,to:"",tokenIdOnNetwork:e.token.contractAddress,icon:null!=(t=e.token.logoURI)?t:"",name:null!=(r=e.token.name)?r:"",symbol:e.token.symbol,amount:e.amount,isNFT:!1,isNative:e.token.isNative,networkId:s.sender.accountInfo.networkId})})),h=[...f,...h],yield this.buildTxTransferAssetAction({from:s.accountAddress,to:null!=c?c:"",data:o,application:{name:l.providerName,icon:null!=(a=l.providerLogo)?a:""},isInternalSwap:!0,swapReceivedAddress:s.receivingAddress,swapReceivedNetworkId:s.receiver.token.networkId,transfers:h})})),function buildInternalSwapAction(e){return W.apply(this,arguments)}),ye.buildInternalStakingAction=(V=(0,f.A)((function*(e){var t,r,n,i,{stakingInfo:a,stakingData:o,accountAddress:s,stakingToAddress:c}=e,{protocol:u,protocolLogoURI:d,send:l,receive:p}=a,f=[l&&{from:s,to:"",tokenIdOnNetwork:l.token.address,icon:null!=(t=l.token.logoURI)?t:"",name:null!=(r=l.token.name)?r:"",symbol:l.token.symbol,amount:l.amount,isNFT:!1,isNative:l.token.isNative},p&&{from:"",to:s,tokenIdOnNetwork:p.token.address,icon:null!=(n=p.token.logoURI)?n:"",name:null!=(i=p.token.name)?i:"",symbol:p.token.symbol,amount:p.amount,isNFT:!1,isNative:p.token.isNative}].filter(Boolean);return yield this.buildTxTransferAssetAction({from:s,to:null!=c?c:"",data:o,application:{name:u,icon:null!=d?d:""},isInternalStaking:!0,internalStakingLabel:(0,K.eM)({stakingInfo:a}),transfers:f})})),function buildInternalStakingAction(e){return V.apply(this,arguments)}),ye.signTransaction=(L=(0,f.A)((function*(e){var t,r,{unsignedTx:n}=e;e.signOnly=null==(t=e.signOnly)||t;var i=yield this.keyring.signTransaction(e);return _objectSpread(_objectSpread({},i),{},{encodedTx:null!=(r=i.encodedTx)?r:n.encodedTx})})),function signTransaction(e){return L.apply(this,arguments)}),ye.getAccount=(G=(0,f.A)((function*({dbAccount:e}={}){var t=e;if(t&&t?.id===this.accountId||(t=yield this.backgroundApi.serviceAccount.getDBAccount({accountId:this.accountId})),!I.A.isAccountCompatibleWithNetwork({account:t,networkId:this.networkId}))throw new Error(`account impl not matched to network: ${this.networkId} ${t.id?.slice(0,30)}`);var r=yield this.getNetworkInfo(),n=t,i="";if(n.connectedAddresses){var buildExternalAccountAddress=function({key:e,fallbackIndex:t}){var r;if(!e)return"";var i=null!=(r=n.selectedAddress?.[e])?r:t,a=n.connectedAddresses?.[e]?.split(",").filter(Boolean)||[];return a?.[i]||a?.[t]||""};(i=buildExternalAccountAddress({key:this.networkId,fallbackIndex:-1}))||(i=buildExternalAccountAddress({key:yield this.getNetworkImpl(),fallbackIndex:0})),i||(i=buildExternalAccountAddress({key:this.networkId,fallbackIndex:0}))}var a=yield this.buildAccountAddressDetail({networkInfo:r,account:t,networkId:this.networkId,externalAccountAddress:i}),o=a?.address||"";if(!o&&!a.allowEmptyAddress||!a.isValid)throw new Error("VaultBase.getAccount ERROR: address is invalid");return _objectSpread(_objectSpread({},t),{},{addressDetail:a,address:o})})),function getAccount(){return G.apply(this,arguments)}),ye.getAccountAddress=(q=(0,f.A)((function*(){return(yield this.getAccount()).address})),function getAccountAddress(){return q.apply(this,arguments)}),ye.getAccountPath=(z=(0,f.A)((function*(){return(yield this.getAccount()).path})),function getAccountPath(){return z.apply(this,arguments)}),ye.getAccountXpub=($=(0,f.A)((function*({dbAccount:e}={}){var t=yield this.getAccount({dbAccount:e});return this.getXpubFromAccount(t)})),function getAccountXpub(){return $.apply(this,arguments)}),ye.fillTokensDetails=(Z=(0,f.A)((function*({tokensDetails:e}){return Promise.resolve(e)})),function fillTokensDetails(e){return Z.apply(this,arguments)}),ye.fillAccountDetails=(X=(0,f.A)((function*({accountDetails:e}){return Promise.resolve(e)})),function fillAccountDetails(e){return X.apply(this,arguments)}),ye.isEarliestLocalPendingTx=(J=(0,f.A)((function*({encodedTx:e}){return!0})),function isEarliestLocalPendingTx(e){return J.apply(this,arguments)}),ye.buildReplaceEncodedTx=(Y=(0,f.A)((function*({decodedTx:e,replaceType:t}){return Promise.resolve(e.encodedTx)})),function buildReplaceEncodedTx(e){return Y.apply(this,arguments)}),ye.attachFeeInfoToDAppEncodedTx=(Q=(0,f.A)((function*(e){return Promise.resolve(e.encodedTx)})),function attachFeeInfoToDAppEncodedTx(e){return Q.apply(this,arguments)}),ye.activateToken=(ee=(0,f.A)((function*(e){throw new x.MS})),function activateToken(e){return ee.apply(this,arguments)}),ye.getAddressType=(te=(0,f.A)((function*({address:e}){return Promise.resolve({})})),function getAddressType(e){return te.apply(this,arguments)}),ye.buildStakeEncodedTx=function buildStakeEncodedTx(e){return Promise.resolve(e)},ye.fetchAccountDetails=(re=(0,f.A)((function*(e){return(yield this.backgroundApi.serviceNetwork.isCustomNetwork({networkId:this.networkId}))?this.fetchAccountDetailsByRpc(e):this.fetchAccountDetailsByApi(e)})),function fetchAccountDetails(e){return re.apply(this,arguments)}),ye.fetchAccountDetailsByApi=(ne=(0,f.A)((function*(e){var t=_objectSpread({},p()(e,["accountId","signal"])),r=yield this.backgroundApi.serviceAccountProfile.getClient(O.D.Wallet);return yield r.get(`/wallet/v1/account/get-account?${b.stringify(a()(t,u()))}`,{headers:yield this.backgroundApi.serviceAccountProfile._getWalletTypeHeader({accountId:e.accountId}),signal:e.signal})})),function fetchAccountDetailsByApi(e){return ne.apply(this,arguments)}),ye.fetchAccountDetailsByRpc=(ie=(0,f.A)((function*(e){throw new x.MS})),function fetchAccountDetailsByRpc(e){return ie.apply(this,arguments)}),ye.fetchTokenList=(ae=(0,f.A)((function*(e){return(yield this.backgroundApi.serviceNetwork.isCustomNetwork({networkId:this.networkId}))?this.fetchTokenListByRpc(e):this.fetchTokenListByApi(e)})),function fetchTokenList(e){return ae.apply(this,arguments)}),ye.fetchTokenListByApi=(oe=(0,f.A)((function*(e){var{serviceToken:t,serviceAccountProfile:r}=this.backgroundApi,{requestApiParams:n,flag:i,signal:a,accountId:o}=e;n.contractList&&(n.contractList=n.contractList.filter((function(e){return null!==e&&"string"==typeof e})));var s=yield t.getClient(O.D.Wallet);return yield s.post(`/wallet/v1/account/token/list?flag=${i||""}`,n,{signal:a,headers:yield r._getWalletTypeHeader({accountId:o})})})),function fetchTokenListByApi(e){return oe.apply(this,arguments)}),ye.fetchTokenListByRpc=(se=(0,f.A)((function*(e){throw new x.MS})),function fetchTokenListByRpc(e){return se.apply(this,arguments)}),ye.estimateFee=(ce=(0,f.A)((function*(e){return(yield this.backgroundApi.serviceNetwork.isCustomNetwork({networkId:this.networkId}))?this.estimateFeeByRpc(e):this.estimateFeeByApi(e)})),function estimateFee(e){return ce.apply(this,arguments)}),ye.estimateFeeByApi=(ue=(0,f.A)((function*(e){var{accountId:t}=e,r=(0,n.A)(e,H),i=yield this.backgroundApi.serviceGas.getClient(O.D.Wallet);return yield i.post("/wallet/v1/account/estimate-fee",r,{headers:yield this.backgroundApi.serviceAccountProfile._getWalletTypeHeader({accountId:t})})})),function estimateFeeByApi(e){return ue.apply(this,arguments)}),ye.estimateFeeByRpc=(de=(0,f.A)((function*(e){throw new x.MS})),function estimateFeeByRpc(e){return de.apply(this,arguments)}),ye.fetchAccountHistoryDetail=(le=(0,f.A)((function*(e){return(yield this.backgroundApi.serviceNetwork.isCustomNetwork({networkId:this.networkId}))?this.fetchAccountHistoryDetailByRpc(e):this.fetchAccountHistoryDetailByApi(e)})),function fetchAccountHistoryDetail(e){return le.apply(this,arguments)}),ye.fetchAccountHistoryDetailByApi=(pe=(0,f.A)((function*(e){var{accountId:t}=e,r=(0,n.A)(e,D),i=yield this.backgroundApi.serviceGas.getClient(O.D.Wallet);return yield i.get("/wallet/v1/account/history/detail",{params:r,headers:yield this.backgroundApi.serviceAccountProfile._getWalletTypeHeader({accountId:t})})})),function fetchAccountHistoryDetailByApi(e){return pe.apply(this,arguments)}),ye.fetchAccountHistoryDetailByRpc=(fe=(0,f.A)((function*(e){throw new x.MS})),function fetchAccountHistoryDetailByRpc(e){return fe.apply(this,arguments)}),ye.buildOkxSwapEncodedTx=(he=(0,f.A)((function*(e){throw new x.MS})),function buildOkxSwapEncodedTx(e){return he.apply(this,arguments)}),(0,h.A)(VaultBase)}(function(e){(0,y.A)(VaultBaseChainOnly,e);var t=_createSuper(VaultBaseChainOnly);function VaultBaseChainOnly(){return t.apply(this,arguments)}var r,n,i,a,o,s,c,u,d,l,g,w,b,v,A,k=VaultBaseChainOnly.prototype;return k.getXpubFromAccount=(r=(0,f.A)((function*(e){return e.xpub})),function getXpubFromAccount(e){return r.apply(this,arguments)}),k.proxyJsonRPCCall=(n=(0,f.A)((function*(e){throw new x.MS})),function proxyJsonRPCCall(e){return n.apply(this,arguments)}),k.addressFromBase=(i=(0,f.A)((function*(e){throw new x.MS})),function addressFromBase(e){return i.apply(this,arguments)}),k.addressToBase=(a=(0,f.A)((function*(e){throw new x.MS})),function addressToBase(e){return a.apply(this,arguments)}),k.baseValidatePrivateKey=(o=(0,f.A)((function*(e){if(!this.coreApi)throw new Error("coreApi not defined in Vault");try{var t=yield this.getCoreApiNetworkInfo();if((yield this.coreApi.getAddressFromPrivate({networkInfo:t,privateKeyRaw:e})).publicKey)return{isValid:!0}}catch(e){}return{isValid:!1}})),function baseValidatePrivateKey(e){return o.apply(this,arguments)}),k.baseValidateGeneralInput=(s=(0,f.A)((function*(e){var t,r,n,i,a=(0,m.mP)({encodedText:e.input}),{validateAddress:o,validateXprvt:s,validateXpub:c,validatePrivateKey:u}=e,d={isValid:!1},l=!1;if(o&&!l)try{t=yield this.validateAddress(a),d.addressResult=t,l=l||t?.isValid}catch(e){}if(c&&!l)try{r=yield this.validateXpub(a),d.xpubResult=r,l=l||r?.isValid}catch(e){}if(s&&!l)try{n=yield this.validateXprvt(a),d.xprvtResult=n,l=l||n?.isValid}catch(e){}if(u&&!l)try{i=yield this.validatePrivateKey(a),d.privateKeyResult=i,l=l||i?.isValid}catch(e){}return d.isValid=Boolean(l),{result:d,inputDecoded:a}})),function baseValidateGeneralInput(e){return s.apply(this,arguments)}),k.baseGetPrivateKeyFromImported=(c=(0,f.A)((function*(e){var t=(0,m.mP)({encodedText:e.input}),r=P.A.stripHexPrefix(t);return{privateKey:r=(0,m.uX)({text:r})}})),function baseGetPrivateKeyFromImported(e){return c.apply(this,arguments)}),k.validateAmountInputShown=(u=(0,f.A)((function*({toAddress:e}){return Promise.resolve({isValid:!0})})),function validateAmountInputShown(e){return u.apply(this,arguments)}),k.checkIsDomainName=(d=(0,f.A)((function*({name:e}){return(0,E.s8)(e)})),function checkIsDomainName(e){return d.apply(this,arguments)}),k.resolveDomainName=(l=(0,f.A)((function*({name:e}){return null})),function resolveDomainName(e){return l.apply(this,arguments)}),k.getCustomRpcEndpointStatus=(g=(0,f.A)((function*(e){throw new x.MS})),function getCustomRpcEndpointStatus(e){return g.apply(this,arguments)}),k.checkFeeSupportInfo=(w=(0,f.A)((function*(e){throw new x.MS})),function checkFeeSupportInfo(e){return w.apply(this,arguments)}),k.fetchTokenDetails=(b=(0,f.A)((function*(e){return(yield this.backgroundApi.serviceNetwork.isCustomNetwork({networkId:this.networkId}))?this.fetchTokenDetailsByRpc(e):this.fetchTokenDetailsByApi(e)})),function fetchTokenDetails(e){return b.apply(this,arguments)}),k.fetchTokenDetailsByApi=(v=(0,f.A)((function*(e){var t,r=yield this.backgroundApi.serviceToken.getClient(O.D.Wallet);return yield r.post("/wallet/v1/account/token/search",p()(e,["walletId","accountId","signal"]),{headers:yield this.backgroundApi.serviceAccountProfile._getWalletTypeHeader({accountId:e.accountId,walletId:e.walletId}),signal:null!=(t=e.signal)?t:void 0})})),function fetchTokenDetailsByApi(e){return v.apply(this,arguments)}),k.fetchTokenDetailsByRpc=(A=(0,f.A)((function*(e){throw new x.MS})),function fetchTokenDetailsByRpc(e){return A.apply(this,arguments)}),(0,h.A)(VaultBaseChainOnly)}(R.y))},466062:(e,t,r)=>{"use strict";r.d(t,{y:()=>c});var n=r(586330),i=r(230414),a=r(491180),o=r(553083),s=r(251614),c=function(){function VaultContext(e){if(this.options=e,this.networkId=e.networkId||"",this.accountId=e.accountId||"",this.backgroundApi=e.backgroundApi,this.walletId=e.walletId||(this.accountId?a.A.getWalletIdFromAccountId({accountId:this.accountId}):""),!this.walletId&&!this.options.isChainOnly)throw new Error("can not get correct walletId")}var e,t,r,c,u,d,l,p,f,h=VaultContext.prototype;return h.getNetworkId=(e=(0,n.A)((function*(){return this.networkId})),function getNetworkId(){return e.apply(this,arguments)}),h.getNetwork=(t=(0,n.A)((function*({cached:e}={}){if(!e||!this._network||this._network.id!==this.networkId){var t=yield this.backgroundApi.serviceNetwork.getNetwork({networkId:this.networkId});this._network=t}return this._network})),function getNetwork(){return t.apply(this,arguments)}),h.getNetworkChainId=(r=(0,n.A)((function*({hex:e=!1}={}){return o.Ay.getNetworkChainId({networkId:this.networkId,hex:e})})),function getNetworkChainId(){return r.apply(this,arguments)}),h.getNetworkImpl=(c=(0,n.A)((function*(){return o.Ay.getNetworkImpl({networkId:this.networkId})})),function getNetworkImpl(){return c.apply(this,arguments)}),h.getVaultSettings=(u=(0,n.A)((function*(){return(0,s._G)({networkId:this.networkId})})),function getVaultSettings(){return u.apply(this,arguments)}),h.getNetworkInfo=(d=(0,n.A)((function*(){return(0,s.u$)({networkId:this.networkId})})),function getNetworkInfo(){return d.apply(this,arguments)}),h.getCoreApiNetworkInfo=(l=(0,n.A)((function*(){var e=yield this.getNetwork(),t=yield this.getNetworkInfo(),{addressPrefix:r,curve:n}=t,i=yield this.getNetworkImpl(),a=yield this.getNetworkChainId({hex:!1}),{isTestnet:o}=e,{networkId:s}=this;return{isTestnet:o,networkChainCode:e.code,chainId:a,networkId:s,networkImpl:i,addressPrefix:r,curve:n}})),function getCoreApiNetworkInfo(){return l.apply(this,arguments)}),h.getRpcUrl=(p=(0,n.A)((function*(){return""})),function getRpcUrl(){return p.apply(this,arguments)}),h.destroy=(f=(0,n.A)((function*(){})),function destroy(){return f.apply(this,arguments)}),(0,i.A)(VaultContext)}()},758462:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ye});var n=r(324586),i=r(603514),a=r.n(i),o=r(586330),s=r(230414),c=r(85018),u=r(929296),d=r(195309),l=r(972715),p=r(535545),f=r(876473),h=r(310349),y=r(241440),g=r(508977),w=r(507140),b=r(657355),v=r(584186),A=r(232471),m=r(34344);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,l.A)(e);if(t){var i=(0,l.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var k=function(e){(0,u.A)(KeyringExternal,e);var t=_createSuper(KeyringExternal);function KeyringExternal(){return t.apply(this,arguments)}var r=KeyringExternal.prototype;return r.signMessage=function signMessage(e){throw new w.MS},r.signTransaction=function signTransaction(e){throw new w.MS},(0,s.A)(KeyringExternal)}(r(597194).g),x=r(775500),T=r(322998),I=r(478261),S=r(896243),P=r(514527),C=r(491180),B=r(825145),K=r(606777),E=r(424754),O=r(64238);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function normalizeBfcCoinType(e){if(e!==f.W0){var[t,r,n]=e.split("::");if(r&&n)try{return`${(0,h.Tu)(t).toLowerCase()}::${r}::${n}`}catch{}}return e}function toTransaction(e,t,r){return _toTransaction.apply(this,arguments)}function _toTransaction(){return(_toTransaction=(0,o.A)((function*(e,t,r){var n;if(r instanceof Uint8Array)n=r;else{var i=p.KW.from(r.rawTx);i.setSenderIfNotSet(t),n=yield i.build({client:e})}return n}))).apply(this,arguments)}var N=function(e){return e.ContractInteraction="ContractInteraction",e.TokenTransfer="Token Transfer",e.Unknown="UNKNOWN",e}({});function _getAllCoinsByCoinType(){return(_getAllCoinsByCoinType=(0,o.A)((function*({client:e,address:t,coinType:r}){for(var n=null,i=[],a=!0,o=0;a&&o<5;)try{var s=yield e.getCoins({owner:t,coinType:r,cursor:n,limit:50}),{data:c,nextCursor:u,hasNextPage:d}=s;c&&c.length&&i.push(...c),n=u,a=d,o=0}catch(e){if((o+=1)>=5)throw new Error("Failed to fetch coins, maximum retry attempts reached");yield v.A.wait(300)}return i}))).apply(this,arguments)}function _createTokenTransaction(){return _createTokenTransaction=(0,o.A)((function*({client:e,sender:t,recipient:r,amount:n,coinType:i,maxSendNativeToken:a=!1}){var o=new p.KW,s=yield function getAllCoinsByCoinType(e){return _getAllCoinsByCoinType.apply(this,arguments)}({client:e,address:t,coinType:i}),c=s.reduce((function(e,t){return e.plus(t.balance)}),new y.A(0));if(c.lt(n))throw new Error("Insufficient balance");if(a&&i===f.W0)return o.transferObjects([o.gas],r),o.setGasPayment(s.filter((function(e){return normalizeBfcCoinType(e.coinType)===normalizeBfcCoinType(i)})).map((function(e){return{objectId:e.coinObjectId,digest:e.digest,version:e.version}}))),o;if(i===f.W0){var u=o.splitCoins(o.gas,[n]);o.transferObjects([u],r)}else{var[d,...l]=s.filter((function(e){return normalizeBfcCoinType(e.coinType)===normalizeBfcCoinType(i)})),h=o.object(d.coinObjectId);l.length&&o.mergeCoins(h,l.map((function(e){return o.object(e.coinObjectId)})));var g=o.splitCoins(h,[n]);o.transferObjects([g],r)}return o})),_createTokenTransaction.apply(this,arguments)}function _getCoinTypeForHardwareTransfer(){return _getCoinTypeForHardwareTransfer=(0,o.A)((function*({client:e,txBytes:t}){var r=p.KW.from(t),n=r.blockData.transactions;if(n.some((function(e){return"MoveCall"===e.kind})))return null;var i=n.filter((function(e){return"TransferObjects"===e.kind}));if(1!==i.length)return null;var a=i[0],o=a?.objects?.[0];if("GasCoin"===o.kind)return f.W0;if("Result"!==o?.kind||"number"!=typeof o.index)return null;var s=n[o.index];if("SplitCoins"===s?.kind){if("GasCoin"===s.coin?.kind)return f.W0;if("Input"===s.coin?.kind){var c=s.coin.index,u=r.blockData.inputs[c],d=u?.value?.Object?.ImmOrOwned?.objectId;if(d){var l=yield e.getObject({id:d,options:{showType:!0,showOwner:!0,showPreviousTransaction:!0,showDisplay:!1}});try{var h=l.data?.type;return h?function objectTypeToCoinType(e){if(!e)throw new Error("objectType cannot be empty");var t=e.match(/0x2::coin::Coin<(.+)>/);return t?t[1]:e}(h):null}catch{return null}}}}return null})),_getCoinTypeForHardwareTransfer.apply(this,arguments)}const _={createTokenTransaction:function createTokenTransaction(e){return _createTokenTransaction.apply(this,arguments)},analyzeTransactionType:function analyzeTransactionType(e){var t=e.blockData.transactions;return t.some((function(e){return"MoveCall"===e.kind}))?N.ContractInteraction:t.filter((function(e){return"TransferObjects"===e.kind})).length?N.TokenTransfer:N.Unknown},parseTransferDetails:function parseTransferDetails({balanceChanges:e}){var t=[],r=new Map;e.forEach((function(e){var t=r.get(e.coinType)||[];t.push(e),r.set(e.coinType,t)}));var _loop=function(e){var r=i.filter((function(e){return new y.A(e.amount).isLessThan(0)})),n=i.filter((function(e){return new y.A(e.amount).isGreaterThan(0)}));if(e===f.W0)if(1===r.length&&0===n.length){var a=r[0];t.push({from:a.owner.AddressOwner,to:a.owner.AddressOwner,amount:new y.A(0).toString(),tokenAddress:e,gasFee:new y.A(a.amount).abs().toString()})}else n.length>0&&n.forEach((function(n){var i=r.sort((function(e,t){return new y.A(t.amount).minus(e.amount).toNumber()}))[0];if(i){var a=new y.A(n.amount),o=new y.A(i.amount).abs().minus(a);t.push({from:i.owner.AddressOwner,to:n.owner.AddressOwner,amount:a.toString(),tokenAddress:e,gasFee:o.toString()})}}));else n.length>0&&n.forEach((function(n){var i=r.sort((function(e,t){return new y.A(t.amount).minus(e.amount).toNumber()}))[0];i&&t.push({from:i.owner.AddressOwner,to:n.owner.AddressOwner,amount:new y.A(n.amount).toString(),tokenAddress:e})}))};for(var[n,i]of r.entries())_loop(n);return t},parseMoveCall:function parseMoveCall(e){if(!e.blockData.transactions?.length)return null;var t=e.blockData.transactions.find((function(e){return"MoveCall"===e.kind}));if(!t)return null;var r=t.target;if(!r)return null;var n=r.split("::");if(3!==n.length)return null;var[i,a,o]=n;return{contractName:o,contractTo:`${a}::${o}`}},getCoinTypeForHardwareTransfer:function getCoinTypeForHardwareTransfer(e){return _getCoinTypeForHardwareTransfer.apply(this,arguments)}};var R=r(901048).Buffer;function KeyringHardware_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function KeyringHardware_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?KeyringHardware_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KeyringHardware_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function KeyringHardware_createSuper(e){var t=KeyringHardware_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,l.A)(e);if(t){var i=(0,l.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.A)(this,r)}}function KeyringHardware_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KeyringHardware_isNativeReflectConstruct=function(){return!!e})()}var H=function(e){(0,u.A)(KeyringHardware,e);var t=KeyringHardware_createSuper(KeyringHardware);function KeyringHardware(...e){var r;return(r=t.call(this,...e)).coreApi=g.A.bfc.hd,r.hwSdkNetwork="benfen",r}var r,n,i,a=KeyringHardware.prototype;return a.buildHwAllNetworkPrepareAccountsParams=(r=(0,o.A)((function*(e){return{network:this.hwSdkNetwork,path:e.path,showOnOneKey:!1}})),function buildHwAllNetworkPrepareAccountsParams(e){return r.apply(this,arguments)}),a.prepareAccounts=function prepareAccounts(e){var t,r=this;return this.basePrepareHdNormalAccounts(e,{buildAddressesInfo:(t=(0,o.A)((function*({usedIndexes:t}){var n,i=yield r.baseGetDeviceAccountAddresses({params:e,usedIndexes:t,sdkGetAddressFn:(n=(0,o.A)((function*({template:n}){var i=yield r.getAllNetworkPrepareAccounts({params:e,usedIndexes:t,hwSdkNetwork:r.hwSdkNetwork,buildPath:function(e){return C.A.buildPathFromTemplate({template:n,index:e.index})},buildResultAccount:function({account:e}){return{path:e.path,address:e.payload?.address||"",publicKey:e.payload?.pub||""}}});if(i)return i;throw new Error("use sdk allNetworkGetAddress instead")})),function sdkGetAddressFn(e){return n.apply(this,arguments)})}),a=[];for(var s of i){var{address:c,path:u,publicKey:d}=s;if(!c)throw new w.Gk("Address is empty");var l={address:c,path:u,publicKey:d||""};a.push(l)}return a})),function buildAddressesInfo(e){return t.apply(this,arguments)})})},a.signTransaction=(n=(0,o.A)((function*(e){var t=yield this.getHardwareSDKInstance(),r=e.unsignedTx.encodedTx,n=(0,B.wT)(e.deviceParams),{connectId:i,deviceId:a}=n.dbDevice,o=yield this.vault.getAccount(),s=(0,B.wT)(o.pub),c=yield this.vault.getClient(),u=yield toTransaction(c,r.sender,r),d=yield _.getCoinTypeForHardwareTransfer({client:c,txBytes:u}),l=(0,S.h)(u),p=yield t.benfenSignTransaction(i,a,KeyringHardware_objectSpread({path:o.path,rawTx:E.A.hexlify(R.from(l)),coinType:null!=d?d:void 0},e.deviceParams?.deviceCommonParams));if(p.success){var{signature:f}=p.payload,h=(0,x.C)({signatureScheme:"ED25519",signature:K.A.hexToBytes(f),publicKey:new T.G(K.A.hexToBytes(s))});return{txid:"",rawTx:(0,I.o)(u),signatureScheme:"ed25519",signature:h,publicKey:E.A.addHexPrefix(s),encodedTx:e.unsignedTx.encodedTx}}throw(0,P.MP)(p.payload)})),function signTransaction(e){return n.apply(this,arguments)}),a.signMessage=(i=(0,o.A)((function*(e){var t,r=yield this.getHardwareSDKInstance(),n=(0,B.wT)(e.deviceParams),{connectId:i,deviceId:a}=n.dbDevice,s=yield this.vault.getAccount(),c=yield Promise.all(e.messages.map((t=(0,o.A)((function*(t){var n=yield r.benfenSignMessage(i,a,KeyringHardware_objectSpread(KeyringHardware_objectSpread({},e.deviceParams?.deviceCommonParams),{},{messageHex:E.A.hexlify(K.A.hexToBytes(t.message)),path:s.path}));if(!n.success)throw(0,P.MP)(n.payload);return(0,x.C)({signatureScheme:"ED25519",signature:K.A.hexToBytes(n.payload.signature),publicKey:new T.G(K.A.hexToBytes((0,B.wT)(s.pub)))})})),function(e){return t.apply(this,arguments)})));return c})),function signMessage(e){return i.apply(this,arguments)}),(0,s.A)(KeyringHardware)}(O.V),D=r(129441),j=r(901048).Buffer;function KeyringHd_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function KeyringHd_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?KeyringHd_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KeyringHd_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function KeyringHd_createSuper(e){var t=KeyringHd_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,l.A)(e);if(t){var i=(0,l.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.A)(this,r)}}function KeyringHd_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KeyringHd_isNativeReflectConstruct=function(){return!!e})()}var F=function(e){(0,u.A)(KeyringHd,e);var t=KeyringHd_createSuper(KeyringHd);function KeyringHd(...e){var r;return(r=t.call(this,...e)).coreApi=g.A.bfc.hd,r}var r,n,i,a,c,d=KeyringHd.prototype;return d.getPrivateKeys=(r=(0,o.A)((function*(e){return this.baseGetPrivateKeys(e)})),function getPrivateKeys(e){return r.apply(this,arguments)}),d.exportAccountSecretKeys=(n=(0,o.A)((function*(e){return this.baseExportAccountSecretKeys(e)})),function exportAccountSecretKeys(e){return n.apply(this,arguments)}),d.prepareAccounts=(i=(0,o.A)((function*(e){return this.basePrepareAccountsHd(e)})),function prepareAccounts(e){return i.apply(this,arguments)}),d.signTransaction=(a=(0,o.A)((function*(e){var{unsignedTx:t}=e,r=t.encodedTx,n=yield this.vault.getClient(),i=yield toTransaction(n,r.sender,r),a=j.from(i).toString("hex");return this.baseSignTransaction(KeyringHd_objectSpread(KeyringHd_objectSpread({},e),{},{unsignedTx:KeyringHd_objectSpread(KeyringHd_objectSpread({},e.unsignedTx),{},{rawTxUnsigned:a})}))})),function signTransaction(e){return a.apply(this,arguments)}),d.signMessage=(c=(0,o.A)((function*(e){return this.baseSignMessage(e)})),function signMessage(e){return c.apply(this,arguments)}),(0,s.A)(KeyringHd)}(D.R),M=r(275061),U=r(901048).Buffer;function KeyringImported_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function KeyringImported_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?KeyringImported_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KeyringImported_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function KeyringImported_createSuper(e){var t=KeyringImported_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,l.A)(e);if(t){var i=(0,l.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.A)(this,r)}}function KeyringImported_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KeyringImported_isNativeReflectConstruct=function(){return!!e})()}var W=function(e){(0,u.A)(KeyringImported,e);var t=KeyringImported_createSuper(KeyringImported);function KeyringImported(...e){var r;return(r=t.call(this,...e)).coreApi=g.A.bfc.imported,r}var r,n,i,a,c,d=KeyringImported.prototype;return d.getPrivateKeys=(r=(0,o.A)((function*(e){return this.baseGetPrivateKeys(e)})),function getPrivateKeys(e){return r.apply(this,arguments)}),d.exportAccountSecretKeys=(n=(0,o.A)((function*(e){return this.baseExportAccountSecretKeys(e)})),function exportAccountSecretKeys(e){return n.apply(this,arguments)}),d.prepareAccounts=(i=(0,o.A)((function*(e){return this.basePrepareAccountsImported(e)})),function prepareAccounts(e){return i.apply(this,arguments)}),d.signTransaction=(a=(0,o.A)((function*(e){var{unsignedTx:t}=e,r=t.encodedTx,n=yield this.vault.getClient(),i=yield toTransaction(n,r.sender,r),a=U.from(i).toString("hex");return this.baseSignTransaction(KeyringImported_objectSpread(KeyringImported_objectSpread({},e),{},{unsignedTx:KeyringImported_objectSpread(KeyringImported_objectSpread({},e.unsignedTx),{},{rawTxUnsigned:a})}))})),function signTransaction(e){return a.apply(this,arguments)}),d.signMessage=(c=(0,o.A)((function*(e){return this.baseSignMessage(e)})),function signMessage(e){return c.apply(this,arguments)}),(0,s.A)(KeyringImported)}(M.V);function KeyringWatching_createSuper(e){var t=KeyringWatching_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,l.A)(e);if(t){var i=(0,l.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.A)(this,r)}}function KeyringWatching_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KeyringWatching_isNativeReflectConstruct=function(){return!!e})()}var V=function(e){(0,u.A)(KeyringWatching,e);var t,r=KeyringWatching_createSuper(KeyringWatching);function KeyringWatching(){return r.apply(this,arguments)}return KeyringWatching.prototype.prepareAccounts=(t=(0,o.A)((function*(e){return(0,c.A)((0,l.A)(KeyringWatching.prototype),"basePrepareSimpleWatchingAccounts",this).call(this,e)})),function prepareAccounts(e){return t.apply(this,arguments)}),(0,s.A)(KeyringWatching)}(r(7440).w),L=function(){function OneKeyBenfenTransport({backgroundApi:e,networkId:t}){this.backgroundApi=e,this.networkId=t}var e,t,r=OneKeyBenfenTransport.prototype;return r.request=(e=(0,o.A)((function*(e){var t=yield this.backgroundApi.serviceAccountProfile.sendProxyRequest({networkId:this.networkId,body:[{route:"rpc",params:{method:e.method,params:e.params}}]}),r=t?.[0];if(!r)throw new Error("No response received from the proxy");return r})),function request(t){return e.apply(this,arguments)}),r.subscribe=(t=(0,o.A)((function*(){throw new Error("Subscription not implemented")})),function subscribe(){return t.apply(this,arguments)}),(0,s.A)(OneKeyBenfenTransport)}(),G=r(863502),q=r(821944);const z=/^(?:[a-z0-9][a-z0-9-]{0,62}(?:\.[a-z0-9][a-z0-9-]{0,62})*)?@[a-z0-9][a-z0-9-]{0,62}$/i,$=/^(?:[a-z0-9][a-z0-9-]{0,62}\.)+benfen$/i;var Z=r(327042);const X={"-32700":"ParseError","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError"};class BenfenHTTPTransportError extends Error{}class JsonRpcError extends BenfenHTTPTransportError{constructor(e,t){super(e),this.code=t,this.type=X[t]??"ServerError"}}class BenfenHTTPStatusError extends BenfenHTTPTransportError{constructor(e,t,r){super(e),this.status=t,this.statusText=r}}var J,Y,Q,ee,te,re,ne,ie,ae,oe,__accessCheck=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},__privateGet=(e,t,r)=>(__accessCheck(e,t,"read from private field"),r?r.call(e):t.get(e)),__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},__privateSet=(e,t,r,n)=>(__accessCheck(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),__privateMethod=(e,t,r)=>(__accessCheck(e,t,"access private method"),r);const se={WebSocketConstructor:"undefined"!=typeof WebSocket?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class WebsocketClient{constructor(e,t={}){if(__privateAdd(this,ne),__privateAdd(this,ae),__privateAdd(this,J,0),__privateAdd(this,Y,0),__privateAdd(this,Q,null),__privateAdd(this,ee,null),__privateAdd(this,te,new Set),__privateAdd(this,re,new Map),this.endpoint=e,this.options={...se,...t},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=function getWebsocketUrl(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}(this.endpoint))}async makeRequest(e,t){const r=await __privateMethod(this,ne,ie).call(this);return new Promise(((n,i)=>{__privateSet(this,J,__privateGet(this,J)+1),__privateGet(this,re).set(__privateGet(this,J),{resolve:n,reject:i,timeout:setTimeout((()=>{__privateGet(this,re).delete(__privateGet(this,J)),i(new Error(`Request timeout: ${e}`))}),this.options.callTimeout)}),r.send(JSON.stringify({jsonrpc:"2.0",id:__privateGet(this,J),method:e,params:t}))})).then((({error:e,result:t})=>{if(e)throw new JsonRpcError(e.message,e.code);return t}))}async subscribe(e){const t=new RpcSubscription(e);return __privateGet(this,te).add(t),await t.subscribe(this),()=>t.unsubscribe(this)}}J=new WeakMap,Y=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,re=new WeakMap,ne=new WeakSet,ie=function(){return __privateGet(this,ee)||__privateSet(this,ee,new Promise((e=>{__privateGet(this,Q)?.close(),__privateSet(this,Q,new this.options.WebSocketConstructor(this.endpoint)),__privateGet(this,Q).addEventListener("open",(()=>{__privateSet(this,Y,0),e(__privateGet(this,Q))})),__privateGet(this,Q).addEventListener("close",(()=>{var e,t,r,n;(e=this,t=Y,{set _(n){__privateSet(e,t,n,r)},get _(){return __privateGet(e,t,n)}})._++,__privateGet(this,Y)<=this.options.maxReconnects&&setTimeout((()=>{__privateMethod(this,ae,oe).call(this)}),this.options.reconnectTimeout)})),__privateGet(this,Q).addEventListener("message",(({data:e})=>{let t;try{t=JSON.parse(e)}catch(t){return void console.error(new Error(`Failed to parse RPC message: ${e}`,{cause:t}))}if("id"in t&&null!=t.id&&__privateGet(this,re).has(t.id)){const{resolve:e,timeout:r}=__privateGet(this,re).get(t.id);clearTimeout(r),e(t)}else if("params"in t){const{params:e}=t;__privateGet(this,te).forEach((t=>{t.subscriptionId===e.subscription&&e.subscription===t.subscriptionId&&t.onMessage(e.result)}))}}))}))),__privateGet(this,ee)},ae=new WeakSet,oe=async function(){return __privateGet(this,Q)?.close(),__privateSet(this,ee,null),Promise.allSettled([...__privateGet(this,te)].map((e=>e.subscribe(this))))};class RpcSubscription{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:t}=this;return this.subscribed=!1,null!=t&&(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[t]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const t=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=t)}}var ce,ue,de,le,pe,http_transport_accessCheck=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},http_transport_privateGet=(e,t,r)=>(http_transport_accessCheck(e,t,"read from private field"),r?r.call(e):t.get(e)),http_transport_privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},http_transport_privateSet=(e,t,r,n)=>(http_transport_accessCheck(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);class BenfenHTTPTransport{constructor(e){http_transport_privateAdd(this,le),http_transport_privateAdd(this,ce,0),http_transport_privateAdd(this,ue,void 0),http_transport_privateAdd(this,de,void 0),http_transport_privateSet(this,ue,e)}fetch(e,t){const r=http_transport_privateGet(this,ue).fetch??globalThis.fetch;if(!r)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for BenfenHTTPTransport.");return r(e,t)}async request(e){http_transport_privateSet(this,ce,http_transport_privateGet(this,ce)+1);const t=await this.fetch(http_transport_privateGet(this,ue).rpc?.url??http_transport_privateGet(this,ue).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":"0.2.7","Client-Target-Api-Version":"1.20.1",...http_transport_privateGet(this,ue).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:http_transport_privateGet(this,ce),method:e.method,params:e.params})});if(!t.ok)throw new BenfenHTTPStatusError(`Unexpected status code: ${t.status}`,t.status,t.statusText);const r=await t.json();if("error"in r&&null!=r.error)throw new JsonRpcError(r.error.message,r.error.code);return r.result}async subscribe(e){const t=await(r=this,n=le,i=pe,http_transport_accessCheck(r,n,"access private method"),i).call(this).subscribe(e);var r,n,i;return async()=>!!await t()}}ce=new WeakMap,ue=new WeakMap,de=new WeakMap,le=new WeakSet,pe=function(){if(!http_transport_privateGet(this,de)){const e=http_transport_privateGet(this,ue).WebSocketConstructor??globalThis.WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for BenfenHTTPTransport.");http_transport_privateSet(this,de,new WebsocketClient(http_transport_privateGet(this,ue).websocket?.url??http_transport_privateGet(this,ue).url,{WebSocketConstructor:e,...http_transport_privateGet(this,ue).websocket}))}return http_transport_privateGet(this,de)};const fe=Symbol.for("@benfen/BenfenClient");function ClientBfc_createSuper(e){var t=ClientBfc_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,l.A)(e);if(t){var i=(0,l.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.A)(this,r)}}function ClientBfc_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ClientBfc_isNativeReflectConstruct=function(){return!!e})()}var he=function(e){(0,u.A)(OneKeyBfcClient,e);var t=ClientBfc_createSuper(OneKeyBfcClient);function OneKeyBfcClient(){return t.apply(this,arguments)}return(0,s.A)(OneKeyBfcClient)}(class BenfenClient{get[fe](){return!0}constructor(e){this.transport=e.transport??new BenfenHTTPTransport({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!(0,h.rF)((0,h.Tu)(e.owner)))throw new Error("Invalid Benfen address");return await this.transport.request({method:"bfcx_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!(0,h.rF)((0,h.Tu)(e.owner)))throw new Error("Invalid Benfen address");return await this.transport.request({method:"bfcx_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!(0,h.rF)((0,h.Tu)(e.owner)))throw new Error("Invalid Benfen address");return await this.transport.request({method:"bfcx_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!(0,h.rF)((0,h.Tu)(e.owner)))throw new Error("Invalid Benfen address");return await this.transport.request({method:"bfcx_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"bfcx_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"bfcx_getTotalSupply",params:[e.coinType]})}async call(e,t){return await this.transport.request({method:e,params:t})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"bfc_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"bfc_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"bfc_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"bfc_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"bfc_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!(0,h.rF)((0,h.Tu)(e.owner)))throw new Error("Invalid Benfen address");return await this.transport.request({method:"bfcx_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!(0,h.PL)((0,Z.$u)(e.id)))throw new Error("Invalid Benfen Object id");return await this.transport.request({method:"bfc_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"bfc_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){e.ids.forEach((e=>{if(!e||!(0,h.PL)((0,Z.$u)(e)))throw new Error(`Invalid Benfen Object id ${e}`)}));if(e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"bfc_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"bfcx_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,"descending"===(e.order||"descending")]})}async getTransactionBlock(e){if(!(0,h.n4)(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"bfc_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){e.digests.forEach((e=>{if(!(0,h.n4)(e))throw new Error(`Invalid Transaction digest ${e}`)}));if(e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"bfc_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock(e){return await this.transport.request({method:"bfc_executeTransactionBlock",params:["string"==typeof e.transactionBlock?e.transactionBlock:(0,I.o)(e.transactionBlock),Array.isArray(e.signature)?e.signature:[e.signature],e.options,e.requestType]})}async signAndExecuteTransactionBlock({transactionBlock:e,signer:t,...r}){let n;e instanceof Uint8Array?n=e:(e.setSenderIfNotSet(t.toHexAddress()),n=await e.build({client:this}));const{signature:i,bytes:a}=await t.signTransactionBlock(n);return this.executeTransactionBlock({transactionBlock:a,signature:i,...r})}async getTotalTransactionBlocks(){const e=await this.transport.request({method:"bfc_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){const e=await this.transport.request({method:"bfcx_getReferenceGasPrice",params:[]});return BigInt(e)}async getStableRate(e){return await this.transport.request({method:"bfcx_getStableRate",params:[e.replace(/^0x/,"")]})}async getStakes(e){if(!e.owner||!(0,h.rF)((0,h.Tu)(e.owner)))throw new Error("Invalid Benfen address");return await this.transport.request({method:"bfcx_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedBfcIds.forEach((e=>{if(!e||!(0,h.PL)((0,Z.$u)(e)))throw new Error(`Invalid Bfc Stake id ${e}`)})),await this.transport.request({method:"bfcx_getStakesByIds",params:[e.stakedBfcIds]})}async getLatestBenfeSystemState(){return await this.transport.request({method:"bfcx_getLatestSuiSystemState",params:[]})}async getNetworkOverview(){return await this.transport.request({method:"bfcx_getNetworkOverview",params:[]})}async getInnerDao(){return await this.transport.request({method:"bfc_getInnerDaoInfo",params:[]})}async getDaoProposalWithVoter(e){return await this.transport.request({method:"bfcx_getDaoProposals",params:[e]})}async queryEvents(e){return await this.transport.request({method:"bfcx_queryEvents",params:[e.query,e.cursor,e.limit,"descending"===(e.order||"descending")]})}async subscribeEvent(e){return this.transport.subscribe({method:"bfcx_subscribeEvent",unsubscribe:"bfcx_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"bfcx_subscribeTransaction",unsubscribe:"bfcx_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){let t;if((0,p.UP)(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),t=(0,I.o)(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if("string"==typeof e.transactionBlock)t=e.transactionBlock;else{if(!(e.transactionBlock instanceof Uint8Array))throw new Error("Unknown transaction block format.");t=(0,I.o)(e.transactionBlock)}return await this.transport.request({method:"bfc_devInspectTransactionBlock",params:[e.sender,t,e.gasPrice?.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"bfc_dryRunTransactionBlock",params:["string"==typeof e.transactionBlock?e.transactionBlock:(0,I.o)(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!(0,h.PL)((0,Z.$u)(e.parentId)))throw new Error("Invalid Benfen Object id");return await this.transport.request({method:"bfcx_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"bfcx_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){const e=await this.transport.request({method:"bfc_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"bfc_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"bfc_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"bfcx_getCommitteeInfo",params:[e?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"bfcx_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"bfcx_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"bfcx_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"bfcx_getAllEpochAddressMetrics",params:[e?.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"bfcx_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"bfcx_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"bfcx_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"bfcx_getValidatorsApy",params:[]})}async getChainIdentifier(){const e=await this.getCheckpoint({id:"0"}),t=(0,G.Q)(e.digest);return(0,q.J)(t.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"bfcx_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...t}){const{nextCursor:r,hasNextPage:n,data:i}=await this.transport.request({method:"bfcx_resolveNameServiceNames",params:[t.address,t.cursor,t.limit]});return{hasNextPage:n,nextCursor:r,data:i.map((t=>function normalizeBenfenNSName(e,t="at"){const r=e.toLowerCase();let n;if(r.includes("@")){if(!z.test(r))throw new Error(`Invalid BenfenNS name ${e}`);const[t,i]=r.split("@");n=[...t?t.split("."):[],i]}else{if(!$.test(r))throw new Error(`Invalid BenfenNS name ${e}`);n=r.split(".").slice(0,-1)}return"dot"===t?`${n.join(".")}.benfen`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}(t,e)))}}async getProtocolConfig(e){return await this.transport.request({method:"bfc_getProtocolConfig",params:[e?.version]})}async waitForTransactionBlock({signal:e,timeout:t=6e4,pollInterval:r=2e3,...n}){const i=AbortSignal.timeout(t),a=new Promise(((e,t)=>{i.addEventListener("abort",(()=>t(i.reason)))}));for(a.catch((()=>{}));!i.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(n)}catch(e){await Promise.race([new Promise((e=>setTimeout(e,r))),a])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}});function Vault_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vault_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vault_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vault_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vault_createSuper(e){var t=Vault_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,l.A)(e);if(t){var i=(0,l.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.A)(this,r)}}function Vault_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vault_isNativeReflectConstruct=function(){return!!e})()}var ye=function(e){(0,u.A)(Vault,e);var t=Vault_createSuper(Vault);function Vault(...e){var r;return(r=t.call(this,...e)).coreApi=g.A.bfc.hd,r.keyringMap={hd:F,qr:void 0,hw:H,imported:W,watching:V,external:k},r.getClientCache=(0,b.EO)((0,o.A)((function*(){return r.getBfcClient()})),{promise:!0,max:1,maxAge:v.A.getTimeDurationMs({minute:3})}),r}var r,n,i,d,m,x,T,I,S,P,C,B,K,E=Vault.prototype;return E.getClient=(r=(0,o.A)((function*(){return this.getClientCache()})),function getClient(){return r.apply(this,arguments)}),E.getBfcClient=function getBfcClient(){var e=new L({backgroundApi:this.backgroundApi,networkId:this.networkId});return new he({transport:e})},E.buildAccountAddressDetail=function buildAccountAddressDetail(e){var{account:t,networkId:r}=e,{address:n}=t;return Promise.resolve({networkId:r,normalizedAddress:n,displayAddress:n,address:n,baseAddress:n,isValid:!0,allowEmptyAddress:!1})},E.buildEncodedTx=(n=(0,o.A)((function*(e){var{transfersInfo:t}=e;if(!t||a()(t))throw new w.He("transfersInfo is required");if(t.length>1)throw new w.He("Batch transfer is not supported");var r=t[0];if(!r.to)throw new Error("buildEncodedTx ERROR: transferInfo.to is missing");var{to:n,amount:i,tokenInfo:o}=r,s=yield this.getAccount(),c=n,u=s.address;if(!o||"number"!=typeof o.decimals||o.decimals<0)throw new w.He("Token decimals is required");var d=new y.A(i).shiftedBy(o.decimals).toFixed(),l=yield this.getClient();return{rawTx:(yield _.createTokenTransaction({client:l,sender:u,recipient:c,amount:d,coinType:o.address})).serialize(),sender:s.address}})),function buildEncodedTx(e){return n.apply(this,arguments)}),E.buildDecodedTx=(i=(0,o.A)((function*(e){var t,r=this,{unsignedTx:n}=e,i=n?.encodedTx,{swapInfo:a}=n,s=p.KW.from(i.rawTx);s.setSender(null!=(t=s.blockData.sender)?t:yield this.getAccountAddress());var c,u,d=_.analyzeTransactionType(s),l=yield this.getNetwork(),f=yield this.getAccount(),h=[];if(d===N.TokenTransfer)if(n.transfersInfo?.[0]){var g,w,b,v,m,{from:k,to:x,amount:T,tokenInfo:I}=n.transfersInfo[0],S=yield this.backgroundApi.serviceToken.getToken({networkId:this.networkId,accountId:this.accountId,tokenIdOnNetwork:null!=(g=I?.address)?g:""}),P=yield this.buildTxTransferAssetAction({from:k,to:x,transfers:[{from:k,to:x,amount:T,icon:null!=(w=S?.logoURI)?w:"",symbol:null!=(b=S?.symbol)?b:"",name:null!=(v=S?.name)?v:"",tokenIdOnNetwork:null!=(m=S?.address)?m:"",isNative:S?.isNative}]});h.push(P)}else{var C=yield this.getClient(),B=yield s.build({client:C}),K=yield C.dryRunTransactionBlock({transactionBlock:B}),E=_.parseTransferDetails({balanceChanges:K.balanceChanges});if(E.length>0){var O=yield this.buildTxTransferAssetAction({from:E[0].from,to:E[0].to,transfers:(yield Promise.all(E.map((c=(0,o.A)((function*(e){var t,n,i,a,o=yield r.backgroundApi.serviceToken.getToken({networkId:r.networkId,accountId:r.accountId,tokenIdOnNetwork:e.tokenAddress});return null==o?.decimals||Number.isNaN(o?.decimals)?null:{from:e.from,to:e.to,amount:new y.A(e.amount).shiftedBy(-o.decimals).toString(),icon:null!=(t=o?.logoURI)?t:"",symbol:null!=(n=o?.symbol)?n:"",name:null!=(i=o?.name)?i:"",tokenIdOnNetwork:null!=(a=o?.address)?a:"",isNative:o?.isNative}})),function(e){return c.apply(this,arguments)})))).filter(Boolean)});h.push(O)}}else if(d===N.ContractInteraction){var R,H=_.parseMoveCall(s);H&&h.push({type:A.kF.FUNCTION_CALL,functionCall:{from:f.address,to:H.contractTo,functionName:H.contractName,icon:null!=(R=l.logoURI)?R:"",args:[]}})}if(a){var D=n.transfersInfo?.[0]?.to||h?.[0]?.assetTransfer?.to;h=[yield this.buildInternalSwapAction({swapInfo:a,swapToAddress:D})]}0===h.length&&h.push({type:A.kF.UNKNOWN,unknownAction:{from:f.address,to:"",icon:null!=(u=l.logoURI)?u:""}});var j={txid:"",owner:f.address,signer:f.address,nonce:0,actions:h,status:A.Y1.Pending,networkId:this.networkId,accountId:this.accountId,extraInfo:null,encodedTx:i};return Promise.resolve(j)})),function buildDecodedTx(e){return i.apply(this,arguments)}),E.buildUnsignedTx=(d=(0,o.A)((function*(e){var t,r=null!=(t=e.encodedTx)?t:yield this.buildEncodedTx(e);if(r)return{encodedTx:r,transfersInfo:e.transfersInfo};throw new w.He})),function buildUnsignedTx(e){return d.apply(this,arguments)}),E.updateUnsignedTx=(m=(0,o.A)((function*(e){var t=yield this.getClient(),{unsignedTx:r,nativeAmountInfo:n,feeInfo:i}=e,a=r.encodedTx;if(n?.maxSendAmount){var o,{rawTx:s}=a,c=p.KW.from(s);if(_.analyzeTransactionType(c)!==N.TokenTransfer)return Promise.resolve(r);if(!r.transfersInfo?.[0]?.to)throw new w.He("Invalid transfer object");var u=yield _.createTokenTransaction({client:t,sender:null!=(o=c.blockData.sender)?o:yield this.getAccountAddress(),recipient:r.transfersInfo[0].to,amount:n.maxSendAmount,coinType:f.W0,maxSendNativeToken:!0}),d=Vault_objectSpread(Vault_objectSpread({},a),{},{rawTx:u.serialize()});return Vault_objectSpread(Vault_objectSpread({},r),{},{encodedTx:d})}if(i?.gas?.gasLimit&&i?.gas?.gasPrice){var l=p.KW.from(a.rawTx);l.blockData.gasConfig.price=i.gas.gasPrice,l.blockData.gasConfig.budget=i.gas.gasLimit;var h=Vault_objectSpread(Vault_objectSpread({},a),{},{rawTx:l.serialize()});return Vault_objectSpread(Vault_objectSpread({},r),{},{encodedTx:h})}return Promise.resolve(r)})),function updateUnsignedTx(e){return m.apply(this,arguments)}),E.broadcastTransaction=(x=(0,o.A)((function*(e){try{var{signature:t,publicKey:r,rawTx:n,encodedTx:i}=e.signedTx;if(!t)throw new Error("signature is empty");if(!r)throw new Error("publicKey is empty");var a=yield this.backgroundApi.serviceSend.broadcastTransaction({accountId:this.accountId,networkId:this.networkId,signedTx:e.signedTx,accountAddress:(yield this.getAccount()).address,signature:t});return Vault_objectSpread(Vault_objectSpread({},e.signedTx),{},{txid:a})}catch(e){var{errorCode:o,message:s}=e||{},c=`${null!=o?o:""} ${s}`;throw-1!==s.indexOf("Insufficient gas:")?new w.He("msg__broadcast_tx_Insufficient_fee"):new w.He(c)}})),function broadcastTransaction(e){return x.apply(this,arguments)}),E.validateAddress=function validateAddress(e){var t=(0,h.rF)(e);return Promise.resolve({isValid:t,normalizedAddress:t?e:"",displayAddress:t?e:""})},E.validateXpub=function validateXpub(e){return Promise.resolve({isValid:!1})},E.getPrivateKeyFromImported=(T=(0,o.A)((function*(e){return(0,c.A)((0,l.A)(Vault.prototype),"baseGetPrivateKeyFromImported",this).call(this,e)})),function getPrivateKeyFromImported(e){return T.apply(this,arguments)}),E.validateXprvt=function validateXprvt(e){return Promise.resolve({isValid:!1})},E.validatePrivateKey=(I=(0,o.A)((function*(e){return/^(0x)?[0-9a-zA-Z]{64}$/.test(e)?this.baseValidatePrivateKey(e):{isValid:!1}})),function validatePrivateKey(e){return I.apply(this,arguments)}),E.validateGeneralInput=(S=(0,o.A)((function*(e){var{result:t}=yield this.baseValidateGeneralInput(e);return t})),function validateGeneralInput(e){return S.apply(this,arguments)}),E.waitPendingTransaction=(P=(0,o.A)((function*(e,t){return function utils_waitPendingTransaction(e,t,r,n=!0,i=10){var a,s=0,c=(a=(0,o.A)((function*(a=2e3){var o;s+=1;try{o=yield e.getTransactionBlock({digest:t,options:_objectSpread(_objectSpread({},r),{},{showEffects:!0})})}catch(e){if(n&&-32e3!==e.code&&-32602!==e.code)return Promise.reject(new w.oZ(e))}return 1==("success"===o?.effects?.status?.status)?Promise.resolve(o):s>i?Promise.reject(new w.oZ("transaction timeout")):new Promise((function(e){return setTimeout((function(){return e(c(a))}),a)}))})),function poll(){return a.apply(this,arguments)});return c()}(yield this.getClient(),e,t)})),function waitPendingTransaction(e,t){return P.apply(this,arguments)}),E.getCustomRpcEndpointStatus=(C=(0,o.A)((function*(e){var t=new he({url:e.rpcUrl}),r=performance.now(),n=yield t.getTotalTransactionBlocks();return{responseTime:Math.floor(performance.now()-r),bestBlockNumber:Number(n)}})),function getCustomRpcEndpointStatus(e){return C.apply(this,arguments)}),E.broadcastTransactionFromCustomRpc=(B=(0,o.A)((function*(e){try{var{customRpcInfo:t,signedTx:r}=e,{signature:n,publicKey:i,rawTx:a,encodedTx:o}=r,s=t.rpc;if(!s)throw new w.He("Invalid rpc url");if(!n)throw new Error("signature is empty");if(!i)throw new Error("publicKey is empty");var c=new he({url:s}),u=(yield c.executeTransactionBlock({transactionBlock:a,signature:n,requestType:r.encodedTx.requestType})).digest;return Vault_objectSpread(Vault_objectSpread({},e.signedTx),{},{txid:u})}catch(e){var{errorCode:d,message:l}=e||{},p=`${null!=d?d:""} ${l}`;throw-1!==l.indexOf("Insufficient gas:")?new w.He("msg__broadcast_tx_Insufficient_fee"):new w.He(p)}})),function broadcastTransactionFromCustomRpc(e){return B.apply(this,arguments)}),E.buildOkxSwapEncodedTx=(K=(0,o.A)((function*(e){var t=yield this.getAccountAddress();if(e.okxTx.from!==t)throw new w.He("Invalid from address");var r={rawTx:p.KW.from(e.okxTx.data).serialize(),sender:e.okxTx.from};return Promise.resolve(r)})),function buildOkxSwapEncodedTx(e){return K.apply(this,arguments)}),(0,s.A)(Vault)}(m.S)},583354:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,U:()=>n});var n=function(e){return e.hd="hd",e.qr="qr",e.hardware="hardware",e.imported="imported",e.watching="watching",e.external="external",e}({}),i=function(e){return e.DEPOSIT="deposit",e.WITHDRAW="withdraw",e}({})},243878:(e,t,r)=>{"use strict";r.d(t,{fn:()=>n,ib:()=>messageWithIntent});var n=(e=>(e[e.TransactionData=0]="TransactionData",e[e.TransactionEffects=1]="TransactionEffects",e[e.CheckpointSummary=2]="CheckpointSummary",e[e.PersonalMessage=3]="PersonalMessage",e))(n||{});function messageWithIntent(e,t){const r=function intentWithScope(e){return[e,0,0]}(e),n=new Uint8Array(r.length+t.length);return n.set(r),n.set(t,r.length),n}},496050:(e,t,r)=>{"use strict";r.d(t,{J:()=>PublicKey,O:()=>bytesEqual});var n=r(614555),i=r(830036),a=r(773481),o=r(478261),s=r(310349),c=r(243878);function bytesEqual(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}class PublicKey{equals(e){return bytesEqual(this.toRawBytes(),e.toRawBytes())}toBase64(){return(0,o.o)(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toBenfenPublicKey(){const e=this.toBenfenBytes();return(0,o.o)(e)}verifyWithIntent(e,t,r){const i=(0,c.ib)(r,e),a=(0,n.S)(i,{dkLen:32});return this.verify(a,t)}verifyPersonalMessage(e,t){return this.verifyWithIntent(a.jy.vector(a.jy.u8()).serialize(e).toBytes(),t,c.fn.PersonalMessage)}verifyTransactionBlock(e,t){return this.verifyWithIntent(e,t,c.fn.TransactionData)}toBenfenBytes(){const e=this.toRawBytes(),t=new Uint8Array(e.length+1);return t.set([this.flag()]),t.set(e,1),t}toHexAddress(){return(0,s.Tu)((0,i.My)((0,n.S)(this.toBenfenBytes(),{dkLen:32})).slice(0,2*s.jb))}}},443618:(e,t,r)=>{"use strict";r.d(t,{Pz:()=>i,uD:()=>n,y3:()=>a});const n={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},i={ED25519:32,Secp256k1:33,Secp256r1:33},a={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"}},775500:(e,t,r)=>{"use strict";r.d(t,{Y:()=>parseSerializedSignature,C:()=>toSerializedSignature});var n=r(773481),i=r(478261),a=r(496050),o=r(443618);function base64UrlCharTo6Bits(e){if(1!==e.length)throw new Error("Invalid base64Url character: "+e);const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e);if(-1===t)throw new Error("Invalid base64Url character: "+e);const r=t.toString(2).padStart(6,"0");return Array.from(r).map(Number)}function decodeBase64URL(e,t){if(e.length<2)throw new Error(`Input (s = ${e}) is not tightly packed because s.length < 2`);let r=function base64UrlStringToBitVector(e){let t=[];for(let r=0;r<e.length;r++){const n=base64UrlCharTo6Bits(e.charAt(r));t=t.concat(n)}return t}(e);const n=t%4;if(0===n);else if(1===n)r=r.slice(2);else{if(2!==n)throw new Error(`Input (s = ${e}) is not tightly packed because i%4 = 3 (i = ${t}))`);r=r.slice(4)}const i=(t+e.length-1)%4;if(3===i);else if(2===i)r=r.slice(0,r.length-2);else{if(1!==i)throw new Error(`Input (s = ${e}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${t}))`);r=r.slice(0,r.length-4)}if(r.length%8!=0)throw new Error("We should never reach here...");const a=new Uint8Array(Math.floor(r.length/8));let o=0;for(let e=0;e<r.length;e+=8){const t=r.slice(e,e+8),n=parseInt(t.join(""),2);a[o++]=n}return(new TextDecoder).decode(a)}function extractClaimValue(e,t){const r=decodeBase64URL(e.value,e.indexMod4),[n,i]=function verifyExtendedClaim(e){if("}"!==e.slice(-1)&&","!==e.slice(-1))throw new Error("Invalid claim");const t=JSON.parse("{"+e.slice(0,-1)+"}");if(1!==Object.keys(t).length)throw new Error("Invalid claim");const r=Object.keys(t)[0];return[r,t[r]]}(r);if(n!==t)throw new Error(`Invalid field name: found ${n} expected ${t}`);return i}const s=n.jy.struct("ZkLoginSignature",{inputs:n.jy.struct("ZkLoginSignatureInputs",{proofPoints:n.jy.struct("ZkLoginSignatureInputsProofPoints",{a:n.jy.vector(n.jy.string()),b:n.jy.vector(n.jy.vector(n.jy.string())),c:n.jy.vector(n.jy.string())}),issBase64Details:n.jy.struct("ZkLoginSignatureInputsClaim",{value:n.jy.string(),indexMod4:n.jy.u8()}),headerBase64:n.jy.string(),addressSeed:n.jy.string()}),maxEpoch:n.jy.u64(),userSignature:n.jy.vector(n.jy.u8())});var c=r(830036);function toPaddedBigEndianBytes(e,t){const r=e.toString(16);return(0,c.aT)(r.padStart(2*t,"0").slice(2*-t))}var u,__accessCheck=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},__privateSet=(e,t,r,n)=>(__accessCheck(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);class ZkLoginPublicIdentifier extends a.J{constructor(e){super(),((e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)})(this,u,void 0),"string"==typeof e?__privateSet(this,u,(0,i.Z)(e)):e instanceof Uint8Array?__privateSet(this,u,e):__privateSet(this,u,Uint8Array.from(e))}equals(e){return super.equals(e)}toRawBytes(){return __accessCheck(e=this,t=u,"read from private field"),r?r.call(e):t.get(e);var e,t,r}flag(){return o.uD.ZkLogin}async verify(e,t){throw Error("does not support")}verifyPersonalMessage(e,t){return Promise.resolve(!0)}verifyTransactionBlock(e,t){return Promise.resolve(!0)}}function parseSerializedZkLoginSignature(e){const t="string"==typeof e?(0,i.Z)(e):e;if(t[0]!==o.uD.ZkLogin)throw new Error("Invalid signature scheme");const r=t.slice(1),{inputs:n,maxEpoch:a,userSignature:c}=function parseZkLoginSignature(e){return s.parse("string"==typeof e?(0,i.Z)(e):e)}(r),{issBase64Details:u,addressSeed:d}=n,l=extractClaimValue(u,"iss"),p=function toZkLoginPublicIdentifier(e,t){const r=toPaddedBigEndianBytes(e,32),n=(new TextEncoder).encode(t),i=new Uint8Array(1+n.length+r.length);return i.set([n.length],0),i.set(n,1),i.set(r,1+n.length),new ZkLoginPublicIdentifier(i)}(BigInt(d),l),f=p.toHexAddress();return{serializedSignature:(0,i.o)(t),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:a,userSignature:c,iss:l,address:f,addressSeed:BigInt(d)},signature:t,publicKey:p.toRawBytes()}}function toSerializedSignature({signature:e,signatureScheme:t,publicKey:r}){if(!r)throw new Error("`publicKey` is required");const n=r.toRawBytes(),a=new Uint8Array(1+e.length+n.length);return a.set([o.uD[t]]),a.set(e,1),a.set(n,1+e.length),(0,i.o)(a)}function parseSerializedSignature(e){const t=(0,i.Z)(e),r=o.y3[t[0]];switch(r){case"MultiSig":return{serializedSignature:e,signatureScheme:r,multisig:n.jy.MultiSig.parse(t.slice(1)),bytes:t};case"ZkLogin":return parseSerializedZkLoginSignature(e);case"ED25519":case"Secp256k1":case"Secp256r1":const i=o.Pz[r],a=t.slice(1,t.length-i);return{serializedSignature:e,signatureScheme:r,signature:a,publicKey:t.slice(1+a.length),bytes:t};default:throw new Error("Unsupported signature scheme")}}u=new WeakMap},322998:(e,t,r)=>{"use strict";r.d(t,{G:()=>Ed25519PublicKey});var n=r(882926),i=r(478261),a=r(496050),o=r(443618),s=r(775500);class Ed25519PublicKey extends a.J{constructor(e){if(super(),"string"==typeof e?this.data=(0,i.Z)(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),32!==this.data.length)throw new Error(`Invalid public key input. Expected 32 bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return o.uD.ED25519}async verify(e,t){let r;if("string"==typeof t){const e=(0,s.Y)(t);if("ED25519"!==e.signatureScheme)throw new Error("Invalid signature scheme");if(!(0,a.O)(this.toRawBytes(),e.publicKey))throw new Error("Signature does not match public key");r=e.signature}else r=t;return n.sign.detached.verify(e,r,this.toRawBytes())}}Ed25519PublicKey.SIZE=32},887971:(e,t,r)=>{"use strict";r.d(t,{A:()=>pbkdf2});var n=r(226879),i=r(97713),a=r(830036);function pbkdf2Init(e,t,r,o){(0,n.tW)(e);const s=(0,a.tY)({dkLen:32,asyncTick:10},o),{c,dkLen:u,asyncTick:d}=s;if((0,n.ai)(c),(0,n.ai)(u),(0,n.ai)(d),c<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=(0,a.ZJ)(t),p=(0,a.ZJ)(r),f=new Uint8Array(u),h=i.w.create(e,l),y=h._cloneInto().update(p);return{c,dkLen:u,asyncTick:d,DK:f,PRF:h,PRFSalt:y}}function pbkdf2Output(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}function pbkdf2(e,t,r,n){const{c:i,dkLen:o,DK:s,PRF:c,PRFSalt:u}=pbkdf2Init(e,t,r,n);let d;const l=new Uint8Array(4),p=(0,a.O8)(l),f=new Uint8Array(c.outputLen);for(let e=1,t=0;t<o;e++,t+=c.outputLen){const r=s.subarray(t,t+c.outputLen);p.setInt32(0,e,!1),(d=u._cloneInto(d)).update(l).digestInto(f),r.set(f.subarray(0,r.length));for(let e=1;e<i;e++){c._cloneInto(d).update(f).digestInto(f);for(let e=0;e<r.length;e++)r[e]^=f[e]}}return pbkdf2Output(c,u,s,d,f)}},715460:(e,t,r)=>{"use strict";r.d(t,{Zf:()=>d});var n=r(831193),i=r(249964),a=r(830036);const[o,s]=(()=>i.Ay.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),c=new Uint32Array(80),u=new Uint32Array(80);class SHA512 extends n.D{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:a,Dh:o,Dl:s,Eh:c,El:u,Fh:d,Fl:l,Gh:p,Gl:f,Hh:h,Hl:y}=this;return[e,t,r,n,i,a,o,s,c,u,d,l,p,f,h,y]}set(e,t,r,n,i,a,o,s,c,u,d,l,p,f,h,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|a,this.Dh=0|o,this.Dl=0|s,this.Eh=0|c,this.El=0|u,this.Fh=0|d,this.Fl=0|l,this.Gh=0|p,this.Gl=0|f,this.Hh=0|h,this.Hl=0|y}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t),u[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|c[e-15],r=0|u[e-15],n=i.Ay.rotrSH(t,r,1)^i.Ay.rotrSH(t,r,8)^i.Ay.shrSH(t,r,7),a=i.Ay.rotrSL(t,r,1)^i.Ay.rotrSL(t,r,8)^i.Ay.shrSL(t,r,7),o=0|c[e-2],s=0|u[e-2],d=i.Ay.rotrSH(o,s,19)^i.Ay.rotrBH(o,s,61)^i.Ay.shrSH(o,s,6),l=i.Ay.rotrSL(o,s,19)^i.Ay.rotrBL(o,s,61)^i.Ay.shrSL(o,s,6),p=i.Ay.add4L(a,l,u[e-7],u[e-16]),f=i.Ay.add4H(p,n,d,c[e-7],c[e-16]);c[e]=0|f,u[e]=0|p}let{Ah:r,Al:n,Bh:a,Bl:d,Ch:l,Cl:p,Dh:f,Dl:h,Eh:y,El:g,Fh:w,Fl:b,Gh:v,Gl:A,Hh:m,Hl:k}=this;for(let e=0;e<80;e++){const t=i.Ay.rotrSH(y,g,14)^i.Ay.rotrSH(y,g,18)^i.Ay.rotrBH(y,g,41),x=i.Ay.rotrSL(y,g,14)^i.Ay.rotrSL(y,g,18)^i.Ay.rotrBL(y,g,41),T=y&w^~y&v,I=g&b^~g&A,S=i.Ay.add5L(k,x,I,s[e],u[e]),P=i.Ay.add5H(S,m,t,T,o[e],c[e]),C=0|S,B=i.Ay.rotrSH(r,n,28)^i.Ay.rotrBH(r,n,34)^i.Ay.rotrBH(r,n,39),K=i.Ay.rotrSL(r,n,28)^i.Ay.rotrBL(r,n,34)^i.Ay.rotrBL(r,n,39),E=r&a^r&l^a&l,O=n&d^n&p^d&p;m=0|v,k=0|A,v=0|w,A=0|b,w=0|y,b=0|g,({h:y,l:g}=i.Ay.add(0|f,0|h,0|P,0|C)),f=0|l,h=0|p,l=0|a,p=0|d,a=0|r,d=0|n;const N=i.Ay.add3L(C,K,O);r=i.Ay.add3H(N,P,B,E),n=0|N}({h:r,l:n}=i.Ay.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:a,l:d}=i.Ay.add(0|this.Bh,0|this.Bl,0|a,0|d)),({h:l,l:p}=i.Ay.add(0|this.Ch,0|this.Cl,0|l,0|p)),({h:f,l:h}=i.Ay.add(0|this.Dh,0|this.Dl,0|f,0|h)),({h:y,l:g}=i.Ay.add(0|this.Eh,0|this.El,0|y,0|g)),({h:w,l:b}=i.Ay.add(0|this.Fh,0|this.Fl,0|w,0|b)),({h:v,l:A}=i.Ay.add(0|this.Gh,0|this.Gl,0|v,0|A)),({h:m,l:k}=i.Ay.add(0|this.Hh,0|this.Hl,0|m,0|k)),this.set(r,n,a,d,l,p,f,h,y,g,w,b,v,A,m,k)}roundClean(){c.fill(0),u.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const d=(0,a.ld)((()=>new SHA512))}}]);
//# sourceMappingURL=58462.c8993e19ec.chunk.js.map