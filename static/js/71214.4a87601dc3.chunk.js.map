{"version":3,"file":"static/js/71214.4a87601dc3.chunk.js","mappings":"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","sources":["webpack://web/../../packages/kit/src/views/AppUpdate/components/ViewUpdateHistory.tsx","webpack://web/../../packages/kit/src/views/AppUpdate/components/UpdatePreviewActionButton/index.tsx","webpack://web/../../packages/kit/src/views/AppUpdate/pages/UpdatePreview.tsx"],"sourcesContent":["import{useCallback}from'react';import{useIntl}from'react-intl';import{Button,XStack}from'@onekeyhq/components';import{ETranslations}from'@onekeyhq/shared/src/locale';import{openUrlExternal}from'@onekeyhq/shared/src/utils/openUrlUtils';import{jsx as _jsx}from\"react/jsx-runtime\";export function ViewUpdateHistory(){var intl=useIntl();var handlePress=useCallback(function(){openUrlExternal('https://github.com/OneKeyHQ/app-monorepo/releases');},[]);return _jsx(XStack,{\"data-sentry-element\":\"XStack\",\"data-sentry-component\":\"ViewUpdateHistory\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/components/ViewUpdateHistory.tsx\",children:_jsx(Button,{mt:\"$5\",iconAfter:\"ArrowTopRightOutline\",onPress:handlePress,size:\"small\",\"data-sentry-element\":\"Button\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/components/ViewUpdateHistory.tsx\",children:intl.formatMessage({id:ETranslations.update_update_history})})});}","import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import{useCallback}from'react';import{useIntl}from'react-intl';import{Page,Toast,YStack}from'@onekeyhq/components';import{useAppUpdateInfo,useDownloadPackage}from'@onekeyhq/kit/src/components/UpdateReminder/hooks';import{EAppUpdateStatus}from'@onekeyhq/shared/src/appUpdate';import{ETranslations}from'@onekeyhq/shared/src/locale';import{installPackage,useDownloadProgress}from'@onekeyhq/shared/src/modules3rdParty/auto-update';import{openUrlExternal}from'@onekeyhq/shared/src/utils/openUrlUtils';import{jsx as _jsx}from\"react/jsx-runtime\";export var UpdatePreviewActionButton=function({autoClose}){var intl=useIntl();var appUpdateInfo=useAppUpdateInfo();var downloadPackage=useDownloadPackage();var downloadSuccess=useCallback(function(){},[]);var downloadFailed=useCallback(function(){},[]);var progress=useDownloadProgress(downloadSuccess,downloadFailed);var handleToUpdate=useCallback(function(close){if(appUpdateInfo.data){if(appUpdateInfo.data.storeUrl){openUrlExternal(appUpdateInfo.data.storeUrl);}else if(appUpdateInfo.data.downloadUrl){void downloadPackage(appUpdateInfo.data);if(autoClose){close();}}}},[appUpdateInfo.data,autoClose,downloadPackage]);var handleToInstall=useCallback(_asyncToGenerator(function*(){try{yield installPackage(appUpdateInfo.data);}catch(error){var{message}=error;if(message){Toast.error({title:message});}}}),[appUpdateInfo.data]);var isDisabledButton=[EAppUpdateStatus.downloading,EAppUpdateStatus.verifying].includes(appUpdateInfo.data?.status);var isReadyToInstall=EAppUpdateStatus.ready===appUpdateInfo.data?.status;var renderButtonText=useCallback(function(){switch(appUpdateInfo.data?.status){case EAppUpdateStatus.downloading:{return intl.formatMessage({id:ETranslations.update_progress_downloading},{progress});}case EAppUpdateStatus.verifying:{return intl.formatMessage({id:ETranslations.update_verifying});}default:{return intl.formatMessage({id:ETranslations.update_update_now});}}},[appUpdateInfo.data?.status,intl,progress]);return _jsx(Page.Footer,{\"data-sentry-element\":\"unknown\",\"data-sentry-component\":\"UpdatePreviewActionButton\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/components/UpdatePreviewActionButton/index.tsx\",children:_jsx(YStack,{\"data-sentry-element\":\"YStack\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/components/UpdatePreviewActionButton/index.tsx\",children:_jsx(Page.FooterActions,{confirmButtonProps:{disabled:isDisabledButton,loading:isDisabledButton},onConfirmText:renderButtonText(),onConfirm:isReadyToInstall?handleToInstall:handleToUpdate,\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/components/UpdatePreviewActionButton/index.tsx\"})})});};","import{UNSTABLE_usePreventRemove as usePreventRemove}from'@react-navigation/core';import{useIntl}from'react-intl';import{Badge,Heading,Icon,Markdown,Page,ScrollView,SizableText,XStack,YStack}from'@onekeyhq/components';import{ETranslations}from'@onekeyhq/shared/src/locale';import platformEnv from'@onekeyhq/shared/src/platformEnv';import{useAppChangeLog}from\"../../../components/UpdateReminder/hooks\";import{UpdatePreviewActionButton}from\"../components/UpdatePreviewActionButton\";import{ViewUpdateHistory}from\"../components/ViewUpdateHistory\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ExtPluginText=false?function(){var intl=useIntl();return _jsx(SizableText,{size:\"$bodyMd\",color:\"$textSubdued\",children:intl.formatMessage({id:ETranslations.update_recommend_regular_check_and_update_plugin})});}:function(){return null;};function UpdatePreview({route}){var intl=useIntl();var{latestVersion,isForceUpdate,autoClose=false}=route.params||{};usePreventRemove(!!isForceUpdate,function(){});var changeLog=useAppChangeLog(latestVersion);return _jsxs(Page,{\"data-sentry-element\":\"Page\",\"data-sentry-component\":\"UpdatePreview\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/pages/UpdatePreview.tsx\",children:[_jsx(Page.Header,{title:intl.formatMessage({id:ETranslations.update_app_update}),\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/pages/UpdatePreview.tsx\"}),_jsxs(Page.Body,{m:\"$5\",\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/pages/UpdatePreview.tsx\",children:[_jsxs(YStack,{gap:\"$3\",\"data-sentry-element\":\"YStack\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/pages/UpdatePreview.tsx\",children:[_jsx(Heading,{size:\"$heading2xl\",\"data-sentry-element\":\"Heading\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/pages/UpdatePreview.tsx\",children:intl.formatMessage({id:ETranslations.update_new_app_version})}),_jsx(ExtPluginText,{\"data-sentry-element\":\"ExtPluginText\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/pages/UpdatePreview.tsx\"}),_jsxs(XStack,{gap:\"$2.5\",alignItems:\"center\",\"data-sentry-element\":\"XStack\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/pages/UpdatePreview.tsx\",children:[_jsx(Badge,{badgeType:\"default\",badgeSize:\"lg\",\"data-sentry-element\":\"Badge\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/pages/UpdatePreview.tsx\",children:platformEnv.version}),_jsx(Icon,{name:\"ArrowRightSolid\",size:\"$4\",\"data-sentry-element\":\"Icon\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/pages/UpdatePreview.tsx\"}),_jsx(Badge,{badgeType:\"info\",badgeSize:\"lg\",\"data-sentry-element\":\"Badge\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/pages/UpdatePreview.tsx\",children:latestVersion})]})]}),changeLog?_jsxs(ScrollView,{mt:\"$7\",contentInsetAdjustmentBehavior:\"automatic\",contentContainerStyle:{pb:'$5'},children:[_jsx(Markdown,{children:changeLog}),_jsx(ViewUpdateHistory,{})]}):null]}),_jsx(UpdatePreviewActionButton,{autoClose:autoClose,\"data-sentry-element\":\"UpdatePreviewActionButton\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AppUpdate/pages/UpdatePreview.tsx\"})]});}export default UpdatePreview;"],"names":["ViewUpdateHistory","intl","handlePress","useCallback","XStack","children","Button","mt","iconAfter","onPress","size","formatMessage","id","ETranslations","update_update_history","UpdatePreviewActionButton","autoClose","useIntl","appUpdateInfo","downloadPackage","downloadSuccess","downloadFailed","progress","handleToUpdate","close","data","storeUrl","downloadUrl","handleToInstall","error","message","Toast","title","isDisabledButton","downloading","verifying","includes","status","isReadyToInstall","ready","renderButtonText","update_progress_downloading","update_verifying","update_update_now","Page","Footer","YStack","FooterActions","confirmButtonProps","disabled","loading","onConfirmText","onConfirm","ExtPluginText","UpdatePreview","route","latestVersion","isForceUpdate","params","changeLog","Header","update_app_update","Body","m","gap","Heading","update_new_app_version","alignItems","Badge","badgeType","badgeSize","platformEnv","version","Icon","name","ScrollView","contentInsetAdjustmentBehavior","contentContainerStyle","pb","Markdown"],"sourceRoot":""}