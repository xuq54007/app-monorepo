!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9519ae0a-4bcb-4d4a-96d6-4827cadd1dad",e._sentryDebugIdIdentifier="sentry-dbid-9519ae0a-4bcb-4d4a-96d6-4827cadd1dad")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[45222],{326745:(e,t,n)=>{n.d(t,{u:()=>useAppRoute});var a=n(654266);function useAppRoute(){return(0,a.lq)()}},892563:(e,t,n)=>{n.d(t,{Y:()=>ActionBase});var a=n(324586),r=n(586330),o=n(839850),s=n(514041),i=n(490343),c=n(643087),l=n(398509),d=n(181447),u=(n(663522),n(117746)),p=n(69531),m=n(831085),k=["networkId","tokenAddress","type","label","icon","accountId","walletType","disabled","hiddenIfDisabled"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ActionBase=function(e){var{networkId:t,tokenAddress:n,type:a,label:f,icon:y,accountId:b,walletType:g,disabled:S,hiddenIfDisabled:w}=e,x=(0,o.A)(e,k),[h,v]=(0,s.useState)(!1),{result:j}=(0,p.M7)(t,n,a),T=(0,s.useMemo)((function(){return g===d.Hk||!j}),[j,g]),_=(0,s.useCallback)((0,r.A)((function*(){v(!0);try{var{url:e}=yield c.A.serviceFiatCrypto.generateWidgetUrl({networkId:t,tokenAddress:n,accountId:b,type:a});if(!e)return void i.Toast.error({title:"Failed to get widget url"});(0,u.Dr)(e)}finally{v(!1)}})),[t,n,a,b]);return w&&T?null:(0,m.jsx)(l.A,_objectSpread(_objectSpread({loading:h,label:f,icon:y,disabled:S||T,onPress:_},x),{},{"data-sentry-element":"ActionItem","data-sentry-component":"ActionBase","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AssetDetails/pages/TokenDetails/ActionBase.tsx"}))}},484910:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(324586),r=n(839850),o=n(908867),s=n(564452),i=n(334439),c=n(892563),l=n(831085),d=["networkId","tokenAddress","accountId","walletType"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=(0,s.k)((function(e){var{networkId:t,tokenAddress:n,accountId:a,walletType:s}=e,u=(0,r.A)(e,d),p=(0,o.A)();return(0,l.jsx)(c.Y,_objectSpread(_objectSpread({networkId:t,tokenAddress:n,accountId:a,label:p.formatMessage({id:i.ETranslations.global_buy}),icon:"PlusLargeOutline",type:"buy",walletType:s},u),{},{"data-sentry-element":"ActionBase","data-sentry-component":"ActionBuy","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AssetDetails/pages/TokenDetails/ActionBuy.tsx"}))}))},69531:(e,t,n)=>{n.d(t,{M7:()=>useSupportToken,TH:()=>useFiatCrypto,ej:()=>useGetTokensList});var a=n(586330),r=n(514041),o=n(498356),s=n(384013),i=n(193068),c=n(553083),l=n(643087),d=n(911998),useSupportNetworkId=function(e,t){return(0,d.yk)((0,a.A)((function*(){return!!t&&(!!c.Ay.isAllNetwork({networkId:t})||l.A.serviceFiatCrypto.isNetworkSupported({networkId:t,type:e}))})),[t,e],{initResult:!1,debounced:100})},useSupportToken=function(e,t,n){return(0,d.yk)((0,a.A)((function*(){return l.A.serviceFiatCrypto.isTokenSupported({networkId:e,tokenAddress:t,type:n})})),[e,t,n],{initResult:!1,debounced:100})},useGetTokensList=function({networkId:e,type:t,accountId:n}){return(0,d.yk)((0,a.A)((function*(){return yield l.A.serviceFiatCrypto.getTokensList({networkId:e,type:t,accountId:n})})),[e,t,n],{initResult:[],watchLoading:!0})};function useFiatCrypto({accountId:e,networkId:t,fiatCryptoType:n}){var{result:a}=useSupportNetworkId(n,t),[c]=(0,s.RI)(),[l]=(0,s.D4)(),d=(0,o.A)();return{handleFiatCrypto:(0,r.useCallback)((function(){d.pushModal(i.ry.FiatCryptoModal,{screen:"buy"===n?i.Mg.BuyModal:i.Mg.SellModal,params:{networkId:t,accountId:e,tokens:c.tokens,map:l}})}),[e,d,t,c,l,n]),isSupported:Boolean(t&&e&&a)}}},398509:(e,t,n)=>{n.d(t,{A:()=>ActionItem,c:()=>RawActions});var a=n(324586),r=n(839850),o=n(514041),s=n(908867),i=n(490343),c=n(334439),l=n(831085),d=["icon","label","verticalContainerProps","showButtonStyle"],u=["children"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ActionItem(e){var{icon:t="PlaceholderOutline",label:n,verticalContainerProps:a,showButtonStyle:o=!1}=e,s=(0,r.A)(e,d),c=(0,i.useMedia)();return o||c.gtSm?(0,l.jsx)(i.Button,_objectSpread(_objectSpread(_objectSpread({},!n&&{icon:t,py:"$2",pl:"$2.5",pr:"$0.5"}),s),{},{children:n})):(0,l.jsxs)(i.Stack,_objectSpread(_objectSpread({alignItems:"center",maxWidth:50},a),{},{"data-sentry-element":"Stack","data-sentry-component":"ActionItem","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/components/WalletActions/RawActions.tsx",children:[(0,l.jsx)(i.IconButton,_objectSpread(_objectSpread({size:"large",icon:t},s),{},{"data-sentry-element":"IconButton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/components/WalletActions/RawActions.tsx"})),(0,l.jsx)(i.SizableText,{mt:"$2",textAlign:"center",size:"$bodySm",color:"$textSubdued",minWidth:"$20",numberOfLines:1,"data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/components/WalletActions/RawActions.tsx",children:n})]}))}function RawActions(e){var{children:t}=e,n=(0,r.A)(e,u);return(0,l.jsx)(i.XStack,_objectSpread(_objectSpread({justifyContent:"space-between",$gtSm:{flexDirection:"row",justifyContent:"flex-start",gap:"$2"}},n),{},{"data-sentry-element":"XStack","data-sentry-component":"RawActions","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/components/WalletActions/RawActions.tsx",children:o.Children.toArray(t)}))}RawActions.More=function ActionMore({sections:e}){var t=(0,s.A)(),n=(0,i.useMedia)();return(0,l.jsx)(i.ActionList,{title:t.formatMessage({id:c.ETranslations.global_more}),floatingPanelProps:{w:"$60"},renderTrigger:(0,l.jsx)(ActionItem,_objectSpread({icon:"DotHorOutline"},n.sm&&{label:t.formatMessage({id:c.ETranslations.global_more})})),sections:e,"data-sentry-element":"ActionList","data-sentry-component":"ActionMore","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/components/WalletActions/RawActions.tsx"})},RawActions.Buy=function ActionBuy(e){var t=(0,s.A)();return(0,l.jsx)(ActionItem,_objectSpread(_objectSpread({label:t.formatMessage({id:c.ETranslations.global_buy}),icon:"PlusLargeOutline"},e),{},{"data-sentry-element":"ActionItem","data-sentry-component":"ActionBuy","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/components/WalletActions/RawActions.tsx"}))},RawActions.Sell=function ActionSell(e){var t=(0,s.A)();return(0,l.jsx)(ActionItem,_objectSpread(_objectSpread({label:t.formatMessage({id:c.ETranslations.global_cash_out}),icon:"MinusLargeOutline"},e),{},{"data-sentry-element":"ActionItem","data-sentry-component":"ActionSell","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/components/WalletActions/RawActions.tsx"}))},RawActions.Send=function ActionSend(e){var t=(0,s.A)();return(0,l.jsx)(ActionItem,_objectSpread(_objectSpread({label:t.formatMessage({id:c.ETranslations.global_send}),icon:"ArrowTopOutline"},e),{},{"data-sentry-element":"ActionItem","data-sentry-component":"ActionSend","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/components/WalletActions/RawActions.tsx"}))},RawActions.Receive=function ActionReceive(e){var t=(0,s.A)();return(0,l.jsx)(ActionItem,_objectSpread(_objectSpread({label:t.formatMessage({id:c.ETranslations.global_receive}),icon:"ArrowBottomOutline"},e),{},{"data-sentry-element":"ActionItem","data-sentry-component":"ActionReceive","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/components/WalletActions/RawActions.tsx"}))},RawActions.Swap=function ActionSwap(e){var t=(0,s.A)();return(0,l.jsx)(ActionItem,_objectSpread(_objectSpread({label:t.formatMessage({id:c.ETranslations.global_swap}),icon:"SwitchHorOutline"},e),{},{"data-sentry-element":"ActionItem","data-sentry-component":"ActionSwap","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/components/WalletActions/RawActions.tsx"}))},RawActions.Bridge=function ActionBridge(e){var t=(0,s.A)();return(0,l.jsx)(ActionItem,_objectSpread(_objectSpread({label:t.formatMessage({id:c.ETranslations.swap_page_bridge}),icon:"BridgeOutline"},e),{},{"data-sentry-element":"ActionItem","data-sentry-component":"ActionBridge","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/components/WalletActions/RawActions.tsx"}))}},925771:(e,t,n)=>{n.d(t,{$:()=>CalculationListItem,k:()=>CalculationList});var a=n(324586),r=n(839850),o=n(490343),s=n(831085),i=["children"],c=["children","tooltip"],l=["children"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CalculationList({children:e}){return(0,s.jsx)(o.YStack,{gap:"$4","data-sentry-element":"YStack","data-sentry-component":"CalculationList","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/CalculationList/index.tsx",children:e})}function CalculationListItem(e){var{children:t}=e,n=(0,r.A)(e,i);return(0,s.jsx)(o.XStack,_objectSpread(_objectSpread({animation:"quick",enterStyle:{opacity:0},justifyContent:"space-between",alignItems:"center"},n),{},{"data-sentry-element":"XStack","data-sentry-component":"CalculationListItem","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/CalculationList/index.tsx",children:t}))}CalculationList.Item=CalculationListItem,CalculationListItem.Label=function CalculationListItemLabel(e){var{children:t,tooltip:n}=e,a=(0,r.A)(e,c),i=(0,s.jsx)(o.SizableText,_objectSpread(_objectSpread({color:"$textSubdued"},a),{},{children:t}));return n?(0,s.jsxs)(o.XStack,{gap:"$1",ai:"center",children:[i,(0,s.jsx)(o.Popover.Tooltip,{iconSize:"$5",title:t,tooltip:n,placement:"top"})]}):i},CalculationListItem.Value=function CalculationListItemValue(e){var{children:t}=e,n=(0,r.A)(e,l);return(0,s.jsx)(o.SizableText,_objectSpread(_objectSpread({size:"$bodyLgMedium"},n),{},{"data-sentry-element":"SizableText","data-sentry-component":"CalculationListItemValue","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/CalculationList/index.tsx",children:t}))}},713989:(e,t,n)=>{n.d(t,{G:()=>StakeShouldUnderstand,a:()=>WithdrawShouldUnderstand});var a=n(908867),r=n(490343),o=n(334439),s=n(831085),ShouldUnderstandListItemListItem=function({title:e,description:t,index:n}){return(0,s.jsxs)(r.YStack,{"data-sentry-element":"YStack","data-sentry-component":"ShouldUnderstandListItemListItem","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/EarnShouldUnderstand/index.tsx",children:[(0,s.jsxs)(r.XStack,{"data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/EarnShouldUnderstand/index.tsx",children:[(0,s.jsx)(r.Stack,{w:"$5","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/EarnShouldUnderstand/index.tsx",children:(0,s.jsxs)(r.SizableText,{"data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/EarnShouldUnderstand/index.tsx",children:[n,"."]})}),(0,s.jsx)(r.Stack,{flex:1,"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/EarnShouldUnderstand/index.tsx",children:(0,s.jsx)(r.SizableText,{"data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/EarnShouldUnderstand/index.tsx",children:e})})]}),t?(0,s.jsx)(r.XStack,{pl:"$5",children:(0,s.jsx)(r.SizableText,{children:t})}):null]})},ShouldUnderstand=function({items:e}){return(0,s.jsx)(r.YStack,{flex:1,"data-sentry-element":"YStack","data-sentry-component":"ShouldUnderstand","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/EarnShouldUnderstand/index.tsx",children:(0,s.jsx)(r.ScrollView,{maxHeight:560,"data-sentry-element":"ScrollView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/EarnShouldUnderstand/index.tsx",children:(0,s.jsx)(r.YStack,{gap:"$5","data-sentry-element":"YStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/EarnShouldUnderstand/index.tsx",children:e.map((function(e,t){return(0,s.jsx)(ShouldUnderstandListItemListItem,{index:t+1,title:e.title,description:e.description},t)}))})})})},createTypography=function(e,t){return t?e:""},StakeShouldUnderstand=function({provider:e,symbol:t,apr:n,updateFrequency:i,receiveSymbol:c,unstakingPeriod:l}){var d=(0,a.A)(),u=[];return u="everstake"===e&&["sol","eth","apt"].includes(t)?[createTypography(d.formatMessage({id:o.ETranslations.earn_earn_up_to_number_per_year},{number:(0,s.jsxs)(r.SizableText,{color:"$textSuccess",children:[n,"%"]})}),n),createTypography(d.formatMessage({id:o.ETranslations.earn_rewards_updated_around_time},{time:(0,s.jsx)(r.SizableText,{color:"$textSuccess",children:i})}),i),createTypography(d.formatMessage({id:o.ETranslations.earn_rewards_automatically_restaked},{automatically:(0,s.jsx)(r.SizableText,{color:"$textSuccess",children:d.formatMessage({id:o.ETranslations.earn_automatically})})}),!0),createTypography(d.formatMessage({id:o.ETranslations.earn_withdrawal_up_to_number_days},{number:l}),l)]:"everstake"===e&&["atom","matic"].includes(t)?[createTypography(d.formatMessage({id:o.ETranslations.earn_earn_up_to_number_per_year},{number:(0,s.jsxs)(r.SizableText,{color:"$textSuccess",children:[n,"%"]})}),{number:n}),createTypography(d.formatMessage({id:o.ETranslations.earn_rewards_updated_around_time},{time:(0,s.jsx)(r.SizableText,{color:"$textSuccess",children:i})}),i),createTypography(d.formatMessage({id:o.ETranslations.earn_rewards_manually_restaked},{manually:(0,s.jsx)(r.SizableText,{color:"$textSuccess",children:d.formatMessage({id:o.ETranslations.earn_manually})})}),!0),createTypography(d.formatMessage({id:o.ETranslations.earn_withdrawal_up_to_number_days},{number:l}),l)]:"lido"===e&&["eth","matic"].includes(t)?[createTypography(d.formatMessage({id:o.ETranslations.earn_earn_up_to_number_per_year},{number:(0,s.jsxs)(r.SizableText,{color:"$textSuccess",children:[n,"%"]})}),n),createTypography(d.formatMessage({id:o.ETranslations.earn_receive_token_trade_anytime},{token:(0,s.jsx)(r.SizableText,{color:"$textSuccess",children:c})}),c),createTypography(d.formatMessage({id:o.ETranslations.earn_rewards_updated_around_time},{time:(0,s.jsx)(r.SizableText,{color:"$textSuccess",children:i})}),i),createTypography(d.formatMessage({id:o.ETranslations.earn_rewards_automatically_restaked},{automatically:(0,s.jsx)(r.SizableText,{color:"$textSuccess",children:d.formatMessage({id:o.ETranslations.earn_automatically})})}),!0),createTypography(d.formatMessage({id:o.ETranslations.earn_withdrawal_up_to_number_days},{number:l}),l)]:"babylon"===e?[d.formatMessage({id:o.ETranslations.earn_stake_through_onekey_earn_points}),d.formatMessage({id:o.ETranslations.earn_check_staking_results_overflow}),createTypography(d.formatMessage({id:o.ETranslations.earn_early_withdraw_stake_unstaking_period},{number:l}),l)]:[createTypography(d.formatMessage({id:o.ETranslations.earn_earn_up_to_number_per_year},{number:(0,s.jsx)(r.SizableText,{color:"$textSuccess",children:null!=n?n:4})}),!0)],(0,s.jsx)(ShouldUnderstand,{items:u.filter((function(e){return!!e})).map((function(e){return{title:e}})),"data-sentry-element":"ShouldUnderstand","data-sentry-component":"StakeShouldUnderstand","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/EarnShouldUnderstand/index.tsx"})},WithdrawShouldUnderstand=function({withdrawalPeriod:e}){var t=(0,a.A)();return(0,s.jsx)(ShouldUnderstand,{items:[{title:t.formatMessage({id:o.ETranslations.earn_withdrawal_take_up_to_number_days},{number:e})},{title:t.formatMessage({id:o.ETranslations.earn_claim_assets_after_processing})}],"data-sentry-element":"ShouldUnderstand","data-sentry-component":"WithdrawShouldUnderstand","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/EarnShouldUnderstand/index.tsx"})}},286192:(e,t,n)=>{n.d(t,{BA:()=>EstimateNetworkFee,QL:()=>useShowClaimEstimateGasAlert,fH:()=>calcDaysSpent,sM:()=>useShowStakeEstimateGasAlert});var a=n(514041),r=n(241440),o=n(908867),s=n(490343),i=n(471169),c=n(334439),l=n(925771),d=n(831085),useShowStakeEstimateGasAlert=function(){var e=(0,o.A)(),[{currencyInfo:{symbol:t}}]=(0,i.useSettingsPersistAtom)();return(0,a.useCallback)((function({daysConsumed:n,estFiatValue:a,onConfirm:r}){var o=n?e.formatMessage({id:c.ETranslations.earn_transaction_loss_when_stake},{number:(0,d.jsx)(s.SizableText,{size:"$bodyLgMedium",color:"$textCaution",children:n})}):void 0;s.Dialog.show({title:e.formatMessage({id:c.ETranslations.earn_transaction_loss}),icon:"InfoCircleOutline",description:o,renderContent:(0,d.jsxs)(s.XStack,{children:[(0,d.jsxs)(s.SizableText,{size:"$bodyLg",mr:"$1",children:[e.formatMessage({id:c.ETranslations.global_est_network_fee}),":"]}),(0,d.jsx)(s.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",formatterOptions:{currency:t},children:a})]}),onConfirm:r})}),[e,t])},useShowClaimEstimateGasAlert=function(){var e=(0,o.A)(),[{currencyInfo:{symbol:t}}]=(0,i.useSettingsPersistAtom)();return(0,a.useCallback)((function({claimTokenFiatValue:n,estFiatValue:a,onConfirm:o}){var i=(0,r.A)(n).minus(a).absoluteValue().toFixed(),l=e.formatMessage({id:c.ETranslations.earn_transaction_loss_when_claim},{number:(0,d.jsx)(s.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",color:"$textCaution",formatterOptions:{currency:t},children:i})});s.Dialog.show({title:e.formatMessage({id:c.ETranslations.earn_transaction_loss}),icon:"InfoCircleOutline",description:l,renderContent:(0,d.jsxs)(s.YStack,{children:[(0,d.jsxs)(s.XStack,{children:[(0,d.jsxs)(s.SizableText,{size:"$bodyLg",mr:"$1",children:[e.formatMessage({id:c.ETranslations.global_est_network_fee}),":"]}),(0,d.jsx)(s.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",formatterOptions:{currency:t},children:a})]}),(0,d.jsxs)(s.XStack,{children:[(0,d.jsxs)(s.SizableText,{size:"$bodyLg",mr:"$1",children:[e.formatMessage({id:c.ETranslations.earn_reward_value}),":"]}),(0,d.jsx)(s.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",formatterOptions:{currency:t},children:n})]})]}),onConfirm:o})}),[e,t])},EstimateNetworkFeeListItem=function({estFiatValue:e,onPress:t}){var n=(0,o.A)(),[{currencyInfo:{symbol:a}}]=(0,i.useSettingsPersistAtom)();return Number(e)>0?(0,d.jsxs)(l.$,{onPress:t,children:[(0,d.jsx)(l.$.Label,{children:n.formatMessage({id:c.ETranslations.global_est_network_fee})}),(0,d.jsxs)(s.XStack,{alignItems:"center",cursor:t?"pointer":void 0,mr:t?-6:void 0,children:[(0,d.jsx)(s.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",formatterOptions:{currency:a},children:e}),t?(0,d.jsx)(s.Icon,{name:"ChevronRightSmallOutline",size:24}):null]})]}):null},calcDaysSpent=function(e,t){var n=(0,r.A)(t).div(e).multipliedBy(365);return n.isNaN()?void 0:Math.ceil(n.toNumber())},EstimateNetworkFee=function({estimateFeeResp:e,onPress:t,isVisible:n}){return e&&n?(0,d.jsx)(EstimateNetworkFeeListItem,{estFiatValue:e.feeFiatValue,onPress:t}):null}},87474:(e,t,n)=>{n.d(t,{A:()=>StakingFormWrapper});var a=n(324586),r=n(839850),o=n(490343),s=n(831085),i=["children"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function StakingFormWrapper(e){var{children:t}=e,n=(0,r.A)(e,i);return(0,s.jsx)(o.YStack,_objectSpread(_objectSpread({p:"$5",gap:"$5"},n),{},{"data-sentry-element":"YStack","data-sentry-component":"StakingFormWrapper","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/StakingFormWrapper/index.tsx",children:t}))}},295786:(e,t,n)=>{n.d(t,{O:()=>TradeOrBuy});var a=n(324586),r=n(586330),o=n(514041),s=n(908867),i=n(17617),c=n(490343),l=n(625931),d=n(334439),u=n(180706),p=n(628380),m=n(317192),k=n(643087),f=n(498356),y=n(162616),b=n(484910),g=n(208257),S=n(831085);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BasicTradeOrBuy({token:e,accountId:t,networkId:n}){var{activeAccount:{wallet:a}}=(0,y.LH)({num:0}),g=(0,l.V)(),w=(0,s.A)(),x=(0,f.A)(),h=(0,o.useCallback)((0,r.A)((function*(){var{isSupportSwap:t}=yield k.A.serviceSwap.checkSupportSwap({networkId:n,contractAddress:e.address}),a=yield k.A.serviceNetwork.getNetwork({networkId:n}),{importFromToken:r,swapTabSwitchType:o}=(0,m.J)({networkId:n,isSupportSwap:t,tokenSymbol:e.symbol});x.pushModal(u.r.SwapModal,{screen:p.u.SwapMainLand,params:{importToToken:_objectSpread(_objectSpread({},e),{},{contractAddress:e.address,networkId:n,networkLogoURI:a.logoURI}),importFromToken:r,swapTabSwitchType:o}})})),[x,n,e]);return n===g.cosmoshub?null:(0,S.jsxs)(c.XStack,{borderTopColor:"$borderSubdued",borderTopWidth:i.A.hairlineWidth,ai:"center",jc:"space-between",py:"$5","data-sentry-element":"XStack","data-sentry-component":"BasicTradeOrBuy","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/TradeOrBuy.tsx",children:[(0,S.jsx)(c.SizableText,{size:"$bodyLg",color:"$textSubdued","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/TradeOrBuy.tsx",children:w.formatMessage({id:d.ETranslations.earn_not_enough_token},{token:e.symbol.toUpperCase()})}),(0,S.jsxs)(c.XStack,{gap:"$2","data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/TradeOrBuy.tsx",children:[(0,S.jsx)(c.Button,{size:"small",onPress:h,"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/TradeOrBuy.tsx",children:w.formatMessage({id:d.ETranslations.global_trade})}),(0,S.jsx)(b.A,{hiddenIfDisabled:!0,showButtonStyle:!0,size:"small",networkId:n,accountId:t,walletType:a?.type,tokenAddress:e.address,"data-sentry-element":"ActionBuy","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/TradeOrBuy.tsx"})]})]})}function TradeOrBuy({token:e,accountId:t,networkId:n}){return(0,S.jsx)(g.p,{"data-sentry-element":"HomeTokenListProviderMirror","data-sentry-component":"TradeOrBuy","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/TradeOrBuy.tsx",children:(0,S.jsx)(BasicTradeOrBuy,{token:e,accountId:t,networkId:n,"data-sentry-element":"BasicTradeOrBuy","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/TradeOrBuy.tsx"})})}},939799:(e,t,n)=>{n.d(t,{A:()=>ValuePriceListItem});var a=n(490343),r=n(831085),ValuePriceListItem=function({amount:e,tokenSymbol:t,fiatSymbol:n,fiatValue:o}){return(0,r.jsxs)(a.XStack,{gap:"$1",maxWidth:"$56",justifyContent:"flex-end",flexWrap:"wrap","data-sentry-element":"XStack","data-sentry-component":"ValuePriceListItem","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/ValuePriceListItem/index.tsx",children:[(0,r.jsx)(a.XStack,{"data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/ValuePriceListItem/index.tsx",children:(0,r.jsx)(a.NumberSizeableText,{size:"$bodyLgMedium",formatter:"balance",formatterOptions:{tokenSymbol:t},"data-sentry-element":"NumberSizeableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/ValuePriceListItem/index.tsx",children:e})}),(0,r.jsx)(a.XStack,{maxWidth:"$56","data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/ValuePriceListItem/index.tsx",children:o?(0,r.jsxs)(a.SizableText,{children:["(",(0,r.jsx)(a.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",formatterOptions:{currency:n},children:o}),")"]}):null})]})}},812566:(e,t,n)=>{n.d(t,{Q:()=>formatStakingDistanceToNowStrict});var a=n(567807),r=82800,o=86400;function formatStakingDistanceToNowStrict(e){var t=Number(e);if(!(Number.isNaN(t)||t<=0)){var n=t>r&&t<o?o:t;return(0,a.Bo)(Date.now()+1e3*n,{addSuffix:!1})}}},90393:(e,t,n)=>{n.d(t,{Z:()=>useProviderLabel});var a=n(908867),r=n(334439),useProviderLabel=function(e){var t=(0,a.A)(),n=t.formatMessage({id:r.ETranslations.global_protocol});return"everstake"===e.toLowerCase()?n=t.formatMessage({id:r.ETranslations.earn_validator}):"babylogn"===e.toLowerCase()&&(n=t.formatMessage({id:r.ETranslations.earn_finality_provider})),n}},653913:(e,t,n)=>{n.d(t,{B8:()=>useUniversalStake,D0:()=>useUniversalClaim,Pg:()=>useUniversalWithdraw});var a=n(586330),r=n(324586),o=n(514041),s=n(241440),i=n(643087),c=n(927799),l=n(553083),d=n(161024),u=n(286192);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p,createStakeInfoWithOrderId=function({stakingInfo:e,orderId:t}){return _objectSpread(_objectSpread({},e),{},{orderId:t})},m=(p=(0,a.A)((function*({data:e,stakeInfo:t,networkId:n,onSuccess:a}){Array.isArray(e)&&1===e.length&&e[0].signedTx?.txid&&t.orderId&&(yield i.A.serviceStaking.addEarnOrder({orderId:t.orderId,networkId:n,txId:e[0].signedTx.txid,status:e[0].decodedTx.status})),a?.(e)})),function handleStakeSuccess(e){return p.apply(this,arguments)});function useUniversalStake({networkId:e,accountId:t}){var n,{navigationToSendConfirm:r}=(0,c.E)({accountId:t,networkId:e});return(0,o.useCallback)((n=(0,a.A)((function*({amount:n,symbol:o,term:s,feeRate:c,provider:d,stakingInfo:u,onSuccess:p,onFail:k}){var f,y,b=yield i.A.serviceStaking.buildStakeTransaction({amount:n,networkId:e,accountId:t,symbol:o,term:s,provider:d,feeRate:c}),g=yield i.A.serviceStaking.buildEarnTx({networkId:e,accountId:t,tx:b.tx});l.Ay.isBTCNetwork(e)&&g.fee&&(f=!0,y=!1);var S,w=createStakeInfoWithOrderId({stakingInfo:u,orderId:b.orderId});yield r({encodedTx:g,stakingInfo:w,onSuccess:(S=(0,a.A)((function*(t){yield m({data:t,stakeInfo:w,networkId:e,onSuccess:p})})),function onSuccess(e){return S.apply(this,arguments)}),onFail:k,useFeeInTx:f,feeInfoEditable:y})})),function(e){return n.apply(this,arguments)}),[r,t,e])}function useUniversalWithdraw({networkId:e,accountId:t}){var n,{navigationToSendConfirm:r}=(0,c.E)({accountId:t,networkId:e});return(0,o.useCallback)((n=(0,a.A)((function*({amount:n,symbol:o,provider:s,identity:c,stakingInfo:u,onSuccess:p,onFail:k}){var f,y=yield i.A.serviceStaking.getStakingConfigs({networkId:e,symbol:o,provider:s});if(!y)throw new Error("Staking config not found");if(y?.unstakeWithSignMessage){var b=yield i.A.serviceAccount.getAccount({accountId:t,networkId:e}),{message:g,deadline:S}=yield i.A.serviceStaking.buildLidoEthPermitMessageData({accountId:t,networkId:e,amount:n}),w=yield i.A.serviceDApp.openSignMessageModal({accountId:t,networkId:e,request:{origin:"https://lido.fi/",scope:"ethereum"},unsignedMessage:{type:d.$.TYPED_DATA_V4,message:g,payload:[b.address,g]},walletInternalSign:!0});f=yield i.A.serviceStaking.buildUnstakeTransaction({amount:n,networkId:e,accountId:t,symbol:o,provider:s,signature:w,deadline:S})}else f=yield i.A.serviceStaking.buildUnstakeTransaction({amount:n,identity:c,networkId:e,accountId:t,symbol:o,provider:s});var x,h,v=yield i.A.serviceStaking.buildEarnTx({networkId:e,accountId:t,tx:f.tx});l.Ay.isBTCNetwork(e)&&v.fee&&(x=!0,h=!1);var j,T=createStakeInfoWithOrderId({stakingInfo:u,orderId:f.orderId});yield r({encodedTx:v,stakingInfo:u,signOnly:y?.withdrawSignOnly,useFeeInTx:x,feeInfoEditable:h,onSuccess:(j=(0,a.A)((function*(n){if(y?.withdrawSignOnly){var a=n[0].signedTx.finalizedPsbtHex;a&&c&&(yield i.A.serviceStaking.unstakePush({txId:c,networkId:e,accountId:t,symbol:o,provider:s,unstakeTxHex:a}),p?.(n))}else yield m({data:n,stakeInfo:T,networkId:e,onSuccess:p})})),function onSuccess(e){return j.apply(this,arguments)}),onFail:k})})),function(e){return n.apply(this,arguments)}),[t,e,r])}function useUniversalClaim({networkId:e,accountId:t}){var n,{navigationToSendConfirm:r}=(0,c.E)({accountId:t,networkId:e}),d=(0,u.QL)();return(0,o.useCallback)((n=(0,a.A)((function*({identity:n,amount:o,provider:c,symbol:u,stakingInfo:p,onSuccess:k,onFail:f}){var y,b=(y=(0,a.A)((function*(){var s,d,y=yield i.A.serviceStaking.buildClaimTransaction({networkId:e,accountId:t,symbol:u,provider:c,amount:o,identity:n}),b=yield i.A.serviceStaking.buildEarnTx({networkId:e,accountId:t,tx:y.tx});l.Ay.isBTCNetwork(e)&&b.fee&&(s=!0,d=!1);var g,S=createStakeInfoWithOrderId({stakingInfo:p,orderId:y.orderId});yield r({encodedTx:b,stakingInfo:p,onSuccess:(g=(0,a.A)((function*(t){yield m({data:t,stakeInfo:S,networkId:e,onSuccess:k})})),function onSuccess(e){return g.apply(this,arguments)}),onFail:f,useFeeInTx:s,feeInfoEditable:d})})),function continueClaim(){return y.apply(this,arguments)});if(Number(o)>0){var g=yield i.A.serviceStaking.estimateFee({networkId:e,provider:c,symbol:u,action:"claim",amount:o}),S=(0,s.A)(g.token.price).multipliedBy(o);if(S.lt(g.feeFiatValue))return void d({claimTokenFiatValue:S.toFixed(),estFiatValue:g.feeFiatValue,onConfirm:b})}yield b()})),function(e){return n.apply(this,arguments)}),[r,t,e,d])}},545222:(e,t,n)=>{n.r(t),n.d(t,{default:()=>StakePage});var a=n(586330),r=n(514041),o=n(908867),s=n(490343),i=n(643087),c=n(325809),l=n(498356),d=n(326745),u=n(911998),p=n(334439),m=n(296827),k=n(567807),f=n(553083),y=n(714191),b=n(73197),g=n(550082),S=n(241440),w=n(728046),x=n(88803),h=n(471169),v=n(905817),j=n(925771),T=n(831085),_=1e6,BtcFeeRateInputDialogContent=function({estimateFeeUTXO:e,feeRate:t,onSaveFeeRate:n}){var a,i=(0,o.A)(),c=(0,s.useDialogInstance)(),[l,d]=(0,r.useState)(t.feeType),[u,m]=(0,r.useState)(null!=(a=t.value)?a:"1"),k=(0,r.useMemo)((function(){return[{label:i.formatMessage({id:p.ETranslations.transaction_slow}),type:"slow"},{label:i.formatMessage({id:p.ETranslations.transaction_normal}),type:"normal"},{label:i.formatMessage({id:p.ETranslations.transaction_fast}),type:"fast"},{label:i.formatMessage({id:p.ETranslations.transaction_custom}),type:"custom"}]}),[i]),f=(0,r.useMemo)((function(){if(["slow","normal","fast"].includes(l)){var t=k.findIndex((function(e){return e.type===l})),n=e[t].feeRate;return{feeType:l,value:n}}return{feeType:"custom",value:u}}),[l,e,k,u]),y=(0,r.useMemo)((function(){var e=new S.A(u);if(e.isNaN()||e.isLessThan(1)||e.isGreaterThan(_))return i.formatMessage({id:p.ETranslations.form_ree_rate_error_out_of_range},{min:1,max:_})}),[i,u]),b=(0,r.useCallback)((function(){c.close(),n?.(f)}),[c,n,f]),g=Boolean("custom"===l&&y);return(0,T.jsxs)(s.Stack,{"data-sentry-element":"Stack","data-sentry-component":"BtcFeeRateInputDialogContent","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/BtcFeeRateInput/index.tsx",children:[(0,T.jsx)(s.SegmentControl,{fullWidth:!0,value:l,onChange:function(e){d(e)},options:k.map((function(e){return{value:e.type,label:(0,T.jsx)(s.SizableText,{color:l===e.type?"$textInteractive":"$textSubdued",size:"$bodyMdMedium",textAlign:"center",children:e.label})}})),"data-sentry-element":"SegmentControl","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/BtcFeeRateInput/index.tsx"}),(0,T.jsx)(s.Divider,{my:"$5","data-sentry-element":"Divider","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/BtcFeeRateInput/index.tsx"}),"custom"===l?(0,T.jsxs)(s.YStack,{children:[(0,T.jsx)(s.Input,{addOns:[{label:"sat/vB"}],value:u,onChangeText:function(e){var t=(0,S.A)(e);""!==e&&t.isNaN()||m(e)}}),y?(0,T.jsx)(s.SizableText,{pt:"$1.5",animation:"quick",enterStyle:{opacity:0,y:-6},exitStyle:{opacity:0,y:-6},children:(0,T.jsx)(s.SizableText,{color:"$textCritical",size:"$bodyMd",children:y})}):null]}):(0,T.jsxs)(s.XStack,{jc:"space-between",children:[(0,T.jsx)(s.SizableText,{size:"$bodyMd",color:"$textSubdued",children:i.formatMessage({id:p.ETranslations.fee_fee_rate})}),(0,T.jsxs)(s.SizableText,{size:"$bodyMdMedium",children:[f.value," sat/vB"]})]}),(0,T.jsx)(s.Stack,{pt:"$5","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/BtcFeeRateInput/index.tsx",children:(0,T.jsx)(s.Button,{size:"large",variant:"primary",onPress:b,disabled:g,"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/BtcFeeRateInput/index.tsx",children:i.formatMessage({id:p.ETranslations.action_save})})})]})},BtcFeeRateInput=function({estimateFeeUTXO:e,onFeeRateChange:t}){var n,a,i=(0,o.A)(),[,c]=null!=e?e:[],[l,d]=(0,r.useState)({feeType:"normal",value:null!=(n=c?.feeRate)?n:"1"}),u=(0,r.useMemo)((function(){return{slow:i.formatMessage({id:p.ETranslations.transaction_slow}),normal:i.formatMessage({id:p.ETranslations.transaction_normal}),fast:i.formatMessage({id:p.ETranslations.transaction_fast}),custom:i.formatMessage({id:p.ETranslations.transaction_custom})}}),[i]);(0,r.useEffect)((function(){t?.(l.value)}),[l,t]);var m=(0,r.useCallback)((function(){e&&s.Dialog.show({title:i.formatMessage({id:p.ETranslations.fee_fee_rate}),renderContent:(0,T.jsx)(BtcFeeRateInputDialogContent,{estimateFeeUTXO:e,onSaveFeeRate:d,feeRate:l}),showFooter:!1})}),[i,e,l]);return e?(0,T.jsxs)(j.$,{onPress:m,children:[(0,T.jsx)(j.$.Label,{children:i.formatMessage({id:p.ETranslations.fee_fee_rate})}),(0,T.jsxs)(s.XStack,{alignItems:"center",cursor:"pointer",mr:-6,children:[(0,T.jsxs)(s.XStack,{gap:"$1",children:[(0,T.jsx)(s.SizableText,{size:"$bodyLgMedium",children:null!=(a=u[l.feeType])?a:l.feeType}),(0,T.jsxs)(s.SizableText,{size:"$bodyLgMedium",children:["(",l.value,"sat/vB)"]})]}),(0,T.jsx)(s.Icon,{name:"ChevronRightSmallOutline",size:24})]})]}):null},A=n(713989),I=n(286192),O=n(87474),M=n(295786),C=n(812566),E=n(939799),UniversalStake=function({accountId:e,networkId:t,price:n,balance:i,apr:c,details:l,decimals:d,minAmount:u="0",minTransactionFee:m="0",providerLabel:f,minStakeTerm:y,minStakeBlocks:g,tokenImageUri:_,tokenSymbol:P,providerName:$,providerLogo:L,isReachBabylonCap:B,showEstReceive:F,estReceiveToken:z,estReceiveTokenRate:R="1",estimateFeeResp:D,estimateFeeUTXO:U,isDisabled:N,maxAmount:V,onConfirm:X,onFeeRateChange:W,stakingTime:H,nextLaunchLeft:K,rewardToken:Y}){var q=(0,o.A)(),G=(0,I.sM)(),[Z,Q]=(0,r.useState)(!1),[J,ee]=(0,r.useState)(""),[{currencyInfo:{symbol:te}}]=(0,h.useSettingsPersistAtom)(),ne=(0,r.useCallback)((function(e){if(new S.A(e).isNaN())""===e&&ee("");else{var t=Boolean(d&&Number(d)>0&&(0,v.FZ)(e)>d);ee(t?function(e){return e}:e)}}),[d]),ae=(0,r.useCallback)((function(){var e=new S.A(i).minus(m);e.gt(0)?ne(e.toFixed()):ne(i)}),[ne,i,m]),re=(0,r.useMemo)((function(){if(Number(J)>0&&Number(n)>0)return new S.A(J).multipliedBy(n).toFixed()}),[J,n]),oe=(0,r.useMemo)((function(){return new S.A(J).gt(i)}),[J,i]),se=(0,r.useMemo)((function(){var e=new S.A(u),t=new S.A(J);return!(!e.isGreaterThan(0)||!t.isGreaterThan(0))&&t.isLessThan(e)}),[u,J]),ie=(0,r.useMemo)((function(){return!!(V&&Number(V)>0&&Number(J)>0)&&new S.A(J).isGreaterThan(V)}),[V,J]),ce=(0,r.useMemo)((function(){var e=(0,S.A)(J);return e.isNaN()||e.isLessThanOrEqualTo(0)||oe||se||ie||B}),[J,oe,se,ie,B]),le=(0,r.useMemo)((function(){if(Number(J)>0&&Number(c)>0){var e=(0,S.A)(J).multipliedBy(null!=c?c:0).dividedBy(100);return{amount:e.toFixed(),fiatValue:Number(n)>0?e.multipliedBy(n).toFixed():void 0}}}),[J,c,n]),de=(0,r.useMemo)((function(){if(y&&Number(y)>0&&g){var e=Math.ceil(y/864e5);return q.formatMessage({id:p.ETranslations.earn_number_days_number_block},{number_days:e,number:g})}return null}),[y,g,q]),ue=(0,r.useMemo)((function(){if(y){var e=new Date,t=new Date(e.getTime()+y);return(0,k.Yq)(t,{hideTimeForever:!0})}return null}),[y]),pe=(0,r.useMemo)((function(){if(le?.fiatValue&&D?.feeFiatValue)return(0,I.fH)(le?.fiatValue,D.feeFiatValue)}),[D?.feeFiatValue,le?.fiatValue]),me=(0,r.useCallback)((0,a.A)((function*(){w.A.dismiss();var showDialog=function(){var e;s.Dialog.show({renderIcon:(0,T.jsx)(s.Image,{width:"$14",height:"$14",src:l.token.info.logoURI}),title:q.formatMessage({id:p.ETranslations.earn_provider_asset_staking},{provider:(0,v.c)(l.provider.name.toLowerCase()),asset:l.token.info.symbol.toUpperCase()}),renderContent:(0,T.jsx)(A.G,{provider:l.provider.name.toLowerCase(),symbol:l.token.info.symbol.toLowerCase(),apr:l.provider.apr,updateFrequency:l.updateFrequency,unstakingPeriod:l.unstakingPeriod,receiveSymbol:l.rewardToken}),onConfirm:(e=(0,a.A)((function*(e){try{Q(!0),yield e.close(),yield X?.(J)}finally{Q(!1)}})),function onConfirm(t){return e.apply(this,arguments)}),onConfirmText:q.formatMessage({id:p.ETranslations.earn_stake}),showCancelButton:!1})};if(le?.fiatValue&&D){var e=(0,I.fH)(le.fiatValue,D.feeFiatValue);if(e&&e>5)return void G({daysConsumed:e,estFiatValue:D.feeFiatValue,onConfirm:showDialog})}showDialog()})),[X,J,l,q,le?.fiatValue,D,G]);return(0,T.jsxs)(O.A,{"data-sentry-element":"StakingFormWrapper","data-sentry-component":"UniversalStake","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/UniversalStake/index.tsx",children:[(0,T.jsxs)(s.Stack,{position:"relative",opacity:N?.7:1,"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/UniversalStake/index.tsx",children:[(0,T.jsx)(x.J,{bg:N?"$bgDisabled":"$bgApp",hasError:oe||se,value:J,onChange:ne,tokenSelectorTriggerProps:{selectedTokenImageUri:_,selectedTokenSymbol:P?.toUpperCase()},balanceProps:{value:i,onPress:ae},inputProps:{placeholder:"0",autoFocus:!N},valueProps:{value:re,currency:re?te:void 0},enableMaxAmount:!0,"data-sentry-element":"AmountInput","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/UniversalStake/index.tsx"}),N?(0,T.jsx)(s.Stack,{position:"absolute",w:"100%",h:"100%",zIndex:1}):null]}),se?(0,T.jsx)(s.Alert,{icon:"InfoCircleOutline",type:"critical",title:q.formatMessage({id:p.ETranslations.earn_minimum_amount},{number:u,symbol:P})}):null,oe?(0,T.jsx)(s.Alert,{icon:"InfoCircleOutline",type:"critical",title:q.formatMessage({id:p.ETranslations.earn_insufficient_balance})}):null,ie?(0,T.jsx)(s.Alert,{icon:"InfoCircleOutline",type:"critical",title:q.formatMessage({id:p.ETranslations.earn_maximum_staking_alert},{number:null!=V?V:"",symbol:P})}):null,B?(0,T.jsx)(s.Alert,{icon:"InfoCircleOutline",type:"critical",title:q.formatMessage({id:p.ETranslations.earn_reaching_staking_cap})}):null,(0,T.jsxs)(j.k,{"data-sentry-element":"CalculationList","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/UniversalStake/index.tsx",children:[le?(0,T.jsxs)(j.$,{children:[(0,T.jsx)(j.$.Label,{children:q.formatMessage({id:p.ETranslations.earn_est_annual_rewards})}),(0,T.jsx)(j.$.Value,{children:(0,T.jsx)(E.A,{tokenSymbol:null!=P?P:"",fiatSymbol:te,amount:le.amount,fiatValue:le.fiatValue})})]}):null,F&&z&&Number(J)>0?(0,T.jsxs)(j.$,{children:[(0,T.jsx)(j.$.Label,{children:q.formatMessage({id:p.ETranslations.earn_est_receive})}),(0,T.jsx)(j.$.Value,{children:(0,T.jsx)(s.NumberSizeableText,{formatter:"balance",size:"$bodyLgMedium",formatterOptions:{tokenSymbol:z},children:(0,S.A)(J).multipliedBy(R).toFixed()})})]}):null,c&&Number(c)>0?(0,T.jsxs)(j.$,{children:[(0,T.jsx)(j.$.Label,{children:q.formatMessage({id:p.ETranslations.global_apr})}),(0,T.jsx)(j.$.Value,{color:"$textSuccess",children:`${c}%`})]}):null,de?(0,T.jsxs)(j.$,{children:[(0,T.jsxs)(s.XStack,{flex:1,alignItems:"center",gap:"$1",children:[(0,T.jsx)(j.$.Label,{children:q.formatMessage({id:p.ETranslations.earn_term})}),(0,T.jsx)(s.Popover,{title:q.formatMessage({id:p.ETranslations.earn_term}),placement:"bottom-start",renderTrigger:(0,T.jsx)(s.IconButton,{iconColor:"$iconSubdued",size:"small",icon:"InfoCircleOutline",variant:"tertiary"}),renderContent:(0,T.jsx)(s.Stack,{p:"$5",children:(0,T.jsx)(s.SizableText,{children:q.formatMessage({id:p.ETranslations.earn_term_tooltip})})})})]}),(0,T.jsx)(j.$.Value,{children:de})]}):null,ue?(0,T.jsxs)(j.$,{children:[(0,T.jsx)(j.$.Label,{children:q.formatMessage({id:p.ETranslations.earn_unlock_time})}),(0,T.jsx)(j.$.Value,{children:ue})]}):null,L&&$?(0,T.jsxs)(j.$,{children:[(0,T.jsx)(j.$.Label,{children:null!=f?f:q.formatMessage({id:p.ETranslations.global_protocol})}),(0,T.jsx)(j.$.Value,{children:(0,T.jsxs)(s.XStack,{gap:"$2",alignItems:"center",children:[(0,T.jsx)(s.Image,{width:"$5",height:"$5",src:L,borderRadius:"$2"}),(0,T.jsx)(s.SizableText,{size:"$bodyLgMedium",children:(0,v.c)($)})]})})]}):null,D?(0,T.jsx)(I.BA,{estimateFeeResp:D,isVisible:!!le?.fiatValue,onPress:function(){G({daysConsumed:pe,estFiatValue:D.feeFiatValue})}}):null,H?(0,T.jsxs)(j.$,{children:[(0,T.jsx)(j.$.Label,{children:q.formatMessage({id:p.ETranslations.earn_earnings_start})}),(0,T.jsx)(j.$.Value,{children:(0,T.jsx)(s.SizableText,{size:"$bodyLgMedium",children:q.formatMessage({id:p.ETranslations.earn_in_number},{number:(0,C.Q)(H)})})})]}):null,K&&Y?(0,T.jsxs)(j.$,{children:[(0,T.jsx)(j.$.Label,{tooltip:q.formatMessage({id:p.ETranslations.earn_until_next_launch_tooltip}),children:q.formatMessage({id:p.ETranslations.earn_until_next_launch})}),(0,T.jsx)(j.$.Value,{children:(0,T.jsx)(s.SizableText,{size:"$bodyLgMedium",children:q.formatMessage({id:p.ETranslations.earn_number_symbol_left},{number:Number(K).toFixed(2),symbol:Y})})})]}):null,$?.toLowerCase()===b.e.Babylon.toLowerCase()&&U?(0,T.jsx)(BtcFeeRateInput,{estimateFeeUTXO:U,onFeeRateChange:W}):null]}),(0,T.jsx)(M.O,{token:l.token.info,accountId:e,networkId:t,"data-sentry-element":"TradeOrBuy","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/UniversalStake/index.tsx"}),(0,T.jsx)(s.Page.Footer,{onConfirmText:q.formatMessage({id:p.ETranslations.global_continue}),confirmButtonProps:{onPress:me,loading:Z,disabled:ce},"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/components/UniversalStake/index.tsx"})]})},P=n(90393),$=n(653913);function BasicStakePage(){var e,t=(0,d.u)(),{accountId:n,networkId:c,details:y,onSuccess:S,indexedAccountId:w}=t.params,{token:x,provider:h,rewardToken:j}=y,{result:_}=(0,u.yk)((function(){return i.A.serviceStaking.getProtocolDetails({accountId:n,networkId:c,indexedAccountId:w,symbol:x.info.symbol,provider:h.name})}),[n,c,w,x,h],{revalidateOnFocus:!0}),A=_?.token.balanceParsed||x.balanceParsed,I=_?.token.price||x.price,O=x.info,M=(0,v.Y)(y),[C,E]=(0,r.useState)(),L=(0,r.useRef)(!1),B=(0,r.useMemo)((function(){if(h.name.toLowerCase()===b.e.Babylon.toLowerCase())return function(e){return E(e)}}),[h.name]),F=(0,r.useMemo)((function(){if(h?.minStakeTerm)return(0,k.XG)(h.minStakeTerm)}),[h]),z=(0,$.B8)({accountId:n,networkId:c}),R=(0,l.A)(),D=(0,r.useCallback)((e=(0,a.A)((function*(e){var t;yield z({amount:e,symbol:O.symbol.toUpperCase(),provider:h.name,stakingInfo:{label:g.D.Stake,protocol:h.name,protocolLogoURI:h.logoURI,send:{token:O,amount:e},tags:[M]},term:F,feeRate:Number(C)>0?Number(C):void 0,onSuccess:(t=(0,a.A)((function*(t){R.pop(),m.U.staking.page.staking({token:O,stakingProtocol:h.name});var a=t[0];a&&h.name.toLowerCase()===b.e.Babylon.toLowerCase()&&(yield i.A.serviceStaking.addBabylonTrackingItem({txId:a.decodedTx.txid,action:"stake",createAt:Date.now(),accountId:n,networkId:c,amount:e,minStakeTerm:h.minStakeTerm})),S?.()})),function onSuccess(e){return t.apply(this,arguments)})})})),function(t){return e.apply(this,arguments)}),[z,R,O,h,M,S,F,n,c,C]),U=(0,o.A)(),N=(0,P.Z)(h.name),V=(0,r.useMemo)((function(){return!(!h||h.name!==b.e.Babylon.toLowerCase())&&h.stakeDisable}),[h]),X=(0,r.useMemo)((function(){return h.name.toLowerCase()===b.e.Lido.toLowerCase()}),[h]),{result:W}=(0,u.yk)((0,a.A)((function*(){return yield i.A.serviceStaking.estimateFee({networkId:c,provider:h.name,symbol:O.symbol,action:"stake",amount:"1"})})),[c,h.name,O.symbol]),{result:H}=(0,u.yk)((0,a.A)((function*(){if(f.Ay.isBTCNetwork(c)){var e=(yield i.A.serviceAccount.getAccount({accountId:n,networkId:c})).address,t=yield i.A.serviceGas.estimateFee({accountId:n,networkId:c,accountAddress:e});return t.feeUTXO?.filter((function(e){return void 0!==e.feeRate}))}})),[n,c]);return(0,r.useEffect)((function(){if(H&&3===H.length&&!L.current){var[,e]=H;E(e.feeRate),L.current=!0}}),[H]),(0,T.jsxs)(s.Page,{scrollEnabled:!0,"data-sentry-element":"Page","data-sentry-component":"BasicStakePage","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/pages/Stake/index.tsx",children:[(0,T.jsx)(s.Page.Header,{title:U.formatMessage({id:p.ETranslations.earn_stake_token},{token:O.symbol}),"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/pages/Stake/index.tsx"}),(0,T.jsx)(s.Page.Body,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/pages/Stake/index.tsx",children:(0,T.jsx)(UniversalStake,{accountId:n,networkId:c,decimals:y.token.info.decimals,details:y,apr:Number(h.apr)>0?h.apr:void 0,price:I,balance:A,minAmount:h.minStakeAmount,maxAmount:h.maxStakeAmount,minStakeTerm:h.minStakeTerm,minStakeBlocks:h.minStakeBlocks,tokenImageUri:O.logoURI,tokenSymbol:O.symbol,providerLogo:h.logoURI,providerName:h.name,providerLabel:N,stakingTime:h.stakingTime,nextLaunchLeft:h.nextLaunchLeft,isReachBabylonCap:V,rewardToken:j,isDisabled:V,showEstReceive:X,estReceiveToken:j,estReceiveTokenRate:h.lidoStTokenRate,onConfirm:D,minTransactionFee:h.minTransactionFee,estimateFeeResp:W,estimateFeeUTXO:H,onFeeRateChange:B,"data-sentry-element":"UniversalStake","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/pages/Stake/index.tsx"})})]})}function StakePage(){return(0,T.jsx)(c.b8,{config:{sceneName:y.Zs.home,sceneUrl:""},enabledNum:[0],"data-sentry-element":"AccountSelectorProviderMirror","data-sentry-component":"StakePage","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/pages/Stake/index.tsx",children:(0,T.jsx)(BasicStakePage,{"data-sentry-element":"BasicStakePage","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Staking/pages/Stake/index.tsx"})})}},905817:(e,t,n)=>{n.d(t,{FZ:()=>countDecimalPlaces,Y:()=>buildLocalTxStatusSyncId,c:()=>capitalizeString});var a=n(241440),buildLocalTxStatusSyncId=function(e){return`${e.provider.name.toLowerCase()}-${e.token.info.symbol.toLowerCase()}`};function capitalizeString(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function countDecimalPlaces(e){var t="string"==typeof e?Number(e):e;if(Number.isNaN(t))return 0;var n="string"==typeof e?e:(0,a.A)(e).toFixed(),r=n.indexOf(".");return-1===r?0:n.length-r-1}},317192:(e,t,n)=>{n.d(t,{J:()=>getImportFromToken,r:()=>isSupportStaking});var a=n(625931),r=n(619390),o={networkId:"evm--1",contractAddress:"",name:"Ethereum",symbol:"ETH",decimals:18,isNative:!0,networkLogoURI:"https://uni.onekey-asset.com/static/chain/eth.png"},s={networkId:"evm--1",contractAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",name:"USD Coin",symbol:"USDC",decimals:6,isNative:!1,isPopular:!0,networkLogoURI:"https://uni.onekey-asset.com/static/chain/eth.png"},i={networkId:"sol--101",contractAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",name:"USDC",symbol:"USDC",decimals:6,isNative:!1,networkLogoURI:"https://uni.onekey-asset.com/static/chain/sol.png"},isSupportStaking=function(e){return["BTC","SBTC","ETH","SOL","APT","ATOM","MATIC"].includes(e.toUpperCase())};function getImportFromToken({networkId:e,tokenSymbol:t,isSupportSwap:n=!0}){var c,l=n?r.qX.SWAP:r.qX.BRIDGE,d=(0,a.V)();switch(e){case d.btc:case d.sbtc:c=o,l=r.qX.BRIDGE;break;case d.eth:case d.holesky:case d.sepolia:c="MATIC"===t?o:s,l=r.qX.SWAP;break;case d.sol:c=i,l=r.qX.SWAP;break;case d.apt:c=o,l=r.qX.BRIDGE}return{importFromToken:c,swapTabSwitchType:l}}}}]);
//# sourceMappingURL=45222.8867d6218f.chunk.js.map