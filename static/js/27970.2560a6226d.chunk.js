!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="d3e33c0e-7399-44e9-aae0-277bedddcb72",e._sentryDebugIdIdentifier="sentry-dbid-d3e33c0e-7399-44e9-aae0-277bedddcb72")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[27970],{27970:(e,n,o)=>{o.r(n),o.d(n,{default:()=>v});var r=o(586330),a=o(514041),t=o(654266),s=o(241440),i=o(908867),c=o(490343),d=o(471169),p=o(334439),l=o(193068),m=o(643087),u=o(498356),g=o(911998),f=o(831085);const v=function CreateInvoice(){var e,n=(0,i.A)(),o=(0,c.useMedia)(),v=(0,c.useForm)(),y=(0,t.lq)(),_=(0,u.A)(),{accountId:k,networkId:w}=y.params,[h]=(0,d.useSettingsPersistAtom)(),{serviceLightning:I}=m.A,[b,x]=(0,a.useState)(!1),A=v.watch("amount"),{result:T}=(0,g.yk)((function(){return I.getInvoiceConfig({networkId:w})}),[w,I]),{result:C}=(0,g.yk)((0,r.A)((function*(){yield m.A.serviceAccount.getAccountAddressForApi({networkId:w,accountId:k});return{price:(yield m.A.serviceToken.fetchTokensDetails({accountId:k,networkId:w,contractList:[""],withFrozenBalance:!1,withCheckInscription:!1}))[0].price}})),[w,k]),M=(0,a.useMemo)((function(){var e=new s.A(A||"0"),n=new s.A(C?.price||"0");return e.isInteger()&&n?e.multipliedBy(n).toFixed(2):"0.00"}),[A,C?.price]),E=(0,a.useCallback)((e=(0,r.A)((function*(e){try{x(!0);var n=yield I.createInvoice({accountId:k,networkId:w,amount:e.amount||"0",description:e.description});_.push(l.MD.ReceiveInvoice,{networkId:w,accountId:k,paymentHash:n.payment_hash,paymentRequest:n.payment_request})}finally{x(!1)}})),function(n){return e.apply(this,arguments)}),[k,w,I,_]);return(0,f.jsxs)(c.Page,{"data-sentry-element":"Page","data-sentry-component":"CreateInvoice","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Receive/pages/CreateInvoice.tsx",children:[(0,f.jsx)(c.Page.Header,{title:n.formatMessage({id:p.ETranslations.lighting_invoice}),"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Receive/pages/CreateInvoice.tsx"}),(0,f.jsx)(c.Page.Body,{p:"$5","data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Receive/pages/CreateInvoice.tsx",children:(0,f.jsxs)(c.Form,{form:v,"data-sentry-element":"Form","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Receive/pages/CreateInvoice.tsx",children:[(0,f.jsx)(c.Form.Field,{label:n.formatMessage({id:p.ETranslations.send_amount}),name:"amount",description:(0,f.jsx)(c.NumberSizeableText,{pt:"$1.5",size:"$bodyMd",color:"$textSubdued",formatter:"value",formatterOptions:{currency:h.currencyInfo.symbol},children:M}),rules:{min:{value:0,message:n.formatMessage({id:p.ETranslations.form_lighting_invoice_error_positive_integer_only})},pattern:{value:/^[0-9]*$/,message:n.formatMessage({id:p.ETranslations.form_lighting_invoice_error_positive_integer_only})},validate:function(e){if(e){var o=new s.A(e);return o.isInteger()?T?.maxReceiveAmount&&o.isGreaterThan(T?.maxReceiveAmount)?n.formatMessage({id:p.ETranslations.form_lighting_invoice_amount_error_max},{amount:T?.maxReceiveAmount}):void 0:n.formatMessage({id:p.ETranslations.form_lighting_invoice_error_positive_integer_only})}}},"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Receive/pages/CreateInvoice.tsx",children:(0,f.jsx)(c.Input,{placeholder:n.formatMessage({id:p.ETranslations.form_amount_placeholder}),size:"large",$gtMd:{size:"medium"},keyboardType:"number-pad",addOns:[{label:"sats"}],"data-sentry-element":"Input","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Receive/pages/CreateInvoice.tsx"})}),(0,f.jsx)(c.Form.Field,{label:n.formatMessage({id:p.ETranslations.global_description}),name:"description",rules:{maxLength:{value:40,message:n.formatMessage({id:p.ETranslations.dapp_connect_msg_description_can_be_up_to_int_characters},{number:"40"})}},"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Receive/pages/CreateInvoice.tsx",children:(0,f.jsx)(c.TextArea,{size:o.gtMd?"medium":"large",$gtMd:{size:"medium"},placeholder:n.formatMessage({id:p.ETranslations.form_lighting_invoice_placeholder}),"data-sentry-element":"TextArea","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Receive/pages/CreateInvoice.tsx"})})]})}),(0,f.jsx)(c.Page.Footer,{onConfirmText:n.formatMessage({id:p.ETranslations.global_create_invoice}),onConfirm:function(){return v.handleSubmit(E)()},confirmButtonProps:{loading:b},"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Receive/pages/CreateInvoice.tsx"})]})}}}]);
//# sourceMappingURL=27970.2560a6226d.chunk.js.map