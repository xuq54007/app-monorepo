{"version":3,"file":"static/js/34253.970dd831ba.chunk.js","mappings":"ypBACkC,KCAD,K,4HCDgwB,SAASA,eAAe,IAAG,WAACC,EAAU,cAACC,GCCj0B,SAASC,mBACZ,MAAMF,GAAa,IAAAG,QAAO,OACnBC,EAAUC,IAAe,IAAAC,UAAS,MAWzC,MAAO,CACHF,WAEAJ,aACAC,cAZmBM,IACnB,IAAIC,EACJR,EAAWS,QAAUF,EACrB,MAAMG,EAA4C,QAA7BF,EAAKR,EAAWS,eAA4B,IAAPD,OAAgB,EAASA,EAAGJ,SAClFM,GACAL,EAAYK,EAChB,EAQR,CDpBu1BR,GAAuBS,GAAM,WAAc,IAACC,EAAG,MAACC,GAAOF,EAAMG,QAAU,SAACC,IAAU,IAAAC,gBAAmBC,GAAK,EAAAC,EAAA,KAAcC,GAAY,IAAAC,cAAY,WAAW,OAAO,SAAK,EAAAC,WAAW,CAACC,eAAc,SAAKC,EAAA,GAAiB,CAACC,KAAK,kBAAkBX,MAAMI,EAAKQ,cAAc,CAACC,GAAG,EAAAC,cAAcC,kBAAkBC,SAAS,CAAC,CAACC,MAAM,CAAC,CAACC,MAAMd,EAAKQ,cAAc,CAACC,GAAG,EAAAC,cAAcK,iBAAiBR,KAAK,mBAAmBS,SAAuBC,GAAK,QAAkB,YAAYlC,GAAYS,SAAS0B,UAAW,IAAU,SAASF,UAAU,OAAOC,EAAKE,MAAMC,KAAKC,UAAW,IAAO,CAACP,MAAMd,EAAKQ,cAAc,CAACC,GAAG,EAAAC,cAAcY,gBAAgBf,KAAK,eAAeS,QAAQ,WAAWO,EAAA,EAAMC,MAAMC,EAAA,GAAYC,YAAY,CAAC/B,OAAK,CAACgC,QAAQhC,IAAMiC,OAAM,WAAW,GAAG,GAAG,CAACd,MAAMd,EAAKQ,cAAc,CAACC,GAAG,EAAAC,cAAcmB,kBAAkBtB,KAAK,cAAcS,SAAuBc,GAAM,QAAkB,YAAYhC,EAASH,EAAK,IAAU,SAASqB,UAAU,OAAOc,EAAMX,MAAMC,KAAKC,UAAW,IAAO,CAACP,MAAMd,EAAKQ,cAAc,CAACC,GAAG,EAAAC,cAAcqB,0BAA0BxB,KAAK,gBAAgBS,SAAuBgB,GAAM,QAAkB,aAAY,QAAgBrC,EAAK,IAAU,SAASqB,UAAU,OAAOgB,EAAMb,MAAMC,KAAKC,UAAW,SAAxI,IAAeW,EAA3OF,EAApab,CAAoxB,GAAE,CAAClC,EAAWY,EAAIG,EAASE,KAAWiC,EAAgBC,IAAoB,IAAA7C,UAASO,IAAO,IAAAuC,YAAU,WAAWD,EAAmB,GAAI,GAAE,IAAI,IAAIE,GAAwB,IAAAjC,cAAY,UAAUP,MAAMyC,IAAezC,GAAOsC,EAAmBG,EAAW,GAAE,CAACzC,EAAMsC,IAAqB,OAAO,UAAM,EAAAI,KAAK,CAAC,sBAAsB,OAAO,wBAAwB,eAAe,0BAA0B,0GAA0GC,SAAS,EAAC,SAAK,EAAAD,KAAKhC,OAAO,CAACJ,YAAYA,EAAYN,MAAMqC,EAAgB,sBAAsB,UAAU,0BAA0B,6GAA4G,SAAK,EAAAK,KAAKE,KAAK,CAAC,sBAAsB,UAAU,0BAA0B,0GAA0GD,UAAS,SAAKE,EAAA,EAAQ,CAACC,aAAa,SAASpD,GAAK,OAAOA,GAAKN,EAAcM,EAAK,EAAEqD,IAAIhD,EAAIyC,wBAAwBA,EAAwB,sBAAsB,UAAU,0BAA0B,gHAAiH,C","sources":["webpack://web/../../node_modules/@onekeyfe/onekey-cross-webview/dist/JsBridgeDesktopHost.js","webpack://web/../../node_modules/@onekeyfe/onekey-cross-webview/dist/JsBridgeNativeHost.js","webpack://web/../../packages/kit/src/views/WebView/pages/WebViewModal/index.tsx","webpack://web/../../node_modules/@onekeyfe/onekey-cross-webview/dist/useWebViewBridge.js"],"sourcesContent":["import { JsBridgeBase, } from '@onekeyfe/cross-inpage-provider-core';\nclass JsBridgeDesktopHost extends JsBridgeBase {\n    constructor(config) {\n        super(config);\n        this.sendAsString = true;\n        this.webviewRef = config.webviewRef;\n    }\n    sendPayload(payload) {\n        var _a;\n        if (this.webviewRef && this.webviewRef.current) {\n            const payloadStr = payload;\n            if (this.webviewRef.current) {\n                // *** executeJavaScript will be blocked by head script loading\n                // const inpageReceiveCode = injectedFactory.createCodeJsBridgeReceive(payloadStr);\n                // appDebugLogger.webview('executeJavaScript', inpageReceiveCode, payload);\n                // this.webviewRef.current?.executeJavaScript?.(inpageReceiveCode);\n                // *** use ipcRenderer.on instead\n                (_a = this.webviewRef.current) === null || _a === void 0 ? void 0 : _a.send('JsBridgeDesktopHostToInjected', payloadStr);\n            }\n            else {\n                throw new Error('JsBridgeDesktopHost executeJavaScript failed: webview ref not ready yet.');\n            }\n        }\n    }\n}\nexport { JsBridgeDesktopHost };\n","import { injectedFactory, JsBridgeBase } from '@onekeyfe/cross-inpage-provider-core';\nclass JsBridgeNativeHost extends JsBridgeBase {\n    constructor(config) {\n        super(config);\n        this.sendAsString = true;\n        this.webviewRef = config.webviewRef;\n    }\n    sendPayload(payload) {\n        var _a, _b;\n        if (this.webviewRef && this.webviewRef.current) {\n            const payloadStr = payload;\n            const inpageReceiveCode = injectedFactory.createCodeJsBridgeReceive(payloadStr);\n            (_b = (_a = this.webviewRef.current) === null || _a === void 0 ? void 0 : _a.injectJavaScript) === null || _b === void 0 ? void 0 : _b.call(_a, inpageReceiveCode);\n        }\n    }\n}\nexport { JsBridgeNativeHost };\n","import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import{useCallback,useEffect,useState}from'react';import{useWebViewBridge}from'@onekeyfe/onekey-cross-webview';import{useRoute}from'@react-navigation/core';import{useIntl}from'react-intl';import Share from\"react-native-web/dist/exports/Share\";import{ActionList,Page,useClipboard}from'@onekeyhq/components';import{HeaderIconButton}from'@onekeyhq/components/src/layouts/Navigation/Header';import WebView from'@onekeyhq/kit/src/components/WebView';import{ETranslations}from'@onekeyhq/shared/src/locale';import platformEnv from'@onekeyhq/shared/src/platformEnv';import{openUrlExternal}from'@onekeyhq/shared/src/utils/openUrlUtils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function WebViewModal(){var{webviewRef,setWebViewRef}=useWebViewBridge();var route=useRoute();var{url,title}=route.params;var{copyText}=useClipboard();var intl=useIntl();var headerRight=useCallback(function(){return _jsx(ActionList,{renderTrigger:_jsx(HeaderIconButton,{icon:\"DotHorOutline\"}),title:intl.formatMessage({id:ETranslations.explore_options}),sections:[{items:[{label:intl.formatMessage({id:ETranslations.global_refresh}),icon:'RefreshCwOutline',onPress:function(){var _ref=_asyncToGenerator(function*(){webviewRef?.current?.reload?.();});return function onPress(){return _ref.apply(this,arguments);};}()},{label:intl.formatMessage({id:ETranslations.explore_share}),icon:'ShareOutline',onPress:function(){Share.share(platformEnv.isNativeIOS?{url}:{message:url}).catch(function(){});}},{label:intl.formatMessage({id:ETranslations.global_copy_url}),icon:'LinkOutline',onPress:function(){var _ref2=_asyncToGenerator(function*(){copyText(url);});return function onPress(){return _ref2.apply(this,arguments);};}()},{label:intl.formatMessage({id:ETranslations.explore_open_in_browser}),icon:'GlobusOutline',onPress:function(){var _ref3=_asyncToGenerator(function*(){openUrlExternal(url);});return function onPress(){return _ref3.apply(this,arguments);};}()}]}]});},[webviewRef,url,copyText,intl]);var[navigationTitle,setNavigationTitle]=useState(title);useEffect(function(){setNavigationTitle('');},[]);var onNavigationStateChange=useCallback(function({title:webTitle}){if(!title){setNavigationTitle(webTitle);}},[title,setNavigationTitle]);return _jsxs(Page,{\"data-sentry-element\":\"Page\",\"data-sentry-component\":\"WebViewModal\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/WebView/pages/WebViewModal/index.tsx\",children:[_jsx(Page.Header,{headerRight:headerRight,title:navigationTitle,\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/WebView/pages/WebViewModal/index.tsx\"}),_jsx(Page.Body,{\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/WebView/pages/WebViewModal/index.tsx\",children:_jsx(WebView,{onWebViewRef:function(ref){return ref&&setWebViewRef(ref);},src:url,onNavigationStateChange:onNavigationStateChange,\"data-sentry-element\":\"WebView\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/WebView/pages/WebViewModal/index.tsx\"})})]});}","import { useRef, useState } from 'react';\nexport function useWebViewBridge() {\n    const webviewRef = useRef(null);\n    const [jsBridge, setJsBridge] = useState(null);\n    // web3 provider\n    // const [provider, setProvider] = useState(null);\n    const setWebViewRef = (ref) => {\n        var _a;\n        webviewRef.current = ref;\n        const newJsBridge = (_a = webviewRef.current) === null || _a === void 0 ? void 0 : _a.jsBridge;\n        if (newJsBridge) {\n            setJsBridge(newJsBridge);\n        }\n    };\n    return {\n        jsBridge,\n        // provider,\n        webviewRef,\n        setWebViewRef,\n    };\n}\n"],"names":["WebViewModal","webviewRef","setWebViewRef","useWebViewBridge","useRef","jsBridge","setJsBridge","useState","ref","_a","current","newJsBridge","route","url","title","params","copyText","useClipboard","intl","useIntl","headerRight","useCallback","ActionList","renderTrigger","Header","icon","formatMessage","id","ETranslations","explore_options","sections","items","label","global_refresh","onPress","_ref","reload","apply","this","arguments","explore_share","Share","share","platformEnv","isNativeIOS","message","catch","global_copy_url","_ref2","explore_open_in_browser","_ref3","navigationTitle","setNavigationTitle","useEffect","onNavigationStateChange","webTitle","Page","children","Body","WebView","onWebViewRef","src"],"sourceRoot":""}