{"version":3,"file":"static/js/24087.8a6113f921.chunk.js","mappings":"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","sources":["webpack://web/../../packages/kit/src/components/WalletAvatar/WalletAvatar.tsx","webpack://web/../../packages/kit/src/hooks/useAppRoute.ts","webpack://web/../../packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx","webpack://web/../../packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateDone.tsx","webpack://web/../../packages/kit/src/views/FirmwareUpdate/components/FirmwareInstallingView.tsx","webpack://web/../../packages/kit/src/views/FirmwareUpdate/components/FirmwareLatestVersionInstalled.tsx","webpack://web/../../packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateBaseMessageView.tsx","webpack://web/../../packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx","webpack://web/../../packages/kit/src/views/FirmwareUpdate/hooks/useFirmwareUpdateHooks.ts","webpack://web/../../packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateExitPrevent.ts","webpack://web/../../packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx","webpack://web/../../packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx","webpack://web/../../packages/kit/src/components/DeviceAvatar/DeviceAvatar.tsx","webpack://web/../../packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateWalletProfile.tsx","webpack://web/../../packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateWarningMessage.tsx","webpack://web/../../packages/kit/src/views/FirmwareUpdate/components/FirmwareVersionProgressBar.tsx","webpack://web/../../packages/kit/src/views/FirmwareUpdate/pages/PageFirmwareUpdateInstall.tsx","webpack://web/../../node_modules/expo-keep-awake/build/KeepAwake.types.js","webpack://web/../../node_modules/expo-keep-awake/build/ExpoKeepAwake.web.js","webpack://web/../../node_modules/expo-keep-awake/build/index.js"],"sourcesContent":["import _isNil from\"lodash/isNil\";import{Icon,Image,SizableText,Stack}from'@onekeyhq/components';import accountUtils from'@onekeyhq/shared/src/utils/accountUtils';import{AllWalletAvatarImages}from'@onekeyhq/shared/src/utils/avatarUtils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function WalletAvatarBase({size,img,wallet}){var _AllWalletAvatarImage,_wallet$avatarInfo$em;var theImg=img||wallet?.avatarInfo?.img;if(!theImg){return null;}var isHidden=accountUtils.isHwHiddenWallet({wallet});if(isHidden){return _jsx(Icon,{size:\"$10\",name:\"LockSolid\",color:\"$iconSubdued\"});}return _jsxs(Image,{size:size,\"data-sentry-element\":\"Image\",\"data-sentry-component\":\"WalletAvatarBase\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx\",children:[_jsx(Image.Source,{source:(_AllWalletAvatarImage=AllWalletAvatarImages[theImg])!=null?_AllWalletAvatarImage:AllWalletAvatarImages.bear,\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx\"}),_jsx(Image.Fallback,{delayMs:300,justifyContent:\"center\",alignItems:\"center\",\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx\",children:_jsx(SizableText,{\"data-sentry-element\":\"SizableText\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx\",children:(_wallet$avatarInfo$em=wallet?.avatarInfo?.emoji)!=null?_wallet$avatarInfo$em:''})})]});}export function WalletAvatar({size='$10',status,badge,img,wallet}){return _jsxs(Stack,{w:size,h:size,justifyContent:\"center\",alignItems:\"center\",\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"WalletAvatar\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx\",children:[_jsx(WalletAvatarBase,{size:size,img:img,wallet:wallet,\"data-sentry-element\":\"WalletAvatarBase\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx\"}),status==='connected'?_jsx(Stack,{position:\"absolute\",bottom:-2,right:-2,bg:\"$bgSidebar\",p:\"$0.5\",borderRadius:\"$full\",zIndex:\"$1\",children:_jsx(Stack,{borderRadius:\"$full\",w:\"$2.5\",h:\"$2.5\",bg:\"$bgSuccessStrong\"})}):null,!_isNil(badge)?_jsx(Stack,{position:\"absolute\",h:\"$4\",px:\"$0.5\",justifyContent:\"center\",bottom:-2,right:-1,bg:\"$bgSubdued\",borderRadius:\"$full\",zIndex:\"$1\",children:_jsx(SizableText,{size:\"$bodySm\",textAlign:\"center\",children:badge})}):null]});}","import{useRoute}from'@react-navigation/core';export function useAppRoute(){return useRoute();}","import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import{useCallback,useEffect,useState}from'react';import{useIntl}from'react-intl';import{Icon,IconButton,Markdown,SizableText,Stack,XStack}from'@onekeyhq/components';import backgroundApiProxy from'@onekeyhq/kit/src/background/instance/backgroundApiProxy';import{EFirmwareUpdateSteps,useFirmwareUpdateStepInfoAtom,useSettingsPersistAtom}from'@onekeyhq/kit-bg/src/states/jotai/atoms';import{ETranslations}from'@onekeyhq/shared/src/locale';import{useFirmwareUpdateActions}from\"../hooks/useFirmwareUpdateActions\";import{FirmwareUpdatePageFooter}from\"./FirmwareUpdatePageLayout\";import{FirmwareUpdateWalletProfile}from\"./FirmwareUpdateWalletProfile\";import{FirmwareVersionProgressBar}from\"./FirmwareVersionProgressBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ChangeLogMarkdown({changelog}){var[{locale}]=useSettingsPersistAtom();var[language,setLanguage]=useState(locale);useEffect(function(){void _asyncToGenerator(function*(){if(locale==='system'){setLanguage(yield backgroundApiProxy.serviceSetting.getCurrentLocale());}})();},[locale]);return _jsx(Markdown,{\"data-sentry-element\":\"Markdown\",\"data-sentry-component\":\"ChangeLogMarkdown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx\",children:changelog?.[language==='zh-CN'?'zh-CN':'en-US']||'No change log found.'});}function ChangeLogSection({title,icon,isDone,updateInfo}){var intl=useIntl();var[collapse,setCollapse]=useState(isDone);var onDropDownPressed=useCallback(function(){setCollapse(!collapse);},[collapse]);return _jsxs(Stack,{\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"ChangeLogSection\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx\",children:[_jsxs(XStack,{gap:\"$3\",py:\"$2\",ai:\"center\",onPress:onDropDownPressed,\"data-sentry-element\":\"XStack\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx\",children:[_jsx(Icon,{name:icon,size:\"$5\",\"data-sentry-element\":\"Icon\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx\"}),_jsxs(Stack,{flex:1,\"data-sentry-element\":\"Stack\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx\",children:[_jsx(SizableText,{size:\"$bodyLgMedium\",\"data-sentry-element\":\"SizableText\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx\",children:title}),_jsx(SizableText,{size:\"$bodyMd\",color:isDone?'$textSubdued':'$textInfo',\"data-sentry-element\":\"SizableText\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx\",children:isDone?intl.formatMessage({id:ETranslations.update_updated_to_latest_version},{version:updateInfo?.toVersion||intl.formatMessage({id:ETranslations.global_unknown})}):intl.formatMessage({id:ETranslations.global_version_is_available},{version:updateInfo?.toVersion||intl.formatMessage({id:ETranslations.global_unknown})})})]}),_jsx(IconButton,{icon:collapse?'ChevronDownSmallOutline':'ChevronTopSmallOutline',variant:\"tertiary\",onPress:onDropDownPressed,\"data-sentry-element\":\"IconButton\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx\"})]}),collapse?null:_jsxs(Stack,{bg:\"$bgStrong\",p:\"$5\",borderRadius:\"$3\",children:[_jsx(FirmwareVersionProgressBar,{fromVersion:updateInfo?.fromVersion,toVersion:updateInfo?.toVersion}),_jsx(ChangeLogMarkdown,{changelog:updateInfo?.changelog})]})]});}export function FirmwareChangeLogContentView({result,isDone}){var intl=useIntl();return _jsxs(Stack,{mt:\"$8\",\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"FirmwareChangeLogContentView\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx\",children:[result?.updateInfos?.bootloader?.hasUpgrade?_jsx(ChangeLogSection,{title:intl.formatMessage({id:ETranslations.global_bootloader}),icon:\"StorageOutline\",updateInfo:result?.updateInfos?.bootloader,isDone:isDone}):null,result?.updateInfos?.ble?.hasUpgrade?_jsx(ChangeLogSection,{title:intl.formatMessage({id:ETranslations.global_bluetooth}),icon:\"BluetoothOutline\",updateInfo:result?.updateInfos?.ble,isDone:isDone}):null,result?.updateInfos?.firmware?.hasUpgrade?_jsx(ChangeLogSection,{title:intl.formatMessage({id:ETranslations.global_firmware}),icon:\"LaunchOutline\",updateInfo:result?.updateInfos?.firmware,isDone:isDone}):null]});}export function FirmwareChangeLogView({result,onConfirmClick}){var intl=useIntl();var[,setStepInfo]=useFirmwareUpdateStepInfoAtom();var{showCheckList}=useFirmwareUpdateActions();return _jsxs(_Fragment,{children:[_jsx(FirmwareUpdatePageFooter,{onConfirmText:intl.formatMessage({id:ETranslations.update_update_now}),onConfirm:function(){setStepInfo({step:EFirmwareUpdateSteps.showCheckList,payload:undefined});showCheckList({result});onConfirmClick?.();},\"data-sentry-element\":\"FirmwareUpdatePageFooter\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx\"}),_jsxs(Stack,{\"data-sentry-element\":\"Stack\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx\",children:[_jsx(FirmwareUpdateWalletProfile,{result:result,\"data-sentry-element\":\"FirmwareUpdateWalletProfile\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx\"}),_jsx(FirmwareChangeLogContentView,{result:result,\"data-sentry-element\":\"FirmwareChangeLogContentView\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareChangeLogView.tsx\"})]})]});}","import{useIntl}from'react-intl';import{Stack}from'@onekeyhq/components';import{ETranslations}from'@onekeyhq/shared/src/locale';import{useFirmwareUpdateActions}from\"../hooks/useFirmwareUpdateActions\";import{FirmwareChangeLogContentView}from\"./FirmwareChangeLogView\";import{FirmwareUpdateBaseMessageView}from\"./FirmwareUpdateBaseMessageView\";import{FirmwareUpdatePageFooter}from\"./FirmwareUpdatePageLayout\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function FirmwareUpdateDone({result}){var intl=useIntl();var actions=useFirmwareUpdateActions();return _jsxs(Stack,{\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"FirmwareUpdateDone\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateDone.tsx\",children:[_jsx(FirmwareUpdateBaseMessageView,{icon:\"CheckRadioSolid\",tone:\"success\",title:intl.formatMessage({id:ETranslations.update_all_updates_complete}),\"data-sentry-element\":\"FirmwareUpdateBaseMessageView\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateDone.tsx\"}),_jsx(FirmwareChangeLogContentView,{result:result,isDone:true,\"data-sentry-element\":\"FirmwareChangeLogContentView\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateDone.tsx\"}),_jsx(FirmwareUpdatePageFooter,{onConfirmText:intl.formatMessage({id:ETranslations.global_got_it}),onConfirm:function(){actions.closeUpdateModal();},\"data-sentry-element\":\"FirmwareUpdatePageFooter\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateDone.tsx\"})]});}","import{useEffect,useMemo,useRef,useState}from'react';import{Stack}from'@onekeyhq/components';import{EFirmwareUpdateSteps,useFirmwareUpdateRetryAtom,useFirmwareUpdateStepInfoAtom,useHardwareUiStateAtom}from'@onekeyhq/kit-bg/src/states/jotai/atoms';import{FirmwareUpdateDone}from\"./FirmwareUpdateDone\";import{FirmwareUpdateErrors}from\"./FirmwareUpdateErrors\";import{FirmwareUpdateProgressBar}from\"./FirmwareUpdateProgressBar\";import{FirmwareUpdateWalletProfile}from\"./FirmwareUpdateWalletProfile\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export function FirmwareInstallingViewBase({result,isDone,tipMessage,retryInfo,progressBarKey}){var profile=_jsx(FirmwareUpdateWalletProfile,{result:result});var content=useMemo(function(){if(isDone){return _jsx(FirmwareUpdateDone,{result:result});}if(retryInfo){return _jsx(FirmwareUpdateErrors.InstallingErrors,{retryInfo:retryInfo,result:result,lastFirmwareTipMessage:tipMessage});}return _jsx(FirmwareUpdateProgressBar,{lastFirmwareTipMessage:tipMessage,isDone:isDone},progressBarKey);},[isDone,progressBarKey,result,retryInfo,tipMessage]);return _jsx(Stack,{\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"FirmwareInstallingViewBase\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareInstallingView.tsx\",children:content});}export function FirmwareInstallingView({result,isDone}){var[stepInfo]=useFirmwareUpdateStepInfoAtom();var[retryInfo]=useFirmwareUpdateRetryAtom();var[state]=useHardwareUiStateAtom();var lastUpdateTimeRef=useRef(0);if(stepInfo.step===EFirmwareUpdateSteps.updateStart){lastUpdateTimeRef.current=stepInfo.payload.startAtTime;}var firmwareTipMessage=state?.payload?.firmwareTipData?.message;var[lastFirmwareTipMessage,setLastFirmwareTipMessage]=useState();useEffect(function(){if(firmwareTipMessage){setLastFirmwareTipMessage(firmwareTipMessage);}},[firmwareTipMessage]);return _jsx(_Fragment,{children:_jsx(FirmwareInstallingViewBase,{result:result,isDone:isDone,tipMessage:lastFirmwareTipMessage,retryInfo:stepInfo.step===EFirmwareUpdateSteps.updateStart?undefined:retryInfo,progressBarKey:lastUpdateTimeRef.current,\"data-sentry-element\":\"FirmwareInstallingViewBase\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareInstallingView.tsx\"})});}","import{useIntl}from'react-intl';import{Icon,SizableText,Stack}from'@onekeyhq/components';import{ETranslations}from'@onekeyhq/shared/src/locale';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function FirmwareLatestVersionInstalled(){var intl=useIntl();return _jsxs(Stack,{ai:\"center\",jc:\"center\",h:500,\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"FirmwareLatestVersionInstalled\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareLatestVersionInstalled.tsx\",children:[_jsx(Icon,{size:\"$14\",name:\"CheckRadioSolid\",color:\"$iconSuccess\",\"data-sentry-element\":\"Icon\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareLatestVersionInstalled.tsx\"}),_jsx(SizableText,{my:\"$6\",size:\"$headingLg\",\"data-sentry-element\":\"SizableText\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareLatestVersionInstalled.tsx\",children:intl.formatMessage({id:ETranslations.update_latest_version})})]});}","import{useCallback}from'react';import{useIntl}from'react-intl';import{Icon,RichSizeableText,SizableText,Stack}from'@onekeyhq/components';import{FIRMWARE_CONTACT_US_URL}from'@onekeyhq/shared/src/config/appConfig';import{ETranslations}from'@onekeyhq/shared/src/locale';import platformEnv from'@onekeyhq/shared/src/platformEnv';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getColors=function(tone){switch(tone){case'destructive':{return{iconWrapperBg:'$bgCritical',iconColor:'$iconCritical'};}case'warning':{return{iconWrapperBg:'$bgCaution',iconColor:'$iconCaution'};}case'success':{return{iconWrapperBg:'$bgSuccess',iconColor:'$iconSuccess'};}default:{return{iconWrapperBg:'$bgStrong',iconColor:'$icon'};}}};function UpdateErrorTroubleshooting(){var intl=useIntl();var messageIntlKey;if(false){messageIntlKey=ETranslations.update_troubleshoot_connection_issues_mobile;}else if(false){messageIntlKey=ETranslations.update_troubleshoot_connection_issues_desktop;}else{messageIntlKey=ETranslations.update_troubleshoot_connection_issues;}var message=intl.formatMessage({id:messageIntlKey,defaultMessage:'If you have any questions, please refer to the troubleshooting guide.'});var textLines=message.split('\\n');return _jsx(Stack,{\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"UpdateErrorTroubleshooting\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateBaseMessageView.tsx\",children:textLines.map(function(text,index){if(text.includes('<url>')){return _jsx(RichSizeableText,{size:\"$bodyMd\",color:\"$textSubdued\",linkList:{url:{url:FIRMWARE_CONTACT_US_URL}},children:text},index);}return _jsx(SizableText,{size:\"$bodyMd\",color:\"$textSubdued\",children:text},index);})});}export function FirmwareUpdateBaseMessageView({icon,title,tone,message,linkList,displayTroubleshooting}){var renderIcon=useCallback(function(){return icon?.endsWith('Solid')?_jsx(Icon,{name:icon,size:\"$14\",color:getColors(tone).iconColor}):_jsx(Stack,{alignSelf:\"flex-start\",p:\"$3\",borderRadius:\"$full\",bg:getColors(tone).iconWrapperBg,children:_jsx(Icon,{name:icon,size:\"$7\",color:getColors(tone).iconColor})});},[icon,tone]);return _jsxs(Stack,{py:\"$6\",gap:\"$5\",\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"FirmwareUpdateBaseMessageView\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateBaseMessageView.tsx\",children:[_jsxs(Stack,{\"data-sentry-element\":\"Stack\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateBaseMessageView.tsx\",children:[icon?renderIcon():null,title?_jsx(SizableText,{my:\"$4\",size:\"$heading2xl\",children:title}):null,message?_jsx(RichSizeableText,{size:\"$bodyLg\",color:\"$textSubdued\",linkList:linkList,children:message}):null]}),displayTroubleshooting?_jsx(UpdateErrorTroubleshooting,{}):null]});}","import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import{useCallback,useMemo}from'react';import{HardwareErrorCode}from'@onekeyfe/hd-shared';import{useIntl}from'react-intl';import{Image,RichSizeableText,SizableText,Stack}from'@onekeyhq/components';import{EFirmwareUpdateSteps,useFirmwareUpdateStepInfoAtom}from'@onekeyhq/kit-bg/src/states/jotai/atoms';import{FIRMWARE_MANUAL_ENTERING_BOOTLOADER_MODE_GUIDE,FIRMWARE_UPDATE_BRIDGE_GUIDE,FIRMWARE_UPDATE_FULL_RES_GUIDE,FIRMWARE_UPDATE_WEB_TOOLS_URL}from'@onekeyhq/shared/src/config/appConfig';import{ECustomOneKeyHardwareError}from'@onekeyhq/shared/src/errors/types/errorTypes';import{isHardwareErrorByCode}from'@onekeyhq/shared/src/errors/utils/deviceErrorUtils';import{ETranslations}from'@onekeyhq/shared/src/locale';import{openUrlExternal}from'@onekeyhq/shared/src/utils/openUrlUtils';import{EFirmwareUpdateTipMessages}from'@onekeyhq/shared/types/device';import backgroundApiProxy from\"../../../background/instance/backgroundApiProxy\";import ImgEnterBootGuideMini from\"../assets/enter-boot-guide-mini.png\";import{FirmwareUpdateBaseMessageView}from\"./FirmwareUpdateBaseMessageView\";import{FirmwareUpdatePageFooter}from\"./FirmwareUpdatePageLayout\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function CommonError({message,title,icon,displayTroubleshooting}){var intl=useIntl();return _jsx(FirmwareUpdateBaseMessageView,{icon:icon,tone:\"destructive\",title:title||intl.formatMessage({id:ETranslations.global_an_error_occurred}),message:message,displayTroubleshooting:displayTroubleshooting,\"data-sentry-element\":\"FirmwareUpdateBaseMessageView\",\"data-sentry-component\":\"CommonError\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx\"});}function ShouldUpdateBridge({result}){var intl=useIntl();return _jsxs(Stack,{\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"ShouldUpdateBridge\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx\",children:[_jsx(FirmwareUpdateBaseMessageView,{icon:\"InfoCircleOutline\",title:intl.formatMessage({id:ETranslations.update_outdated_version_detected}),message:intl.formatMessage({id:ETranslations.update_hardware_update_requires_bridge}),linkList:{url:{url:FIRMWARE_UPDATE_BRIDGE_GUIDE}},\"data-sentry-element\":\"FirmwareUpdateBaseMessageView\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx\"}),_jsx(FirmwareUpdatePageFooter,{onConfirm:function(){openUrlExternal(FIRMWARE_UPDATE_BRIDGE_GUIDE);},onConfirmText:intl.formatMessage({id:ETranslations.global_view_tutorial}),\"data-sentry-element\":\"FirmwareUpdatePageFooter\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx\"})]});}function ShouldUpdateByWeb(){var intl=useIntl();return _jsxs(Stack,{\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"ShouldUpdateByWeb\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx\",children:[_jsx(FirmwareUpdateBaseMessageView,{icon:\"InfoCircleOutline\",title:intl.formatMessage({id:ETranslations.update_update_in_official_web_tool}),message:intl.formatMessage({id:ETranslations.update_update_in_official_web_tool_desc}),linkList:{url:{url:FIRMWARE_UPDATE_WEB_TOOLS_URL}},\"data-sentry-element\":\"FirmwareUpdateBaseMessageView\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx\"}),_jsx(FirmwareUpdatePageFooter,{onConfirm:function(){openUrlExternal(FIRMWARE_UPDATE_WEB_TOOLS_URL);},onConfirmText:intl.formatMessage({id:ETranslations.global_visit_website}),\"data-sentry-element\":\"FirmwareUpdatePageFooter\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx\"})]});}function HowToUpdateFullResource(){var intl=useIntl();return _jsxs(Stack,{\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"HowToUpdateFullResource\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx\",children:[_jsx(FirmwareUpdateBaseMessageView,{icon:\"InfoCircleOutline\",title:intl.formatMessage({id:ETranslations.update_outdated_version_detected}),message:intl.formatMessage({id:ETranslations.update_outdated_version_detected_desc}),linkList:{url:{url:FIRMWARE_UPDATE_FULL_RES_GUIDE}},\"data-sentry-element\":\"FirmwareUpdateBaseMessageView\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx\"}),_jsx(FirmwareUpdatePageFooter,{onConfirm:function(){openUrlExternal(FIRMWARE_UPDATE_FULL_RES_GUIDE);},onConfirmText:intl.formatMessage({id:ETranslations.global_view_tutorial}),\"data-sentry-element\":\"FirmwareUpdatePageFooter\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx\"})]});}export function EnterBootModeGuide({deviceType}){var intl=useIntl();if(deviceType==='mini'){return _jsxs(Stack,{mb:\"$6\",children:[_jsx(Image,{w:353,h:224,source:ImgEnterBootGuideMini}),_jsx(SizableText,{size:\"$headingMd\",children:intl.formatMessage({id:ETranslations.update_manually_entering_bootloader_mode})}),_jsx(SizableText,{mt:\"$2\",color:\"$textSubdued\",children:intl.formatMessage({id:ETranslations.update_manually_entering_bootloader_mode_desc})})]});}return _jsx(Stack,{mb:\"$6\",\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"EnterBootModeGuide\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx\",children:_jsx(RichSizeableText,{mt:\"$2\",linkList:{url:{url:FIRMWARE_MANUAL_ENTERING_BOOTLOADER_MODE_GUIDE}},\"data-sentry-element\":\"RichSizeableText\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx\",children:ETranslations.update_follow_online_tutorial_to_proceed_manually})});}export function useFirmwareUpdateErrors({error,onRetry,result,lastFirmwareTipMessage}){var intl=useIntl();var defaultRetryText=intl.formatMessage({id:ETranslations.global_retry});return useMemo(function(){if(isHardwareErrorByCode({error,code:[HardwareErrorCode.PinCancelled,HardwareErrorCode.ActionCancelled,HardwareErrorCode.DeviceInterruptedFromOutside]})){return{content:_jsx(CommonError,{icon:\"CrossedLargeOutline\",title:intl.formatMessage({id:ETranslations.update_operation_canceled}),message:intl.formatMessage({id:ETranslations.update_operation_canceled_desc})}),onRetryHandler:onRetry,retryText:defaultRetryText};}if(isHardwareErrorByCode({error,code:HardwareErrorCode.FirmwareUpdateDownloadFailed})){return{content:_jsx(CommonError,{icon:\"DownloadOutline\",title:intl.formatMessage({id:ETranslations.update_download_failed}),message:intl.formatMessage({id:ETranslations.update_check_connection_try_again})}),onRetryHandler:onRetry,retryText:defaultRetryText};}if(isHardwareErrorByCode({error,code:HardwareErrorCode.PinInvalid})){return{content:_jsx(CommonError,{icon:\"CrossedLargeOutline\",message:intl.formatMessage({id:ETranslations.hardware_invalid_pin_error})}),onRetryHandler:onRetry,retryText:defaultRetryText};}if(isHardwareErrorByCode({error,code:HardwareErrorCode.FirmwareUpdateManuallyEnterBoot})||isHardwareErrorByCode({error,code:HardwareErrorCode.FirmwareUpdateAutoEnterBootFailure})||error&&lastFirmwareTipMessage===EFirmwareUpdateTipMessages.AutoRebootToBootloader){return{content:_jsx(CommonError,{icon:\"CrossedLargeOutline\",title:intl.formatMessage({id:ETranslations.update_manually_entering_bootloader_mode})}),detail:_jsx(EnterBootModeGuide,{deviceType:result?.deviceType}),onRetryHandler:onRetry,retryText:result?.deviceType==='mini'?intl.formatMessage({id:ETranslations.update_verify_status_and_continue}):defaultRetryText};}if(isHardwareErrorByCode({error,code:[HardwareErrorCode.BridgeNetworkError]})){return{content:_jsx(CommonError,{icon:\"CrossedLargeOutline\",title:intl.formatMessage({id:ETranslations.update_bridge_network_error}),message:intl.formatMessage({id:ETranslations.update_unable_to_connect_to_bridge})}),onRetryHandler:onRetry,retryText:defaultRetryText};}if(isHardwareErrorByCode({error,code:[HardwareErrorCode.BridgeTimeoutError]})){return{content:_jsx(CommonError,{icon:\"CrossedLargeOutline\",title:intl.formatMessage({id:ETranslations.update_bridge_timeout_error}),message:intl.formatMessage({id:ETranslations.update_connection_to_bridge_timed_out})}),onRetryHandler:onRetry,retryText:defaultRetryText};}if(isHardwareErrorByCode({error,code:[HardwareErrorCode.BridgeNotInstalled,ECustomOneKeyHardwareError.NeedOneKeyBridge]})){return{content:_jsx(FirmwareUpdateBaseMessageView,{icon:\"CrossedLargeOutline\",tone:\"destructive\",title:intl.formatMessage({id:ETranslations.update_bridge_not_installed}),message:intl.formatMessage({id:ETranslations.update_hardware_update_requires_bridge}),linkList:{url:{url:FIRMWARE_UPDATE_BRIDGE_GUIDE}}}),onRetryHandler:onRetry,retryText:defaultRetryText};}if(isHardwareErrorByCode({error,code:ECustomOneKeyHardwareError.NeedOneKeyBridgeUpgrade})){return{content:_jsx(ShouldUpdateBridge,{result:result}),retryText:defaultRetryText};}if(isHardwareErrorByCode({error,code:ECustomOneKeyHardwareError.NeedFirmwareUpgradeFromWeb})){return{content:_jsx(ShouldUpdateByWeb,{}),retryText:defaultRetryText};}if(isHardwareErrorByCode({error,code:HardwareErrorCode.UseDesktopToUpdateFirmware})){return{content:_jsx(HowToUpdateFullResource,{}),retryText:defaultRetryText};}if(error){var message=error?.message;if(error.code===4500){message=intl.formatMessage({id:ETranslations.feedback_hw_polling_time_out});}return{content:_jsx(CommonError,{icon:\"CrossedLargeOutline\",message:message,displayTroubleshooting:true}),onRetryHandler:onRetry,retryText:defaultRetryText};}return{content:null,retryText:defaultRetryText};},[intl,error,lastFirmwareTipMessage,defaultRetryText,onRetry,result]);}function WorkflowErrors({onRetry,error,result}){var intl=useIntl();var{onRetryHandler,content,retryText}=useFirmwareUpdateErrors({error,onRetry,result,lastFirmwareTipMessage:undefined});return _jsxs(_Fragment,{children:[_jsx(FirmwareUpdatePageFooter,{onConfirm:onRetryHandler,onConfirmText:retryText||intl.formatMessage({id:ETranslations.global_retry}),\"data-sentry-element\":\"FirmwareUpdatePageFooter\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx\"}),content]});}function InstallingErrors({retryInfo,result,lastFirmwareTipMessage}){var intl=useIntl();var[,setStepInfo]=useFirmwareUpdateStepInfoAtom();var onRetry=useCallback(_asyncToGenerator(function*(){if(!retryInfo){return null;}setStepInfo({step:EFirmwareUpdateSteps.updateStart,payload:{startAtTime:Date.now()}});yield backgroundApiProxy.serviceFirmwareUpdate.retryUpdateTask({id:retryInfo?.id,connectId:result?.updatingConnectId,releaseResult:result});}),[result,retryInfo,setStepInfo]);var{content,detail,onRetryHandler,retryText}=useFirmwareUpdateErrors({onRetry,result,lastFirmwareTipMessage,error:retryInfo?.error});return _jsxs(_Fragment,{children:[_jsx(FirmwareUpdatePageFooter,{onConfirm:onRetryHandler,onConfirmText:retryText||intl.formatMessage({id:ETranslations.global_retry}),\"data-sentry-element\":\"FirmwareUpdatePageFooter\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateErrors.tsx\"}),content,detail]});}export var FirmwareUpdateErrors={ShouldUpdateBridge,CommonError,EnterBootModeGuide,WorkflowErrors,InstallingErrors};","import{useCallback,useEffect}from'react';import{useIntl}from'react-intl';import Alert from\"react-native-web/dist/exports/Alert\";import BackHandler from\"react-native-web/dist/exports/BackHandler\";import{Dialog,usePreventRemove}from'@onekeyhq/components';import{ETranslations}from'@onekeyhq/shared/src/locale';import platformEnv from'@onekeyhq/shared/src/platformEnv';import useAppNavigation from\"../../../hooks/useAppNavigation\";import{useAppRoute}from\"../../../hooks/useAppRoute\";import{useFirmwareUpdateActions}from\"./useFirmwareUpdateActions\";var isNavExitConfirmShow=false;export function useModalExitPrevent({title,message,shouldPreventRemove=true}){var intl=useIntl();var navigation=useAppNavigation();var navPreventRemoveCallback=useCallback(function({data}){if(isNavExitConfirmShow){return;}isNavExitConfirmShow=true;Dialog.show({title,description:message,onConfirmText:intl.formatMessage({id:ETranslations.global_quit}),onConfirm:function(){navigation.dispatch(data.action);},onCancelText:intl.formatMessage({id:ETranslations.global_cancel}),onClose:function(){isNavExitConfirmShow=false;}});},[message,navigation,title,intl]);usePreventRemove(shouldPreventRemove,navPreventRemoveCallback);}export function useAppExitPrevent({message,title,shouldPreventExitOnAndroid=true}){var intl=useIntl();useEffect(function(){if(platformEnv.isRuntimeBrowser&&!platformEnv.isExtensionUiPopup){var fn=function(event){event.preventDefault();event.returnValue=true;return message;};window.addEventListener('beforeunload',fn);return function(){window.removeEventListener('beforeunload',fn);};}},[message]);useEffect(function(){if(!shouldPreventExitOnAndroid){return;}var onBackPress=function(){Alert.alert(title,message,[{text:intl.formatMessage({id:ETranslations.global_cancel}),onPress:function(){},style:'cancel'},{text:intl.formatMessage({id:ETranslations.global_quit}),onPress:function(){return BackHandler.exitApp();}}],{cancelable:false});return true;};var backHandler=BackHandler.addEventListener('hardwareBackPress',onBackPress);return function(){return backHandler.remove();};},[message,title,intl,shouldPreventExitOnAndroid]);}export function useExtensionUpdatingFromExpandTab(){var route=useAppRoute();var actions=useFirmwareUpdateActions();useEffect(function(){if(platformEnv.isExtensionUiPopup){void actions.openChangeLogOfExtension(route.params);window.close();}},[actions,route.params]);}","import{useKeepAwake}from'expo-keep-awake';import{useIntl}from'react-intl';import{ETranslations}from'@onekeyhq/shared/src/locale';import{useAppExitPrevent,useExtensionUpdatingFromExpandTab,useModalExitPrevent}from\"../hooks/useFirmwareUpdateHooks\";export function ForceExtensionUpdatingFromExpandTab(){useExtensionUpdatingFromExpandTab();return null;}export function FirmwareUpdateExitPrevent({shouldPreventRemove=true}){var intl=useIntl();var title=intl.formatMessage({id:ETranslations.update_quit_update});var message=intl.formatMessage({id:ETranslations.update_quit_update_desc});useKeepAwake();useModalExitPrevent({shouldPreventRemove,title,message});useAppExitPrevent({title,message,shouldPreventExitOnAndroid:false});return null;}","import{useIntl}from'react-intl';import{Page,Stack}from'@onekeyhq/components';import{ETranslations}from'@onekeyhq/shared/src/locale';import useAppNavigation from\"../../../hooks/useAppNavigation\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function FirmwareUpdatePageHeader(){var intl=useIntl();return _jsx(Page.Header,{dismissOnOverlayPress:false,title:intl.formatMessage({id:ETranslations.update_hardware_update}),\"data-sentry-element\":\"unknown\",\"data-sentry-component\":\"FirmwareUpdatePageHeader\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx\"});}export var FirmwareUpdatePageFooter=Page.Footer;export function FirmwareUpdatePageLayout({children}){var navigation=useAppNavigation();return _jsxs(Stack,{\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"FirmwareUpdatePageLayout\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx\",children:[_jsx(FirmwareUpdatePageHeader,{\"data-sentry-element\":\"FirmwareUpdatePageHeader\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx\"}),_jsx(Page.Body,{\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx\",children:_jsx(Stack,{p:\"$5\",\"data-sentry-element\":\"Stack\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdatePageLayout.tsx\",children:children})})]});}","import _isNumber from\"lodash/isNumber\";import{useCallback,useEffect,useMemo,useRef,useState}from'react';import{useIntl}from'react-intl';import{Button,Progress,SizableText,Skeleton,Stack}from'@onekeyhq/components';import{EFirmwareUpdateSteps,EHardwareUiStateAction,useFirmwareUpdateRetryAtom,useFirmwareUpdateStepInfoAtom,useHardwareUiStateAtom,useHardwareUiStateCompletedAtom}from'@onekeyhq/kit-bg/src/states/jotai/atoms';import{ETranslations}from'@onekeyhq/shared/src/locale';import deviceUtils from'@onekeyhq/shared/src/utils/deviceUtils';import{EFirmwareUpdateTipMessages}from'@onekeyhq/shared/types/device';import backgroundApiProxy from\"../../../background/instance/backgroundApiProxy\";import{usePrevious}from\"../../../hooks/usePrevious\";import{FirmwareVersionProgressBar}from\"./FirmwareVersionProgressBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var checkingMaxProgress=10;export function FirmwareUpdateProgressBarView({totalStep,currentStep,title,fromVersion:versionFrom,toVersion:versionTo,progress,desc}){var intl=useIntl();var phaseStepView=useMemo(function(){if(!totalStep||!currentStep){return _jsx(Skeleton,{width:120,height:16});}if(totalStep<=1){return null;}return _jsx(SizableText,{size:\"$bodyMd\",color:\"$textSubdued\",children:intl.formatMessage({id:ETranslations.global_step_str},{step:`${currentStep}/${totalStep}`})});},[intl,currentStep,totalStep]);var versionView=useMemo(function(){if(!versionTo){return _jsx(Skeleton,{width:80,height:16});}return _jsx(FirmwareVersionProgressBar,{fromVersion:versionFrom,toVersion:versionTo});},[versionFrom,versionTo]);return _jsxs(Stack,{py:\"$6\",\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"FirmwareUpdateProgressBarView\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx\",children:[phaseStepView,_jsx(SizableText,{size:\"$heading2xl\",my:\"$3\",\"data-sentry-element\":\"SizableText\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx\",children:title}),versionView,_jsx(Stack,{mt:\"$12\",mb:\"$3\",\"data-sentry-element\":\"Stack\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx\",children:_jsx(Progress,{size:\"medium\",value:progress,\"data-sentry-element\":\"Progress\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx\"})}),_jsx(SizableText,{size:\"$bodyLg\",color:\"$textSubdued\",\"data-sentry-element\":\"SizableText\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx\",children:desc})]});}export function FirmwareUpdateProgressBar({lastFirmwareTipMessage,isDone}){var intl=useIntl();var[stepInfo]=useFirmwareUpdateStepInfoAtom();var[state]=useHardwareUiStateAtom();var[stateFull]=useHardwareUiStateCompletedAtom();var[progress,setProgress]=useState(1);var[retryInfo]=useFirmwareUpdateRetryAtom();var progressRef=useRef(progress);progressRef.current=progress;var progressMaxRef=useRef(checkingMaxProgress);var defaultDesc=useCallback(function(){return intl.formatMessage({id:ETranslations.global_checking_device});},[intl]);var[desc,setDesc]=useState(defaultDesc());var firmwareType=useMemo(function(){if(stepInfo?.step===EFirmwareUpdateSteps.installing){return stepInfo.payload.installingTarget?.updateInfo?.firmwareType||undefined;}},[stepInfo.payload,stepInfo?.step]);var{totalStep,currentStep}=useMemo(function(){if(stepInfo?.step===EFirmwareUpdateSteps.installing){var installingTarget=stepInfo?.payload?.installingTarget;if(installingTarget){return{totalStep:installingTarget.totalPhase.length,currentStep:installingTarget.totalPhase.findIndex(function(item){return item===installingTarget.currentPhase;})+1};}}return{totalPhase:null,currentPhase:null};},[stepInfo.payload,stepInfo?.step]);var firmwareVersionInfo=useMemo(function(){if(stepInfo?.step===EFirmwareUpdateSteps.installing){return{fromVersion:stepInfo.payload.installingTarget?.updateInfo.fromVersion||undefined,toVersion:stepInfo.payload.installingTarget?.updateInfo.toVersion||undefined};}},[stepInfo.payload,stepInfo?.step]);var firmwareTipMessage=state?.payload?.firmwareTipData?.message;var firmwareProgress=state?.payload?.firmwareProgress;var isConfirmOnDevice=deviceUtils.isConfirmOnDeviceAction(state);var isUpdatingResource=[EFirmwareUpdateTipMessages.CheckLatestUiResource,EFirmwareUpdateTipMessages.DownloadLatestUiResource,EFirmwareUpdateTipMessages.DownloadLatestUiResourceSuccess,EFirmwareUpdateTipMessages.UpdateSysResource,EFirmwareUpdateTipMessages.UpdateSysResourceSuccess].includes(lastFirmwareTipMessage);var prevFirmwareType=usePrevious(firmwareType);var firmwareProgressRef=useRef(firmwareProgress);firmwareProgressRef.current=firmwareProgress;var installProgressList=useRef([]);var titleText=useMemo(function(){var text=intl.formatMessage({id:ETranslations.global_preparing});if(lastFirmwareTipMessage){text=intl.formatMessage({id:ETranslations.global_updating});}if(firmwareType){text=intl.formatMessage({id:ETranslations.global_updating_type},{type:firmwareType});if(firmwareType==='ble'){text=intl.formatMessage({id:ETranslations.global_updating_type},{type:intl.formatMessage({id:ETranslations.global_bluetooth})});}}if(isDone){text=intl.formatMessage({id:ETranslations.global_done});}return text;},[intl,firmwareType,isDone,lastFirmwareTipMessage]);var updateProgress=useCallback(function(type){var progressConfig=[{type:['checking'],progress:function(){return 1;},progressMax:function(){return checkingMaxProgress;},desc:function(){return intl.formatMessage({id:ETranslations.update_checking_device_if_no_restart});}},{type:[EFirmwareUpdateTipMessages.CheckLatestUiResource],progress:function(){return 2;},desc:function(){return intl.formatMessage({id:ETranslations.update_checking_latest_ui_resources});}},{type:[EFirmwareUpdateTipMessages.DownloadLatestUiResource],progress:function(){return 3;},desc:function(){return intl.formatMessage({id:ETranslations.update_downloading_latest_ui_resources});}},{type:[EFirmwareUpdateTipMessages.DownloadLatestUiResourceSuccess],progress:function(){return 5;},desc:function(){return intl.formatMessage({id:ETranslations.update_download_success});}},{type:[EFirmwareUpdateTipMessages.UpdateSysResource],progress:function(){return 7;},desc:function(){return intl.formatMessage({id:ETranslations.update_updating_ui_resources});}},{type:[EFirmwareUpdateTipMessages.UpdateSysResourceSuccess],progress:function(){return 9;},desc:function(){return intl.formatMessage({id:ETranslations.update_update_ui_resources_success});}},{type:[EFirmwareUpdateTipMessages.AutoRebootToBootloader],progress:function(){return 10;},desc:function(){return intl.formatMessage({id:ETranslations.update_reboot_to_bootloader_mode});}},{type:[EFirmwareUpdateTipMessages.GoToBootloaderSuccess],progress:function(){return 12;},desc:function(){return intl.formatMessage({id:ETranslations.update_reboot_success});}},{type:[EFirmwareUpdateTipMessages.DownloadFirmware,EFirmwareUpdateTipMessages.DownloadLatestBootloaderResource],progress:function(){return 14;},desc:function(){return intl.formatMessage({id:ETranslations.update_downloading});}},{type:[EFirmwareUpdateTipMessages.DownloadFirmwareSuccess,EFirmwareUpdateTipMessages.DownloadLatestBootloaderResourceSuccess],progress:function(){return 20;},desc:function(){return intl.formatMessage({id:ETranslations.update_download_success});}},{type:[EFirmwareUpdateTipMessages.FirmwareEraseSuccess],progress:function(){return 25;},desc:function(){return intl.formatMessage({id:ETranslations.update_transferring_data});}},{type:['installing'],progress:function(){var _firmwareProgressRef$;var startAt=30;var newProgress=startAt+((_firmwareProgressRef$=firmwareProgressRef.current)!=null?_firmwareProgressRef$:0)*((100-startAt)/100);if(newProgress>=99){newProgress=99;}return newProgress;},desc:function(){if(firmwareProgressRef.current===100){return intl.formatMessage({id:ETranslations.update_installing});}return intl.formatMessage({id:ETranslations.update_transferring_data});}},{type:['done'],progress:function(){return 100;},desc:function(){return intl.formatMessage({id:ETranslations.update_update_completed});}}];var index=progressConfig.findIndex(function(c){return c.type.includes(type);});if(index>=0){var _item$progressMax;var item=progressConfig[index];var itemProgress=item.progress();var currentProgress=progressRef.current;setProgress(function(){var newProgress=Math.max(itemProgress,currentProgress);progressRef.current=newProgress;return newProgress;});setDesc(item.desc());var nextItem=progressConfig[index+1];var maxProgress=(_item$progressMax=item?.progressMax?.())!=null?_item$progressMax:nextItem?.progress();if(maxProgress){progressMaxRef.current=maxProgress;}else{progressMaxRef.current=99;}}},[intl]);var updateProgressRef=useRef(updateProgress);updateProgressRef.current=updateProgress;useEffect(function(){if(retryInfo){return;}if(firmwareType&&prevFirmwareType&&firmwareType!==prevFirmwareType){setProgress(1);progressRef.current=1;progressMaxRef.current=99;updateProgressRef.current('checking');}},[firmwareType,prevFirmwareType,retryInfo]);useEffect(function(){if(stepInfo?.step===EFirmwareUpdateSteps.updateStart||!firmwareType){setDesc(defaultDesc());}},[defaultDesc,firmwareType,stepInfo?.step]);useEffect(function(){var timer=setInterval(function(){if(retryInfo||isDone){return;}if(isConfirmOnDevice)return;var currentProgress=progressRef.current;setProgress(function(){if(currentProgress>=progressMaxRef.current)return progressMaxRef.current;if(currentProgress>=99)return 99;var newProgress=Math.min(currentProgress+1,progressMaxRef.current,99);progressRef.current=newProgress;return newProgress;});},2000);return function(){clearInterval(timer);};},[firmwareType,isConfirmOnDevice,isDone,retryInfo]);useEffect(function(){if(isDone){setTimeout(function(){updateProgressRef.current('done');},1000);}},[isDone]);useEffect(function(){if(firmwareTipMessage){installProgressList.current.push(firmwareTipMessage);}},[firmwareTipMessage]);useEffect(function(){if(_isNumber(firmwareProgress)){updateProgressRef.current('installing');}},[firmwareProgress]);useEffect(function(){if(stateFull?.action===EHardwareUiStateAction.CLOSE_UI_WINDOW){void backgroundApiProxy.serviceHardwareUI.closeHardwareUiStateDialog({skipDeviceCancel:true,connectId:undefined});}},[stateFull?.action]);useEffect(function(){if(lastFirmwareTipMessage){updateProgressRef.current(lastFirmwareTipMessage);}},[lastFirmwareTipMessage]);var[showDebugInfo,setShowDebugInfo]=useState(false);var debugInfo=useMemo(function(){if(\"production\"!=='production'){return _jsxs(Stack,{my:\"$6\",children:[_jsxs(Button,{size:\"small\",onPress:function(){setShowDebugInfo(function(v){return!v;});},children:[\"ProgressDebugInfo (\",parseInt(progress.toFixed(),10),\"%)\"]}),showDebugInfo?_jsxs(Stack,{children:[_jsxs(SizableText,{children:[\"lastTipMessage:\",lastFirmwareTipMessage,\" (\",firmwareProgress!=null?firmwareProgress:'--',\"%)\"]}),installProgressList.current.map(function(item,index){return _jsxs(SizableText,{children:[index+1,\". \",item]},index);})]}):null]});}},[firmwareProgress,lastFirmwareTipMessage,progress,showDebugInfo]);return _jsxs(Stack,{\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"FirmwareUpdateProgressBar\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx\",children:[_jsx(FirmwareUpdateProgressBarView,{totalStep:totalStep,currentStep:currentStep,title:titleText,progress:progress,desc:desc,fromVersion:firmwareVersionInfo?.fromVersion,toVersion:firmwareVersionInfo?.toVersion,\"data-sentry-element\":\"FirmwareUpdateProgressBarView\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateProgressBar.tsx\"}),debugInfo]});}","import{WalletAvatar}from\"../WalletAvatar\";import{jsx as _jsx}from\"react/jsx-runtime\";export function DeviceAvatar({deviceType,size}){return _jsx(WalletAvatar,{img:deviceType||'unknown',wallet:undefined,size:size,\"data-sentry-element\":\"WalletAvatar\",\"data-sentry-component\":\"DeviceAvatar\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/DeviceAvatar/DeviceAvatar.tsx\"});}","import{useIntl}from'react-intl';import{SizableText,Stack}from'@onekeyhq/components';import{ETranslations}from'@onekeyhq/shared/src/locale';import{DeviceAvatar}from\"../../../components/DeviceAvatar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function FirmwareUpdateWalletProfile({result}){var intl=useIntl();return _jsxs(Stack,{onPress:function(){},\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"FirmwareUpdateWalletProfile\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateWalletProfile.tsx\",children:[_jsx(DeviceAvatar,{size:\"$14\",deviceType:result?.deviceType||'unknown',\"data-sentry-element\":\"DeviceAvatar\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateWalletProfile.tsx\"}),_jsxs(SizableText,{mt:\"$5\",size:\"$heading2xl\",\"data-sentry-element\":\"SizableText\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateWalletProfile.tsx\",children:[intl.formatMessage({id:ETranslations.update_new_hardware_updates}),' ']})]});}","import{useIntl}from'react-intl';import{Alert}from'@onekeyhq/components';import{ETranslations}from'@onekeyhq/shared/src/locale';import platformEnv from'@onekeyhq/shared/src/platformEnv';import{jsx as _jsx}from\"react/jsx-runtime\";export function FirmwareUpdateWarningMessage(){var intl=useIntl();return _jsx(Alert,{type:\"warning\",title:intl.formatMessage({id:false?ETranslations.update_keep_bluetooth_connected_and_app_active:ETranslations.update_keep_usb_connected_and_app_active}),fullBleed:true,mx:\"$-5\",\"data-sentry-element\":\"Alert\",\"data-sentry-component\":\"FirmwareUpdateWarningMessage\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareUpdateWarningMessage.tsx\"});}","import{useCallback}from'react';import{useIntl}from'react-intl';import semver from'semver';import{Badge,Icon,XStack}from'@onekeyhq/components';import{ETranslations}from'@onekeyhq/shared/src/locale';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function FirmwareVersionProgressBar({fromVersion='',toVersion=''}){var intl=useIntl();var unknownMessage=intl.formatMessage({id:ETranslations.global_unknown});var versionValid=useCallback(function(version){if(!version)return false;if(semver.valid(version)){if(semver.eq(version,'0.0.0')){return false;}return true;}return false;},[]);return _jsxs(XStack,{gap:\"$2.5\",alignItems:\"center\",\"data-sentry-element\":\"XStack\",\"data-sentry-component\":\"FirmwareVersionProgressBar\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareVersionProgressBar.tsx\",children:[_jsx(Badge,{badgeType:\"default\",badgeSize:\"lg\",\"data-sentry-element\":\"Badge\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareVersionProgressBar.tsx\",children:versionValid(fromVersion)?fromVersion:unknownMessage}),_jsx(Icon,{name:\"ArrowRightSolid\",size:\"$4\",\"data-sentry-element\":\"Icon\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareVersionProgressBar.tsx\"}),_jsx(Badge,{badgeType:\"info\",badgeSize:\"lg\",\"data-sentry-element\":\"Badge\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/components/FirmwareVersionProgressBar.tsx\",children:toVersion?.length>0?toVersion:unknownMessage})]});}","import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import{useMemo}from'react';import{Page}from'@onekeyhq/components';import{EFirmwareUpdateSteps,useFirmwareUpdateStepInfoAtom}from'@onekeyhq/kit-bg/src/states/jotai/atoms';import backgroundApiProxy from\"../../../background/instance/backgroundApiProxy\";import useAppNavigation from\"../../../hooks/useAppNavigation\";import{useAppRoute}from\"../../../hooks/useAppRoute\";import{FirmwareInstallingView}from\"../components/FirmwareInstallingView\";import{FirmwareLatestVersionInstalled}from\"../components/FirmwareLatestVersionInstalled\";import{FirmwareUpdateExitPrevent,ForceExtensionUpdatingFromExpandTab}from\"../components/FirmwareUpdateExitPrevent\";import{FirmwareUpdatePageLayout}from\"../components/FirmwareUpdatePageLayout\";import{FirmwareUpdateWarningMessage}from\"../components/FirmwareUpdateWarningMessage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PageFirmwareUpdateInstall(){var route=useAppRoute();var{result}=route.params;var navigation=useAppNavigation();var[stepInfo]=useFirmwareUpdateStepInfoAtom();var content=useMemo(function(){if(stepInfo.step===EFirmwareUpdateSteps.updateStart||stepInfo.step===EFirmwareUpdateSteps.installing||stepInfo.step===EFirmwareUpdateSteps.updateDone){var isDone=stepInfo.step===EFirmwareUpdateSteps.updateDone;return _jsxs(_Fragment,{children:[!isDone?_jsxs(_Fragment,{children:[_jsx(FirmwareUpdateWarningMessage,{}),_jsx(FirmwareUpdateExitPrevent,{})]}):null,_jsx(FirmwareInstallingView,{result:result,isDone:isDone})]});}if(stepInfo.step===EFirmwareUpdateSteps.error){requestAnimationFrame(function(){navigation.pop();});return _jsx(FirmwareUpdateExitPrevent,{shouldPreventRemove:false});}return _jsx(_Fragment,{children:_jsx(FirmwareLatestVersionInstalled,{})});},[stepInfo.step,result,navigation]);return _jsx(Page,{scrollEnabled:true,onUnmounted:_asyncToGenerator(function*(){yield backgroundApiProxy.serviceFirmwareUpdate.exitUpdateWorkflow();if(result?.originalConnectId){yield backgroundApiProxy.serviceHardware.cancel({connectId:result.originalConnectId,forceDeviceResetToHome:true});}}),\"data-sentry-element\":\"Page\",\"data-sentry-component\":\"PageFirmwareUpdateInstall\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/pages/PageFirmwareUpdateInstall.tsx\",children:_jsxs(FirmwareUpdatePageLayout,{\"data-sentry-element\":\"FirmwareUpdatePageLayout\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/pages/PageFirmwareUpdateInstall.tsx\",children:[_jsx(ForceExtensionUpdatingFromExpandTab,{\"data-sentry-element\":\"ForceExtensionUpdatingFromExpandTab\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FirmwareUpdate/pages/PageFirmwareUpdateInstall.tsx\"}),content]})});}export default PageFirmwareUpdateInstall;","export var KeepAwakeEventState;(function(KeepAwakeEventState){KeepAwakeEventState[\"RELEASE\"]=\"release\";})(KeepAwakeEventState||(KeepAwakeEventState={}));","import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import{CodedError,Platform}from'expo-modules-core';import{KeepAwakeEventState}from\"./KeepAwake.types\";var wakeLockMap={};export default{isAvailableAsync(){return _asyncToGenerator(function*(){if(Platform.isDOMAvailable){return'wakeLock'in navigator;}return false;})();},activate(tag){return _asyncToGenerator(function*(){if(!Platform.isDOMAvailable){return;}var wakeLock=yield navigator.wakeLock.request('screen');wakeLockMap[tag]=wakeLock;})();},deactivate(tag){return _asyncToGenerator(function*(){if(!Platform.isDOMAvailable){return;}if(wakeLockMap[tag]){wakeLockMap[tag].release?.();delete wakeLockMap[tag];}else{throw new CodedError('ERR_KEEP_AWAKE_TAG_INVALID',`The wake lock with tag ${tag} has not activated yet`);}})();},addListenerForTag(tag,listener){var eventListener=function(){listener({state:KeepAwakeEventState.RELEASE});};var sentinel=wakeLockMap[tag];if(sentinel){if('addEventListener'in sentinel){sentinel.addEventListener?.('release',eventListener);}else{sentinel.onrelease=eventListener;}}return{remove:function(){var sentinel=wakeLockMap[tag];if(sentinel){if(sentinel.removeEventListener){sentinel.removeEventListener('release',eventListener);}else{sentinel.onrelease=null;}}}};}};","import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import{UnavailabilityError}from'expo-modules-core';import{useEffect}from'react';import ExpoKeepAwake from\"./ExpoKeepAwake\";export var ExpoKeepAwakeTag='ExpoKeepAwakeDefaultTag';export function isAvailableAsync(){return _isAvailableAsync.apply(this,arguments);}function _isAvailableAsync(){_isAvailableAsync=_asyncToGenerator(function*(){if(ExpoKeepAwake.isAvailableAsync){return yield ExpoKeepAwake.isAvailableAsync();}return true;});return _isAvailableAsync.apply(this,arguments);}export function useKeepAwake(tag=ExpoKeepAwakeTag,options){useEffect(function(){var isMounted=true;activateKeepAwakeAsync(tag).then(function(){if(isMounted&&ExpoKeepAwake.addListenerForTag&&options?.listener){addListener(tag,options.listener);}});return function(){isMounted=false;if(options?.suppressDeactivateWarnings){deactivateKeepAwake(tag).catch(function(){});}else{deactivateKeepAwake(tag);}};},[tag]);}export function activateKeepAwake(tag=ExpoKeepAwakeTag){return activateKeepAwakeAsync(tag);}export function activateKeepAwakeAsync(){return _activateKeepAwakeAsync.apply(this,arguments);}function _activateKeepAwakeAsync(){_activateKeepAwakeAsync=_asyncToGenerator(function*(tag=ExpoKeepAwakeTag){yield ExpoKeepAwake.activate?.(tag);});return _activateKeepAwakeAsync.apply(this,arguments);}export function deactivateKeepAwake(){return _deactivateKeepAwake.apply(this,arguments);}function _deactivateKeepAwake(){_deactivateKeepAwake=_asyncToGenerator(function*(tag=ExpoKeepAwakeTag){yield ExpoKeepAwake.deactivate?.(tag);});return _deactivateKeepAwake.apply(this,arguments);}export function addListener(tagOrListener,listener){if(!ExpoKeepAwake.addListenerForTag){throw new UnavailabilityError('ExpoKeepAwake','addListenerForTag');}var tag=typeof tagOrListener==='string'?tagOrListener:ExpoKeepAwakeTag;var _listener=typeof tagOrListener==='function'?tagOrListener:listener;return ExpoKeepAwake.addListenerForTag(tag,_listener);}export*from\"./KeepAwake.types\";"],"names":["WalletAvatarBase","size","img","wallet","_AllWalletAvatarImage","_wallet$avatarInfo$em","theImg","avatarInfo","accountUtils","isHwHiddenWallet","Icon","name","color","Image","children","Source","source","bear","Fallback","delayMs","justifyContent","alignItems","SizableText","emoji","WalletAvatar","status","badge","Stack","w","h","position","bottom","right","bg","p","borderRadius","zIndex","px","textAlign","useAppRoute","ChangeLogMarkdown","changelog","locale","useSettingsPersistAtom","language","setLanguage","useState","useEffect","serviceSetting","getCurrentLocale","Markdown","ChangeLogSection","title","icon","isDone","updateInfo","intl","collapse","setCollapse","onDropDownPressed","useCallback","XStack","gap","py","ai","onPress","flex","formatMessage","id","ETranslations","update_updated_to_latest_version","version","toVersion","global_unknown","global_version_is_available","IconButton","variant","fromVersion","FirmwareChangeLogContentView","result","mt","updateInfos","bootloader","hasUpgrade","global_bootloader","ble","global_bluetooth","firmware","global_firmware","FirmwareChangeLogView","onConfirmClick","setStepInfo","useFirmwareUpdateStepInfoAtom","showCheckList","onConfirmText","update_update_now","onConfirm","step","EFirmwareUpdateSteps","payload","undefined","FirmwareUpdateDone","useIntl","actions","useFirmwareUpdateActions","FirmwareUpdateBaseMessageView","tone","update_all_updates_complete","global_got_it","closeUpdateModal","FirmwareInstallingViewBase","tipMessage","retryInfo","progressBarKey","FirmwareUpdateWalletProfile","content","useMemo","FirmwareUpdateErrors","InstallingErrors","lastFirmwareTipMessage","FirmwareUpdateProgressBar","FirmwareInstallingView","stepInfo","useFirmwareUpdateRetryAtom","state","useHardwareUiStateAtom","lastUpdateTimeRef","useRef","updateStart","current","startAtTime","firmwareTipMessage","firmwareTipData","message","setLastFirmwareTipMessage","FirmwareLatestVersionInstalled","jc","my","update_latest_version","getColors","iconWrapperBg","iconColor","UpdateErrorTroubleshooting","messageIntlKey","update_troubleshoot_connection_issues","textLines","defaultMessage","split","map","text","index","includes","RichSizeableText","linkList","url","displayTroubleshooting","renderIcon","endsWith","alignSelf","CommonError","global_an_error_occurred","ShouldUpdateBridge","update_outdated_version_detected","update_hardware_update_requires_bridge","global_view_tutorial","ShouldUpdateByWeb","update_update_in_official_web_tool","update_update_in_official_web_tool_desc","global_visit_website","HowToUpdateFullResource","update_outdated_version_detected_desc","EnterBootModeGuide","deviceType","mb","update_manually_entering_bootloader_mode","update_manually_entering_bootloader_mode_desc","update_follow_online_tutorial_to_proceed_manually","useFirmwareUpdateErrors","error","onRetry","defaultRetryText","global_retry","code","HardwareErrorCode","PinCancelled","ActionCancelled","DeviceInterruptedFromOutside","update_operation_canceled","update_operation_canceled_desc","onRetryHandler","retryText","FirmwareUpdateDownloadFailed","update_download_failed","update_check_connection_try_again","PinInvalid","hardware_invalid_pin_error","FirmwareUpdateManuallyEnterBoot","FirmwareUpdateAutoEnterBootFailure","AutoRebootToBootloader","detail","update_verify_status_and_continue","BridgeNetworkError","update_bridge_network_error","update_unable_to_connect_to_bridge","BridgeTimeoutError","update_bridge_timeout_error","update_connection_to_bridge_timed_out","BridgeNotInstalled","NeedOneKeyBridge","update_bridge_not_installed","NeedOneKeyBridgeUpgrade","NeedFirmwareUpgradeFromWeb","UseDesktopToUpdateFirmware","feedback_hw_polling_time_out","WorkflowErrors","Date","now","backgroundApiProxy","serviceFirmwareUpdate","retryUpdateTask","connectId","updatingConnectId","releaseResult","isNavExitConfirmShow","ForceExtensionUpdatingFromExpandTab","useExtensionUpdatingFromExpandTab","route","u","platformEnv","openChangeLogOfExtension","params","window","close","FirmwareUpdateExitPrevent","shouldPreventRemove","update_quit_update","update_quit_update_desc","useModalExitPrevent","navigation","useAppNavigation","navPreventRemoveCallback","data","Dialog","show","description","global_quit","dispatch","action","onCancelText","global_cancel","onClose","usePreventRemove","useAppExitPrevent","shouldPreventExitOnAndroid","isRuntimeBrowser","fn","event","preventDefault","returnValue","addEventListener","removeEventListener","backHandler","BackHandler","Alert","A","alert","style","exitApp","cancelable","remove","FirmwareUpdatePageHeader","Page","Header","dismissOnOverlayPress","update_hardware_update","FirmwareUpdatePageFooter","Footer","FirmwareUpdatePageLayout","Body","checkingMaxProgress","FirmwareUpdateProgressBarView","totalStep","currentStep","versionFrom","versionTo","progress","desc","phaseStepView","global_step_str","Skeleton","width","height","versionView","Progress","value","stateFull","useHardwareUiStateCompletedAtom","setProgress","progressRef","progressMaxRef","defaultDesc","global_checking_device","setDesc","firmwareType","installing","installingTarget","totalPhase","length","findIndex","item","currentPhase","firmwareVersionInfo","firmwareProgress","isConfirmOnDevice","isConfirmOnDeviceAction","prevFirmwareType","CheckLatestUiResource","DownloadLatestUiResource","DownloadLatestUiResourceSuccess","UpdateSysResource","UpdateSysResourceSuccess","firmwareProgressRef","installProgressList","titleText","global_preparing","global_updating","global_updating_type","type","global_done","updateProgress","progressConfig","progressMax","update_checking_device_if_no_restart","update_checking_latest_ui_resources","update_downloading_latest_ui_resources","update_download_success","update_updating_ui_resources","update_update_ui_resources_success","update_reboot_to_bootloader_mode","GoToBootloaderSuccess","update_reboot_success","DownloadFirmware","DownloadLatestBootloaderResource","update_downloading","DownloadFirmwareSuccess","DownloadLatestBootloaderResourceSuccess","FirmwareEraseSuccess","update_transferring_data","_firmwareProgressRef$","newProgress","update_installing","update_update_completed","c","_item$progressMax","itemProgress","currentProgress","Math","max","nextItem","maxProgress","updateProgressRef","timer","setInterval","min","clearInterval","setTimeout","push","EHardwareUiStateAction","CLOSE_UI_WINDOW","serviceHardwareUI","closeHardwareUiStateDialog","skipDeviceCancel","showDebugInfo","setShowDebugInfo","debugInfo","DeviceAvatar","update_new_hardware_updates","FirmwareUpdateWarningMessage","update_keep_usb_connected_and_app_active","fullBleed","mx","FirmwareVersionProgressBar","unknownMessage","versionValid","Badge","badgeType","badgeSize","PageFirmwareUpdateInstall","updateDone","requestAnimationFrame","pop","scrollEnabled","onUnmounted","exitUpdateWorkflow","originalConnectId","serviceHardware","cancel","forceDeviceResetToHome","KeepAwakeEventState","wakeLockMap","isAvailableAsync","Platform","isDOMAvailable","navigator","activate","tag","wakeLock","request","deactivate","CodedError","release","addListenerForTag","listener","eventListener","RELEASE","sentinel","onrelease","ExpoKeepAwakeTag","useKeepAwake","options","isMounted","activateKeepAwakeAsync","then","addListener","tagOrListener","UnavailabilityError","_listener","suppressDeactivateWarnings","deactivateKeepAwake","catch","_activateKeepAwakeAsync","apply","this","arguments","_deactivateKeepAwake"],"sourceRoot":""}