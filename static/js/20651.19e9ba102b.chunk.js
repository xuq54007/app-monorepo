!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="db864124-a4fb-437a-ba82-f778bdc6a776",e._sentryDebugIdIdentifier="sentry-dbid-db864124-a4fb-437a-ba82-f778bdc6a776")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[20651],{820651:(e,t,n)=>{n.r(t),n.d(t,{V4MigrationGetStarted:()=>V4MigrationGetStarted,default:()=>y});var o=n(586330),r=n(514041),a=n(908867),i=n(490343),s=n(643087),c=n(498356),p=n(334439),d=n(663522),u=n(193068),l=n(774614),g=n(883085),f=n(60406),m=n(831085);function V4MigrationGetStarted({route:e}){var t,y=(0,c.A)(),v=(0,a.A)(),b=Boolean(e?.params?.isAutoStartOnMount),[w,M]=(0,r.useState)(!1),k=(t=(0,o.A)((function*(){if(d.Ay.isWebDappMode)throw i.Toast.message({title:"V4Migration Not supported in web dapp mode"}),new Error("V4Migration Not supported in web dapp mode");var e,t=(e=(0,o.A)((function*(){try{M(!0);var e=yield s.A.serviceV4Migration.prepareMigration({isAutoStartOnMount:b}),goNext=function(){e.shouldBackup?y.push(u.xl.V4MigrationPreview):y.push(u.xl.V4MigrationProcess),M(!1)};if(!e.isV4PasswordEqualToV5){setTimeout((function(){M(!0)}),600);var t="";return void i.Dialog.show({showCancelButton:!0,onClose:function(){M(!1)},onConfirm:(n=(0,o.A)((function*(){(yield s.A.serviceV4Migration.setV4Password({v4password:yield s.A.servicePassword.encodeSensitiveText({text:t})}))?goNext():M(!1)})),function onConfirm(){return n.apply(this,arguments)}),title:v.formatMessage({id:p.ETranslationsMock.v4_migration_input_v4_password}),renderContent:(0,m.jsxs)(i.Stack,{children:[(0,m.jsx)(i.SizableText,{children:v.formatMessage({id:p.ETranslationsMock.v4_migration_input_v4_password_desc})}),(0,m.jsx)(i.Stack,{mt:"$4",children:(0,m.jsx)(i.Input,{secureTextEntry:!0,onChangeText:function(e){t=e}})})]})})}goNext()}finally{M(!1)}var n})),function startMigration(){return e.apply(this,arguments)}),{isV4PasswordSet:n,isV4AddressBookAvailable:r}=yield s.A.serviceV4Migration.shouldMigratePassword();!n&&r?i.Dialog.show({dismissOnOverlayPress:!1,title:v.formatMessage({id:p.ETranslations.address_book_encrypted_storage_title}),icon:"ShieldKeyholeOutline",description:v.formatMessage({id:p.ETranslations.address_book_encrypted_storage_description}),tone:"default",showConfirmButton:!0,showCancelButton:!1,onConfirmText:v.formatMessage({id:p.ETranslations.address_book_button_next}),onConfirm:function(){t()},confirmButtonProps:{testID:"encrypted-storage-confirm"}}):yield t()})),function handleNavigateToV4MigrationPreview(){return t.apply(this,arguments)}),x=(0,f.EE)(),h=!0;return b&&x&&(h=!1),(0,m.jsxs)(g.l,{scrollEnabled:!1,onMounted:function(){s.A.serviceV4Migration.clearV4MigrationLogs(),s.A.serviceV4Migration.clearV4MigrationPayload()},isAutoStartOnMount:b,"data-sentry-element":"V4MigrationModalPage","data-sentry-component":"V4MigrationGetStarted","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/V4MigrationGetStarted.tsx",children:[(0,m.jsx)(i.Page.Header,{headerShown:!1,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/V4MigrationGetStarted.tsx"}),(0,m.jsxs)(i.Page.Body,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/V4MigrationGetStarted.tsx",children:[h?(0,m.jsx)(i.Page.Close,{children:(0,m.jsx)(i.IconButton,{icon:"CrossedLargeOutline",position:"absolute",variant:"tertiary",left:"$5",top:"$5",zIndex:1})}):null,(0,m.jsxs)(i.Stack,{flex:1,justifyContent:"center",alignItems:"center","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/V4MigrationGetStarted.tsx",children:[(0,m.jsx)(l.U,{"data-sentry-element":"V4MigrationLogCopy","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/V4MigrationGetStarted.tsx",children:(0,m.jsx)(i.Image,{w:360,h:360,source:n(146944),"data-sentry-element":"Image","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/V4MigrationGetStarted.tsx"})}),(0,m.jsxs)(i.Stack,{p:"$5",pb:"$0",mt:"$-16",maxWidth:"$96","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/V4MigrationGetStarted.tsx",children:[(0,m.jsx)(i.LinearGradient,{position:"absolute",top:"$0",left:"$0",right:"$0",bottom:"$0",colors:["transparent","$bgApp"],"$platform-native":{display:"none"},"data-sentry-element":"LinearGradient","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/V4MigrationGetStarted.tsx"}),(0,m.jsxs)(i.Stack,{zIndex:1,"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/V4MigrationGetStarted.tsx",children:[(0,m.jsx)(i.Heading,{size:"$heading4xl",textAlign:"center","data-sentry-element":"Heading","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/V4MigrationGetStarted.tsx",children:v.formatMessage({id:p.ETranslations.v4_migration_welcome_message})}),(0,m.jsx)(i.SizableText,{mt:"$3",size:"$bodyLg",textAlign:"center",color:"$textSubdued","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/V4MigrationGetStarted.tsx",children:v.formatMessage({id:p.ETranslations.v4_migration_welcome_message_desc})})]})]}),(0,m.jsx)(i.Button,{mt:"$8",size:"large",$gtMd:{size:"medium"},variant:"primary",loading:w,onPress:k,"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/V4MigrationGetStarted.tsx",children:v.formatMessage({id:p.ETranslations.global_start_migration})})]})]})]})}const y=V4MigrationGetStarted},774614:(e,t,n)=>{n.d(t,{U:()=>V4MigrationLogCopy,h:()=>V4MigrationLogCopyHeaderRight});var o=n(324586),r=n(839850),a=n(490343),i=n(518736),s=(n(663522),n(621591)),c=n(831085),p=["children"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V4MigrationLogCopy(e){var{children:t}=e,n=(0,r.A)(e,p),o=(0,s.D)();return(0,c.jsx)(i.P,_objectSpread(_objectSpread({},n),{},{onPress:function(){o.copyV4MigrationLogs()},"data-sentry-element":"MultipleClickStack","data-sentry-component":"V4MigrationLogCopy","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/components/V4MigrationLogCopy.tsx",children:t}))}function V4MigrationLogCopyHeaderRight(){return(0,c.jsx)(V4MigrationLogCopy,{"data-sentry-element":"V4MigrationLogCopy","data-sentry-component":"V4MigrationLogCopyHeaderRight","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/components/V4MigrationLogCopy.tsx",children:(0,c.jsx)(a.Stack,{w:"$8",h:"$8",backgroundColor:void 0,"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/components/V4MigrationLogCopy.tsx"})})}},883085:(e,t,n)=>{n.d(t,{l:()=>V4MigrationModalPage});var o=n(324586),r=n(586330),a=n(839850),i=n(514041),s=n(490343),c=n(153763),p=n(471169),d=n(60406),u=n(831085),l=["children","onMounted","exitPreventMode","isAutoStartOnMount"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V4MigrationModalPage(e){var{children:t,onMounted:n,exitPreventMode:o=d.yN.confirm,isAutoStartOnMount:g}=e,f=(0,a.A)(e,l),m=(0,i.useRef)(null),y=(0,c.E)();return(0,d.ek)({exitPreventMode:o,isAutoStartOnMount:g}),(0,i.useEffect)((function(){y&&clearTimeout(m.current)}),[y]),(0,u.jsx)(s.Page,_objectSpread(_objectSpread({scrollEnabled:!0,onMounted:(0,r.A)((function*(){yield p.v4migrationAtom.set((function(e){return _objectSpread(_objectSpread({},e),{},{isMigrationModalOpen:!0})})),n?.()})),onUnmounted:function(){},onClose:function(){}},f),{},{"data-sentry-element":"Page","data-sentry-component":"V4MigrationModalPage","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/components/V4MigrationModalPage.tsx",children:t}))}},60406:(e,t,n)=>{n.d(t,{EE:()=>useIsV4MigrationAutoStartFirstTime,ek:()=>useV4MigrationExitPrevent,yN:()=>b});var o=n(324586),r=n(514041),a=n(334025),i=n(908867),s=n(355931),c=n(493360),p=n(490343),d=n(498356),u=n(153763),l=n(471169),g=n(334439),f=n(663522),m=n(621591),y=n(831085);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=!1,b=function(e){return e.always="always",e.confirm="confirm",e.disabled="disabled",e}({});function ModalExitPreventDialogContent({message:e,onCancelText:t,onConfirmText:n,preventRemoveData:o,isAutoStartOnMount:a}){var s=(0,i.A)(),c=(0,d.A)(),[u,f]=(0,l.useV4migrationPersistAtom)(),[m,v]=(0,r.useState)(!1);return(0,y.jsxs)(p.Stack,{"data-sentry-element":"Stack","data-sentry-component":"ModalExitPreventDialogContent","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/hooks/useV4MigrationExitPrevent.tsx",children:[(0,y.jsx)(p.SizableText,{"data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/hooks/useV4MigrationExitPrevent.tsx",children:e}),a&&(u?.v4migrationAutoStartCount||0)>=3?(0,y.jsx)(p.Stack,{children:(0,y.jsx)(p.Checkbox,{value:m,onChange:function(){return v(!m)},label:s.formatMessage({id:g.ETranslations.v4_migration_exit_migration_checkbox_label})})}):null,(0,y.jsx)(p.Dialog.Footer,{onConfirmText:n,onConfirm:function(){c.dispatch(o.action),m&&f((function(e){return _objectSpread(_objectSpread({},e),{},{v4migrationAutoStartDisabled:!0})}))},onCancelText:t,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/V4Migration/hooks/useV4MigrationExitPrevent.tsx"})]})}function useIsV4MigrationAutoStartFirstTime(){var[e]=(0,l.useV4migrationPersistAtom)();return!e.v4migrationAutoStartDisabled&&(!e?.v4migrationAutoStartCount||e?.v4migrationAutoStartCount<=1)}function useV4MigrationExitPrevent({exitPreventMode:e,isAutoStartOnMount:t}){var n=(0,i.A)(),o=n.formatMessage({id:g.ETranslations.confirm_exit_dialog_title}),d=n.formatMessage({id:g.ETranslations.confirm_exit_dialog_desc}),l=n.formatMessage({id:g.ETranslations.global_exit}),w=n.formatMessage({id:g.ETranslations.global_cancel}),M=useIsV4MigrationAutoStartFirstTime();(0,a.Wg)(),function useModalExitPrevent({exitPreventMode:e,isAutoStartOnMount:t,title:n,message:o,onConfirmText:a,onCancelText:i}){var s=(0,u.E)(),c=(0,r.useCallback)((function({data:e}){v||(v=!0,p.Dialog.show({title:n,renderContent:(0,y.jsx)(ModalExitPreventDialogContent,{onCancelText:i,onConfirmText:a,preventRemoveData:e,message:o,isAutoStartOnMount:t}),onClose:function(){v=!1}}))}),[t,o,i,a,n]),d=e!==b.disabled&&s,l=e===b.confirm?c:function(){return null};(0,p.usePreventRemove)(d,l)}({exitPreventMode:M&&e===b.confirm?b.always:e,isAutoStartOnMount:t,title:o,message:d,onConfirmText:l,onCancelText:w}),function useAppExitPrevent({message:e,title:t}){var n=(0,i.A)();(0,r.useEffect)((function(){if(f.Ay.isRuntimeBrowser&&!f.Ay.isExtensionUiPopup){var fn=function(t){return t.preventDefault(),t.returnValue=!0,e};return window.addEventListener("beforeunload",fn),function(){window.removeEventListener("beforeunload",fn)}}}),[e]),(0,r.useEffect)((function(){var o=c.A.addEventListener("hardwareBackPress",(function(){return s.A.alert(t,e,[{text:n.formatMessage({id:g.ETranslations.global_cancel}),onPress:function(){},style:"cancel"},{text:n.formatMessage({id:g.ETranslations.global_quit}),onPress:function(){return c.A.exitApp()}}],{cancelable:!1}),!0}));return function(){return o.remove()}}),[e,t,n])}({title:o,message:d}),function useExtensionV4MigrationFromExpandTab(){var e=(0,m.D)();(0,r.useEffect)((function(){f.Ay.isExtensionUiPopup&&(e.openV4MigrationOfExtension(),window.close())}),[e])}()}},334025:(e,t,n)=>{n.d(t,{Wg:()=>useKeepAwake});var o,r=n(586330),a=n(72631),i=n(514041),s=n(683180),c=n(34546);!function(e){e.RELEASE="release"}(o||(o={}));var p={};const d={isAvailableAsync:()=>(0,r.A)((function*(){return!!s.A.isDOMAvailable&&"wakeLock"in navigator}))(),activate:e=>(0,r.A)((function*(){if(s.A.isDOMAvailable){var t=yield navigator.wakeLock.request("screen");p[e]=t}}))(),deactivate:e=>(0,r.A)((function*(){if(s.A.isDOMAvailable){if(!p[e])throw new c.A("ERR_KEEP_AWAKE_TAG_INVALID",`The wake lock with tag ${e} has not activated yet`);p[e].release?.(),delete p[e]}}))(),addListenerForTag(e,t){var eventListener=function(){t({state:o.RELEASE})},n=p[e];return n&&("addEventListener"in n?n.addEventListener?.("release",eventListener):n.onrelease=eventListener),{remove:function(){var t=p[e];t&&(t.removeEventListener?t.removeEventListener("release",eventListener):t.onrelease=null)}}}};var u="ExpoKeepAwakeDefaultTag";function useKeepAwake(e=u,t){(0,i.useEffect)((function(){var n=!0;return activateKeepAwakeAsync(e).then((function(){n&&d.addListenerForTag&&t?.listener&&function addListener(e,t){if(!d.addListenerForTag)throw new a.V("ExpoKeepAwake","addListenerForTag");var n="string"==typeof e?e:u,o="function"==typeof e?e:t;return d.addListenerForTag(n,o)}(e,t.listener)})),function(){n=!1,t?.suppressDeactivateWarnings?deactivateKeepAwake(e).catch((function(){})):deactivateKeepAwake(e)}}),[e])}function activateKeepAwakeAsync(){return _activateKeepAwakeAsync.apply(this,arguments)}function _activateKeepAwakeAsync(){return(_activateKeepAwakeAsync=(0,r.A)((function*(e=u){yield d.activate?.(e)}))).apply(this,arguments)}function deactivateKeepAwake(){return _deactivateKeepAwake.apply(this,arguments)}function _deactivateKeepAwake(){return(_deactivateKeepAwake=(0,r.A)((function*(e=u){yield d.deactivate?.(e)}))).apply(this,arguments)}}}]);
//# sourceMappingURL=20651.19e9ba102b.chunk.js.map