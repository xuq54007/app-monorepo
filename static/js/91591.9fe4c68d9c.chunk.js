!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="01276d0d-840b-4c48-a0b6-f9bcda7f38c2",e._sentryDebugIdIdentifier="sentry-dbid-01276d0d-840b-4c48-a0b6-f9bcda7f38c2")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[91591],{891591:(e,t,n)=>{n.r(t),n.d(t,{default:()=>NFTDetails});var a=n(586330),r=n(514041),o=n(654266),s=n(241440),i=n(908867),l=n(490343),c=n(896666),d=n(334439),u=(n(663522),n(193068)),p=n(491180),m=n(669617),f=n(281464),g=n(643087),y=n(498356),h=n(911998),b=n(928557),k=n(141580),w=n.n(k),x=n(503668),A=n.n(x),T=n(298254),v=n(567807),D=n(982447),j=n(831085);function CommonAssetContent(e){var t,n=(0,i.A)(),{networkId:a,nft:o}=e,{attributes:s}=null!=(t=o.metadata)?t:{},{copyText:c}=(0,l.useClipboard)(),{network:u}=(0,T.b)({networkId:a}),m=(0,r.useMemo)((function(){var e;return[{label:n.formatMessage({id:d.ETranslations.nft_collection}),value:o.collectionName},{label:n.formatMessage({id:d.ETranslations.global_network}),value:null!=(e=u?.name)?e:"",source:{uri:u?.logoURI}},{label:n.formatMessage({id:d.ETranslations.nft_token_id}),value:p.A.shortenAddress({address:o.itemId,leadingLength:6})},{label:n.formatMessage({id:d.ETranslations.nft_nft_standard}),value:o.collectionType},{label:n.formatMessage({id:d.ETranslations.nft_contract_address}),value:p.A.shortenAddress({address:o.collectionAddress}),onPress:function(){return c(o.collectionAddress)},iconAfter:"Copy3Outline"}].filter((function(e){return!A()(e.value)}))}),[c,n,u?.logoURI,u?.name,o.collectionAddress,o.collectionName,o.collectionType,o.itemId]);return(0,j.jsxs)(l.Stack,{px:"$5",$gtMd:{flexBasis:"66.6666%"},gap:"$5","data-sentry-element":"Stack","data-sentry-component":"CommonAssetContent","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/NFT/NFTDetails/CommonAsset/CommonAssetContent.tsx",children:[(0,j.jsx)(l.DescriptionList,{"data-sentry-element":"DescriptionList","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/NFT/NFTDetails/CommonAsset/CommonAssetContent.tsx",children:m.map((function({label:e,value:t,onPress:n,iconAfter:a,source:r}){return(0,j.jsxs)(l.DescriptionList.Item,{children:[(0,j.jsx)(l.DescriptionList.Item.Key,{maxWidth:"40%",size:"$bodyMd",color:"$textSubdued",children:e}),(0,j.jsx)(l.DescriptionList.Item.Value,{gap:"$1",maxWidth:"60%",onPress:n,iconAfter:a,source:r,textProps:{wordWrap:"break-word",numberOfLines:1},children:t})]},e)}))}),(0,j.jsx)(l.Divider,{"data-sentry-element":"Divider","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/NFT/NFTDetails/CommonAsset/CommonAssetContent.tsx"}),(0,j.jsxs)(l.Stack,{"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/NFT/NFTDetails/CommonAsset/CommonAssetContent.tsx",children:[(0,j.jsx)(l.Heading,{size:"$headingSm","data-sentry-element":"Heading","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/NFT/NFTDetails/CommonAsset/CommonAssetContent.tsx",children:n.formatMessage({id:d.ETranslations.nft_attributes})}),s?.length?(0,j.jsx)(l.XStack,{m:"$-1",pt:"$2.5",flexWrap:"wrap",children:s?.map((function({traitType:e,value:t,displayType:n}){return w()(t)||""===e&&""===t?null:(0,j.jsxs)(l.Stack,{py:"$2",px:"$3.5",m:"$1",bg:"$bgStrong",borderRadius:"$2",borderCurve:"continuous",children:[(0,j.jsx)(l.SizableText,{size:"$bodyMd",color:"$textSubdued",children:e}),(0,j.jsx)(l.SizableText,{size:"$bodyMdMedium",children:n===D.d.Date?(0,v.Yq)(new Date(Number(t)*(10===t.toString().length?1e3:1)),{}):t})]},e)}))}):(0,j.jsx)(l.SizableText,{size:"$bodyMd",mt:"$2",color:"$textSubdued",children:`🤷‍♂️ ${n.formatMessage({id:d.ETranslations.nft_no_attributes_found})}`})]})]})}var I=n(227428),UnSupportedImageContainer=function(e){return null};function CommonAssetImage(e){var t,{nft:n}=e,[a,o]=(0,r.useState)(!!n.metadata?.image);return(0,r.useMemo)((function(){return!1}),[n.metadata?.image])?(0,j.jsx)(UnSupportedImageContainer,{src:n.metadata?.image}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(l.Image,{width:"100%",height:"100%",source:{uri:n.metadata?.image},style:{borderRadius:12},"data-sentry-element":"Image","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/NFT/NFTDetails/CommonAsset/CommonAssetImage.tsx",children:[a?(0,j.jsx)(l.Video,{source:{uri:n.metadata?.image},controls:!0,onError:function(){return o(!1)},style:{width:"100%",height:"100%",position:"absolute",zIndex:1}}):(0,j.jsx)(l.Image.Source,{src:n.metadata?.image}),(0,j.jsx)(l.Image.Fallback,{bg:"$bgStrong",justifyContent:"center",alignItems:"center","data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/NFT/NFTDetails/CommonAsset/CommonAssetImage.tsx",children:(0,j.jsx)(l.Icon,{name:"ImageSquareWavesOutline",color:"$iconDisabled","data-sentry-element":"Icon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/NFT/NFTDetails/CommonAsset/CommonAssetImage.tsx"})})]}),n.collectionType===D.m.ERC1155&&new s.A(null!=(t=n.amount)?t:1).gt(1)?(0,j.jsx)(l.Stack,{position:"absolute",right:"$0",bottom:"$0",px:"$2",bg:"$bgInverse",borderRadius:"$3",borderWidth:2,borderColor:"$bgApp",children:(0,j.jsxs)(l.SizableText,{color:"$textInverse",size:"$bodyLgMedium",children:["x",new s.A(n.amount).gt(I.JA)?`${I.JA}+`:n.amount]})}):null]})}var canCollectNFT=function(e,t){return!1};function NFTDetails(){var e,t=(0,i.A)(),n=(0,y.A)(),k=(0,o.lq)(),{networkId:w,accountId:x,walletId:A,collectionAddress:T,itemId:v}=k.params,[D,I]=(0,r.useState)(!1),N=(0,r.useRef)(!1),{ImageContent:C,DetailContent:S}=function getNFTDetailsComponents(e){switch(e){case b.PA:case b.m$:}return{ImageContent:CommonAssetImage,DetailContent:CommonAssetContent}}(),{result:F,isLoading:$}=(0,h.yk)((0,a.A)((function*(){var e=p.A.isHwWallet({walletId:A}),t=[g.A.serviceNetwork.getNetwork({networkId:w}),g.A.serviceNFT.fetchNFTDetails({accountId:x,networkId:w,nfts:[{collectionAddress:T,itemId:v}]}),e?g.A.serviceAccount.getWalletDevice({walletId:A}):Promise.resolve(void 0)],[n,a,r]=yield Promise.all(t);return{network:n,nft:a[0],device:r}})),[T,v,w,A,x],{watchLoading:!0}),{network:_,nft:M,device:P}=null!=F?F:{},O=(0,r.useCallback)((e=(0,a.A)((function*(e){if(e(),M&&M.metadata&&M.metadata.image&&P){var n,a=yield g.A.serviceAccount.getAccountAddressForApi({accountId:x,networkId:w});I(!0);try{var r,o,s,i=M.metadata?.name;n=yield(0,m.Le)({imageUri:null!=(r=M.metadata?.image)?r:"",metadata:{header:i&&i?.length>0?i:`#${M.collectionAddress}`,subheader:null!=(o=M.metadata?.description)?o:"",network:null!=(s=_?.name)?s:"",owner:a},deviceType:P.deviceType})}catch(e){return l.Toast.error({title:t.formatMessage({id:d.ETranslations.update_download_failed})}),void I(!1)}if(n&&!N.current)try{yield g.A.serviceNFT.uploadNFTImageToDevice({accountId:x,uploadResParams:n}),l.Toast.success({title:t.formatMessage({id:d.ETranslations.nft_already_collected})})}catch(e){l.Toast.error({title:e.message})}finally{I(!1)}}})),function(t){return e.apply(this,arguments)}),[x,P,t,_?.name,w,M]),E=(0,r.useCallback)((function(){var e=[];return P&&canCollectNFT(M,P)&&e.push({label:t.formatMessage({id:d.ETranslations.nft_collect_to_touch},{device:f.Ay.capitalizeWords(String(P.deviceType))}),icon:"InboxOutline",onPress:O}),0===e.length?null:D?(0,j.jsx)(l.Spinner,{color:"$iconSubdued",size:"small"}):(0,j.jsx)(l.ActionList,{title:"Actions",renderTrigger:(0,j.jsx)(c.v$,{icon:"DotHorOutline"}),items:e})}),[P,O,t,D,M]),z=(0,r.useCallback)((function(){M&&n.pushModal(u.ry.SendModal,{screen:u.j$.SendDataInput,params:{networkId:w,accountId:x,isNFT:!0,nfts:[M],onSuccess:function(){return n.popStack()}}})}),[x,n,w,M]),L=(0,r.useMemo)((function(){var e;return new s.A(null!=(e=M?.amount)?e:0).gt(0)}),[M?.amount]);return(0,r.useEffect)((function(){return function(){N.current=!0}}),[]),M?(0,j.jsxs)(l.Page,{scrollEnabled:!0,"data-sentry-element":"Page","data-sentry-component":"NFTDetails","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AssetDetails/pages/NFTDetails.tsx",children:[(0,j.jsx)(l.Page.Header,{title:M.metadata?.name||"",headerRight:E,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AssetDetails/pages/NFTDetails.tsx"}),(0,j.jsx)(l.Page.Body,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AssetDetails/pages/NFTDetails.tsx",children:(0,j.jsxs)(l.Stack,{$gtMd:{flexDirection:"row"},pb:"$5","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AssetDetails/pages/NFTDetails.tsx",children:[(0,j.jsxs)(l.Stack,{px:"$5",pb:"$5",$gtMd:{flexBasis:"33.3333%"},"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AssetDetails/pages/NFTDetails.tsx",children:[(0,j.jsx)(l.Stack,{pb:"100%","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AssetDetails/pages/NFTDetails.tsx",children:(0,j.jsx)(l.Stack,{position:"absolute",left:0,top:0,bottom:0,right:0,"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AssetDetails/pages/NFTDetails.tsx",children:(0,j.jsx)(C,{nft:M,"data-sentry-element":"ImageContent","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AssetDetails/pages/NFTDetails.tsx"})})}),(0,j.jsx)(l.Button,{icon:"ArrowTopOutline",mt:"$5",variant:"primary",onPress:z,disabled:!L,$md:{size:"large"},"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AssetDetails/pages/NFTDetails.tsx",children:t.formatMessage({id:d.ETranslations.global_send})})]}),(0,j.jsx)(S,{networkId:w,nft:M,"data-sentry-element":"DetailContent","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AssetDetails/pages/NFTDetails.tsx"})]})})]}):(0,j.jsx)(l.Page,{children:(0,j.jsx)(l.Page.Body,{children:$?(0,j.jsx)(l.Stack,{pt:240,justifyContent:"center",alignItems:"center",children:(0,j.jsx)(l.Spinner,{size:"large"})}):null})})}},669617:(e,t,n)=>{n.d(t,{D_:()=>getFilteredNftsBySearchKey,Le:()=>generateUploadNFTParams});var a=n(324586),r=n(586330),o=n(37754),s=n(723958),i=n(183758),l=n(432104),c=n(227428),d=n(606777),u=n(231282),p=n(901048).Buffer;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function getFilteredNftsBySearchKey({nfts:e,searchKey:t}){return!t||t.length<c.NZ?e:(t=t.trim().toLowerCase(),e.filter((function(e){return e.collectionAddress?.toLowerCase()===t||e.collectionName?.toLowerCase().includes(t)||e.metadata?.name?.toLowerCase().includes(t)})))}var getImageSize=function(e){return new Promise((function(t,n){l.A.getSize(e,(function(e,n){t({width:e,height:n})}),(function(e){return n(e)}))}))};var m,f=(m=(0,r.A)((function*(e,t,n,a,r,o){var l;if(e){var c=a>r,d=a===r,u=[];if(o?u.push({resize:{width:c?void 0:t,height:c?n:void 0}}):u.push({resize:{width:t}}),o&&!d)if(c){var m=function getOriginX(e,t,n,a){var r=Math.ceil(a/t*e);return r<=n?null:Math.ceil(Math.ceil(r/2)-Math.ceil(n/2))}(a,r,t,n);null!==m&&u.push({crop:{height:n,width:t,originX:m,originY:0}})}else{var f=function getOriginY(e,t,n,a){var r=Math.ceil(n/e*t);return r<=a?null:Math.ceil(Math.ceil(r/2)-Math.ceil(a/2))}(a,r,t,n);null!==f&&u.push({crop:{height:n,width:t,originX:0,originY:f}})}var g=yield(0,s.rE)(e,u,{compress:.9,format:i.$.JPEG,base64:!0}),y=p.from(null!=(l=g.base64)?l:"","base64"),h=new Uint8Array(y);return _objectSpread(_objectSpread({},g),{},{arrayBuffer:h})}})),function compressNFT(e,t,n,a,r,o){return m.apply(this,arguments)});function generateUploadNFTParams(e){return _generateUploadNFTParams.apply(this,arguments)}function _generateUploadNFTParams(){return(_generateUploadNFTParams=(0,r.A)((function*({imageUri:e,metadata:t,deviceType:n}){var{width:a,height:r}=yield getImageSize(e),s=yield u.A.getBase64FromImageUri({uri:e});if(!s)throw new Error(`Failed to get base64 from image uri: ${e}`);var i=yield f(s,480,800,a,r,!1),l="touch"===n?238:226,c="touch"===n?238:226,m=yield f(s,l,c,a,r,!0);if(i?.arrayBuffer||m?.arrayBuffer){var g=_objectSpread({},t),y=p.from(JSON.stringify(g));y.length>2048&&(g.subheader="",y=p.from(JSON.stringify(g)));var h=d.A.bytesToHex(y);return{resType:o.ResourceType.Nft,suffix:"jpg",dataHex:d.A.bytesToHex(i?.arrayBuffer),thumbnailDataHex:d.A.bytesToHex(m?.arrayBuffer),nftMetaData:h}}}))).apply(this,arguments)}}}]);
//# sourceMappingURL=91591.9fe4c68d9c.chunk.js.map