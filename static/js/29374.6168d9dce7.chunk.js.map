{"version":3,"file":"static/js/29374.6168d9dce7.chunk.js","mappings":"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","sources":["webpack://web/../../packages/kit/src/views/AddressBook/components/CreateOrEditContent.tsx","webpack://web/../../packages/kit/src/views/AddressBook/pages/AddItem/index.tsx"],"sourcesContent":["import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import{useCallback}from'react';import{useIntl}from'react-intl';import{Form,Icon,IconButton,Input,Page,SizableText,XStack,useForm}from'@onekeyhq/components';import backgroundApiProxy from'@onekeyhq/kit/src/background/instance/backgroundApiProxy';import{AddressInput}from'@onekeyhq/kit/src/components/AddressInput';import{ChainSelectorInput}from'@onekeyhq/kit/src/components/ChainSelectorInput';import{ETranslations}from'@onekeyhq/shared/src/locale';import{usePromiseResult}from\"../../../hooks/usePromiseResult\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var CreateOrEditContent=function({title,item,onSubmit,onRemove}){var intl=useIntl();var form=useForm({defaultValues:{id:item.id,networkId:item.networkId,name:item.name,address:{raw:item.address,resolved:''}},mode:'onChange',reValidateMode:'onChange'});var headerRight=useCallback(function(){return onRemove?_jsx(IconButton,{icon:\"DeleteOutline\",variant:\"tertiary\",onPress:function(){return onRemove(item);},testID:\"address-form-remove\"}):null;},[onRemove,item]);var networkId=form.watch('networkId');var pending=form.watch('address.pending');var onSave=useCallback(function(){var _ref=_asyncToGenerator(function*(values){var _values$address$resol;yield onSubmit?.({id:values.id,name:values.name,networkId:values.networkId,address:(_values$address$resol=values.address.resolved)!=null?_values$address$resol:''});});return function(_x){return _ref.apply(this,arguments);};}(),[onSubmit]);var{result:addressBookEnabledNetworkIds}=usePromiseResult(_asyncToGenerator(function*(){var resp=yield backgroundApiProxy.serviceNetwork.getAddressBookEnabledNetworks();var networkIds=resp.map(function(o){return o.id;});return networkIds;}),[],{initResult:[]});return _jsxs(Page,{\"data-sentry-element\":\"Page\",\"data-sentry-component\":\"CreateOrEditContent\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AddressBook/components/CreateOrEditContent.tsx\",children:[_jsx(Page.Header,{title:title,headerRight:headerRight,\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AddressBook/components/CreateOrEditContent.tsx\"}),_jsx(Page.Body,{p:\"$4\",\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AddressBook/components/CreateOrEditContent.tsx\",children:_jsxs(Form,{form:form,\"data-sentry-element\":\"Form\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AddressBook/components/CreateOrEditContent.tsx\",children:[_jsx(Form.Field,{label:intl.formatMessage({id:ETranslations.address_book_add_address_chain}),name:\"networkId\",rules:{required:true},\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AddressBook/components/CreateOrEditContent.tsx\",children:_jsx(ChainSelectorInput,{networkIds:addressBookEnabledNetworkIds,\"data-sentry-element\":\"ChainSelectorInput\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AddressBook/components/CreateOrEditContent.tsx\"})}),_jsx(Form.Field,{label:intl.formatMessage({id:ETranslations.address_book_add_address_name}),name:\"name\",rules:{required:{value:true,message:intl.formatMessage({id:ETranslations.address_book_add_address_name_empty_error})},maxLength:{value:24,message:intl.formatMessage({id:ETranslations.address_book_add_address_name_length_erro},{'num':24})},validate:function(){var _ref3=_asyncToGenerator(function*(text){var searched=yield backgroundApiProxy.serviceAddressBook.findItem({name:text});if(!searched||item.id===searched.id){return undefined;}return intl.formatMessage({id:ETranslations.address_book_add_address_name_exists});});return function validate(_x2){return _ref3.apply(this,arguments);};}()},testID:\"address-form-name-field\",\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AddressBook/components/CreateOrEditContent.tsx\",children:_jsx(Input,{placeholder:intl.formatMessage({id:ETranslations.address_book_add_address_name_required}),testID:\"address-form-name\",\"data-sentry-element\":\"Input\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AddressBook/components/CreateOrEditContent.tsx\"})}),_jsx(Form.Field,{label:intl.formatMessage({id:ETranslations.address_book_add_address_address}),name:\"address\",rules:{validate:function(){var _ref4=_asyncToGenerator(function*(output){if(output.pending){return;}if(!output.resolved){var _output$validateError;return(_output$validateError=output.validateError?.message)!=null?_output$validateError:intl.formatMessage({id:ETranslations.address_book_add_address_address_invalid_error});}var searched=yield backgroundApiProxy.serviceAddressBook.findItem({address:output.resolved});if(!searched||item.id===searched.id){return undefined;}return intl.formatMessage({id:ETranslations.address_book_add_address_address_exists});});return function validate(_x3){return _ref4.apply(this,arguments);};}()},description:networkId.startsWith('evm--')?_jsxs(XStack,{alignItems:\"center\",mt:\"$1\",children:[_jsx(Icon,{size:\"$4\",name:\"CheckRadioSolid\"}),_jsx(SizableText,{size:\"$bodyMd\",ml:\"$1\",children:intl.formatMessage({id:ETranslations.address_book_add_address_add_to_evm_chains})})]}):null,testID:\"address-form-address-field\",\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AddressBook/components/CreateOrEditContent.tsx\",children:_jsx(AddressInput,{networkId:networkId,placeholder:intl.formatMessage({id:ETranslations.address_book_add_address_address}),autoError:false,testID:\"address-form-address\",enableNameResolve:true,enableAddressContract:true,\"data-sentry-element\":\"AddressInput\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AddressBook/components/CreateOrEditContent.tsx\"})})]})}),_jsx(Page.Footer,{onConfirmText:intl.formatMessage({id:ETranslations.address_book_add_address_button_save}),confirmButtonProps:{variant:'primary',loading:form.formState.isSubmitting,disabled:!form.formState.isValid||pending,onPress:form.handleSubmit(onSave),testID:'address-form-save'},\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AddressBook/components/CreateOrEditContent.tsx\"})]});};","import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import{useCallback}from'react';import{useIntl}from'react-intl';import{Toast}from'@onekeyhq/components';import backgroundApiProxy from'@onekeyhq/kit/src/background/instance/backgroundApiProxy';import useAppNavigation from'@onekeyhq/kit/src/hooks/useAppNavigation';import{getNetworkIdsMap}from'@onekeyhq/shared/src/config/networkIds';import{ETranslations}from'@onekeyhq/shared/src/locale';import{CreateOrEditContent}from\"../../components/CreateOrEditContent\";import{jsx as _jsx}from\"react/jsx-runtime\";var defaultValues={name:'',address:'',networkId:getNetworkIdsMap().btc};var AddItemPage=function(){var intl=useIntl();var appNavigation=useAppNavigation();var onSubmit=useCallback(function(){var _ref=_asyncToGenerator(function*(item){try{yield backgroundApiProxy.serviceAddressBook.addItem(item);Toast.success({title:intl.formatMessage({id:ETranslations.address_book_add_address_toast_add_success})});appNavigation.pop();}catch(e){Toast.error({title:e.message});}});return function(_x){return _ref.apply(this,arguments);};}(),[appNavigation,intl]);return _jsx(CreateOrEditContent,{title:intl.formatMessage({id:ETranslations.address_book_add_address_title}),onSubmit:onSubmit,item:defaultValues,\"data-sentry-element\":\"CreateOrEditContent\",\"data-sentry-component\":\"AddItemPage\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/AddressBook/pages/AddItem/index.tsx\"});};export default AddItemPage;"],"names":["CreateOrEditContent","title","item","onSubmit","onRemove","_ref","_ref4","_ref3","intl","form","useForm","defaultValues","id","networkId","name","address","raw","resolved","mode","reValidateMode","headerRight","useCallback","IconButton","icon","variant","onPress","testID","watch","pending","onSave","values","_values$address$resol","_x","apply","this","arguments","result","addressBookEnabledNetworkIds","serviceNetwork","getAddressBookEnabledNetworks","map","o","initResult","Page","children","Header","Body","p","Form","Field","label","formatMessage","ETranslations","address_book_add_address_chain","rules","required","networkIds","address_book_add_address_name","value","message","address_book_add_address_name_empty_error","maxLength","address_book_add_address_name_length_erro","validate","text","searched","serviceAddressBook","findItem","address_book_add_address_name_exists","_x2","Input","placeholder","address_book_add_address_name_required","address_book_add_address_address","output","_output$validateError","validateError","address_book_add_address_address_invalid_error","address_book_add_address_address_exists","_x3","description","startsWith","XStack","alignItems","mt","Icon","size","SizableText","ml","address_book_add_address_add_to_evm_chains","autoError","enableNameResolve","enableAddressContract","Footer","onConfirmText","address_book_add_address_button_save","confirmButtonProps","loading","formState","isSubmitting","disabled","isValid","handleSubmit","btc","appNavigation","addItem","Toast","success","address_book_add_address_toast_add_success","pop","e","error","address_book_add_address_title"],"sourceRoot":""}