!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6cf98139-90d6-408a-9b76-3044d15c8b59",e._sentryDebugIdIdentifier="sentry-dbid-6cf98139-90d6-408a-9b76-3044d15c8b59")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[25261],{963232:e=>{var t=Object.prototype.hasOwnProperty,r="~";function Events(){}function EE(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function addListener(e,t,n,i,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new EE(n,i||e,s),o=r?r+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],a]:e._events[o].push(a):(e._events[o]=a,e._eventsCount++),e}function clearEvent(e,t){0==--e._eventsCount?e._events=new Events:delete e._events[t]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(r=!1)),EventEmitter.prototype.eventNames=function eventNames(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},EventEmitter.prototype.listeners=function listeners(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=new Array(s);i<s;i++)a[i]=n[i].fn;return a},EventEmitter.prototype.listenerCount=function listenerCount(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},EventEmitter.prototype.emit=function emit(e,t,n,i,s,a){var o=r?r+e:e;if(!this._events[o])return!1;var c,u,l=this._events[o],p=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),p){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,s),!0;case 6:return l.fn.call(l.context,t,n,i,s,a),!0}for(u=1,c=new Array(p-1);u<p;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,h=l.length;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),p){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,i);break;default:if(!c)for(d=1,c=new Array(p-1);d<p;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},EventEmitter.prototype.on=function on(e,t,r){return addListener(this,e,t,r,!1)},EventEmitter.prototype.once=function once(e,t,r){return addListener(this,e,t,r,!0)},EventEmitter.prototype.removeListener=function removeListener(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return clearEvent(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||clearEvent(this,s);else{for(var o=0,c=[],u=a.length;o<u;o++)(a[o].fn!==t||i&&!a[o].once||n&&a[o].context!==n)&&c.push(a[o]);c.length?this._events[s]=1===c.length?c[0]:c:clearEvent(this,s)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(e){var t;return e?(t=r?r+e:e,this._events[t]&&clearEvent(this,t)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=r,EventEmitter.EventEmitter=EventEmitter,e.exports=EventEmitter},904436:(e,t,r)=>{r.d(t,{$:()=>RpcCoder});var n=r(578773),i=r(722116),s=r(709629),a=r(751744),o=r(923477);const c=-99999;function extend(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})}class RpcError extends Error{code;data;message;name;stack;constructor(e="",t=-99999,r){if(super(),extend(this,"message",String(e)),extend(this,"name",this.constructor.name),extend(this,"data",r),extend(this,"code",t),(0,o.T)(Error.captureStackTrace))Error.captureStackTrace(this,this.constructor);else{const{stack:t}=new Error(e);t&&extend(this,"stack",t)}}static CODES={ASSERT:-90009,INVALID_JSONRPC:-99998,METHOD_NOT_FOUND:-32601,UNKNOWN:c}}function checkError(e){if(e){const{code:t,data:r,message:a}=e;throw new RpcError(`${t}: ${a}${function formatErrorData(e){if((0,n.b)(e))return"";const t=`: ${(0,i.K)(e)?e.replace(/Error\("/g,"").replace(/\("/g,"(").replace(/"\)/g,")").replace(/\(/g,", ").replace(/\)/g,""):(0,s.A)(e)}`;return t.length<=256?t:`${t.substring(0,255)}â€¦`}(r)}`,t,r)}}class RpcCoder{__internal__id=0;decodeResponse(e){if(!e||"2.0"!==e.jsonrpc)throw new Error("Invalid jsonrpc field in decoded object");const t=!(0,n.b)(e.params)&&!(0,n.b)(e.method);if(!((0,a.E)(e.id)||t&&((0,a.E)(e.params.subscription)||(0,i.K)(e.params.subscription))))throw new Error("Invalid id field in decoded object");if(checkError(e.error),void 0===e.result&&!t)throw new Error("No result found in jsonrpc response");return t?(checkError(e.params.error),e.params.result):e.result}encodeJson(e,t){const[r,n]=this.encodeObject(e,t);return[r,(0,s.A)(n)]}encodeObject(e,t){const r=++this.__internal__id;return[r,{id:r,jsonrpc:"2.0",method:e,params:t}]}}},707252:(e,t,r)=>{r.d(t,{A:()=>n});const n={HTTP_URL:"http://127.0.0.1:9933",WS_URL:"ws://127.0.0.1:9944"}},465929:(e,t,r)=>{r.d(t,{e:()=>HttpProvider});var n=r(218830),i=r(733862),s=r(709629);const a=r(76904).Mn.fetch;var o=r(904436),c=r(707252),u=r(448629);const l="HTTP Provider does not have subscriptions, use WebSockets instead",p=(0,n.v)("api-http");class HttpProvider{__internal__callCache=new u.q;__internal__coder;__internal__endpoint;__internal__headers;__internal__stats;constructor(e=c.A.HTTP_URL,t={}){if(!/^(https|http):\/\//.test(e))throw new Error(`Endpoint should start with 'http://' or 'https://', received '${e}'`);this.__internal__coder=new o.$,this.__internal__endpoint=e,this.__internal__headers=t,this.__internal__stats={active:{requests:0,subscriptions:0},total:{bytesRecv:0,bytesSent:0,cached:0,errors:0,requests:0,subscriptions:0,timeout:0}}}get hasSubscriptions(){return!1}clone(){return new HttpProvider(this.__internal__endpoint,this.__internal__headers)}async connect(){}async disconnect(){}get stats(){return this.__internal__stats}get isClonable(){return!0}get isConnected(){return!0}on(e,t){return p.error("HTTP Provider does not have 'on' emitters, use WebSockets instead"),i.l}async send(e,t,r){this.__internal__stats.total.requests++;const[,n]=this.__internal__coder.encodeJson(e,t),i=r?`${e}::${(0,s.A)(t)}`:"";let a=r?this.__internal__callCache.get(i):null;return a?this.__internal__stats.total.cached++:(a=this.__internal__send(n),r&&this.__internal__callCache.set(i,a)),a}async __internal__send(e){this.__internal__stats.active.requests++,this.__internal__stats.total.bytesSent+=e.length;try{const t=await a(this.__internal__endpoint,{body:e,headers:{Accept:"application/json","Content-Length":`${e.length}`,"Content-Type":"application/json",...this.__internal__headers},method:"POST"});if(!t.ok)throw new Error(`[${t.status}]: ${t.statusText}`);const r=await t.text();this.__internal__stats.total.bytesRecv+=r.length;const n=this.__internal__coder.decodeResponse(JSON.parse(r));return this.__internal__stats.active.requests--,n}catch(e){throw this.__internal__stats.active.requests--,this.__internal__stats.total.errors++,e}}async subscribe(e,t,r,n){throw p.error(l),new Error(l)}async unsubscribe(e,t,r){throw p.error(l),new Error(l)}}},448629:(e,t,r)=>{r.d(t,{b:()=>n,q:()=>LRUCache});const n=128;class LRUNode{key;next;prev;constructor(e){this.key=e,this.next=this.prev=this}}class LRUCache{capacity;__internal__data=new Map;__internal__refs=new Map;__internal__length=0;__internal__head;__internal__tail;constructor(e=n){this.capacity=e,this.__internal__head=this.__internal__tail=new LRUNode("<empty>")}get length(){return this.__internal__length}get lengthData(){return this.__internal__data.size}get lengthRefs(){return this.__internal__refs.size}entries(){const e=this.keys(),t=e.length,r=new Array(t);for(let n=0;n<t;n++){const t=e[n];r[n]=[t,this.__internal__data.get(t)]}return r}keys(){const e=[];if(this.__internal__length){let t=this.__internal__head;for(;t!==this.__internal__tail;)e.push(t.key),t=t.next;e.push(t.key)}return e}get(e){const t=this.__internal__data.get(e);return t?(this.__internal__toHead(e),t):null}set(e,t){if(this.__internal__data.has(e))this.__internal__toHead(e);else{const t=new LRUNode(e);this.__internal__refs.set(t.key,t),0===this.length?this.__internal__head=this.__internal__tail=t:(this.__internal__head.prev=t,t.next=this.__internal__head,this.__internal__head=t),this.__internal__length===this.capacity?(this.__internal__data.delete(this.__internal__tail.key),this.__internal__refs.delete(this.__internal__tail.key),this.__internal__tail=this.__internal__tail.prev,this.__internal__tail.next=this.__internal__head):this.__internal__length+=1}this.__internal__data.set(e,t)}__internal__toHead(e){const t=this.__internal__refs.get(e);t&&t!==this.__internal__head&&(t.prev.next=t.next,t.next.prev=t.prev,t.next=this.__internal__head,this.__internal__head.prev=t,this.__internal__head=t)}}},9317:(e,t,r)=>{r.d(t,{G:()=>ApiPromise});var n={};r.r(n),r.d(n,{_flags:()=>_flags,_identity:()=>_identity,accountId:()=>accountId,flags:()=>flags,hasIdentity:()=>He,hasIdentityMulti:()=>hasIdentityMulti,idAndIndex:()=>idAndIndex,idToIndex:()=>idToIndex,identity:()=>identity_identity,indexToId:()=>indexToId,indexes:()=>indexes,info:()=>info});var i={};r.r(i),r.d(i,{hasProposals:()=>De,members:()=>je,prime:()=>We,proposal:()=>Ve,proposalCount:()=>$e,proposalHashes:()=>ze,proposals:()=>Ue});var s={};r.r(s),r.d(s,{_getIds:()=>_getIds,all:()=>get_all,expand:()=>expand,get:()=>get,getExpanded:()=>getExpanded,listNodes:()=>listNodes});var a={};r.r(a),r.d(a,{account:()=>account,all:()=>all_all,votingBalance:()=>Xe,votingBalances:()=>votingBalances});var o={};r.r(o),r.d(o,{bounties:()=>bounties});var c={};r.r(c),r.d(c,{_getHeaderRange:()=>_getHeaderRange,bestNumber:()=>et,bestNumberFinalized:()=>tt,bestNumberLag:()=>bestNumberLag,getBlock:()=>getBlock,getBlockByNumber:()=>getBlockByNumber,getHeader:()=>getHeader,subscribeFinalizedBlocks:()=>subscribeFinalizedBlocks,subscribeFinalizedHeads:()=>subscribeFinalizedHeads,subscribeNewBlocks:()=>subscribeNewBlocks,subscribeNewHeads:()=>subscribeNewHeads});var u={};r.r(u),r.d(u,{fees:()=>fees});var l={};r.r(l),r.d(l,{hasProposals:()=>nt,members:()=>rt,prime:()=>ct,proposal:()=>it,proposalCount:()=>st,proposalHashes:()=>at,proposals:()=>ot,votes:()=>votes,votesOf:()=>votesOf});var p={};r.r(p),r.d(p,{childKey:()=>childKey,contributions:()=>contributions,ownContributions:()=>ownContributions});var d={};r.r(d),r.d(d,{_referendumInfo:()=>_referendumInfo,_referendumVotes:()=>_referendumVotes,_referendumsVotes:()=>_referendumsVotes,dispatchQueue:()=>dispatchQueue,locks:()=>locks,nextExternal:()=>nextExternal,preimage:()=>bt,preimages:()=>preimages,proposals:()=>proposals_proposals,referendumIds:()=>referendumIds,referendums:()=>referendums,referendumsActive:()=>referendumsActive,referendumsFinished:()=>referendumsFinished,referendumsInfo:()=>referendumsInfo,sqrtElectorate:()=>sqrtElectorate});var h={};r.r(h),r.d(h,{info:()=>info_info});var _={};r.r(_),r.d(_,{receivedHeartbeats:()=>receivedHeartbeats});var m={};r.r(m),r.d(m,{hasProposals:()=>wt,members:()=>vt,prime:()=>At,proposal:()=>St,proposalCount:()=>kt,proposalHashes:()=>xt,proposals:()=>Et});var f={};r.r(f),r.d(f,{info:()=>parachains_info_info,overview:()=>overview});var y={};r.r(y),r.d(y,{eraLength:()=>Ct,eraProgress:()=>qt,indexes:()=>indexes_indexes,info:()=>session_info_info,progress:()=>progress,sessionProgress:()=>It});var g={};r.r(g),r.d(g,{_members:()=>_members,candidates:()=>candidates,info:()=>society_info_info,member:()=>member,members:()=>members_members});var b={};r.r(b),r.d(b,{_eraExposure:()=>_eraExposure,_eraPrefs:()=>_eraPrefs,_eraSlashes:()=>_eraSlashes,_erasExposure:()=>jt,_erasPoints:()=>_erasPoints,_erasPrefs:()=>Wt,_erasRewards:()=>_erasRewards,_erasSlashes:()=>Xt,_ownExposures:()=>_ownExposures,_ownSlashes:()=>_ownSlashes,_stakerExposures:()=>_stakerExposures,_stakerPoints:()=>_stakerPoints,_stakerPrefs:()=>_stakerPrefs,_stakerRewards:()=>_stakerRewards,_stakerRewardsEras:()=>_stakerRewardsEras,_stakerSlashes:()=>_stakerSlashes,account:()=>Ot,accounts:()=>accounts,currentPoints:()=>currentPoints,electedInfo:()=>electedInfo,eraExposure:()=>Ft,eraPrefs:()=>Ut,eraSlashes:()=>Zt,erasExposure:()=>Dt,erasHistoric:()=>erasHistoric,erasPoints:()=>$t,erasPrefs:()=>Kt,erasRewards:()=>Qt,erasSlashes:()=>Gt,keys:()=>er,keysMulti:()=>keysMulti,nextElected:()=>nextElected,overview:()=>overview_overview,ownExposure:()=>tr,ownExposures:()=>rr,ownSlash:()=>nr,ownSlashes:()=>ir,query:()=>sr,queryMulti:()=>queryMulti,stakerExposure:()=>ar,stakerExposures:()=>stakerExposures,stakerPoints:()=>or,stakerPrefs:()=>cr,stakerRewards:()=>ur,stakerRewardsMulti:()=>stakerRewardsMulti,stakerRewardsMultiEras:()=>stakerRewardsMultiEras,stakerSlashes:()=>lr,stashes:()=>stashes,validators:()=>validators,waitingInfo:()=>waitingInfo});var v={};r.r(v),r.d(v,{hasProposals:()=>hr,members:()=>dr,prime:()=>gr,proposal:()=>_r,proposalCount:()=>mr,proposalHashes:()=>fr,proposals:()=>yr});var w={};r.r(w),r.d(w,{proposals:()=>treasury_proposals_proposals});var S={};r.r(S),r.d(S,{events:()=>events,signingInfo:()=>signingInfo});var k=r(733862),x=r(515063),E=r(722116),A=r(745725),C=r(244912);function getAbsoluteUrl(e){const t=r.p;let n="";return(!t||t.indexOf("://")<0)&&(n+="undefined"!=typeof window?window.location.protocol+"//"+window.location.host:"https://1key.so"),n+=t||"/",n+e}const q="@polkadot/api",I=(getAbsoluteUrl("ules/@polkadot/api/packageInfo.js"),getAbsoluteUrl("ules/@polkadot/api/packageInfo.js")&&new URL(getAbsoluteUrl("ules/@polkadot/api/packageInfo.js")).pathname.substring(0,new URL(getAbsoluteUrl("ules/@polkadot/api/packageInfo.js")).pathname.lastIndexOf("/")+1),"11.3.1");function findCall(e,t){return e.findMetaCall((0,C.e)(t))}function findError(e,t){return e.findMetaError((0,C.e)(t))}function createErrorClass(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var M=createErrorClass((function(e){return function EmptyErrorImpl(){e(this),this.name="EmptyError",this.message="no elements in sequence"}})),O=r(434117);function isFunction(e){return"function"==typeof e}var R=createErrorClass((function(e){return function UnsubscriptionErrorImpl(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function arrRemove(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var P=function(){function Subscription(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return Subscription.prototype.unsubscribe=function(){var e,t,r,n,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=(0,O.__values)(s),o=a.next();!o.done;o=a.next()){o.value.remove(this)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else s.remove(this);var c=this.initialTeardown;if(isFunction(c))try{c()}catch(e){i=e instanceof R?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var l=(0,O.__values)(u),p=l.next();!p.done;p=l.next()){var d=p.value;try{execFinalizer(d)}catch(e){i=null!=i?i:[],e instanceof R?i=(0,O.__spreadArray)((0,O.__spreadArray)([],(0,O.__read)(i)),(0,O.__read)(e.errors)):i.push(e)}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}}if(i)throw new R(i)}},Subscription.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)execFinalizer(e);else{if(e instanceof Subscription){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}},Subscription.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},Subscription.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},Subscription.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&arrRemove(t,e)},Subscription.prototype.remove=function(e){var t=this._finalizers;t&&arrRemove(t,e),e instanceof Subscription&&e._removeParent(this)},Subscription.EMPTY=function(){var e=new Subscription;return e.closed=!0,e}(),Subscription}(),T=P.EMPTY;function isSubscription(e){return e instanceof P||e&&"closed"in e&&isFunction(e.remove)&&isFunction(e.add)&&isFunction(e.unsubscribe)}function execFinalizer(e){isFunction(e)?e():e.unsubscribe()}var H={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},B={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=B.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,(0,O.__spreadArray)([e,t],(0,O.__read)(r))):setTimeout.apply(void 0,(0,O.__spreadArray)([e,t],(0,O.__read)(r)))},clearTimeout:function(e){var t=B.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function reportUnhandledError(e){B.setTimeout((function(){var t=H.onUnhandledError;if(!t)throw e;t(e)}))}function noop_noop(){}var L=createNotification("C",void 0,void 0);function createNotification(e,t,r){return{kind:e,value:t,error:r}}var N=null;function errorContext(e){if(H.useDeprecatedSynchronousErrorHandling){var t=!N;if(t&&(N={errorThrown:!1,error:null}),e(),t){var r=N,n=r.errorThrown,i=r.error;if(N=null,n)throw i}}else e()}var F=function(e){function Subscriber(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,isSubscription(t)&&t.add(r)):r.destination=$,r}return(0,O.__extends)(Subscriber,e),Subscriber.create=function(e,t,r){return new V(e,t,r)},Subscriber.prototype.next=function(e){this.isStopped?handleStoppedNotification(function nextNotification(e){return createNotification("N",e,void 0)}(e),this):this._next(e)},Subscriber.prototype.error=function(e){this.isStopped?handleStoppedNotification(function errorNotification(e){return createNotification("E",void 0,e)}(e),this):(this.isStopped=!0,this._error(e))},Subscriber.prototype.complete=function(){this.isStopped?handleStoppedNotification(L,this):(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},Subscriber.prototype._next=function(e){this.destination.next(e)},Subscriber.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},Subscriber.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},Subscriber}(P),j=Function.prototype.bind;function bind(e,t){return j.call(e,t)}var D=function(){function ConsumerObserver(e){this.partialObserver=e}return ConsumerObserver.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){handleUnhandledError(e)}},ConsumerObserver.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){handleUnhandledError(e)}else handleUnhandledError(e)},ConsumerObserver.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){handleUnhandledError(e)}},ConsumerObserver}(),V=function(e){function SafeSubscriber(t,r,n){var i,s,a=e.call(this)||this;isFunction(t)||!t?i={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:a&&H.useDeprecatedNextContext?((s=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},i={next:t.next&&bind(t.next,s),error:t.error&&bind(t.error,s),complete:t.complete&&bind(t.complete,s)}):i=t;return a.destination=new D(i),a}return(0,O.__extends)(SafeSubscriber,e),SafeSubscriber}(F);function handleUnhandledError(e){H.useDeprecatedSynchronousErrorHandling?function captureError(e){H.useDeprecatedSynchronousErrorHandling&&N&&(N.errorThrown=!0,N.error=e)}(e):reportUnhandledError(e)}function handleStoppedNotification(e,t){var r=H.onStoppedNotification;r&&B.setTimeout((function(){return r(e,t)}))}var $={closed:!0,next:noop_noop,error:function defaultErrorHandler(e){throw e},complete:noop_noop};function firstValueFrom(e,t){var r="object"==typeof t;return new Promise((function(n,i){var s=new V({next:function(e){n(e),s.unsubscribe()},error:i,complete:function(){r?n(t.defaultValue):i(new M)}});e.subscribe(s)}))}var isArrayLike=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function isPromise(e){return isFunction(null==e?void 0:e.then)}var z="function"==typeof Symbol&&Symbol.observable||"@@observable";function identity(e){return e}function pipeFromArray(e){return 0===e.length?identity:1===e.length?e[0]:function piped(t){return e.reduce((function(e,t){return t(e)}),t)}}var U=function(){function Observable(e){e&&(this._subscribe=e)}return Observable.prototype.lift=function(e){var t=new Observable;return t.source=this,t.operator=e,t},Observable.prototype.subscribe=function(e,t,r){var n=this,i=function isSubscriber(e){return e&&e instanceof F||function isObserver(e){return e&&isFunction(e.next)&&isFunction(e.error)&&isFunction(e.complete)}(e)&&isSubscription(e)}(e)?e:new V(e,t,r);return errorContext((function(){var e=n,t=e.operator,r=e.source;i.add(t?t.call(i,r):r?n._subscribe(i):n._trySubscribe(i))})),i},Observable.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},Observable.prototype.forEach=function(e,t){var r=this;return new(t=getPromiseCtor(t))((function(t,n){var i=new V({next:function(t){try{e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:t});r.subscribe(i)}))},Observable.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},Observable.prototype[z]=function(){return this},Observable.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pipeFromArray(e)(this)},Observable.prototype.toPromise=function(e){var t=this;return new(e=getPromiseCtor(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},Observable.create=function(e){return new Observable(e)},Observable}();function getPromiseCtor(e){var t;return null!==(t=null!=e?e:H.Promise)&&void 0!==t?t:Promise}function isInteropObservable(e){return isFunction(e[z])}function isAsyncIterable(e){return Symbol.asyncIterator&&isFunction(null==e?void 0:e[Symbol.asyncIterator])}function createInvalidObservableTypeError(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var W=function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function isIterable(e){return isFunction(null==e?void 0:e[W])}function readableStreamLikeToAsyncGenerator(e){return(0,O.__asyncGenerator)(this,arguments,(function readableStreamLikeToAsyncGenerator_1(){var t,r,n;return(0,O.__generator)(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,(0,O.__await)(t.read())];case 3:return r=i.sent(),n=r.value,r.done?[4,(0,O.__await)(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,(0,O.__await)(n)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function isReadableStreamLike(e){return isFunction(null==e?void 0:e.getReader)}function innerFrom(e){if(e instanceof U)return e;if(null!=e){if(isInteropObservable(e))return function fromInteropObservable(e){return new U((function(t){var r=e[z]();if(isFunction(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}(e);if(isArrayLike(e))return function fromArrayLike(e){return new U((function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()}))}(e);if(isPromise(e))return function fromPromise(e){return new U((function(t){e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,reportUnhandledError)}))}(e);if(isAsyncIterable(e))return fromAsyncIterable(e);if(isIterable(e))return function fromIterable(e){return new U((function(t){var r,n;try{for(var i=(0,O.__values)(e),s=i.next();!s.done;s=i.next()){var a=s.value;if(t.next(a),t.closed)return}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.complete()}))}(e);if(isReadableStreamLike(e))return function fromReadableStreamLike(e){return fromAsyncIterable(readableStreamLikeToAsyncGenerator(e))}(e)}throw createInvalidObservableTypeError(e)}function fromAsyncIterable(e){return new U((function(t){(function process(e,t){var r,n,i,s;return(0,O.__awaiter)(this,void 0,void 0,(function(){var a,o;return(0,O.__generator)(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),r=(0,O.__asyncValues)(e),c.label=1;case 1:return[4,r.next()];case 2:if((n=c.sent()).done)return[3,4];if(a=n.value,t.next(a),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=c.sent(),i={error:o},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(s=r.return)?[4,s.call(r)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function hasLift(e){return isFunction(null==e?void 0:e.lift)}function operate(e){return function(t){if(hasLift(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function createOperatorSubscriber(e,t,r,n,i){return new K(e,t,r,n,i)}var K=function(e){function OperatorSubscriber(t,r,n,i,s,a){var o=e.call(this,t)||this;return o.onFinalize=s,o.shouldUnsubscribe=a,o._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,o._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,o._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,o}return(0,O.__extends)(OperatorSubscriber,e),OperatorSubscriber.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},OperatorSubscriber}(F);function switchMap(e,t){return operate((function(r,n){var i=null,s=0,a=!1,checkComplete=function(){return a&&!i&&n.complete()};r.subscribe(createOperatorSubscriber(n,(function(r){null==i||i.unsubscribe();var a=0,o=s++;innerFrom(e(r,o)).subscribe(i=createOperatorSubscriber(n,(function(e){return n.next(t?t(r,e,o,a++):e)}),(function(){i=null,checkComplete()})))}),(function(){a=!0,checkComplete()})))}))}function last(e){return e[e.length-1]}function popScheduler(e){return function isScheduler(e){return e&&isFunction(e.schedule)}(last(e))?e.pop():void 0}function executeSchedule(e,t,r,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var s=t.schedule((function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()}),n);if(e.add(s),!i)return s}function observeOn(e,t){return void 0===t&&(t=0),operate((function(r,n){r.subscribe(createOperatorSubscriber(n,(function(r){return executeSchedule(n,e,(function(){return n.next(r)}),t)}),(function(){return executeSchedule(n,e,(function(){return n.complete()}),t)}),(function(r){return executeSchedule(n,e,(function(){return n.error(r)}),t)})))}))}function subscribeOn(e,t){return void 0===t&&(t=0),operate((function(r,n){n.add(e.schedule((function(){return r.subscribe(n)}),t))}))}function scheduleAsyncIterable(e,t){if(!e)throw new Error("Iterable cannot be null");return new U((function(r){executeSchedule(r,t,(function(){var n=e[Symbol.asyncIterator]();executeSchedule(r,t,(function(){n.next().then((function(e){e.done?r.complete():r.next(e.value)}))}),0,!0)}))}))}function scheduled(e,t){if(null!=e){if(isInteropObservable(e))return function scheduleObservable(e,t){return innerFrom(e).pipe(subscribeOn(t),observeOn(t))}(e,t);if(isArrayLike(e))return function scheduleArray(e,t){return new U((function(r){var n=0;return t.schedule((function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())}))}))}(e,t);if(isPromise(e))return function schedulePromise(e,t){return innerFrom(e).pipe(subscribeOn(t),observeOn(t))}(e,t);if(isAsyncIterable(e))return scheduleAsyncIterable(e,t);if(isIterable(e))return function scheduleIterable(e,t){return new U((function(r){var n;return executeSchedule(r,t,(function(){n=e[W](),executeSchedule(r,t,(function(){var e,t,i;try{t=(e=n.next()).value,i=e.done}catch(e){return void r.error(e)}i?r.complete():r.next(t)}),0,!0)})),function(){return isFunction(null==n?void 0:n.return)&&n.return()}}))}(e,t);if(isReadableStreamLike(e))return function scheduleReadableStreamLike(e,t){return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(e),t)}(e,t)}throw createInvalidObservableTypeError(e)}function from(e,t){return t?scheduled(e,t):innerFrom(e)}function of(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return from(e,popScheduler(e))}function map(e,t){return operate((function(r,n){var i=0;r.subscribe(createOperatorSubscriber(n,(function(r){n.next(e.call(t,r,i++))})))}))}var Y=r(893805),Q=r(897274),J=r(314213),Z=r(218830),X=r(754224),G=r(578773),ee=r(886945),te=r(749681),re=r(352437),ne=createErrorClass((function(e){return function ObjectUnsubscribedErrorImpl(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),ie=function(e){function Subject(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,O.__extends)(Subject,e),Subject.prototype.lift=function(e){var t=new se(this,this);return t.operator=e,t},Subject.prototype._throwIfClosed=function(){if(this.closed)throw new ne},Subject.prototype.next=function(e){var t=this;errorContext((function(){var r,n;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=(0,O.__values)(t.currentObservers),s=i.next();!s.done;s=i.next()){s.value.next(e)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}}))},Subject.prototype.error=function(e){var t=this;errorContext((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}}))},Subject.prototype.complete=function(){var e=this;errorContext((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},Subject.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(Subject.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),Subject.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},Subject.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},Subject.prototype._innerSubscribe=function(e){var t=this,r=this,n=r.hasError,i=r.isStopped,s=r.observers;return n||i?T:(this.currentObservers=null,s.push(e),new P((function(){t.currentObservers=null,arrRemove(s,e)})))},Subject.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,n=t.thrownError,i=t.isStopped;r?e.error(n):i&&e.complete()},Subject.prototype.asObservable=function(){var e=new U;return e.source=this,e},Subject.create=function(e,t){return new se(e,t)},Subject}(U),se=function(e){function AnonymousSubject(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return(0,O.__extends)(AnonymousSubject,e),AnonymousSubject.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},AnonymousSubject.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},AnonymousSubject.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},AnonymousSubject.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:T},AnonymousSubject}(ie),ae=function(e){function BehaviorSubject(t){var r=e.call(this)||this;return r._value=t,r}return(0,O.__extends)(BehaviorSubject,e),Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),BehaviorSubject.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return!r.closed&&t.next(this._value),r},BehaviorSubject.prototype.getValue=function(){var e=this,t=e.hasError,r=e.thrownError,n=e._value;if(t)throw r;return this._throwIfClosed(),n},BehaviorSubject.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},BehaviorSubject}(ie),oe=Array.isArray,ce=Object.getPrototypeOf,ue=Object.prototype,le=Object.keys;function argsArgArrayOrObject(e){if(1===e.length){var t=e[0];if(oe(t))return{args:t,keys:null};if(function isPOJO(e){return e&&"object"==typeof e&&ce(e)===ue}(t)){var r=le(t);return{args:r.map((function(e){return t[e]})),keys:r}}}return{args:e,keys:null}}var pe=Array.isArray;function mapOneOrManyArgs(e){return map((function(t){return function callOrApply(e,t){return pe(t)?e.apply(void 0,(0,O.__spreadArray)([],(0,O.__read)(t))):e(t)}(e,t)}))}function combineLatest(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=popScheduler(e),n=function popResultSelector(e){return isFunction(last(e))?e.pop():void 0}(e),i=argsArgArrayOrObject(e),s=i.args,a=i.keys;if(0===s.length)return from([],r);var o=new U(function combineLatestInit(e,t,r){void 0===r&&(r=identity);return function(n){maybeSchedule(t,(function(){for(var i=e.length,s=new Array(i),a=i,o=i,_loop_1=function(i){maybeSchedule(t,(function(){var c=from(e[i],t),u=!1;c.subscribe(createOperatorSubscriber(n,(function(e){s[i]=e,u||(u=!0,o--),o||n.next(r(s.slice()))}),(function(){--a||n.complete()})))}),n)},c=0;c<i;c++)_loop_1(c)}),n)}}(s,r,a?function(e){return function createObject(e,t){return e.reduce((function(e,r,n){return e[r]=t[n],e}),{})}(a,e)}:identity));return n?o.pipe(mapOneOrManyArgs(n)):o}function maybeSchedule(e,t,r){e?executeSchedule(r,e,t):t()}function tap(e,t,r){var n=isFunction(e)||t||r?{next:e,error:t,complete:r}:e;return n?operate((function(e,t){var r;null===(r=n.subscribe)||void 0===r||r.call(n);var i=!0;e.subscribe(createOperatorSubscriber(t,(function(e){var r;null===(r=n.next)||void 0===r||r.call(n,e),t.next(e)}),(function(){var e;i=!1,null===(e=n.complete)||void 0===e||e.call(n),t.complete()}),(function(e){var r;i=!1,null===(r=n.error)||void 0===r||r.call(n,e),t.error(e)}),(function(){var e,t;i&&(null===(e=n.unsubscribe)||void 0===e||e.call(n)),null===(t=n.finalize)||void 0===t||t.call(n)})))})):identity}function reduce(e,t){return operate(function scanInternals(e,t,r,n,i){return function(s,a){var o=r,c=t,u=0;s.subscribe(createOperatorSubscriber(a,(function(t){var r=u++;c=o?e(c,t,r):(o=!0,t),n&&a.next(c)}),i&&function(){o&&a.next(c),a.complete()}))}}(e,t,arguments.length>=2,!1,!0))}var arrReducer=function(e,t){return e.push(t),e};function toArray(){return operate((function(e,t){reduce(arrReducer,[])(e).subscribe(t)}))}var de=r(785556);function lazyDeriveSection(e,t,r,n){(0,de.s)(e,t,(()=>(0,de.T)({},r(t),(e=>n(t,e)))))}var he=r(318809),_e=r(968955),me=r(901504);function catchError(e){return operate((function(t,r){var n,i=null,s=!1;i=t.subscribe(createOperatorSubscriber(r,void 0,void 0,(function(a){n=innerFrom(e(a,catchError(e)(t))),i?(i.unsubscribe(),i=null,n.subscribe(r)):s=!0}))),s&&(i.unsubscribe(),i=null,n.subscribe(r))}))}function defaultCompare(e,t){return e===t}var fe={now:function(){return(fe.delegate||Date).now()},delegate:void 0},ye=function(e){function ReplaySubject(t,r,n){void 0===t&&(t=1/0),void 0===r&&(r=1/0),void 0===n&&(n=fe);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=r,i._timestampProvider=n,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=r===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,r),i}return(0,O.__extends)(ReplaySubject,e),ReplaySubject.prototype.next=function(t){var r=this,n=r.isStopped,i=r._buffer,s=r._infiniteTimeWindow,a=r._timestampProvider,o=r._windowTime;n||(i.push(t),!s&&i.push(a.now()+o)),this._trimBuffer(),e.prototype.next.call(this,t)},ReplaySubject.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),r=this._infiniteTimeWindow,n=this._buffer.slice(),i=0;i<n.length&&!e.closed;i+=r?1:2)e.next(n[i]);return this._checkFinalizedStatuses(e),t},ReplaySubject.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,r=e._timestampProvider,n=e._buffer,i=e._infiniteTimeWindow,s=(i?1:2)*t;if(t<1/0&&s<n.length&&n.splice(0,n.length-s),!i){for(var a=r.now(),o=0,c=1;c<n.length&&n[c]<=a;c+=2)o=c;o&&n.splice(0,o+1)}},ReplaySubject}(ie);function refCount(){return operate((function(e,t){var r=null;e._refCount++;var n=createOperatorSubscriber(t,void 0,void 0,void 0,(function(){if(!e||e._refCount<=0||0<--e._refCount)r=null;else{var n=e._connection,i=r;r=null,!n||i&&n!==i||n.unsubscribe(),t.unsubscribe()}}));e.subscribe(n),n.closed||(r=e.connect())}))}var ge=function(e){function ConnectableObservable(t,r){var n=e.call(this)||this;return n.source=t,n.subjectFactory=r,n._subject=null,n._refCount=0,n._connection=null,hasLift(t)&&(n.lift=t.lift),n}return(0,O.__extends)(ConnectableObservable,e),ConnectableObservable.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},ConnectableObservable.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},ConnectableObservable.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},ConnectableObservable.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new P;var r=this.getSubject();t.add(this.source.subscribe(createOperatorSubscriber(r,void 0,(function(){e._teardown(),r.complete()}),(function(t){e._teardown(),r.error(t)}),(function(){return e._teardown()})))),t.closed&&(this._connection=null,t=P.EMPTY)}return t},ConnectableObservable.prototype.refCount=function(){return refCount()(this)},ConnectableObservable}(U);var be={connector:function(){return new ie}};function connect(e,t){void 0===t&&(t=be);var r=t.connector;return operate((function(t,n){var i=r();innerFrom(e(function fromSubscribable(e){return new U((function(t){return e.subscribe(t)}))}(i))).subscribe(n),n.add(t.subscribe(i))}))}function publishReplay(e,t,r,n){r&&!isFunction(r)&&(n=r);var i=isFunction(r)?r:void 0;return function(r){return function multicast(e,t){var r=isFunction(e)?e:function(){return e};return isFunction(t)?connect(t,{connector:r}):function(e){return new ge(e,r)}}(new ye(e,t,n),i)(r)}}var ve,we=r(709629),Se=function(e){function Action(t,r){return e.call(this)||this}return(0,O.__extends)(Action,e),Action.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},Action}(P),ke={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=ke.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,(0,O.__spreadArray)([e,t],(0,O.__read)(r))):setInterval.apply(void 0,(0,O.__spreadArray)([e,t],(0,O.__read)(r)))},clearInterval:function(e){var t=ke.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},xe=function(e){function AsyncAction(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return(0,O.__extends)(AsyncAction,e),AsyncAction.prototype.schedule=function(e,t){var r;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,t),this},AsyncAction.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),ke.setInterval(e.flush.bind(e,this),r)},AsyncAction.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&ke.clearInterval(t)},AsyncAction.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},AsyncAction.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},AsyncAction.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,arrRemove(n,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},AsyncAction}(Se),Ee=1,Ae={};function findAndClearHandle(e){return e in Ae&&(delete Ae[e],!0)}var setImmediate=function(e){var t=Ee++;return Ae[t]=!0,ve||(ve=Promise.resolve()),ve.then((function(){return findAndClearHandle(t)&&e()})),t},clearImmediate=function(e){findAndClearHandle(e)},Ce={setImmediate:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Ce.delegate;return((null==r?void 0:r.setImmediate)||setImmediate).apply(void 0,(0,O.__spreadArray)([],(0,O.__read)(e)))},clearImmediate:function(e){var t=Ce.delegate;return((null==t?void 0:t.clearImmediate)||clearImmediate)(e)},delegate:void 0},qe=function(e){function AsapAction(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return(0,O.__extends)(AsapAction,e),AsapAction.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t._scheduled||(t._scheduled=Ce.setImmediate(t.flush.bind(t,void 0))))},AsapAction.prototype.recycleAsyncId=function(t,r,n){var i;if(void 0===n&&(n=0),null!=n?n>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);var s=t.actions;null!=r&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==r&&(Ce.clearImmediate(r),t._scheduled===r&&(t._scheduled=void 0))},AsapAction}(xe),Ie=function(){function Scheduler(e,t){void 0===t&&(t=Scheduler.now),this.schedulerActionCtor=e,this.now=t}return Scheduler.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},Scheduler.now=fe.now,Scheduler}(),Me=new(function(e){function AsapScheduler(){return null!==e&&e.apply(this,arguments)||this}return(0,O.__extends)(AsapScheduler,e),AsapScheduler.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var r,n=this.actions;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}},AsapScheduler}(function(e){function AsyncScheduler(t,r){void 0===r&&(r=Ie.now);var n=e.call(this,t,r)||this;return n.actions=[],n._active=!1,n}return(0,O.__extends)(AsyncScheduler,e),AsyncScheduler.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},AsyncScheduler}(Ie)))(qe);function refCountDelay(e=1750){return t=>{let[r,n,i,s]=[0,0,P.EMPTY,P.EMPTY];return new U((a=>(t.subscribe(a),0==n++&&(1===r?s.unsubscribe():i=t.connect(),r=3),()=>{0==--n&&(2===r?(r=0,s.unsubscribe()):(r=1,s=Me.schedule((()=>{r=0,i.unsubscribe()}),e)))})))}}function CMP(e,t){return(0,we.A)({t:e})===(0,we.A)({t})}function ERR(e){throw e}function NOOP(){}function drr({delay:e,skipChange:t=!1,skipTimeout:r=!1}={}){return n=>n.pipe(catchError(ERR),t?tap(NOOP):function distinctUntilChanged(e,t){return void 0===t&&(t=identity),e=null!=e?e:defaultCompare,operate((function(r,n){var i,s=!0;r.subscribe(createOperatorSubscriber(n,(function(r){var a=t(r);!s&&e(i,a)||(s=!1,i=a,n.next(r))})))}))}(CMP),publishReplay(1),r?refCount():refCountDelay(e))}function memo(e,t){const r={getInstanceId:()=>e},n=(0,me.B)(((...e)=>new U((r=>{const i=t(...e).subscribe(r);return()=>{n.unmemoize(...e),i.unsubscribe()}})).pipe(drr())),r);return n}function accountId(e,t){return memo(e,(e=>{const r=(0,he.b)(e)?e:(0,_e.F)((e||"").toString());if(r.length>8)return of(t.registry.createType("AccountId",r));const n=t.registry.createType("AccountIndex",r);return t.derive.accounts.indexToId(n.toString()).pipe(map((e=>(0,X.Z8)(e,"Unable to retrieve accountId"))))}))}var Oe=r(923477);function _flags(e,t){return memo(e,(()=>{const e=[void 0,[],[],[],void 0],r=[(t.query.elections||t.query.phragmenElection||t.query.electionsPhragmen)?.members,t.query.council?.members,t.query.technicalCommittee?.members,t.query.society?.members,t.query.sudo?.key],n=r.filter((e=>e));return n.length?t.queryMulti(n).pipe(map((t=>{let n=-1;for(let i=0,s=r.length;i<s;i++)(0,Oe.T)(r[i])&&(e[i]=t[++n]);return e}))):of(e)}))}function flags(e,t){return memo(e,(e=>t.derive.accounts._flags().pipe(map((t=>function parseFlags(e,[t,r,n,i,s]){const a=e?.toString(),isIncluded=e=>e.toString()===a;return{isCouncil:(t?.map((e=>Array.isArray(e)?e[0]:e.who))||r||[]).some(isIncluded),isSociety:(i||[]).some(isIncluded),isSudo:s?.toString()===a,isTechCommittee:(n||[]).some(isIncluded)}}(e,t))))))}function idAndIndex(e,t){return memo(e,(e=>{try{const r=(0,he.b)(e)?e:(0,_e.F)((e||"").toString());if(r.length>8){const e=t.registry.createType("AccountId",r);return t.derive.accounts.idToIndex(e).pipe(map((t=>[e,t])))}const n=t.registry.createType("AccountIndex",r);return t.derive.accounts.indexToId(n.toString()).pipe(map((e=>[e,n])))}catch{return of([void 0,void 0])}}))}var Re=r(352906),Pe=r(118548);function firstObservable(e){return e.pipe(map((([e])=>e)))}function firstMemo(e){return(t,r)=>memo(t,((...t)=>firstObservable(e(r,...t))))}const Te={toHex:()=>{}};function dataAsString(e){return e?e.isRaw?(0,Re.F)(e.asRaw.toU8a(!0)):e.isNone?void 0:e.toHex():e}function identityCompat(e){const t=e.unwrap();return Array.isArray(t)?t[0]:t}function _identity(e,t){return memo(e,(e=>e&&t.query.identity?.identityOf?combineLatest([t.query.identity.identityOf(e),t.query.identity.superOf(e)]):of([void 0,void 0])))}function identity_identity(e,t){return memo(e,(e=>t.derive.accounts._identity(e).pipe(switchMap((([e,r])=>function getParent(e,t,r){if(t?.isSome)return of([t,void 0]);if(r?.isSome){const t=r.unwrap();return combineLatest([e.derive.accounts._identity(t[0]).pipe(map((([e])=>e))),of(t)])}return of([void 0,void 0])}(t,e,r))),map((([e,t])=>function extractIdentity(e,t){if(!e?.isSome)return{judgements:[]};const{info:r,judgements:n}=identityCompat(e),i=dataAsString(r.display);return{discord:dataAsString(r.discord),display:t&&dataAsString(t[1])||i,displayParent:t&&i,email:dataAsString(r.email),github:dataAsString(r.github),image:dataAsString(r.image),judgements:n,legal:dataAsString(r.legal),matrix:dataAsString(r.matrix),other:r.additional?(s=r.additional,s.reduce(((e,[t,r])=>{const n=dataAsString(t),i=dataAsString(r);return n&&i&&(e[n]=i),e}),{})):{},parent:t?.[0],pgp:r.pgpFingerprint.unwrapOr(Te).toHex(),riot:dataAsString(r.riot),twitter:dataAsString(r.twitter),web:dataAsString(r.web)};var s}(e,t))))))}const He=firstMemo(((e,t)=>e.derive.accounts.hasIdentityMulti([t])));function hasIdentityMulti(e,t){return memo(e,(e=>t.query.identity?.identityOf?combineLatest([t.query.identity.identityOf.multi(e),t.query.identity.superOf.multi(e)]).pipe(map((([e,t])=>e.map(((e,r)=>{const n=t[r],i=n&&n.isSome?n.unwrap()[0].toString():void 0;let s;if(e&&e.isSome){const t=dataAsString(identityCompat(e).info.display);t&&!(0,Pe.qv)(t)&&(s=t)}return{display:s,hasIdentity:!(!s&&!i),parentId:i}}))))):of(e.map((()=>({hasIdentity:!1}))))))}function idToIndex(e,t){return memo(e,(e=>t.derive.accounts.indexes().pipe(map((t=>t[e.toString()])))))}function mergeMap(e,t,r){return void 0===r&&(r=1/0),isFunction(t)?mergeMap((function(r,n){return map((function(e,i){return t(r,e,n,i)}))(innerFrom(e(r,n)))}),r):("number"==typeof t&&(r=t),operate((function(t,n){return function mergeInternals(e,t,r,n,i,s,a,o){var c=[],u=0,l=0,p=!1,checkComplete=function(){!p||c.length||u||t.complete()},outerNext=function(e){return u<n?doInnerSub(e):c.push(e)},doInnerSub=function(e){s&&t.next(e),u++;var o=!1;innerFrom(r(e,l++)).subscribe(createOperatorSubscriber(t,(function(e){null==i||i(e),s?outerNext(e):t.next(e)}),(function(){o=!0}),void 0,(function(){if(o)try{u--;for(var _loop_1=function(){var e=c.shift();a?executeSchedule(t,a,(function(){return doInnerSub(e)})):doInnerSub(e)};c.length&&u<n;)_loop_1();checkComplete()}catch(e){t.error(e)}})))};return e.subscribe(createOperatorSubscriber(t,outerNext,(function(){p=!0,checkComplete()}))),function(){null==o||o()}}(t,n,e,r)})))}function concatAll(){return function mergeAll(e){return void 0===e&&(e=1/0),mergeMap(identity,e)}(1)}function concat(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return concatAll()(from(e,popScheduler(e)))}function startWith(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=popScheduler(e);return operate((function(t,n){(r?concat(e,t,r):concat(e,t)).subscribe(n)}))}let Be=null;function indexes(e,t){return memo(e,(()=>Be?of(Be):(t.query.indices?function queryAccounts(e){return e.query.indices.accounts.entries().pipe(map((t=>t.reduce(((t,[r,n])=>(n.isSome&&(t[n.unwrap()[0].toString()]=e.registry.createType("AccountIndex",r.args[0])),t)),{}))))}(t).pipe(startWith({})):of({})).pipe(map((e=>(Be=e,e))))))}function indexToId(e,t){return memo(e,(e=>t.query.indices?t.query.indices.accounts(e).pipe(map((e=>e.unwrapOr([])[0]))):of(void 0)))}function retrieveNick(e,t){return(t&&e.query.nicks?.nameOf?e.query.nicks.nameOf(t):of(void 0)).pipe(map((t=>t?.isSome?(0,Re.F)(t.unwrap()[0]).substring(0,e.consts.nicks.maxLength.toNumber()):void 0)))}function info(e,t){return memo(e,(e=>t.derive.accounts.idAndIndex(e).pipe(switchMap((([e,r])=>combineLatest([of({accountId:e,accountIndex:r}),t.derive.accounts.identity(e),retrieveNick(t,e)]))),map((([{accountId:e,accountIndex:t},r,n])=>({accountId:e,accountIndex:t,identity:r,nickname:n}))))))}function withSection(e,t){return(r,n)=>memo(r,t(function getInstance(e,t){const r=e.registry.getModuleInstances(e.runtimeVersion.specName,t),n=r?.length?r[0]:t;return e.query[n]}(n,e),n,r))}function callMethod(e,t){return r=>withSection(r,(r=>()=>(0,Oe.T)(r?.[e])?r[e]():of(t)))}const Le=callMethod("members",[]);function _proposalsFrom(e,t,r){return((0,Oe.T)(t?.proposals)&&r.length?combineLatest([of(r),t.proposalOf.multi(r).pipe(catchError((()=>of(r.map((()=>null)))))),t.voting.multi(r)]):of([[],[],[]])).pipe(map((t=>function parse(e,[t,r,n]){return r.map(((r,i)=>({hash:e.registry.createType("Hash",t[i]),proposal:r&&r.isSome?r.unwrap():null,votes:n[i].unwrapOr(null)})))}(e,t))))}function hasProposals(e){return withSection(e,(e=>()=>of((0,Oe.T)(e?.proposals))))}function proposals(e){return withSection(e,((t,r)=>()=>r.derive[e].proposalHashes().pipe(switchMap((e=>_proposalsFrom(r,t,e))))))}function proposal(e){return withSection(e,((e,t)=>r=>(0,Oe.T)(e?.proposals)?firstObservable(_proposalsFrom(t,e,[r])):of(null)))}const Ne=callMethod("proposalCount",null),Fe=callMethod("proposals",[]);function prime(e){return withSection(e,(e=>()=>(0,Oe.T)(e?.prime)?e.prime().pipe(map((e=>e.unwrapOr(null)))):of(null)))}const je=Le("allianceMotion"),De=hasProposals("allianceMotion"),Ve=proposal("allianceMotion"),$e=Ne("allianceMotion"),ze=Fe("allianceMotion"),Ue=proposals("allianceMotion"),We=prime("allianceMotion");var Ke=r(587152);function getQueryInterface(e){return e.query.voterList||e.query.voterBagsList||e.query.bagsList}function _getIds(e,t){const r=getQueryInterface(t);return memo(e,(e=>{const t=e.map((e=>(0,Ke.A)(e)));return t.length?r.listBags.multi(t).pipe(map((e=>function orderBags(e,t){const r=e.map(((e,r)=>({bag:t[r].unwrapOr(null),id:e,key:e.toString()}))).sort(((e,t)=>t.id.cmp(e.id))),n=r.length-1;return r.map(((e,t)=>(0,x.b)(e,{bagLower:t===n?ee.Yz:r[t+1].id,bagUpper:e.id,index:t})))}(t,e)))):of([])}))}function get_all(e,t){const r=getQueryInterface(t);return memo(e,(()=>r.listBags.keys().pipe(switchMap((e=>t.derive.bagsList._getIds(e.map((({args:[e]})=>e))))),map((e=>e.filter((({bag:e})=>e)))))))}function get(e,t){return memo(e,(e=>t.derive.bagsList._getIds([(0,Ke.A)(e)]).pipe(map((e=>e[0])))))}function expand(e,t){return memo(e,(e=>t.derive.bagsList.listNodes(e.bag).pipe(map((t=>(0,x.b)({nodes:t},e))))))}function getExpanded(e,t){return memo(e,(e=>t.derive.bagsList.get(e).pipe(switchMap((e=>t.derive.bagsList.expand(e))))))}var Ye=r(392694);function listNodes(e,t){return memo(e,(e=>e&&e.head.isSome?function traverseLinks(e,t){const r=new ae(t),n=getQueryInterface(e);return r.pipe(switchMap((e=>n.listNodes(e))),tap((e=>{(0,Ye.d)((()=>{e.isSome&&e.value.next.isSome?r.next(e.unwrap().next.unwrap()):r.complete()}))})),toArray(),map((e=>e.map((e=>e.unwrap())))))}(t,e.head.unwrap()):of([])))}var Qe=r(682823),Je=r(31865);const Ze="0x76657374696e6720";function calcShared(e,t,r,n){const{allLocked:i,lockedBalance:s,lockedBreakdown:a,vestingLocked:o}=function calcLocked(e,t,r){let n=e.registry.createType("Balance"),i=[],s=e.registry.createType("Balance"),a=!1;if(Array.isArray(r)){i=r.filter((({until:e})=>!e||t&&e.gt(t))),a=i.some((({amount:e})=>e&&e.isMax())),s=e.registry.createType("Balance",i.filter((({id:e})=>e.eq(Ze))).reduce(((e,{amount:t})=>e.iadd(t)),new Qe(0)));const o=i.filter((({amount:e})=>e&&!e.isMax()));o.length&&(n=e.registry.createType("Balance",(0,Je.N)(...o.map((({amount:e})=>e)))))}return{allLocked:a,lockedBalance:n,lockedBreakdown:i,vestingLocked:s}}(e,t,n);return(0,x.b)({},r,{availableBalance:e.registry.createType("Balance",i?0:(0,Je.N)(new Qe(0),r?.freeBalance?r.freeBalance.sub(s):new Qe(0))),lockedBalance:s,lockedBreakdown:a,vestingLocked:o})}function calcBalances(e,t){const[r,[n,i,s],a]=t,o=calcShared(e,a,r,i[0]);return(0,x.b)(o,function calcVesting(e,t,r){const n=r||[],i=!t.vestingLocked.isZero(),s=n.map((({locked:t,perBlock:r,startingBlock:n})=>e.gt(n)?(0,Je.J)(t,r.mul(e.sub(n))):ee.Yz)),a=s.reduce(((e,t)=>e.iadd(t)),new Qe(0)),o=n.reduce(((e,{locked:t})=>e.iadd(t)),new Qe(0));return{isVesting:i,vestedBalance:a,vestedClaimable:i?t.vestingLocked.sub(o.sub(a)):ee.Yz,vesting:n.map((({locked:e,perBlock:t,startingBlock:r},n)=>({endBlock:e.div(t).iadd(r),locked:e,perBlock:t,startingBlock:r,vested:s[n]}))).filter((({locked:e})=>!e.isZero())),vestingTotal:o}}(a,o,n),{accountId:r.accountId,accountNonce:r.accountNonce,additional:i.slice(1).map(((t,n)=>calcShared(e,a,r.additional[n],t))),namedReserves:s})}function queryOld(e,t){return combineLatest([e.query.balances.locks(t),e.query.balances.vesting(t)]).pipe(map((([t,r])=>{let n=null;if(r.isSome){const{offset:t,perBlock:i,startingBlock:s}=r.unwrap();n=e.registry.createType("VestingInfo",{locked:t,perBlock:i,startingBlock:s})}return[n?[n]:null,[t],[]]})))}const isNonNullable=e=>!!e;function createCalls(e){return[e.map((e=>!e)),e.filter(isNonNullable)]}function queryCurrent(e,t,r=["balances"]){const[n,i]=createCalls(r.map((t=>e.derive[t]?.customLocks||e.query[t]?.locks))),[s,a]=createCalls(r.map((t=>e.query[t]?.reserves)));return combineLatest([e.query.vesting?.vesting?e.query.vesting.vesting(t):of(e.registry.createType("Option<VestingInfo>")),i.length?combineLatest(i.map((e=>e(t)))):of([]),a.length?combineLatest(a.map((e=>e(t)))):of([])]).pipe(map((([t,r,i])=>{let a=-1,o=-1;const c=t.unwrapOr(null);return[c?Array.isArray(c)?c:[c]:null,n.map((t=>t?e.registry.createType("Vec<BalanceLock>"):r[++a])),s.map((t=>t?e.registry.createType("Vec<PalletBalancesReserveData>"):i[++o]))]})))}function all_all(e,t){const r=t.registry.getModuleInstances(t.runtimeVersion.specName,"balances");return memo(e,(e=>combineLatest([t.derive.balances.account(e),(0,Oe.T)(t.query.system?.account)||(0,Oe.T)(t.query.balances?.account)?queryCurrent(t,e,r):queryOld(t,e)]).pipe(switchMap((([e,r])=>combineLatest([of(e),of(r),t.derive.chain.bestNumber()]))),map((e=>calcBalances(t,e))))))}function zeroBalance(e){return e.registry.createType("Balance")}function getBalance(e,[t,r,n,i]){const s=e.registry.createType("Balance",t.toBn());return{freeBalance:t,frozenFee:n,frozenMisc:i,reservedBalance:r,votingBalance:s}}function queryBalancesFree(e,t){return combineLatest([e.query.balances.freeBalance(t),e.query.balances.reservedBalance(t),e.query.system.accountNonce(t)]).pipe(map((([t,r,n])=>[n,[[t,r,zeroBalance(e),zeroBalance(e)]]])))}function queryNonceOnly(e,t){const fill=t=>[t,[[zeroBalance(e),zeroBalance(e),zeroBalance(e),zeroBalance(e)]]];return(0,Oe.T)(e.query.system.account)?e.query.system.account(t).pipe(map((({nonce:e})=>fill(e)))):(0,Oe.T)(e.query.system.accountNonce)?e.query.system.accountNonce(t).pipe(map((e=>fill(e)))):of(fill(e.registry.createType("Index")))}function queryBalancesAccount(e,t,r=["balances"]){const n=r.map((t=>e.derive[t]?.customAccount||e.query[t]?.account)).filter((e=>(0,Oe.T)(e))),extract=(e,t)=>[e,t.map((({feeFrozen:e,free:t,miscFrozen:r,reserved:n})=>[t,n,e,r]))];return n.length?(0,Oe.T)(e.query.system.account)?combineLatest([e.query.system.account(t),...n.map((e=>e(t)))]).pipe(map((([{nonce:e},...t])=>extract(e,t)))):combineLatest([e.query.system.accountNonce(t),...n.map((e=>e(t)))]).pipe(map((([e,...t])=>extract(e,t)))):queryNonceOnly(e,t)}function querySystemAccount(e,t){return e.query.system.account(t).pipe(map((t=>{const r=t.nonce?t.data:t[1],n=t.nonce||t[0];if(!r||r.isEmpty)return[n,[[zeroBalance(e),zeroBalance(e),zeroBalance(e),zeroBalance(e)]]];const{feeFrozen:i,free:s,miscFrozen:a,reserved:o}=r;return[n,[[s,o,i,a]]]})))}function account(e,t){const r=t.registry.getModuleInstances(t.runtimeVersion.specName,"balances"),n=r&&"balances"!==r[0];return memo(e,(e=>t.derive.accounts.accountId(e).pipe(switchMap((e=>e?combineLatest([of(e),n?queryBalancesAccount(t,e,r):(0,Oe.T)(t.query.system?.account)?querySystemAccount(t,e):(0,Oe.T)(t.query.balances?.account)?queryBalancesAccount(t,e):(0,Oe.T)(t.query.balances?.freeBalance)?queryBalancesFree(t,e):queryNonceOnly(t,e)]):of([t.registry.createType("AccountId"),[t.registry.createType("Index"),[[zeroBalance(t),zeroBalance(t),zeroBalance(t),zeroBalance(t)]]]]))),map((e=>function account_calcBalances(e,[t,[r,[n,...i]]]){return(0,x.b)({accountId:t,accountNonce:r,additional:i.map((t=>getBalance(e,t)))},getBalance(e,n))}(t,e))))))}function votingBalances(e,t){return memo(e,(e=>e?.length?combineLatest(e.map((e=>t.derive.balances.account(e)))):of([])))}const Xe=all_all;function filterBountiesProposals(e,t){const r=e.tx.bounties?e.tx.bounties:e.tx.treasury,n=[r.approveBounty,r.closeBounty,r.proposeCurator,r.unassignCurator];return t.filter((e=>n.find((t=>e.proposal&&t.is(e.proposal)))))}function parseResult([e,t,r,n]){const i=[];return e.forEach(((e,s)=>{e.isSome&&i.push({bounty:e.unwrap(),description:t[s].unwrapOrDefault().toUtf8(),index:r[s],proposals:n.filter((e=>e.proposal&&r[s].eq(e.proposal.args[0])))})})),i}function bounties(e,t){const r=t.query.bounties||t.query.treasury;return memo(e,(()=>r.bounties?combineLatest([r.bountyCount(),t.query.council?t.query.council.proposalCount():of(0)]).pipe(switchMap((()=>combineLatest([r.bounties.keys(),t.derive.council?t.derive.council.proposals():of([])]))),switchMap((([e,n])=>{const i=e.map((({args:[e]})=>e));return combineLatest([r.bounties.multi(i),r.bountyDescriptions.multi(i),of(i),of(filterBountiesProposals(t,n))])})),map(parseResult)):of(parseResult([[],[],[],[]]))))}var Ge=r(270312);function unwrapBlockNumber(e){return(0,Ge.i)(e.number)?e.number.unwrap():e.number}function createBlockNumberDerive(e){return(t,r)=>memo(t,(()=>e(r).pipe(map(unwrapBlockNumber))))}function getAuthorDetails(e,t,r){return e.queryAt(t.parentHash.isEmpty?r||t.hash:t.parentHash).pipe(switchMap((e=>function getAuthorDetailsWithAt(e,t){const r=t.session?.validators?t.session.validators():of(null),{logs:[n]}=e.digest,i=n&&(n.isConsensus&&n.asConsensus[0].isNimbus&&n.asConsensus[1]||n.isPreRuntime&&n.asPreRuntime[0].isNimbus&&n.asPreRuntime[1]);if(i){if(t.authorMapping?.mappingWithDeposit)return combineLatest([of(e),r,t.authorMapping.mappingWithDeposit(i).pipe(map((e=>e.unwrapOr({account:null}).account)))]);if(t.parachainStaking?.selectedCandidates&&t.session?.nextKeys){const n=i.toHex();return combineLatest([of(e),r,t.parachainStaking.selectedCandidates().pipe(mergeMap((e=>combineLatest([of(e),t.session.nextKeys.multi(e).pipe(map((e=>e.findIndex((e=>e.unwrapOrDefault().nimbus.toHex()===n)))))]))),map((([e,t])=>-1===t?null:e[t])))])}}return combineLatest([of(e),r,of(null)])}(t,e))))}const et=createBlockNumberDerive((e=>e.rpc.chain.subscribeNewHeads())),tt=createBlockNumberDerive((e=>e.rpc.chain.subscribeFinalizedHeads()));function bestNumberLag(e,t){return memo(e,(()=>combineLatest([t.derive.chain.bestNumber(),t.derive.chain.bestNumberFinalized()]).pipe(map((([e,r])=>t.registry.createType("BlockNumber",e.sub(r)))))))}function extractAuthor(e,t){const[r]=e.logs.filter((e=>e.isConsensus)),[n]=e.logs.filter((e=>e.isPreRuntime)),[i]=e.logs.filter((e=>e.isSeal));let s;try{if(n){const[e,r]=n.asPreRuntime;s=e.extractAuthor(r,t)}if(!s&&r){const[e,n]=r.asConsensus;s=e.extractAuthor(n,t)}if(!s&&i){const[e,r]=i.asSeal;s=e.extractAuthor(r,t)}}catch{}return s}function getBlock(e,t){return memo(e,(e=>combineLatest([t.rpc.chain.getBlock(e),t.queryAt(e)]).pipe(switchMap((([r,n])=>combineLatest([of(r),n.system.events(),getAuthorDetails(t,r.block.header,e)]))),map((([e,t,[,r,n]])=>function createSignedBlockExtended(e,t,r,n,i){const s=e.createClass("SignedBlock");return new class Implementation extends s{__internal__author;__internal__events;__internal__extrinsics;constructor(e,t,r,n,i){super(e,t),this.__internal__author=i||extractAuthor(this.block.header.digest,n||[]),this.__internal__events=r||[],this.__internal__extrinsics=function mapExtrinsics(e,t){return e.map(((e,r)=>{let n,i;const s=t.filter((({phase:e})=>e.isApplyExtrinsic&&e.asApplyExtrinsic.eq(r))).map((({event:e})=>("system"===e.section&&("ExtrinsicSuccess"===e.method?i=e.data[0]:"ExtrinsicFailed"===e.method&&(n=e.data[0],i=e.data[1])),e)));return{dispatchError:n,dispatchInfo:i,events:s,extrinsic:e}}))}(this.block.extrinsics,this.__internal__events),this.createdAtHash=t?.createdAtHash}get author(){return this.__internal__author}get events(){return this.__internal__events}get extrinsics(){return this.__internal__extrinsics}}(e,t,r,n,i)}(t.registry,e,t,r,n))))))}function getBlockByNumber(e,t){return memo(e,(e=>t.rpc.chain.getBlockHash(e).pipe(switchMap((e=>t.derive.chain.getBlock(e))))))}function createHeaderExtended(e,t,r,n){const i=e.createClass("Header");return new class Implementation extends i{__internal__author;constructor(e,t,r,n){super(e,t),this.__internal__author=n||extractAuthor(this.digest,r||[]),this.createdAtHash=t?.createdAtHash}get author(){return this.__internal__author}}(e,t,r,n)}function getHeader(e,t){return memo(e,(e=>t.rpc.chain.getHeader(e).pipe(switchMap((r=>getAuthorDetails(t,r,e))),map((([e,t,r])=>createHeaderExtended((t||e).registry,e,t,r))))))}function subscribeFinalizedBlocks(e,t){return memo(e,(()=>t.derive.chain.subscribeFinalizedHeads().pipe(switchMap((e=>t.derive.chain.getBlock(e.createdAtHash||e.hash))))))}function _getHeaderRange(e,t){return memo(e,((e,r,n=[])=>t.rpc.chain.getHeader(e).pipe(switchMap((e=>e.parentHash.eq(r)?of([e,...n]):t.derive.chain._getHeaderRange(e.parentHash,r,[e,...n]))))))}function subscribeFinalizedHeads(e,t){return memo(e,(()=>{let e=null;return t.rpc.chain.subscribeFinalizedHeads().pipe(switchMap((r=>{const n=e,i=r.parentHash;return e=r.createdAtHash=r.hash,null===n||i.eq(n)?of(r):t.derive.chain._getHeaderRange(i,n,[r]).pipe(switchMap((e=>from(e))))})))}))}function subscribeNewBlocks(e,t){return memo(e,(()=>t.derive.chain.subscribeNewHeads().pipe(switchMap((e=>t.derive.chain.getBlock(e.createdAtHash||e.hash))))))}function subscribeNewHeads(e,t){return memo(e,(()=>t.rpc.chain.subscribeNewHeads().pipe(switchMap((e=>getAuthorDetails(t,e))),map((([e,t,r])=>(e.createdAtHash=e.hash,createHeaderExtended(e.registry,e,t,r)))))))}function fees(e,t){return memo(e,(()=>function queryConstants(e){return of([e.consts.contracts.callBaseFee||e.registry.createType("Balance"),e.consts.contracts.contractFee||e.registry.createType("Balance"),e.consts.contracts.creationFee||e.registry.createType("Balance"),e.consts.contracts.transactionBaseFee||e.registry.createType("Balance"),e.consts.contracts.transactionByteFee||e.registry.createType("Balance"),e.consts.contracts.transferFee||e.registry.createType("Balance"),e.consts.contracts.rentByteFee||e.registry.createType("Balance"),e.consts.contracts.rentDepositOffset||e.registry.createType("Balance"),e.consts.contracts.surchargeReward||e.registry.createType("Balance"),e.consts.contracts.tombstoneDeposit||e.registry.createType("Balance")])}(t).pipe(map((([e,t,r,n,i,s,a,o,c,u])=>({callBaseFee:e,contractFee:t,creationFee:r,rentByteFee:a,rentDepositOffset:o,surchargeReward:c,tombstoneDeposit:u,transactionBaseFee:n,transactionByteFee:i,transferFee:s}))))))}function isVoter(e){return!Array.isArray(e)}function retrieveStakeOf(e){return e.stakeOf.entries().pipe(map((e=>e.map((([{args:[e]},t])=>[e,t])))))}function retrieveVoteOf(e){return e.votesOf.entries().pipe(map((e=>e.map((([{args:[e]},t])=>[e,t])))))}function votes(e,t){const r=t.query.elections||t.query.phragmenElection||t.query.electionsPhragmen;return memo(e,(()=>r?r.stakeOf?function retrievePrev(e,t){return combineLatest([retrieveStakeOf(t),retrieveVoteOf(t)]).pipe(map((([t,r])=>{const n=[];return r.forEach((([t,r])=>{n.push([t,{stake:e.registry.createType("Balance"),votes:r}])})),t.forEach((([e,t])=>{const r=n.find((([t])=>t.eq(e)));r?r[1].stake=t:n.push([e,{stake:t,votes:[]}])})),n})))}(t,r):function retrieveCurrent(e){return e.voting.entries().pipe(map((e=>e.map((([{args:[e]},t])=>[e,isVoter(t)?{stake:t.stake,votes:t.votes}:{stake:t[0],votes:t[1]}])))))}(r):of([])))}function votesOf(e,t){return memo(e,(e=>t.derive.council.votes().pipe(map((r=>(r.find((([t])=>t.eq(e)))||[null,{stake:t.registry.createType("Balance"),votes:[]}])[1])))))}const rt=Le("council"),nt=hasProposals("council"),it=proposal("council"),st=Ne("council"),at=Fe("council"),ot=proposals("council"),ct=prime("council");var ut=r(311099),lt=r(217154);function childKey(e,t){return memo(e,(e=>t.query.crowdloan.funds(e).pipe(map((e=>e.isSome?function createChildKey(e){return(0,A.X)((0,ut.z)(":child_storage:default:",(0,lt.q)((0,ut.z)("crowdloan",(e.fundIndex||e.trieIndex).toU8a()))))}(e.unwrap()):null)))))}var pt=new U((function(e){return e.complete()}));var dt=r(408224);function extractContributed(e,t){return t.filter((({event:{data:[,t],method:r,section:n}})=>"crowdloan"===n&&["Contributed","Withdrew"].includes(r)&&t.eq(e))).reduce(((e,{event:{data:[t],method:r}})=>("Contributed"===r?e.added.push(t.toHex()):e.removed.push(t.toHex()),e)),{added:[],blockHash:t.createdAtHash?.toHex()||"-",removed:[]})}const ht=1e3;function _getUpdates(e,t){let r=[],n=[];return e.query.system.events().pipe(switchMap((e=>{const i=extractContributed(t,e);return i.added.length||i.removed.length?(r=r.concat(...i.added),n=n.concat(...i.removed),of({added:r,addedDelta:i.added,blockHash:e.createdAtHash?.toHex()||"-",removed:n,removedDelta:i.removed})):pt})),startWith({added:r,addedDelta:[],blockHash:"-",removed:n,removedDelta:[]}))}function _getAll(e,t,r){return function _eventTriggerAll(e,t){return e.query.system.events().pipe(switchMap((e=>e.filter((({event:{data:[e],method:r,section:n}})=>"crowdloan"===n&&["AllRefunded","Dissolved","PartiallyRefunded"].includes(r)&&e.eq(t))).length?of(e.createdAtHash?.toHex()||"-"):pt)),startWith("-"))}(e,t).pipe(switchMap((()=>(0,Oe.T)(e.rpc.childstate.getKeysPaged)?function _getKeysPaged(e,t){const r=new ae(void 0);return r.pipe(switchMap((r=>e.rpc.childstate.getKeysPaged(t,"0x",ht,r))),tap((e=>{(0,Ye.d)((()=>{e.length===ht?r.next(e[ht-1].toHex()):r.complete()}))})),toArray(),map((e=>(0,dt.a)(e))))}(e,r):e.rpc.childstate.getKeys(r,"0x"))),map((e=>e.map((e=>e.toHex())))))}function contributions(e,t){return memo(e,(e=>t.derive.crowdloan.childKey(e).pipe(switchMap((r=>r?function _contributions(e,t,r){return combineLatest([_getAll(e,t,r),_getUpdates(e,t)]).pipe(map((([e,{added:t,blockHash:r,removed:n}])=>{const i={};return e.forEach((e=>{i[e]=!0})),t.forEach((e=>{i[e]=!0})),n.forEach((e=>{delete i[e]})),{blockHash:r,contributorsHex:Object.keys(i)}})))}(t,e,r):of({blockHash:"-",contributorsHex:[]}))))))}function _getValues(e,t,r){return combineLatest(r.map((r=>e.rpc.childstate.getStorage(t,r)))).pipe(map((t=>t.map((t=>e.registry.createType("Option<StorageData>",t))).map((t=>t.isSome?e.registry.createType("Balance",t.unwrap()):e.registry.createType("Balance"))).reduce(((e,t,n)=>(0,x.b)(e,{[r[n]]:t})),{}))))}function _watchOwnChanges(e,t,r,n){return e.query.system.events().pipe(switchMap((i=>{const s=extractContributed(t,i),a=n.filter((e=>s.added.includes(e)||s.removed.includes(e)));return a.length?_getValues(e,r,a):pt})),startWith({}))}function ownContributions(e,t){return memo(e,((e,r)=>t.derive.crowdloan.childKey(e).pipe(switchMap((n=>n&&r.length?function ownContributions_contributions(e,t,r,n){return combineLatest([_getValues(e,r,n),_watchOwnChanges(e,t,r,n)]).pipe(map((([e,t])=>(0,x.b)({},e,t))))}(t,e,n,r):of({}))))))}var _t=r(500473),mt=r(878514),ft=r(589647);function compareRationals(e,t,r,n){for(;;){const i=e.div(t),s=r.div(n);if(i.lt(s))return!0;if(s.lt(i))return!1;const a=e.mod(t),o=r.mod(n);if(o.isZero())return!1;if(a.isZero())return!0;e=n,r=t,t=o,n=a}}function calcPassing(e,t,r){return e.isSimpleMajority?r.votedAye.gt(r.votedNay):function calcPassingOther(e,t,{votedAye:r,votedNay:n,votedTotal:i}){const s=(0,ft.t)(i);return!s.isZero()&&(e.isSuperMajorityApprove?compareRationals(n,s,r,t):compareRationals(n,t,r,s))}(e,t,r)}function calcVotes(e,t,r){const n=function isCurrentStatus(e){return!!e.tally}(t.status)?function calcVotesCurrent(e,t){const r=[],n=[];return t.forEach((e=>{e.vote.isAye?r.push(e):n.push(e)})),{allAye:r,allNay:n,voteCount:r.length+n.length,voteCountAye:r.length,voteCountNay:n.length,votedAye:e.ayes,votedNay:e.nays,votedTotal:e.turnout}}(t.status.tally,r):function calcVotesPrev(e){return e.reduce(((e,t)=>{const{balance:r,vote:n}=t,i=0===n.conviction.index,s=r.muln(i?1:n.conviction.index).divn(i?10:1);return n.isAye?(e.allAye.push(t),e.voteCountAye++,e.votedAye.iadd(s)):(e.allNay.push(t),e.voteCountNay++,e.votedNay.iadd(s)),e.voteCount++,e.votedTotal.iadd(s),e}),{allAye:[],allNay:[],voteCount:0,voteCountAye:0,voteCountNay:0,votedAye:new Qe(0),votedNay:new Qe(0),votedTotal:new Qe(0)})}(r);return(0,x.b)({},n,{isPassing:calcPassing(t.status.threshold,e,n),votes:r})}function getImageHashBounded(e){return e.isLegacy?e.asLegacy.hash_.toHex():e.isLookup?e.asLookup.hash_.toHex():e.isInline?e.asInline.hash.toHex():(0,E.K)(e)?(0,Pe.qv)(e)?e:(0,mt.i)(e):(0,he.b)(e)?(0,A.X)(e):e.toHex()}function getImageHash(e){return getImageHashBounded(e.proposal||e.proposalHash)}const yt=(0,mt.i)("democrac");function queryScheduler(e){return function schedulerEntries(e){return e.derive.democracy.referendumsFinished().pipe(switchMap((()=>e.query.scheduler.agenda.keys())),switchMap((t=>{const r=t.map((({args:[e]})=>e));return r.length?combineLatest([of(r),e.query.scheduler.agenda.multi(r).pipe(catchError((()=>of(r.map((()=>[]))))))]):of([[],[]])})))}(e).pipe(switchMap((([t,r])=>{const n=[];return t.forEach(((t,i)=>{(r[i]||[]).filter((e=>e.isSome)).forEach((r=>{const i=r.unwrap();if(i.maybeId.isSome){const r=i.maybeId.unwrap().toHex();if(r.startsWith(yt)){const s=function isMaybeHashedOrBounded(e){return e instanceof _t.g}(i.call)?function isBounded(e){return e.isInline||e.isLegacy||e.isLookup}(i.call)?getImageHashBounded(i.call):i.call.isHash?i.call.asHash.toHex():i.call.asValue.args[0].toHex():i.call.args[0].toHex();n.push({at:t,imageHash:s,index:e.registry.createType("(u64, ReferendumIndex)",r)[1]})}}}))})),combineLatest([of(n),n.length?e.derive.democracy.preimages(n.map((({imageHash:e})=>e))):of([])])})),map((([e,t])=>e.map(((e,r)=>(0,x.b)({image:t[r]},e))))))}function dispatchQueue(e,t){return memo(e,(()=>(0,Oe.T)(t.query.scheduler?.agenda)?queryScheduler(t):t.query.democracy.dispatchQueue?function queryQueue(e){return e.query.democracy.dispatchQueue().pipe(switchMap((t=>combineLatest([of(t),e.derive.democracy.preimages(t.map((([,e])=>e)))]))),map((([e,t])=>e.map((([e,r,n],i)=>({at:e,image:t[i],imageHash:getImageHashBounded(r),index:n}))))))}(t):of([])))}const gt=[0,1,2,4,8,16,32];function parseLock(e,[t,r],n){const{balance:i,vote:s}=r.asStandard,[a,o]=n.isFinished?function parseEnd(e,t,{approved:r,end:n}){return[n,r.isTrue&&t.isAye||r.isFalse&&t.isNay?n.add((e.consts.democracy.voteLockingPeriod||e.consts.democracy.enactmentPeriod).muln(gt[t.conviction.index])):ee.Yz]}(e,s,n.asFinished):[ee.Yz,ee.Yz];return{balance:i,isDelegated:!1,isFinished:n.isFinished,referendumEnd:a,referendumId:t,unlockAt:o,vote:s}}function locks(e,t){return memo(e,(e=>t.query.democracy.votingOf?t.query.democracy.votingOf(e).pipe(switchMap((e=>e.isDirect?function directLocks(e,{votes:t}){return t.length?e.query.democracy.referendumInfoOf.multi(t.map((([e])=>e))).pipe(map((r=>t.map(((e,t)=>[e,r[t].unwrapOr(null)])).filter((e=>!!e[1]&&(0,G.b)(e[1].end)&&e[0][1].isStandard)).map((([t,r])=>parseLock(e,t,r)))))):of([])}(t,e.asDirect):e.isDelegating?function delegateLocks(e,{balance:t,conviction:r,target:n}){return e.derive.democracy.locks(n).pipe(map((n=>n.map((({isFinished:n,referendumEnd:i,referendumId:s,unlockAt:a,vote:o})=>({balance:t,isDelegated:!0,isFinished:n,referendumEnd:i,referendumId:s,unlockAt:a.isZero()?a:i.add((e.consts.democracy.voteLockingPeriod||e.consts.democracy.enactmentPeriod).muln(gt[r.index])),vote:e.registry.createType("Vote",{aye:o.isAye,conviction:r})}))))))}(t,e.asDelegating):of([])))):of([])))}function nextExternal(e,t){return memo(e,(()=>t.query.democracy?.nextExternal?t.query.democracy.nextExternal().pipe(switchMap((e=>function withImage(e,t){if(t.isNone)return of(null);const[r,n]=t.unwrap();return e.derive.democracy.preimage(r).pipe(map((e=>({image:e,imageHash:getImageHashBounded(r),threshold:n}))))}(t,e)))):of(null)))}function constructProposal(e,[t,r,n,i]){let s;try{s=e.registry.createType("Call",t.toU8a(!0))}catch(e){console.error(e)}return{at:i,balance:n,proposal:s,proposer:r}}function getDemocracyImages(e,t){const r=t.map((e=>getImageHashBounded(e)));return e.query.democracy.preimages.multi(r).pipe(map((t=>t.map((t=>function parseDemocracy(e,t){if(!t.isNone){if(function isDemocracyPreimage(e,t){return!!t&&!e.query.democracy.dispatchQueue}(e,t)){const r=t.unwrap();if(r.isMissing)return;const{data:n,deposit:i,provider:s,since:a}=r.asAvailable;return constructProposal(e,[n,s,i,a])}return constructProposal(e,t.unwrap())}}(e,t))))))}function getImages(e,t){const r=t.map((e=>getImageHashBounded(e))),n=e.registry.lookup.getTypeDef(e.query.preimage.preimageFor.creator.meta.type.asMap.key).type;return e.query.preimage.statusFor.multi(r).pipe(switchMap((t=>{const i=t.map((e=>e.unwrapOr(null))),s=i.map(((e,t)=>e?"H256"===n?r[t]:e.isRequested?[r[t],e.asRequested.len.unwrapOr(0)]:[r[t],e.asUnrequested.len]:null)).filter((e=>!!e));return e.query.preimage.preimageFor.multi(s).pipe(map((t=>{let n=-1;return i.map(((e,i)=>e?[r[i],e,t[++n].unwrapOr(null)]:[r[i],null,null])).map((t=>function parseImage(e,[t,r,n]){if(!r)return;const[i,s]=r.isUnrequested?function getUnrequestedTicket(e){return e.ticket||e.deposit}(r.asUnrequested):function getRequestedTicket(e){return(e.maybeTicket||e.deposit).unwrapOrDefault()}(r.asRequested);let a;if(n)try{a=e.registry.createType("Call",n.toU8a(!0))}catch(e){console.error(e)}return{at:ee.Yz,balance:s,proposal:a,proposalHash:t,proposer:i}}(e,t)))})))})))}function preimages(e,t){return memo(e,(e=>e.length?(0,Oe.T)(t.query.democracy.preimages)?getDemocracyImages(t,e):(0,Oe.T)(t.query.preimage.preimageFor)?getImages(t,e):of([]):of([])))}const bt=firstMemo(((e,t)=>e.derive.democracy.preimages([t])));function proposals_parse([e,t,r]){return e.filter((([,,e],t)=>!!r[t]?.isSome&&!e.isEmpty)).map((([e,n,i],s)=>{const a=r[s].unwrap();return(0,x.b)({image:t[s],imageHash:getImageHashBounded(n),index:e,proposer:i},function isNewDepositors(e){return(0,Oe.T)(e[1].mul)}(a)?{balance:a[1],seconds:a[0]}:{balance:a[0],seconds:a[1]})}))}function proposals_proposals(e,t){return memo(e,(()=>(0,Oe.T)(t.query.democracy?.publicProps)?t.query.democracy.publicProps().pipe(switchMap((e=>e.length?combineLatest([of(e),t.derive.democracy.preimages(e.map((([,e])=>e))),t.query.democracy.depositOf.multi(e.map((([e])=>e)))]):of([[],[],[]]))),map(proposals_parse)):of([])))}function referendumIds(e,t){return memo(e,(()=>t.query.democracy?.lowestUnbaked?t.queryMulti([t.query.democracy.lowestUnbaked,t.query.democracy.referendumCount]).pipe(map((([e,t])=>t.gt(e)?[...Array(t.sub(e).toNumber())].map(((t,r)=>e.addn(r))):[]))):of([])))}function referendums(e,t){return memo(e,(()=>t.derive.democracy.referendumsActive().pipe(switchMap((e=>e.length?combineLatest([of(e),t.derive.democracy._referendumsVotes(e)]):of([[],[]]))),map((([e,t])=>e.map(((e,r)=>(0,x.b)({},e,t[r]))))))))}function referendumsActive(e,t){return memo(e,(()=>t.derive.democracy.referendumIds().pipe(switchMap((e=>e.length?t.derive.democracy.referendumsInfo(e):of([]))))))}function referendumsFinished(e,t){return memo(e,(()=>t.derive.democracy.referendumIds().pipe(switchMap((e=>t.query.democracy.referendumInfoOf.multi(e))),map((e=>e.map((e=>e.unwrapOr(null))).filter((e=>!!e&&e.isFinished)).map((e=>e.asFinished)))))))}function votesPrev(e,t){return e.query.democracy.votersFor(t).pipe(switchMap((r=>combineLatest([of(r),r.length?e.query.democracy.voteOf.multi(r.map((e=>[t,e]))):of([]),e.derive.balances.votingBalances(r)]))),map((([t,r,n])=>t.map(((t,i)=>({accountId:t,balance:n[i].votingBalance||e.registry.createType("Balance"),isDelegating:!1,vote:r[i]||e.registry.createType("Vote")}))))))}function votesCurr(e,t){return e.query.democracy.votingOf.entries().pipe(map((r=>{const n=r.map((([{args:[e]},t])=>[e,t])),i=function extractVotes(e,t){return e.filter((([,e])=>e.isDirect)).map((([e,r])=>[e,r.asDirect.votes.filter((([e])=>e.eq(t)))])).filter((([,e])=>!!e.length)).reduce(((e,[t,r])=>r.reduce(((e,[,r])=>(r.isStandard&&e.push((0,x.b)({accountId:t,isDelegating:!1},r.asStandard)),e)),e)),[])}(n,t),s=n.filter((([,e])=>e.isDelegating)).map((([e,t])=>[e,t.asDelegating]));return s.forEach((([t,{balance:r,conviction:n,target:a}])=>{const o=s.find((([e])=>e.eq(a))),c=i.find((({accountId:e})=>e.eq(o?o[0]:a)));c&&i.push({accountId:t,balance:r,isDelegating:!0,vote:e.registry.createType("Vote",{aye:c.vote.isAye,conviction:n})})})),i})))}function _referendumVotes(e,t){return memo(e,(e=>combineLatest([t.derive.democracy.sqrtElectorate(),(0,Oe.T)(t.query.democracy.votingOf)?votesCurr(t,e.index):votesPrev(t,e.index)]).pipe(map((([t,r])=>calcVotes(t,e,r))))))}function _referendumsVotes(e,t){return memo(e,(e=>e.length?combineLatest(e.map((e=>t.derive.democracy._referendumVotes(e)))):of([])))}function _referendumInfo(e,t){return memo(e,((e,r)=>{const n=function getStatus(e){if(e.isNone)return null;const t=e.unwrap();return function isOldInfo(e){return!!e.proposalHash}(t)?t:t.isOngoing?t.asOngoing:null}(r);return n?t.derive.democracy.preimage(n.proposal||n.proposalHash).pipe(map((r=>({image:r,imageHash:getImageHash(n),index:t.registry.createType("ReferendumIndex",e),status:n})))):of(null)}))}function referendumsInfo(e,t){return memo(e,(e=>e.length?t.query.democracy.referendumInfoOf.multi(e).pipe(switchMap((r=>combineLatest(e.map(((e,n)=>t.derive.democracy._referendumInfo(e,r[n])))))),map((e=>e.filter((e=>!!e))))):of([])))}function sqrtElectorate(e,t){return memo(e,(()=>t.query.balances.totalIssuance().pipe(map(ft.t))))}function getAccountTuple(e){return function isSeatHolder(e){return!Array.isArray(e)}(e)?[e.who,e.stake]:e}function getCandidate(e){return function isCandidateTuple(e){return Array.isArray(e)}(e)?e[0]:e}function sortAccounts([,e],[,t]){return t.cmp(e)}function info_info(e,t){return memo(e,(()=>{const[e,r]=function getModules(e){const[t]=e.registry.getModuleInstances(e.runtimeVersion.specName,"council")||["council"],r=e.query.phragmenElection?"phragmenElection":e.query.electionsPhragmen?"electionsPhragmen":e.query.elections?"elections":null;return[e.query[t]?t:"council",r]}(t);return(r?function queryAll(e,t,r){return e.queryMulti([e.query[t].members,e.query[r].candidates,e.query[r].members,e.query[r].runnersUp])}(t,e,r):function queryCouncil(e,t){return combineLatest([e.query[t].members(),of([]),of([]),of([])])}(t,e)).pipe(map((([e,n,i,s])=>(0,x.b)({},function getConstants(e,t){return t?{candidacyBond:e.consts[t].candidacyBond,desiredRunnersUp:e.consts[t].desiredRunnersUp,desiredSeats:e.consts[t].desiredMembers,termDuration:e.consts[t].termDuration,votingBond:e.consts[t].votingBond,votingBondBase:e.consts[t].votingBondBase,votingBondFactor:e.consts[t].votingBondFactor}:{}}(t,r),{candidateCount:t.registry.createType("u32",n.length),candidates:n.map(getCandidate),members:i.length?i.map(getAccountTuple).sort(sortAccounts):e.map((e=>[e,t.registry.createType("Balance")])),runnersUp:s.map(getAccountTuple).sort(sortAccounts)}))))}))}function mapResult([e,t,r,n]){return t.forEach(((t,i)=>{const s=t.toString(),a=n[i],o=!r[i].isEmpty,c=e[s];c&&c.hasMessage===o&&c.blockCount.eq(a)||(e[s]={blockCount:a,hasMessage:o,isOnline:o||a.gt(ee.Yz)})})),e}function receivedHeartbeats(e,t){return memo(e,(()=>t.query.imOnline?.receivedHeartbeats?t.derive.staking.overview().pipe(switchMap((({currentIndex:e,validators:r})=>combineLatest([of({}),of(r),t.query.imOnline.receivedHeartbeats.multi(r.map(((t,r)=>[e,r]))),t.query.imOnline.authoredBlocks.multi(r.map((t=>[e,t])))]))),map(mapResult)):of({})))}const vt=Le("membership"),wt=hasProposals("membership"),St=proposal("membership"),kt=Ne("membership"),xt=Fe("membership"),Et=proposals("membership"),At=prime("membership");function didUpdateToBool(e,t){return!!e.isSome&&e.unwrap().some((e=>e.eq(t)))}function parseActive(e,t){const r=t.find((([t])=>t===e));if(r&&r[1].isSome){const[e,t]=r[1].unwrap();return(0,x.b)({collatorId:e},t.isWithRetries?{isRetriable:!0,retries:t.asWithRetries.toNumber()}:{isRetriable:!1,retries:0})}return null}function parseCollators(e,t){return t.map((t=>{const r=t.find((([t])=>t===e));return r?r[1]:null}))}function parachains_info_info(e,t){return memo(e,(e=>t.query.registrar&&t.query.parachains?t.queryMulti([t.query.registrar.active,t.query.registrar.retryQueue,t.query.registrar.selectedThreads,t.query.parachains.didUpdate,[t.query.registrar.paras,e],[t.query.registrar.pendingSwap,e],[t.query.parachains.heads,e],[t.query.parachains.relayDispatchQueue,e]]).pipe(map((r=>function info_parse(e,[t,r,n,i,s,a,o,c]){return s.isNone?null:{active:parseActive(e,t),didUpdate:didUpdateToBool(i,e),heads:o,id:e,info:(0,x.b)({id:e},s.unwrap()),pendingSwapId:a.unwrapOr(null),relayDispatchQueue:c,retryCollators:parseCollators(e,r),selectedCollators:parseCollators(e,n)}}(t.registry.createType("ParaId",e),r)))):of(null)))}function overview_parse([e,t,r,n,i]){return e.map(((e,s)=>({didUpdate:didUpdateToBool(t,e),id:e,info:(0,x.b)({id:e},n[s].unwrapOr(null)),pendingSwapId:i[s].unwrapOr(null),relayDispatchQueueSize:r[s][0].toNumber()})))}function overview(e,t){return memo(e,(()=>t.query.registrar?.parachains&&t.query.parachains?t.query.registrar.parachains().pipe(switchMap((e=>combineLatest([of(e),t.query.parachains.didUpdate(),t.query.parachains.relayDispatchQueueSize.multi(e),t.query.registrar.paras.multi(e),t.query.registrar.pendingSwap.multi(e)]))),map(overview_parse)):of([])))}function indexes_parse([e,t,r,n,i]){return{activeEra:t,activeEraStart:r,currentEra:n,currentIndex:e,validatorCount:i}}function indexes_indexes(e,t){return memo(e,(()=>t.query.session?t.query.staking?function queryStaking(e){return e.queryMulti([e.query.session.currentIndex,e.query.staking.activeEra,e.query.staking.currentEra,e.query.staking.validatorCount]).pipe(map((([e,t,r,n])=>{const{index:i,start:s}=t.unwrapOrDefault();return indexes_parse([e,i,s,r.unwrapOrDefault(),n])})))}(t):function querySession(e){return e.query.session.currentIndex().pipe(map((t=>indexes_parse([t,e.registry.createType("EraIndex"),e.registry.createType("Option<Moment>"),e.registry.createType("EraIndex"),e.registry.createType("u32")]))))}(t):function indexes_empty(e){return of(indexes_parse([e.registry.createType("SessionIndex",1),e.registry.createType("EraIndex"),e.registry.createType("Option<Moment>"),e.registry.createType("EraIndex"),e.registry.createType("u32")]))}(t)))}function session_info_info(e,t){return memo(e,(()=>t.derive.session.indexes().pipe(map((e=>{const r=t.consts?.babe?.epochDuration||t.registry.createType("u64",1),n=t.consts?.staking?.sessionsPerEra||t.registry.createType("SessionIndex",1);return(0,x.b)({eraLength:t.registry.createType("BlockNumber",n.mul(r)),isEpoch:!!t.query.babe,sessionLength:r,sessionsPerEra:n},e)})))))}function withProgressField(e){return(t,r)=>memo(t,(()=>r.derive.session.progress().pipe(map((t=>t[e])))))}function progress(e,t){return memo(e,(()=>t.query.babe?function queryBabe(e){return e.derive.session.info().pipe(switchMap((t=>combineLatest([of(t),e.query.staking?.erasStartSessionIndex?e.queryMulti([e.query.babe.currentSlot,e.query.babe.epochIndex,e.query.babe.genesisSlot,[e.query.staking.erasStartSessionIndex,t.activeEra]]):e.queryMulti([e.query.babe.currentSlot,e.query.babe.epochIndex,e.query.babe.genesisSlot])]))),map((([t,[r,n,i,s]])=>[t,[r,n,i,s&&s.isSome?s.unwrap():e.registry.createType("SessionIndex",1)]])))}(t).pipe(map((([e,r])=>function createDerive(e,t,[r,n,i,s]){const a=n.mul(t.sessionLength).iadd(i),o=r.sub(a),c=t.currentIndex.sub(s).imul(t.sessionLength).iadd(o);return(0,x.b)({eraProgress:e.registry.createType("BlockNumber",c),sessionProgress:e.registry.createType("BlockNumber",o)},t)}(t,e,r)))):function queryAura(e){return e.derive.session.info().pipe(map((t=>(0,x.b)({eraProgress:e.registry.createType("BlockNumber"),sessionProgress:e.registry.createType("BlockNumber")},t))))}(t)))}const Ct=withProgressField("eraLength"),qt=withProgressField("eraProgress"),It=withProgressField("sessionProgress");function candidates(e,t){return memo(e,(()=>t.query.society.suspendedCandidates&&t.query.society.candidates.creator.meta.type.isPlain?function getPrev(e){return e.query.society.candidates().pipe(switchMap((t=>combineLatest([of(t),e.query.society.suspendedCandidates.multi(t.map((({who:e})=>e)))]))),map((([e,t])=>e.map((({kind:e,value:r,who:n},i)=>({accountId:n,isSuspended:t[i].isSome,kind:e,value:r}))))))}(t):function getCurr(e){return e.query.society.candidates.entries().pipe(map((e=>e.filter((([,e])=>e.isSome)).map((([{args:[e]},t])=>[e,t.unwrap()])).map((([e,{bid:t,kind:r}])=>({accountId:e,isSuspended:!1,kind:r,value:t}))))))}(t)))}function society_info_info(e,t){return memo(e,(()=>combineLatest([t.query.society.bids(),t.query.society.defender?t.query.society.defender():of(void 0),t.query.society.founder(),t.query.society.head(),t.query.society.maxMembers?t.query.society.maxMembers():of(void 0),t.query.society.pot()]).pipe(map((([e,t,r,n,i,s])=>({bids:e,defender:t?.unwrapOr(void 0),founder:r.unwrapOr(void 0),hasDefender:t?.isSome&&n.isSome&&!n.eq(t)||!1,head:n.unwrapOr(void 0),maxMembers:i,pot:s}))))))}function member(e,t){return memo(e,(e=>t.derive.society._members([e]).pipe(map((([e])=>e)))))}function _members(e,t){return memo(e,(e=>t.query.society.members.creator.meta.type.isMap?function _membersCurr(e,t){return combineLatest([of(t),e.query.society.members.multi(t),e.query.society.payouts.multi(t),e.query.society.challengeRoundCount().pipe(switchMap((r=>e.query.society.defenderVotes.multi(t.map((e=>[r,e])))))),e.query.society.suspendedMembers.multi(t)]).pipe(map((([e,t,r,n,i])=>e.map(((e,s)=>t[s].isSome?{accountId:e,isDefenderVoter:n[s].isSome,isSuspended:i[s].isSome,member:t[s].unwrap(),payouts:r[s].payouts}:null)).filter((e=>!!e)).map((({accountId:e,isDefenderVoter:t,isSuspended:r,member:n,payouts:i})=>({accountId:e,isDefenderVoter:t,isSuspended:r,payouts:i,strikes:n.strikes,vouching:n.vouching.unwrapOr(void 0)}))))))}(t,e):function _membersPrev(e,t){return combineLatest([of(t),e.query.society.payouts.multi(t),e.query.society.strikes.multi(t),e.query.society.defenderVotes.multi(t),e.query.society.suspendedMembers.multi(t),e.query.society.vouching.multi(t)]).pipe(map((([e,t,r,n,i,s])=>e.map(((e,a)=>({accountId:e,isDefenderVoter:n[a].isSome,isSuspended:i[a].isTrue,payouts:t[a],strikes:r[a],vote:n[a].unwrapOr(void 0),vouching:s[a].unwrapOr(void 0)}))))))}(t,e)))}function members_members(e,t){return memo(e,(()=>t.query.society.members.creator.meta.type.isMap?t.query.society.members.keys().pipe(switchMap((e=>t.derive.society._members(e.map((({args:[e]})=>e)))))):t.query.society.members().pipe(switchMap((e=>t.derive.society._members(e))))))}const Mt={withDestination:!0,withLedger:!0,withNominations:!0,withPrefs:!0};function calculateUnlocking(e,t,r){const n=Object.entries(function groupByEra(e){return e.reduce(((e,{era:t,value:r})=>{const n=t.toString();return e[n]=(e[n]||ee.Yz).add(r.unwrap()),e}),{})}((t?.unlocking||[]).filter((({era:e})=>e.unwrap().gt(r.activeEra))))).map((([t,n])=>({remainingEras:new Qe(t).isub(r.activeEra),value:e.registry.createType("Balance",n)})));return n.length?n:void 0}function redeemableSum(e,t,r){return e.registry.createType("Balance",(t?.unlocking||[]).reduce(((e,{era:t,value:n})=>t.unwrap().gt(r.currentEra)?e:e.iadd(n.unwrap())),new Qe(0)))}function accounts(e,t){return memo(e,((e,r=Mt)=>t.derive.session.info().pipe(switchMap((n=>combineLatest([t.derive.staking.keysMulti(e),t.derive.staking.queryMulti(e,r)]).pipe(map((([e,r])=>r.map(((r,i)=>function account_parseResult(e,t,r,n){return(0,x.b)({},r,n,{redeemable:redeemableSum(e,n.stakingLedger,t),unlocking:calculateUnlocking(e,n.stakingLedger,t)})}(t,n,e[i],r)))))))))))}const Ot=firstMemo(((e,t,r)=>e.derive.staking.accounts([t],r)));function currentPoints(e,t){return memo(e,(()=>t.derive.session.indexes().pipe(switchMap((({activeEra:e})=>t.query.staking.erasRewardPoints(e))))))}const Rt={withController:!0,withExposure:!0,withPrefs:!0};function electedInfo(e,t){return memo(e,((e=Rt,r=0)=>t.derive.staking.validators().pipe(switchMap((({nextElected:n,validators:i})=>t.derive.staking.queryMulti(function combineAccounts(e,t){return(0,dt.a)([e,t.filter((t=>!e.find((e=>e.eq(t)))))])}(n,i),e,r).pipe(map((e=>({info:e,nextElected:n,validators:i})))))))))}new Map;const Pt={del:()=>{},forEach:()=>{},get:()=>{},set:(e,t)=>t},Tt=6048e5;let Ht;function getEraCache(e,t,r){const n=`${e}-${t.toString()}`;return[n,r?void 0:Ht.get(n)]}function getEraMultiCache(e,t,r){return r?[]:t.map((t=>Ht.get(`${e}-${t.toString()}`))).filter((e=>!!e))}function setEraCache(e,t,r){return!t&&Ht.set(e,r),r}function setEraMultiCache(e,t,r){return!t&&r.forEach((t=>Ht.set(`${e}-${t.era.toString()}`,t))),r}function filterCachedEras(e,t,r){return e.map((e=>t.find((({era:t})=>e.eq(t)))||r.find((({era:t})=>e.eq(t))))).filter((e=>!!e))}!function setDeriveCache(e="",t){Ht=t?function wrapCache(e,t){return{del:r=>t.del(`${e}${r}`),forEach:t.forEach,get:r=>{const n=`${e}${r}`,i=t.get(n);if(i)return i.x=Date.now(),t.set(n,i),i.v},set:(r,n)=>{t.set(`${e}${r}`,{v:n,x:Date.now()})}}}(`derive:${e}:`,t):Pt,t&&function clearCache(e){const t=Date.now(),r=[];e.forEach(((e,{x:n})=>{t-n>Tt&&r.push(e)})),r.forEach((t=>e.del(t)))}(t)}();var Bt=r(587623);const Lt=14;function filterEras(e,t){return e.filter((e=>!t.some((({era:t})=>e.eq(t)))))}function erasHistoricApply(e){return(t,r)=>memo(t,((t=!1)=>r.derive.staking.erasHistoric(t).pipe(switchMap((n=>r.derive.staking[e](n,t))))))}function erasHistoricApplyAccount(e){return(t,r)=>memo(t,((t,n=!1,i)=>r.derive.staking.erasHistoric(n).pipe(switchMap((s=>r.derive.staking[e](t,s,n,i||0))))))}function singleEra(e){return(t,r)=>memo(t,(t=>r.derive.staking[e](t,!0)))}function combineEras(e){return(t,r)=>memo(t,((t,n)=>t.length?function chunkEras(e,t){const r=(0,Bt.R)(e,Lt);let n=0;const i=new ae(r[n]);return i.pipe(switchMap(t),tap((()=>{(0,Ye.d)((()=>{n++,n===r.length?i.complete():i.next(r[n])}))})),toArray(),map(dt.a))}(t,(t=>combineLatest(t.map((t=>r.derive.staking[e](t,n)))))):of([])))}const Nt="eraExposure";function _eraExposure(e,t){return memo(e,((e,r=!1)=>{const[n,i]=getEraCache(Nt,e,r);return i?of(i):t.query.staking.erasStakersPaged?t.query.staking.erasStakersPaged.entries(e).pipe(map((t=>setEraCache(n,r,function mapStakersPaged(e,t){const r={},n={};return t.forEach((([e,t])=>{if(t.isSome){const i=e.args[1].toString(),s=t.unwrap();n[i]=s,s.others.forEach((({who:e},t)=>{const n=e.toString();r[n]=r[n]||[],r[n].push({validatorId:i,validatorIndex:t})}))}})),{era:e,nominators:r,validators:n}}(e,t))))):t.query.staking.erasStakersClipped.entries(e).pipe(map((t=>setEraCache(n,r,function mapStakersClipped(e,t){const r={},n={};return t.forEach((([e,t])=>{const i=e.args[1].toString();n[i]=t,t.others.forEach((({who:e},t)=>{const n=e.toString();r[n]=r[n]||[],r[n].push({validatorId:i,validatorIndex:t})}))})),{era:e,nominators:r,validators:n}}(e,t)))))}))}const Ft=singleEra("_eraExposure"),jt=combineEras("_eraExposure"),Dt=erasHistoricApply("_erasExposure");function erasHistoric(e,t){return memo(e,(e=>combineLatest([t.query.staking.activeEra(),t.consts.staking.historyDepth?of(t.consts.staking.historyDepth):t.query.staking.historyDepth()]).pipe(map((([r,n])=>{const i=[],s=n.toNumber(),a=r.unwrapOrDefault().index;let o=a;for(;o.gte(ee.Yz)&&i.length<s;)o===a&&!0!==e||i.push(t.registry.createType("EraIndex",o)),o=o.sub(ee.Uu);return i.reverse()})))))}const Vt="eraPoints";function mapValidators({individual:e}){return[...e.entries()].filter((([,e])=>e.gt(ee.Yz))).reduce(((e,[t,r])=>(e[t.toString()]=r,e)),{})}function _erasPoints(e,t){return memo(e,((e,r)=>{if(!e.length)return of([]);const n=getEraMultiCache(Vt,e,r),i=filterEras(e,n);return i.length?t.query.staking.erasRewardPoints.multi(i).pipe(map((t=>filterCachedEras(e,n,setEraMultiCache(Vt,r,function mapPoints(e,t){return e.map(((e,r)=>({era:e,eraPoints:t[r].total,validators:mapValidators(t[r])})))}(i,t)))))):of(n)}))}const $t=erasHistoricApply("_erasPoints"),zt="eraPrefs";function _eraPrefs(e,t){return memo(e,((e,r)=>{const[n,i]=getEraCache(zt,e,r);return i?of(i):t.query.staking.erasValidatorPrefs.entries(e).pipe(map((t=>setEraCache(n,r,function mapPrefs(e,t){const r={};return t.forEach((([e,t])=>{r[e.args[1].toString()]=t})),{era:e,validators:r}}(e,t)))))}))}const Ut=singleEra("_eraPrefs"),Wt=combineEras("_eraPrefs"),Kt=erasHistoricApply("_erasPrefs"),Yt="eraRewards";function _erasRewards(e,t){return memo(e,((e,r)=>{if(!e.length)return of([]);const n=getEraMultiCache(Yt,e,r),i=filterEras(e,n);return i.length?t.query.staking.erasValidatorReward.multi(i).pipe(map((t=>filterCachedEras(e,n,setEraMultiCache(Yt,r,function mapRewards(e,t){return e.map(((e,r)=>({era:e,eraReward:t[r].unwrapOrDefault()})))}(i,t)))))):of(n)}))}const Qt=erasHistoricApply("_erasRewards"),Jt="eraSlashes";function _eraSlashes(e,t){return memo(e,((e,r)=>{const[n,i]=getEraCache(Jt,e,r);return i?of(i):combineLatest([t.query.staking.nominatorSlashInEra.entries(e),t.query.staking.validatorSlashInEra.entries(e)]).pipe(map((([t,i])=>setEraCache(n,r,function mapSlashes(e,t,r){const n={},i={};return t.forEach((([e,t])=>{n[e.args[1].toString()]=t.unwrap()})),r.forEach((([e,t])=>{i[e.args[1].toString()]=t.unwrapOrDefault()[1]})),{era:e,nominators:n,validators:i}}(e,t,i)))))}))}const Zt=singleEra("_eraSlashes"),Xt=combineEras("_eraSlashes"),Gt=erasHistoricApply("_erasSlashes");const er=firstMemo(((e,t)=>e.derive.staking.keysMulti([t])));function keysMulti(e,t){return memo(e,(e=>e.length?t.query.session.queuedKeys().pipe(switchMap((r=>combineLatest([of(r),t.consts.session?.dedupKeyPrefix?t.query.session.nextKeys.multi(e.map((e=>[t.consts.session.dedupKeyPrefix,e]))):combineLatest(e.map((e=>t.query.session.nextKeys(e))))]))),map((([t,r])=>e.map(((e,n)=>function extractsIds(e,t,r){const n=(t.find((([t])=>t.eq(e)))||[void 0,[]])[1],i=r.unwrapOr([]);return{nextSessionIds:Array.isArray(i)?i:[...i.values()],sessionIds:Array.isArray(n)?n:[...n.values()]}}(e,t,r[n])))))):of([])))}function overview_overview(e,t){return memo(e,(()=>combineLatest([t.derive.session.indexes(),t.derive.staking.validators()]).pipe(map((([e,{nextElected:t,validators:r}])=>(0,x.b)({},e,{nextElected:t,validators:r}))))))}function _ownExposures(e,t){return memo(e,((e,r,n,i)=>{const s=t.registry.createType("Exposure"),a=t.registry.createType("Option<Null>"),o=t.registry.createType("Option<Null>");return r.length?combineLatest([t.query.staking.erasStakersClipped?combineLatest(r.map((r=>t.query.staking.erasStakersClipped(r,e)))):of(r.map((e=>s))),t.query.staking.erasStakers?combineLatest(r.map((r=>t.query.staking.erasStakers(r,e)))):of(r.map((e=>s))),t.query.staking.erasStakersPaged?combineLatest(r.map((r=>t.query.staking.erasStakersPaged(r,e,i)))):of(r.map((e=>a))),t.query.staking.erasStakersOverview?combineLatest(r.map((r=>t.query.staking.erasStakersOverview(r,e)))):of(r.map((e=>o)))]).pipe(map((([e,t,n,i])=>r.map(((r,s)=>({clipped:e[s],era:r,exposure:t[s],exposureMeta:i[s],exposurePaged:n[s]})))))):of([])}))}const tr=firstMemo(((e,t,r,n)=>e.derive.staking._ownExposures(t,[r],!0,n||0))),rr=erasHistoricApplyAccount("_ownExposures");function _ownSlashes(e,t){return memo(e,((e,r,n)=>r.length?combineLatest([combineLatest(r.map((r=>t.query.staking.validatorSlashInEra(r,e)))),combineLatest(r.map((r=>t.query.staking.nominatorSlashInEra(r,e))))]).pipe(map((([e,t])=>r.map(((r,n)=>({era:r,total:e[n].isSome?e[n].unwrap()[1]:t[n].unwrapOrDefault()})))))):of([])))}const nr=firstMemo(((e,t,r)=>e.derive.staking._ownSlashes(t,[r],!0))),ir=erasHistoricApplyAccount("_ownSlashes");function filterClaimedRewards(e,t){return e.registry.createType("Vec<u32>",t.filter((e=>-1!==e)))}function getStashInfo(e,t,r,{withClaimedRewardsEras:n,withController:i,withDestination:s,withExposure:a,withExposureErasStakersLegacy:o,withExposureMeta:c,withLedger:u,withNominations:l,withPrefs:p},d){const h=e.registry.createType("Option<Nominations>"),_=e.registry.createType("RewardDestination"),m=e.registry.createType("Exposure"),f=e.registry.createType("ValidatorPrefs"),y=e.registry.createType("Option<Null>"),g=e.registry.createType("Option<Null>"),b=[-1],v=Number(e.consts.staking.historyDepth.toNumber()),w=new Array(v).fill(0).map(((e,t)=>0===t?r.toNumber()-1:r.toNumber()-t-1));return combineLatest([i||u?combineLatest(t.map((t=>e.query.staking.bonded(t)))):of(t.map((()=>null))),l?combineLatest(t.map((t=>e.query.staking.nominators(t)))):of(t.map((()=>h))),s?combineLatest(t.map((t=>e.query.staking.payee(t)))):of(t.map((()=>_))),p?combineLatest(t.map((t=>e.query.staking.validators(t)))):of(t.map((()=>f))),a&&e.query.staking.erasStakersPaged?combineLatest(t.map((t=>e.query.staking.erasStakersPaged(r,t,d)))):of(t.map((()=>y))),c&&e.query.staking.erasStakersOverview?combineLatest(t.map((t=>e.query.staking.erasStakersOverview(r,t)))):of(t.map((()=>g))),n&&e.query.staking.claimedRewards?combineLatest([e.query.staking.claimedRewards.entries(),e.query.staking.erasStakersOverview.entries()]).pipe(map((([e,r])=>function filterRewards(e,t,r,n){const i={},s={},a=e.map((e=>e.toString()));return r.forEach((([e,t])=>{const r=e.args[1].toString(),n=e.args[0].toNumber();a.includes(r)&&(i[r]||(i[r]=new Map),i[r].set(n,t.toArray()))})),n.forEach((([e,t])=>{const r=e.args[1].toString(),n=e.args[0].toNumber();a.includes(r)&&t.isSome&&(s[r]||(s[r]=new Map),s[r].set(n,t.unwrap().pageCount))})),e.map((e=>{const r=i[e.toString()],n=s[e.toString()];return t.map((e=>{if(r&&r.has(e)&&n&&n.has(e)){const t=r.get(e),i=n.get(e);return t.length===i.toNumber()?e:-1}return-1}))}))}(t,w,e,r)))):of(t.map((()=>b))),o&&e.query.staking.erasStakers?combineLatest(t.map((t=>e.query.staking.erasStakers(r,t)))):of(t.map((()=>m)))])}function getBatch(e,t,r,n,i){return getStashInfo(e,r,t,n,i).pipe(switchMap((([t,i,s,a,o,c,u,l])=>function getLedgers(e,t,{withLedger:r=!1}){const n=t.filter((e=>r&&!!e&&e.isSome)).map((e=>e.unwrap())),i=e.registry.createType("Option<StakingLedger>");return(n.length?combineLatest(n.map((t=>e.query.staking.ledger(t)))):of([])).pipe(map((e=>{let r=-1;return t.map((t=>t&&t.isSome&&e[++r]||i))})))}(e,t,n).pipe(map((n=>r.map(((r,p)=>function parseDetails(e,t,r,n,i,s,a,o,c,u,l){return{accountId:t,claimedRewardsEras:filterClaimedRewards(e,u),controllerId:r?.unwrapOr(null)||null,exposureEraStakers:l,exposureMeta:c,exposurePaged:a,nominators:n.isSome?n.unwrap().targets:[],rewardDestination:(p=i,"boolean"==typeof p.isSome?p.unwrapOr(null):p),stakingLedger:o.unwrapOrDefault(),stashId:t,validatorPrefs:s};var p}(e,r,t[p],i[p],s[p],a[p],o[p],n[p],c[p],u[p],l[p])))))))))}const sr=firstMemo(((e,t,r,n)=>e.derive.staking.queryMulti([t],r,n)));function queryMulti(e,t){return memo(e,((e,r,n)=>t.derive.session.indexes().pipe(switchMap((({activeEra:i})=>{const s=e.map((e=>t.registry.createType("AccountId",e))),a=n||0;return s.length?getBatch(t,i,s,r,a):of([])})))))}function _stakerExposures(e,t){return memo(e,((e,r,n=!1)=>{const i=e.map((e=>t.registry.createType("AccountId",e).toString()));return t.derive.staking._erasExposure(r,n).pipe(map((e=>i.map((t=>e.map((({era:e,nominators:r,validators:n})=>{const i=!!n[t],s={},a=r[t]||[];return i?s[t]=n[t]:a&&a.forEach((({validatorId:e})=>{s[e]=n[e]})),{era:e,isEmpty:!Object.keys(s).length,isValidator:i,nominating:a,validators:s}})))))))}))}function stakerExposures(e,t){return memo(e,((e,r=!1)=>t.derive.staking.erasHistoric(r).pipe(switchMap((n=>t.derive.staking._stakerExposures(e,n,r))))))}const ar=firstMemo(((e,t,r)=>e.derive.staking.stakerExposures([t],r)));function _stakerPoints(e,t){return memo(e,((e,r,n)=>{const i=t.registry.createType("AccountId",e).toString();return t.derive.staking._erasPoints(r,n).pipe(map((e=>e.map((({era:e,eraPoints:r,validators:n})=>({era:e,eraPoints:r,points:n[i]||t.registry.createType("RewardPoint")}))))))}))}const or=erasHistoricApplyAccount("_stakerPoints");function _stakerPrefs(e,t){return memo(e,((e,r,n)=>t.query.staking.erasValidatorPrefs.multi(r.map((t=>[t,e]))).pipe(map((e=>e.map(((e,t)=>({era:r[t],validatorPrefs:e}))))))))}const cr=erasHistoricApplyAccount("_stakerPrefs");function extractCompatRewards(e,t){const r=t?(t.legacyClaimedRewards||t.claimedRewards).toArray():[];return e.toArray().concat(r)}function stakerRewards_filterRewards(e,t,{claimedRewardsEras:r,rewards:n,stakingLedger:i}){const s=e.filter((e=>!extractCompatRewards(r,i).some((t=>t.eq(e))))),a=t.map((([e])=>e)),o=t.map((([,e])=>e));return n.filter((({isEmpty:e})=>!e)).filter((e=>!!s.some((t=>e.era.eq(t)))&&(function removeClaimed(e,t,r,n){const i=[];Object.keys(r.validators).forEach((s=>{const a=e.indexOf(s);if(-1!==a){const e=t[a].stakingLedger;extractCompatRewards(n,e).some((e=>r.era.eq(e)))&&i.push(s)}})),i.forEach((e=>{delete r.validators[e]}))}(a,o,e,r),!0))).filter((({validators:e})=>0!==Object.keys(e).length)).map((e=>(0,x.b)({},e,{nominators:e.nominating.filter((t=>e.validators[t.validatorId]))})))}function _stakerRewardsEras(e,t){return memo(e,((e,r=!1)=>combineLatest([t.derive.staking._erasPoints(e,r),t.derive.staking._erasPrefs(e,r),t.derive.staking._erasRewards(e,r)])))}function _stakerRewards(e,t){return memo(e,((e,r,n=!1)=>combineLatest([t.derive.staking.queryMulti(e,{withClaimedRewardsEras:!0,withLedger:!0}),t.derive.staking._stakerExposures(e,r,n),t.derive.staking._stakerRewardsEras(r,n)]).pipe(switchMap((([e,i,s])=>{const a=e.map((({claimedRewardsEras:e,stakingLedger:r,stashId:n},a)=>n&&(r||e)?function parseRewards(e,t,[r,n,i],s){return s.map((({era:s,isEmpty:a,isValidator:o,nominating:c,validators:u})=>{const{eraPoints:l,validators:p}=r.find((e=>e.era.eq(s)))||{eraPoints:ee.Yz,validators:{}},{eraReward:d}=i.find((e=>e.era.eq(s)))||{eraReward:e.registry.createType("Balance")},{validators:h}=n.find((e=>e.era.eq(s)))||{validators:{}},_={},m=t.toString();return Object.entries(u).forEach((([t,r])=>{const n=p[t]||ee.Yz,i=h[t]?.commission.unwrap()||ee.Yz,s=r.total?r.total?.unwrap():r.pageTotal?r.pageTotal?.unwrap():ee.Yz;let a,o=ee.Yz;if(!(s.isZero()||n.isZero()||l.isZero())){o=d.mul(n).div(l);const e=i.mul(o).div(ee.pr);let c;if(t===m)if(r.own)c=r.own.unwrap();else{const e=r.others.find((({who:e})=>e.eq(t)));c=e?e.value.unwrap():ee.Yz}else{const e=r.others.find((({who:e})=>e.eq(m)));c=e?e.value.unwrap():ee.Yz}a=o.sub(e).imul(c).div(s).iadd(t===m?e:ee.Yz)}_[t]={total:e.registry.createType("Balance",o),value:e.registry.createType("Balance",a)}})),{era:s,eraReward:d,isEmpty:a,isValidator:o,nominating:c,validators:_}}))}(t,n,s,i[a]):[]));if(n)return of(a);const[o,c]=function allUniqValidators(e){return e.reduce((([e,t],r)=>{const n=[];return t.push(n),r.forEach((({validators:t})=>Object.keys(t).forEach((t=>{n.includes(t)||(n.push(t),e.includes(t)||e.push(t))})))),[e,t]}),[[],[]])}(a);return t.derive.staking.queryMulti(o,{withClaimedRewardsEras:!0,withLedger:!0}).pipe(map((t=>e.map((({claimedRewardsEras:e,stakingLedger:n},i)=>stakerRewards_filterRewards(r,c[i].map((e=>[e,t.find((t=>t.accountId.eq(e)))])).filter((e=>!!e[1])),{claimedRewardsEras:e,rewards:a[i],stakingLedger:n}))))))})))))}const ur=firstMemo(((e,t,r)=>e.derive.staking.erasHistoric(r).pipe(switchMap((n=>e.derive.staking._stakerRewards([t],n,r))))));function stakerRewardsMultiEras(e,t){return memo(e,((e,r)=>e.length&&r.length?t.derive.staking._stakerRewards(e,r,!1):of([])))}function stakerRewardsMulti(e,t){return memo(e,((e,r=!1)=>t.derive.staking.erasHistoric(r).pipe(switchMap((r=>t.derive.staking.stakerRewardsMultiEras(e,r))))))}function _stakerSlashes(e,t){return memo(e,((e,r,n)=>{const i=t.registry.createType("AccountId",e).toString();return t.derive.staking._erasSlashes(r,n).pipe(map((e=>e.map((({era:e,nominators:r,validators:n})=>({era:e,total:r[i]||n[i]||t.registry.createType("Balance")}))))))}))}const lr=erasHistoricApplyAccount("_stakerSlashes");function stashes(e,t){return memo(e,(()=>function onBondedEvent(e){let t=Date.now();return e.query.system.events().pipe(map((e=>(t=e.filter((({event:e,phase:t})=>{try{return t.isApplyExtrinsic&&"staking"===e.section&&"Bonded"===e.method}catch{return!1}}))?Date.now():t,t))),startWith(t),drr({skipTimeout:!0}))}(t).pipe(switchMap((()=>t.query.staking.validators.keys())),map((e=>e.map((({args:[e]})=>e)).filter((e=>e)))))))}function nextElected(e,t){return memo(e,(()=>t.query.staking.erasStakersPaged?t.derive.session.indexes().pipe(switchMap((({currentEra:e})=>t.query.staking.erasStakersPaged.keys(e))),map((e=>[...new Set(e.map((({args:[,e]})=>e.toString())))].map((e=>t.registry.createType("AccountId",e)))))):t.query.staking.erasStakers?t.derive.session.indexes().pipe(switchMap((({currentEra:e})=>t.query.staking.erasStakers.keys(e))),map((e=>[...new Set(e.map((({args:[,e]})=>e.toString())))].map((e=>t.registry.createType("AccountId",e)))))):t.query.staking.currentElected()))}function validators(e,t){return memo(e,(()=>combineLatest([t.query.session?t.query.session.validators():of([]),t.query.staking?t.derive.staking.nextElected():of([])]).pipe(map((([e,t])=>({nextElected:t.length?t:e,validators:e}))))))}const pr={withController:!0,withPrefs:!0};function waitingInfo(e,t){return memo(e,((e=pr)=>combineLatest([t.derive.staking.validators(),t.derive.staking.stashes()]).pipe(switchMap((([{nextElected:r},n])=>{const i=r.map((e=>e.toString())),s=n.filter((e=>!i.includes(e.toString())));return t.derive.staking.queryMulti(s,e).pipe(map((e=>({info:e,waiting:s}))))})))))}const dr=Le("technicalCommittee"),hr=hasProposals("technicalCommittee"),_r=proposal("technicalCommittee"),mr=Ne("technicalCommittee"),fr=Fe("technicalCommittee"),yr=proposals("technicalCommittee"),gr=prime("technicalCommittee");function treasury_proposals_proposals(e,t){return memo(e,(()=>t.query.treasury?combineLatest([t.query.treasury.proposalCount(),t.query.treasury.approvals()]).pipe(switchMap((([e,r])=>function retrieveProposals(e,t,r){const n=[],i=t.toNumber();for(let t=0;t<i;t++)r.some((e=>e.eqn(t)))||n.push(e.registry.createType("ProposalIndex",t));const s=[...n,...r];return combineLatest([e.query.treasury.proposals.multi(s),e.derive.council?e.derive.council.proposals():of([])]).pipe(map((([n,i])=>function proposals_parseResult(e,{allIds:t,allProposals:r,approvalIds:n,councilProposals:i,proposalCount:s}){const a=[],o=[],c=i.filter((({proposal:t})=>t&&(e.tx.treasury.approveProposal.is(t)||e.tx.treasury.rejectProposal.is(t))));return t.forEach(((e,t)=>{if(r[t].isSome){const i=c.filter((({proposal:t})=>t&&e.eq(t.args[0]))).sort(((e,t)=>e.proposal&&t.proposal?e.proposal.method.localeCompare(t.proposal.method):e.proposal?-1:1)),s=n.some((t=>t.eq(e))),u={council:i,id:e,proposal:r[t].unwrap()};s?a.push(u):o.push(u)}})),{approvals:a,proposalCount:s,proposals:o}}(e,{allIds:s,allProposals:n,approvalIds:r,councilProposals:i,proposalCount:t}))))}(t,e,r)))):of({approvals:[],proposalCount:t.registry.createType("ProposalIndex"),proposals:[]})))}function events(e,t){return memo(e,(e=>combineLatest([t.rpc.chain.getBlock(e),t.queryAt(e).pipe(switchMap((e=>e.system.events())))]).pipe(map((([e,t])=>({block:e,events:t}))))))}var br=r(751744);const vr=250,wr=new Qe(6e3),Sr=new Qe(5),kr=new Qe(3e5);function latestNonce(e,t){return e.derive.balances.account(t).pipe(map((({accountNonce:e})=>e)))}function nextNonce(e,t){return e.rpc.system?.accountNextIndex?e.rpc.system.accountNextIndex(t):latestNonce(e,t)}function signingHeader(e){return combineLatest([e.rpc.chain.getHeader().pipe(switchMap((t=>t.parentHash.isEmpty?of(t):e.rpc.chain.getHeader(t.parentHash).pipe(catchError((()=>of(t))))))),e.rpc.chain.getFinalizedHead().pipe(switchMap((t=>e.rpc.chain.getHeader(t).pipe(catchError((()=>of(null)))))))]).pipe(map((([e,t])=>!t||unwrapBlockNumber(e).sub(unwrapBlockNumber(t)).gt(Sr)?e:t)))}function babeOrAuraPeriod(e){const t=e.consts.babe?.expectedBlockTime||e.consts.aura?.slotDuration||e.consts.timestamp?.minimumPeriod.muln(2);return t&&t.isZero&&!t.isZero()?t:void 0}function signingInfo(e,t){return(e,r,n)=>combineLatest([(0,G.b)(r)?latestNonce(t,e):-1===r?nextNonce(t,e):of(t.registry.createType("Index",r)),(0,G.b)(n)||(0,br.E)(n)&&n>0?signingHeader(t):of(null)]).pipe(map((([e,r])=>({header:r,mortalLength:Math.min(t.consts.system?.blockHashCount?.toNumber()||vr,kr.div(babeOrAuraPeriod(t)||wr).iadd(Sr).toNumber()),nonce:e}))))}const xr={accounts:n,alliance:i,bagsList:s,balances:a,bounties:o,chain:c,contracts:u,council:l,crowdloan:p,democracy:d,elections:h,imOnline:_,membership:m,parachains:f,session:y,society:g,staking:b,technicalCommittee:v,treasury:w,tx:S},Er={allianceMotion:{instances:["allianceMotion"],methods:[]},bagsList:{instances:["voterBagsList","voterList","bagsList"],methods:[],withDetect:!0},contracts:{instances:["contracts"],methods:[]},council:{instances:["council"],methods:[],withDetect:!0},crowdloan:{instances:["crowdloan"],methods:[]},democracy:{instances:["democracy"],methods:[]},elections:{instances:["phragmenElection","electionsPhragmen","elections","council"],methods:[],withDetect:!0},imOnline:{instances:["imOnline"],methods:[]},membership:{instances:["membership"],methods:[]},parachains:{instances:["parachains","registrar"],methods:[]},session:{instances:["session"],methods:[]},society:{instances:["society"],methods:[]},staking:{instances:["staking"],methods:["erasRewardPoints"]},technicalCommittee:{instances:["technicalCommittee"],methods:[],withDetect:!0},treasury:{instances:["treasury"],methods:[]}};function injectFunctions(e,t,r){const n={},i=Object.keys(r),s=Object.keys(t.query),a=t.runtimeVersion.specName,filterKeys=e=>s.includes(e),filterInstances=e=>function getModuleInstances(e,t,r){return e.registry.getModuleInstances(t,r)||[]}(t,a,e).some(filterKeys),getKeys=e=>Object.keys(r[e]),creator=(n,i)=>r[n][i](e,t),isIncluded=e=>{return!Er[e]||Er[e].instances.some(filterKeys)&&(!Er[e].methods.length||Er[e].methods.every((r=Er[e].instances,e=>r.some((r=>s.includes(r)&&t.query[r][e])))))||Er[e].withDetect&&Er[e].instances.some(filterInstances);var r};for(let e=0,t=i.length;e<t;e++){const t=i[e];isIncluded(t)&&lazyDeriveSection(n,t,getKeys,creator)}return n}var Ar=r(899171),Cr=r(946140),qr=r(516765);const Ir=(0,Z.v)("rpc-core"),Mr={fallback:void 0,modifier:{isOptional:!0},type:{asMap:{linked:{isTrue:!1}},isMap:!1}};function logErrorMessage(e,{noErrorLog:t,params:r,type:n},i){t||Ir.error(`${e}(${r.map((({isOptional:e,name:t,type:r})=>`${t}${e?"?":""}: ${r}`)).join(", ")}): ${n}:: ${i.message}`)}function isTreatAsHex(e){return["0x3a636f6465"].includes(e.toHex())}class RpcCore{__internal__instanceId;__internal__isPedantic;__internal__registryDefault;__internal__storageCache=new Map;__internal__storageCacheHits=0;__internal__storageCacheSize=0;__internal__getBlockRegistry;__internal__getBlockHash;mapping=new Map;provider;sections=[];constructor(e,t,{isPedantic:r=!0,provider:n,userRpc:i={}}){if(!n||!(0,Oe.T)(n.send))throw new Error("Expected Provider to API create");this.__internal__instanceId=e,this.__internal__isPedantic=r,this.__internal__registryDefault=t,this.provider=n;const s=Object.keys(Ar.A);this.sections.push(...s),this.addUserInterfaces(i)}get isConnected(){return this.provider.isConnected}connect(){return this.provider.connect()}disconnect(){return this.provider.disconnect()}get stats(){const e=this.provider.stats;return e?{...e,core:{cacheHits:this.__internal__storageCacheHits,cacheSize:this.__internal__storageCacheSize}}:void 0}setRegistrySwap(e){this.__internal__getBlockRegistry=(0,me.B)(e,{getInstanceId:()=>this.__internal__instanceId})}setResolveBlockHash(e){this.__internal__getBlockHash=(0,me.B)(e,{getInstanceId:()=>this.__internal__instanceId})}addUserInterfaces(e){this.sections.push(...Object.keys(e).filter((e=>!this.sections.includes(e))));for(let t=0,r=this.sections.length;t<r;t++){const r=this.sections[t],n=(0,x.b)({},Ar.A[r],e[r]),i=Object.keys(n);for(let e=0,t=i.length;e<t;e++){const t=i[e],s=n[t],a=s.endpoint||`${r}_${t}`;if(!this.mapping.has(a)){const e=!!s.pubsub;this[r]||(this[r]={}),this.mapping.set(a,(0,x.b)({},s,{isSubscription:e,jsonrpc:a,method:t,section:r})),(0,de.s)(this[r],t,(()=>e?this._createMethodSubscribe(r,t,s):this._createMethodSend(r,t,s)))}}}}_memomize(e,t){const r={getInstanceId:()=>this.__internal__instanceId},n=(0,me.B)(e(!0),r);return n.raw=(0,me.B)(e(!1),r),n.meta=t,n}_formatResult(e,t,r,n,i,s,a){return e?this._formatOutput(t,r,n,i,s,a):a}_createMethodSend(e,t,r){const n=r.endpoint||`${e}_${t}`,i=r.params.findIndex((({isHistoric:e})=>e));let s=null;const callWithRegistry=async(e,s)=>{const a=-1===i?null:s[i],o=a&&"BlockNumber"===r.params[i].type?await(this.__internal__getBlockHash?.(a)):a,{registry:c}=e&&o&&this.__internal__getBlockRegistry?await this.__internal__getBlockRegistry((0,C.e)(o)):{registry:this.__internal__registryDefault},u=this._formatParams(c,null,r,s),l=await this.provider.send(n,u.map((e=>e.toJSON())),!!o);return this._formatResult(e,c,o,t,r,u,l)};return s=this._memomize((e=>(...n)=>{const a=e&&-1!==i&&!!n[i];return new U((i=>(callWithRegistry(e,n).then((e=>{i.next(e),i.complete()})).catch((e=>{logErrorMessage(t,r,e),i.error(e),i.complete()})),()=>{e?s?.unmemoize(...n):s?.raw.unmemoize(...n)}))).pipe(publishReplay(1),a?refCountDelay():refCount())}),r),s}_createSubscriber({paramsJson:e,subName:t,subType:r,update:n},i){return new Promise(((s,a)=>{this.provider.subscribe(r,t,e,n).then(s).catch((e=>{i(e),a(e)}))}))}_createMethodSubscribe(e,t,r){const[n,i,s]=r.pubsub,a=`${e}_${i}`,o=`${e}_${s}`,c=`${e}_${n}`;let u=null;return u=this._memomize((e=>(...n)=>new U((i=>{let s=Promise.resolve(null);const l=this.__internal__registryDefault,errorHandler=e=>{logErrorMessage(t,r,e),i.error(e)};try{const o=this._formatParams(l,null,r,n),update=(n,s)=>{if(n)logErrorMessage(t,r,n);else try{i.next(this._formatResult(e,l,null,t,r,o,s))}catch(n){i.error(n)}};s=this._createSubscriber({paramsJson:o.map((e=>e.toJSON())),subName:a,subType:c,update},errorHandler)}catch(e){errorHandler(e)}return()=>{e?u?.unmemoize(...n):u?.raw.unmemoize(...n),s.then((e=>(0,Cr.k)(e)?Promise.resolve(!1):this.provider.unsubscribe(c,o,e))).catch((e=>logErrorMessage(t,r,e)))}})).pipe(drr())),r),u}_formatParams(e,t,r,n){const i=n.length,s=r.params.filter((({isOptional:e})=>!e)).length;if(i<s||i>r.params.length)throw new Error(`Expected ${r.params.length} parameters${s===r.params.length?"":` (${r.params.length-s} optional)`}, ${i} found instead`);const a=new Array(i);for(let s=0;s<i;s++)a[s]=e.createTypeUnsafe(r.params[s].type,[n[s]],{blockHash:t});return a}_formatOutput(e,t,r,n,i,s){if("StorageData"===n.type){const r=i[0];return this._formatStorageData(e,t,r,s)}if("StorageChangeSet"===n.type){const t=i[0];return t?this._formatStorageSet(e,s.block,t,s.changes):e.createType("StorageChangeSet",s)}if("Vec<StorageChangeSet>"===n.type){const t=s,n=t.length,a=new Array(n);for(let r=0;r<n;r++){const{block:n,changes:s}=t[r];a[r]=[e.createType("BlockHash",n),this._formatStorageSet(e,n,i[0],s)]}return"queryStorageAt"===r?a[0][1]:a}return e.createTypeUnsafe(n.type,[s],{blockHash:t})}_formatStorageData(e,t,r,n){const i=(0,Cr.k)(n),s=i?null:isTreatAsHex(r)?n:(0,C.e)(n);return this._newType(e,t,r,s,i)}_formatStorageSet(e,t,r,n){const i=r.length,s=1!==i,a=new Array(i);for(let o=0;o<i;o++)a[o]=this._formatStorageSetEntry(e,t,r[o],n,s,o);return a}_formatStorageSetEntry(e,t,r,n,i,s){const a=r.toHex(),o=n.find((([e])=>e===a)),c=(0,G.b)(o);if(c&&i){const e=this.__internal__storageCache.get(a);if(e)return this.__internal__storageCacheHits++,e}const u=c?null:o[1],l=(0,Cr.k)(u),p=l||isTreatAsHex(r)?u:(0,C.e)(u),d=this._newType(e,t,r,p,l,s);return this.__internal__storageCache.set(a,d),this.__internal__storageCacheSize++,d}_newType(e,t,r,n,i,s=-1){const a=r.outputType||"Raw",o=r.meta||Mr,c=-1===s?"":` entry ${s}:`;try{return e.createTypeUnsafe(a,[i?o.fallback?a.includes("Linkage<")?(0,ut.z)((0,qr.V)(o.fallback.toHex()),new Uint8Array(2)):(0,qr.V)(o.fallback.toHex()):void 0:o.modifier.isOptional?e.createTypeUnsafe(a,[n],{blockHash:t,isPedantic:this.__internal__isPedantic}):n],{blockHash:t,isFallback:i&&!!o.fallback,isOptional:o.modifier.isOptional,isPedantic:this.__internal__isPedantic&&!o.modifier.isOptional})}catch(e){throw new Error(`Unable to decode storage ${r.section||"unknown"}.${r.method||"unknown"}:${c}: ${e.message}`)}}}var Or=r(963232),Rr=r.n(Or);var Pr=r(736131),Tr=r(76904);const Hr=Tr.Mn.WebSocket;var Br=r(904436),Lr=r(707252),Nr=r(448629);const Fr={1e3:"Normal Closure",1001:"Going Away",1002:"Protocol Error",1003:"Unsupported Data",1004:"(For future)",1005:"No Status Received",1006:"Abnormal Closure",1007:"Invalid frame payload data",1008:"Policy Violation",1009:"Message too big",1010:"Missing Extension",1011:"Internal Error",1012:"Service Restart",1013:"Try Again Later",1014:"Bad Gateway",1015:"TLS Handshake"};const jr={chain_finalisedHead:"chain_finalizedHead",chain_subscribeFinalisedHeads:"chain_subscribeFinalizedHeads",chain_unsubscribeFinalisedHeads:"chain_unsubscribeFinalizedHeads"},Dr=(0,Z.v)("api-ws");function eraseRecord(e,t){Object.keys(e).forEach((r=>{t&&t(e[r]),delete e[r]}))}class WsProvider{__internal__callCache;__internal__coder;__internal__endpoints;__internal__headers;__internal__eventemitter;__internal__handlers={};__internal__isReadyPromise;__internal__stats;__internal__waitingForId={};__internal__autoConnectMs;__internal__endpointIndex;__internal__endpointStats;__internal__isConnected=!1;__internal__subscriptions={};__internal__timeoutId=null;__internal__websocket;__internal__timeout;constructor(e=Lr.A.WS_URL,t=2500,r={},n,i){const s=Array.isArray(e)?e:[e];if(0===s.length)throw new Error("WsProvider requires at least one Endpoint");s.forEach((e=>{if(!/^(wss|ws):\/\//.test(e))throw new Error(`Endpoint should start with 'ws://', received '${e}'`)})),this.__internal__callCache=new Nr.q(i||Nr.b),this.__internal__eventemitter=new(Rr()),this.__internal__autoConnectMs=t||0,this.__internal__coder=new Br.$,this.__internal__endpointIndex=-1,this.__internal__endpoints=s,this.__internal__headers=r,this.__internal__websocket=null,this.__internal__stats={active:{requests:0,subscriptions:0},total:{bytesRecv:0,bytesSent:0,cached:0,errors:0,requests:0,subscriptions:0,timeout:0}},this.__internal__endpointStats={bytesRecv:0,bytesSent:0,cached:0,errors:0,requests:0,subscriptions:0,timeout:0},this.__internal__timeout=n||6e4,t&&t>0&&this.connectWithRetry().catch(k.l),this.__internal__isReadyPromise=new Promise((e=>{this.__internal__eventemitter.once("connected",(()=>{e(this)}))}))}get hasSubscriptions(){return!0}get isClonable(){return!0}get isConnected(){return this.__internal__isConnected}get isReady(){return this.__internal__isReadyPromise}get endpoint(){return this.__internal__endpoints[this.__internal__endpointIndex]}clone(){return new WsProvider(this.__internal__endpoints)}selectEndpointIndex(e){return(this.__internal__endpointIndex+1)%e.length}async connect(){if(this.__internal__websocket)throw new Error("WebSocket is already connected");try{this.__internal__endpointIndex=this.selectEndpointIndex(this.__internal__endpoints),this.__internal__websocket=void 0!==Tr.Mn.WebSocket&&(0,Pr.R)(Tr.Mn.WebSocket,Hr)?new Hr(this.endpoint):new Hr(this.endpoint,void 0,{headers:this.__internal__headers}),this.__internal__websocket&&(this.__internal__websocket.onclose=this.__internal__onSocketClose,this.__internal__websocket.onerror=this.__internal__onSocketError,this.__internal__websocket.onmessage=this.__internal__onSocketMessage,this.__internal__websocket.onopen=this.__internal__onSocketOpen),this.__internal__timeoutId=setInterval((()=>this.__internal__timeoutHandlers()),5e3)}catch(e){throw Dr.error(e),this.__internal__emit("error",e),e}}async connectWithRetry(){if(this.__internal__autoConnectMs>0)try{await this.connect()}catch{setTimeout((()=>{this.connectWithRetry().catch(k.l)}),this.__internal__autoConnectMs)}}async disconnect(){this.__internal__autoConnectMs=0;try{this.__internal__websocket&&this.__internal__websocket.close(1e3)}catch(e){throw Dr.error(e),this.__internal__emit("error",e),e}}get stats(){return{active:{requests:Object.keys(this.__internal__handlers).length,subscriptions:Object.keys(this.__internal__subscriptions).length},total:this.__internal__stats.total}}get endpointStats(){return this.__internal__endpointStats}on(e,t){return this.__internal__eventemitter.on(e,t),()=>{this.__internal__eventemitter.removeListener(e,t)}}send(e,t,r,n){this.__internal__endpointStats.requests++,this.__internal__stats.total.requests++;const[i,s]=this.__internal__coder.encodeJson(e,t),a=r?`${e}::${(0,we.A)(t)}`:"";let o=r?this.__internal__callCache.get(a):null;return o?(this.__internal__endpointStats.cached++,this.__internal__stats.total.cached++):(o=this.__internal__send(i,s,e,t,n),r&&this.__internal__callCache.set(a,o)),o}async __internal__send(e,t,r,n,i){return new Promise(((s,a)=>{try{if(!this.isConnected||null===this.__internal__websocket)throw new Error("WebSocket is not connected");const callback=(e,t)=>{e?a(e):s(t)};Dr.debug((()=>["calling",r,t])),this.__internal__handlers[e]={callback,method:r,params:n,start:Date.now(),subscription:i};const o=t.length;this.__internal__endpointStats.bytesSent+=o,this.__internal__stats.total.bytesSent+=o,this.__internal__websocket.send(t)}catch(e){this.__internal__endpointStats.errors++,this.__internal__stats.total.errors++,a(e)}}))}subscribe(e,t,r,n){return this.__internal__endpointStats.subscriptions++,this.__internal__stats.total.subscriptions++,this.send(t,r,!1,{callback:n,type:e})}async unsubscribe(e,t,r){const n=`${e}::${r}`;if((0,G.b)(this.__internal__subscriptions[n]))return Dr.debug((()=>`Unable to find active subscription=${n}`)),!1;delete this.__internal__subscriptions[n];try{return!(this.isConnected&&!(0,Cr.k)(this.__internal__websocket))||this.send(t,[r])}catch{return!1}}__internal__emit=(e,...t)=>{this.__internal__eventemitter.emit(e,...t)};__internal__onSocketClose=e=>{const t=new Error(`disconnected from ${this.endpoint}: ${e.code}:: ${e.reason||function getWSErrorString(e){if(e>=0&&e<=999)return"(Unused)";if(e>=1016){if(e<=1999)return"(For WebSocket standard)";if(e<=2999)return"(For WebSocket extensions)";if(e<=3999)return"(For libraries and frameworks)";if(e<=4999)return"(For applications)"}return Fr[e]||"(Unknown)"}(e.code)}`);this.__internal__autoConnectMs>0&&Dr.error(t.message),this.__internal__isConnected=!1,this.__internal__websocket&&(this.__internal__websocket.onclose=null,this.__internal__websocket.onerror=null,this.__internal__websocket.onmessage=null,this.__internal__websocket.onopen=null,this.__internal__websocket=null),this.__internal__timeoutId&&(clearInterval(this.__internal__timeoutId),this.__internal__timeoutId=null),eraseRecord(this.__internal__handlers,(e=>{try{e.callback(t,void 0)}catch(e){Dr.error(e)}})),eraseRecord(this.__internal__waitingForId),this.__internal__endpointStats={bytesRecv:0,bytesSent:0,cached:0,errors:0,requests:0,subscriptions:0,timeout:0},this.__internal__emit("disconnected"),this.__internal__autoConnectMs>0&&setTimeout((()=>{this.connectWithRetry().catch(k.l)}),this.__internal__autoConnectMs)};__internal__onSocketError=e=>{Dr.debug((()=>["socket error",e])),this.__internal__emit("error",e)};__internal__onSocketMessage=e=>{Dr.debug((()=>["received",e.data]));const t=e.data.length;this.__internal__endpointStats.bytesRecv+=t,this.__internal__stats.total.bytesRecv+=t;const r=JSON.parse(e.data);return(0,G.b)(r.method)?this.__internal__onSocketMessageResult(r):this.__internal__onSocketMessageSubscribe(r)};__internal__onSocketMessageResult=e=>{const t=this.__internal__handlers[e.id];if(t){try{const{method:r,params:n,subscription:i}=t,s=this.__internal__coder.decodeResponse(e);if(t.callback(null,s),i){const e=`${i.type}::${s}`;this.__internal__subscriptions[e]=(0,x.b)({},i,{method:r,params:n}),this.__internal__waitingForId[e]&&this.__internal__onSocketMessageSubscribe(this.__internal__waitingForId[e])}}catch(e){this.__internal__endpointStats.errors++,this.__internal__stats.total.errors++,t.callback(e,void 0)}delete this.__internal__handlers[e.id]}else Dr.debug((()=>`Unable to find handler for id=${e.id}`))};__internal__onSocketMessageSubscribe=e=>{if(!e.method)throw new Error("No method found in JSONRPC response");const t=`${jr[e.method]||e.method}::${e.params.subscription}`,r=this.__internal__subscriptions[t];if(!r)return this.__internal__waitingForId[t]=e,void Dr.debug((()=>`Unable to find handler for subscription=${t}`));delete this.__internal__waitingForId[t];try{const t=this.__internal__coder.decodeResponse(e);r.callback(null,t)}catch(e){this.__internal__endpointStats.errors++,this.__internal__stats.total.errors++,r.callback(e,void 0)}};__internal__onSocketOpen=()=>{if(null===this.__internal__websocket)throw new Error("WebSocket cannot be null in onOpen");return Dr.debug((()=>["connected to",this.endpoint])),this.__internal__isConnected=!0,this.__internal__resubscribe(),this.__internal__emit("connected"),!0};__internal__resubscribe=()=>{const e=this.__internal__subscriptions;this.__internal__subscriptions={},Promise.all(Object.keys(e).map((async t=>{const{callback:r,method:n,params:i,type:s}=e[t];if(!s.startsWith("author_"))try{await this.subscribe(s,n,i,r)}catch(e){Dr.error(e)}}))).catch(Dr.error)};__internal__timeoutHandlers=()=>{const e=Date.now(),t=Object.keys(this.__internal__handlers);for(let r=0,n=t.length;r<n;r++){const n=this.__internal__handlers[t[r]];if(e-n.start>this.__internal__timeout){try{n.callback(new Error(`No response received from RPC endpoint in ${this.__internal__timeout/1e3}s`),void 0)}catch{}this.__internal__endpointStats.timeout++,this.__internal__stats.total.timeout++,delete this.__internal__handlers[t[r]]}}}}var Vr=r(299526),$r=r(11871),zr=r(786241),Ur=r(388951),Wr=r(536010),Kr=r(620763);function defaultErrorFactory(){return new M}function first(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?function filter(e,t){return operate((function(r,n){var i=0;r.subscribe(createOperatorSubscriber(n,(function(r){return e.call(t,r,i++)&&n.next(r)})))}))}((function(t,r){return e(t,r,n)})):identity,function take(e){return e<=0?function(){return pt}:operate((function(t,r){var n=0;t.subscribe(createOperatorSubscriber(r,(function(t){++n<=e&&(r.next(t),e<=n&&r.complete())})))}))}(1),r?function defaultIfEmpty(e){return operate((function(t,r){var n=!1;t.subscribe(createOperatorSubscriber(r,(function(e){n=!0,r.next(e)}),(function(){n||r.next(e),r.complete()})))}))}(t):function throwIfEmpty(e){return void 0===e&&(e=defaultErrorFactory),operate((function(t,r){var n=!1;t.subscribe(createOperatorSubscriber(r,(function(e){n=!0,r.next(e)}),(function(){return n?r.complete():r.error(e())})))}))}((function(){return new M})))}}var Yr=r(169265);function isKeyringPair(e){return(0,Oe.T)(e.sign)}const Qr=(0,Z.v)("api/util");function filterEvents(e,{block:{extrinsics:t,header:r}},n,i){for(const[i,s]of t.entries())if(s.hash.eq(e))return{blockNumber:(0,Ge.i)(r.number)?r.number.unwrap():r.number,events:n.filter((({phase:e})=>e.isApplyExtrinsic&&e.asApplyExtrinsic.eqn(i))),txIndex:i};if(i.isInBlock){const n=t.map((e=>e.hash.toHex()));Qr.warn(`block ${r.hash.toHex()}: Unable to find extrinsic ${e.toHex()} inside ${n.join(", ")}`)}return{}}const recordIdentity=e=>e;function filterAndApply(e,t,r,n){return e.filter((({event:e})=>t===e.section&&r.includes(e.method))).map((e=>n(e)))}function getDispatchError({event:{data:[e]}}){return e}function getDispatchInfo({event:{data:e,method:t}}){return"ExtrinsicSuccess"===t?e[0]:e[1]}class SubmittableResult{dispatchError;dispatchInfo;internalError;events;status;txHash;txIndex;blockNumber;constructor({blockNumber:e,dispatchError:t,dispatchInfo:r,events:n,internalError:i,status:s,txHash:a,txIndex:o}){this.dispatchError=t||function extractError(e=[]){return filterAndApply(e,"system",["ExtrinsicFailed"],getDispatchError)[0]}(n),this.dispatchInfo=r||function extractInfo(e=[]){return filterAndApply(e,"system",["ExtrinsicFailed","ExtrinsicSuccess"],getDispatchInfo)[0]}(n),this.events=n||[],this.internalError=i,this.status=s,this.txHash=a,this.txIndex=o,this.blockNumber=e}get isCompleted(){return this.isError||this.status.isInBlock||this.status.isFinalized}get isError(){return this.status.isDropped||this.status.isFinalityTimeout||this.status.isInvalid||this.status.isUsurped}get isFinalized(){return this.status.isFinalized}get isInBlock(){return this.status.isInBlock}get isWarning(){return this.status.isRetracted}filterRecords(e,t){return filterAndApply(this.events,e,Array.isArray(t)?t:[t],recordIdentity)}findRecord(e,t){return this.filterRecords(e,t)[0]}toHuman(e){return{dispatchError:this.dispatchError?.toHuman(),dispatchInfo:this.dispatchInfo?.toHuman(),events:this.events.map((t=>t.toHuman(e))),internalError:this.internalError?.message.toString(),status:this.status.toHuman(e)}}}function makeEraOptions(e,t,r,{header:n,mortalLength:i,nonce:s}){if(!n){if(r.era&&!r.blockHash)throw new Error("Expected blockHash to be passed alongside non-immortal era options");return(0,br.E)(r.era)&&(delete r.era,delete r.blockHash),makeSignOptions(e,r,{nonce:s})}return makeSignOptions(e,r,{blockHash:n.hash,era:t.createTypeUnsafe("ExtrinsicEra",[{current:n.number,period:r.era||i}]),nonce:s})}function makeSignAndSendOptions(e,t){let r={};return(0,Oe.T)(e)?t=e:r=(0,x.b)({},e),[r,t]}function makeSignOptions(e,t,r){return(0,x.b)({blockHash:e.genesisHash,genesisHash:e.genesisHash},t,r,{runtimeVersion:e.runtimeVersion,signedExtensions:e.registry.signedExtensions,version:e.extrinsicType})}function createClass({api:e,apiType:t,blockHash:r,decorateMethod:n}){const i=e.registry.createClass("Extrinsic");return class Submittable extends i{__internal__ignoreStatusCb;__internal__transformResult=k.D;constructor(r,n){super(r,n,{version:e.extrinsicType}),this.__internal__ignoreStatusCb="rxjs"===t}get hasDryRun(){return(0,Oe.T)(e.rpc.system?.dryRun)}get hasPaymentInfo(){return(0,Oe.T)(e.call.transactionPaymentApi?.queryInfo)}dryRun(t,i){if(!this.hasDryRun)throw new Error("The system.dryRun RPC call is not available in your environment");return r||(0,E.K)(i)||(0,he.b)(i)?n((()=>e.rpc.system.dryRun(this.toHex(),r||i))):n((()=>this.__internal__observeSign(t,i).pipe(switchMap((()=>e.rpc.system.dryRun(this.toHex()))))))()}paymentInfo(t,i){if(!this.hasPaymentInfo)throw new Error("The transactionPaymentApi.queryInfo runtime call is not available in your environment");if(r||(0,E.K)(i)||(0,he.b)(i))return n((()=>e.callAt(r||i).pipe(switchMap((e=>{const t=this.toU8a();return e.transactionPaymentApi.queryInfo(t,t.length)})))));const[s]=makeSignAndSendOptions(i),a=isKeyringPair(t)?t.address:t.toString();return n((()=>e.derive.tx.signingInfo(a,s.nonce,s.era).pipe(first(),switchMap((t=>{const r=makeEraOptions(e,this.registry,s,t),n=makeSignOptions(e,r,{}),i=e.tx(this.toU8a()).signFake(a,n).toU8a();return e.call.transactionPaymentApi.queryInfo(i,i.length)})))))()}send(t){const r=e.hasSubscriptions&&(this.__internal__ignoreStatusCb||!!t);return n(r?this.__internal__observeSubscribe:this.__internal__observeSend)(t)}signAsync(e,t){return n((()=>this.__internal__observeSign(e,t).pipe(map((()=>this)))))()}signAndSend(t,r,i){const[s,a]=makeSignAndSendOptions(r,i),o=e.hasSubscriptions&&(this.__internal__ignoreStatusCb||!!a);return n((()=>this.__internal__observeSign(t,s).pipe(switchMap((e=>o?this.__internal__observeSubscribe(e):this.__internal__observeSend(e))))))(a)}withResultTransform(e){return this.__internal__transformResult=e,this}__internal__observeSign=(t,r)=>{const n=isKeyringPair(t)?t.address:t.toString(),i=function optionsOrNonce(e={}){return(0,Yr.f)(e)||(0,br.E)(e)?{nonce:e}:e}(r);return e.derive.tx.signingInfo(n,i.nonce,i.era).pipe(first(),mergeMap((async r=>{const s=makeEraOptions(e,this.registry,i,r);let a=-1;return isKeyringPair(t)?this.sign(t,s):a=await this.__internal__signViaSigner(n,s,r.header),{options:s,updateId:a}})))};__internal__observeStatus=(t,r)=>{if(!r.isFinalized&&!r.isInBlock)return of(this.__internal__transformResult(new SubmittableResult({status:r,txHash:t})));const n=r.isInBlock?r.asInBlock:r.asFinalized;return e.derive.tx.events(n).pipe(map((({block:e,events:n})=>this.__internal__transformResult(new SubmittableResult({...filterEvents(t,e,n,r),status:r,txHash:t})))),catchError((e=>of(this.__internal__transformResult(new SubmittableResult({internalError:e,status:r,txHash:t}))))))};__internal__observeSend=t=>e.rpc.author.submitExtrinsic(this).pipe(tap((e=>{this.__internal__updateSigner(e,t)})));__internal__observeSubscribe=t=>{const r=this.hash;return e.rpc.author.submitAndWatchExtrinsic(this).pipe(switchMap((e=>this.__internal__observeStatus(r,e))),tap((e=>{this.__internal__updateSigner(e,t)})))};__internal__signViaSigner=async(t,r,n)=>{const i=r.signer||e.signer;if(!i)throw new Error("No signer specified, either via api.setSigner or via sign options. You possibly need to pass through an explicit keypair for the origin so it can be used for signing.");const s=this.registry.createTypeUnsafe("SignerPayload",[(0,x.b)({},r,{address:t,blockNumber:n?n.number:0,method:this.method})]);let a;if((0,Oe.T)(i.signPayload))a=await i.signPayload(s.toPayload());else{if(!(0,Oe.T)(i.signRaw))throw new Error("Invalid signer interface, it should implement either signPayload or signRaw (or both)");a=await i.signRaw(s.toRaw())}return super.addSignature(t,a.signature,s.toPayload()),a.id};__internal__updateSigner=(t,r)=>{if(r&&-1!==r.updateId){const{options:n,updateId:i}=r,s=n.signer||e.signer;s&&(0,Oe.T)(s.update)&&s.update(i,t)}}}}function createSubmittable(e,t,r,n,i){const s=createClass({api:t,apiType:e,blockHash:i,decorateMethod:r});return e=>new s(n||t.registry,e)}var Jr=r(448463);const Zr=(0,Z.v)("api/augment");function logLength(e,t,r=[]){return t.length?` ${t.length} ${e}${r.length?" and":""}`:""}function logValues(e,t){return t.length?`\n\t${e.padStart(7)}: ${t.sort().join(", ")}`:""}function warn(e,t,[r,n]){(r.length||n.length)&&Zr.warn(`api.${e}: Found${logLength("added",r,n)}${logLength("removed",n)} ${t}:${logValues("added",r)}${logValues("removed",n)}`)}function findSectionExcludes(e,t){return e.filter((e=>!t.includes(e)))}function findMethodExcludes(e,t){const r=Object.keys(e),n=function findSectionIncludes(e,t){return e.filter((e=>t.includes(e)))}(Object.keys(t),r),i=[];for(let r=0,s=n.length;r<s;r++){const s=n[r],a=Object.keys(e[s]),o=Object.keys(t[s]);for(let e=0,t=o.length;e<t;e++){const t=o[e];a.includes(t)||i.push(`${s}.${t}`)}}return i}function augmentObject(e,t,r,n=!1){n&&(0,Jr.H)(r),e&&Object.keys(r).length&&(warn(e,"modules",function extractSections(e,t){const r=Object.keys(e),n=Object.keys(t);return[findSectionExcludes(r,n),findSectionExcludes(n,r)]}(t,r)),warn(e,"calls",function extractMethods(e,t){return[findMethodExcludes(t,e),findMethodExcludes(e,t)]}(t,r)));const i=Object.keys(t);for(let e=0,n=i.length;e<n;e++){const n=i[e],s=t[n];r[n]||(r[n]={}),(0,de.T)(r[n],Object.keys(s),(e=>s[e]))}return r}function decorateDeriveSections(e,t){const getKeys=e=>Object.keys(t[e]),creator=(r,n)=>e(t[r][n]),r={},n=Object.keys(t);for(let e=0,t=n.length;e<t;e++)lazyDeriveSection(r,n[e],getKeys,creator);return r}function sig({lookup:e},{method:t,section:r},n){return`${r}.${t}(${n.map((t=>e.getTypeDef(t).type)).join(", ")})`}function extractStorageArgs(e,t,r){const n=r.filter((e=>!(0,G.b)(e)));if(t.meta.type.isPlain){if(0!==n.length)throw new Error(`${sig(e,t,[])} does not take any arguments, ${n.length} found`)}else{const{hashers:r,key:i}=t.meta.type.asMap,s=1===r.length?[i]:e.lookup.getSiType(i).def.asTuple.map((e=>e));if(n.length!==s.length)throw new Error(`${sig(e,t,s)} is a map, requiring ${s.length} arguments, ${n.length} found`)}return[t,n]}class Events{__internal__eventemitter=new(Rr());emit(e,...t){return this.__internal__eventemitter.emit(e,...t)}on(e,t){return this.__internal__eventemitter.on(e,t),this}off(e,t){return this.__internal__eventemitter.removeListener(e,t),this}once(e,t){return this.__internal__eventemitter.once(e,t),this}}const Xr=1e3,Gr=(0,Z.v)("api/init");let en=0;function getAtQueryFn(e,{method:t,section:r}){return(0,X.Z8)(e.rx.query[r]&&e.rx.query[r][t],(()=>`query.${r}.${t} is not available in this version of the metadata`))}class Decorate extends Events{__internal__instanceId;__internal__runtimeLog={};__internal__registry;__internal__storageGetQ=[];__internal__storageSubQ=[];__phantom=new Qe(0);_type;_call={};_consts={};_derive;_errors={};_events={};_extrinsics;_extrinsicType=Vr.b.LATEST_EXTRINSIC_VERSION;_genesisHash;_isConnected;_isReady=!1;_query={};_queryMulti;_rpc;_rpcCore;_runtimeMap={};_runtimeChain;_runtimeMetadata;_runtimeVersion;_rx={call:{},consts:{},query:{},tx:{}};_options;_decorateMethod;constructor(e,t,r){super(),this.__internal__instanceId=""+ ++en,this.__internal__registry=e.source?.registry||e.registry||new Y.O,this._rx.callAt=(e,t)=>from(this.at(e,t)).pipe(map((e=>e.rx.call))),this._rx.queryAt=(e,t)=>from(this.at(e,t)).pipe(map((e=>e.rx.query))),this._rx.registry=this.__internal__registry,this._decorateMethod=r,this._options=e,this._type=t;const n=e.source?e.source._rpcCore.provider.isClonable?e.source._rpcCore.provider.clone():e.source._rpcCore.provider:e.provider||new WsProvider;this._rpcCore=new RpcCore(this.__internal__instanceId,this.__internal__registry,{isPedantic:this._options.isPedantic,provider:n,userRpc:this._options.rpc}),this._isConnected=new ae(this._rpcCore.provider.isConnected),this._rx.hasSubscriptions=this._rpcCore.provider.hasSubscriptions}get registry(){return this.__internal__registry}createType(e,...t){return this.__internal__registry.createType(e,...t)}registerTypes(e){e&&this.__internal__registry.register(e)}get hasSubscriptions(){return this._rpcCore.provider.hasSubscriptions}get supportMulti(){return this._rpcCore.provider.hasSubscriptions||!!this._rpcCore.state.queryStorageAt}_emptyDecorated(e,t){return{call:{},consts:{},errors:{},events:{},query:{},registry:e,rx:{call:{},query:{}},tx:createSubmittable(this._type,this._rx,this._decorateMethod,e,t)}}_createDecorated(e,t,r,n){r||(r=this._emptyDecorated(e.registry,n)),!t&&e.decoratedMeta||(e.decoratedMeta=(0,$r.expandMetadata)(e.registry,e.metadata));const i=this._decorateCalls(e,this._decorateMethod,n),s=this._decorateCalls(e,this._rxDecorateMethod,n),a=this._decorateStorage(e.decoratedMeta,this._decorateMethod,n),o=this._decorateStorage(e.decoratedMeta,this._rxDecorateMethod,n);return augmentObject("consts",e.decoratedMeta.consts,r.consts,t),augmentObject("errors",e.decoratedMeta.errors,r.errors,t),augmentObject("events",e.decoratedMeta.events,r.events,t),augmentObject("query",a,r.query,t),augmentObject("query",o,r.rx.query,t),augmentObject("call",i,r.call,t),augmentObject("call",s,r.rx.call,t),r.findCall=t=>findCall(e.registry,t),r.findError=t=>findError(e.registry,t),r.queryMulti=n?this._decorateMultiAt(r,this._decorateMethod,n):this._decorateMulti(this._decorateMethod),r.runtimeVersion=e.runtimeVersion,{createdAt:n,decoratedApi:r,decoratedMeta:e.decoratedMeta}}_injectMetadata(e,t=!1){!t&&e.decoratedApi||(e.decoratedApi=this._emptyDecorated(e.registry));const{decoratedApi:r,decoratedMeta:n}=this._createDecorated(e,t,e.decoratedApi);this._call=r.call,this._consts=r.consts,this._errors=r.errors,this._events=r.events,this._query=r.query,this._rx.call=r.rx.call,this._rx.query=r.rx.query;const i=this._decorateExtrinsics(n,this._decorateMethod),s=this._decorateExtrinsics(n,this._rxDecorateMethod);t||!this._extrinsics?(this._extrinsics=i,this._rx.tx=s):(augmentObject("tx",i,this._extrinsics,!1),augmentObject(null,s,this._rx.tx,!1)),augmentObject(null,n.consts,this._rx.consts,t),this.emit("decorated")}injectMetadata(e,t,r){this._injectMetadata({counter:0,metadata:e,registry:r||this.__internal__registry,runtimeVersion:this.__internal__registry.createType("RuntimeVersionPartial")},t)}_decorateFunctionMeta(e,t){return t.meta=e.meta,t.method=e.method,t.section=e.section,t.toJSON=e.toJSON,e.callIndex&&(t.callIndex=e.callIndex),t}_filterRpc(e,t){0!==Object.keys(t).length&&(this._rpcCore.addUserInterfaces(t),this._decorateRpc(this._rpcCore,this._decorateMethod,this._rpc),this._decorateRpc(this._rpcCore,this._rxDecorateMethod,this._rx.rpc));const r={};for(let t=0,n=e.length;t<n;t++){const[n]=e[t].split("_");r[n]=!0}const n=Object.keys(r);for(let e=0,t=n.length;e<t;e++){const t=(0,Ur.g)(n[e]),r=`${t}Api`;this._runtimeMap[(0,lt.X)(t,64)]=t,this._runtimeMap[(0,lt.X)(r,64)]=r}this._filterRpcMethods(e)}_filterRpcMethods(e){const t=0!==e.length,r=[...this._rpcCore.mapping.entries()],n=[],i=r.length;for(let e=0;e<i;e++){const[,{alias:t,endpoint:i,method:s,pubsub:a,section:o}]=r[e];n.push(`${o}_${s}`),a&&(n.push(`${o}_${a[1]}`),n.push(`${o}_${a[2]}`)),t&&n.push(...t),i&&n.push(i)}const s=e.filter((e=>!n.includes(e)&&!e.includes("_unstable_")));s.length&&!this._options.noInitWarn&&Gr.warn(`RPC methods not decorated: ${s.join(", ")}`);for(let n=0;n<i;n++){const[i,{method:s,section:a}]=r[n];t&&!e.includes(i)&&"rpc_methods"!==i&&this._rpc[a]&&(delete this._rpc[a][s],delete this._rx.rpc[a][s])}}_rpcSubmitter(e){return e(((e,...t)=>from(this._rpcCore.provider.send(e,t))))}_decorateRpc(e,t,r=this._rpcSubmitter(t)){const n=r,decorateFn=(r,n)=>{const i=e[r][n],s=t(i,{methodName:n});return s.meta=i.meta,s.raw=t(i.raw,{methodName:n}),s};for(let t=0,r=e.sections.length;t<r;t++){const r=e.sections[t];if(!Object.prototype.hasOwnProperty.call(n,r)){const t=Object.keys(e[r]),decorateInternal=e=>decorateFn(r,e);for(let e=0,i=t.length;e<i;e++){const i=t[e];(this.hasSubscriptions||!i.startsWith("subscribe")&&!i.startsWith("unsubscribe"))&&(Object.prototype.hasOwnProperty.call(n,r)||(n[r]={}),(0,de.s)(n[r],i,decorateInternal))}}}return n}_addRuntimeDef(e,t){if(!t)return;const r=Object.entries(t);for(let t=0,n=r.length;t<n;t++){const[n,i]=r[t];if(e[n])for(let t=0,r=i.length;t<r;t++){const r=i[t],s=e[n].find((({version:e})=>r.version===e));s?(0,x.b)(s.methods,r.methods):e[n].push(r)}else e[n]=i}}_getRuntimeDefs(e,t,r=""){const n={},i=Object.values(zr);for(let e=0,t=i.length;e<t;e++)this._addRuntimeDef(n,i[e].runtime);return this._addRuntimeDef(n,(0,J.sN)(e,r,t)),this._addRuntimeDef(n,this._options.runtime),Object.entries(n)}_decorateCalls({registry:e,runtimeVersion:{apis:t,specName:r,specVersion:n}},i,s){const a={},o={},c={},u=this._getRuntimeDefs(e,r,this._runtimeChain),l=[],p=`${r.toString()}/${n.toString()}`,d=this.__internal__runtimeLog[p]||!1;this.__internal__runtimeLog[p]=!0;for(let e=0,r=u.length;e<r;e++){const[r,n]=u[e],i=(0,lt.X)(r,64),s=t.find((([e])=>e.eq(i)));if(c[i]=!0,s){const e=n.map((({version:e})=>e)).sort(),t=n.find((({version:e})=>s[1].eq(e)));if(t){const e=(0,Wr.WH)(r),n=Object.entries(t.methods);if(n.length){o[e]||(o[e]={});for(let t=0,s=n.length;t<s;t++){const[s,a]=n[t],c=(0,Wr.WH)(s);o[e][c]=(0,x.b)({method:c,name:`${r}_${s}`,section:e,sectionHash:i},a)}}}else l.push(`${r}/${s[1].toString()} (${e.join("/")} known)`)}}const h=t.map((([e,t])=>[e.toHex(),t.toString()])).filter((([e])=>!c[e])).map((([e,t])=>`${this._runtimeMap[e]||e}/${t}`));this._options.noInitWarn||d||(l.length&&Gr.warn(`${p}: Not decorating runtime apis without matching versions: ${l.join(", ")}`),h.length&&Gr.warn(`${p}: Not decorating unknown runtime apis: ${h.join(", ")}`));const _=s?(e,t)=>this._rpcCore.state.call(e,t,s):(e,t)=>this._rpcCore.state.call(e,t),lazySection=t=>(0,de.T)({},Object.keys(o[t]),(r=>this._decorateCall(e,o[t][r],_,i))),m=Object.keys(o);for(let e=0,t=m.length;e<t;e++)(0,de.s)(a,m[e],lazySection);return a}_decorateCall(e,t,r,n){const i=n(((...n)=>{if(n.length!==t.params.length)throw new Error(`${t.name}:: Expected ${t.params.length} arguments, found ${n.length}`);const i=e.createType("Raw",(0,ut.Q)(n.map(((r,n)=>e.createTypeUnsafe(t.params[n].type,[r]).toU8a()))));return r(t.name,i).pipe(map((r=>e.createTypeUnsafe(t.type,[r]))))}));return i.meta=t,i}_decorateMulti(e){return e((e=>e.length?(this.hasSubscriptions?this._rpcCore.state.subscribeStorage:this._rpcCore.state.queryStorageAt)(e.map((e=>Array.isArray(e)?e[0].creator.meta.type.isPlain?[e[0].creator]:1===e[0].creator.meta.type.asMap.hashers.length?[e[0].creator,e.slice(1)]:[e[0].creator,...e.slice(1)]:[e.creator]))):of([])))}_decorateMultiAt(e,t,r){return t((t=>t.length?this._rpcCore.state.queryStorageAt(t.map((t=>{if(Array.isArray(t)){const{creator:r}=getAtQueryFn(e,t[0].creator);return r.meta.type.isPlain?[r]:1===r.meta.type.asMap.hashers.length?[r,t.slice(1)]:[r,...t.slice(1)]}return[getAtQueryFn(e,t.creator).creator]})),r):of([])))}_decorateExtrinsics({tx:e},t){const r=createSubmittable(this._type,this._rx,t),lazySection=t=>(0,de.T)({},Object.keys(e[t]),(n=>n.startsWith("$")?e[t][n]:this._decorateExtrinsicEntry(e[t][n],r))),n=Object.keys(e);for(let e=0,t=n.length;e<t;e++)(0,de.s)(r,n[e],lazySection);return r}_decorateExtrinsicEntry(e,t){const decorated=(...r)=>t(e(...r));return decorated.is=t=>e.is(t),this._decorateFunctionMeta(e,decorated)}_decorateStorage({query:e,registry:t},r,n){const i={},lazySection=i=>(0,de.T)({},Object.keys(e[i]),(s=>n?this._decorateStorageEntryAt(t,e[i][s],r,n):this._decorateStorageEntry(e[i][s],r))),s=Object.keys(e);for(let e=0,t=s.length;e<t;e++)(0,de.s)(i,s[e],lazySection);return i}_decorateStorageEntry(e,t){const getArgs=(t,r)=>extractStorageArgs(r||this.__internal__registry,e,t),getQueryAt=t=>from(this.at(t)).pipe(map((t=>getAtQueryFn(t,e)))),r=this._decorateStorageCall(e,t);return r.creator=e,r.at=t(((e,...t)=>getQueryAt(e).pipe(switchMap((e=>e(...t)))))),r.hash=t(((...e)=>this._rpcCore.state.getStorageHash(getArgs(e)))),r.is=t=>t.section===e.section&&t.method===e.method,r.key=(...t)=>(0,A.X)((0,Kr.a)(e(...t))[1]),r.keyPrefix=(...t)=>(0,A.X)(e.keyPrefix(...t)),r.size=t(((...e)=>this._rpcCore.state.getStorageSize(getArgs(e)))),r.sizeAt=t(((e,...t)=>getQueryAt(e).pipe(switchMap((r=>this._rpcCore.state.getStorageSize(getArgs(t,r.creator.meta.registry),e)))))),e.iterKey&&e.meta.type.isMap&&(r.entries=t(memo(this.__internal__instanceId,((...t)=>this._retrieveMapEntries(e,null,t)))),r.entriesAt=t(memo(this.__internal__instanceId,((e,...t)=>getQueryAt(e).pipe(switchMap((r=>this._retrieveMapEntries(r.creator,e,t))))))),r.entriesPaged=t(memo(this.__internal__instanceId,(t=>this._retrieveMapEntriesPaged(e,void 0,t)))),r.keys=t(memo(this.__internal__instanceId,((...t)=>this._retrieveMapKeys(e,null,t)))),r.keysAt=t(memo(this.__internal__instanceId,((e,...t)=>getQueryAt(e).pipe(switchMap((r=>this._retrieveMapKeys(r.creator,e,t))))))),r.keysPaged=t(memo(this.__internal__instanceId,(t=>this._retrieveMapKeysPaged(e,void 0,t))))),this.supportMulti&&e.meta.type.isMap&&(r.multi=t((t=>1===e.meta.type.asMap.hashers.length?this._retrieveMulti(t.map((t=>[e,[t]]))):this._retrieveMulti(t.map((t=>[e,t])))))),this._decorateFunctionMeta(e,r)}_decorateStorageEntryAt(e,t,r,n){const getArgs=r=>extractStorageArgs(e,t,r),i=r(((...e)=>this._rpcCore.state.getStorage(getArgs(e),n)));return i.creator=t,i.hash=r(((...e)=>this._rpcCore.state.getStorageHash(getArgs(e),n))),i.is=e=>e.section===t.section&&e.method===t.method,i.key=(...e)=>(0,A.X)((0,Kr.a)(t(...e))[1]),i.keyPrefix=(...e)=>(0,A.X)(t.keyPrefix(...e)),i.size=r(((...e)=>this._rpcCore.state.getStorageSize(getArgs(e),n))),t.iterKey&&t.meta.type.isMap&&(i.entries=r(memo(this.__internal__instanceId,((...e)=>this._retrieveMapEntries(t,n,e)))),i.entriesPaged=r(memo(this.__internal__instanceId,(e=>this._retrieveMapEntriesPaged(t,n,e)))),i.keys=r(memo(this.__internal__instanceId,((...e)=>this._retrieveMapKeys(t,n,e)))),i.keysPaged=r(memo(this.__internal__instanceId,(e=>this._retrieveMapKeysPaged(t,n,e))))),this.supportMulti&&t.meta.type.isMap&&(i.multi=r((e=>1===t.meta.type.asMap.hashers.length?this._retrieveMulti(e.map((e=>[t,[e]])),n):this._retrieveMulti(e.map((e=>[t,e])),n)))),this._decorateFunctionMeta(t,i)}_queueStorage(e,t){const r=t===this.__internal__storageSubQ?this._rpcCore.state.subscribeStorage:this._rpcCore.state.queryStorageAt;let n,i=t.length-1,s=0;return-1!==i&&t[i]&&50!==t[i][1].length?(n=t[i][0],s=t[i][1].length,t[i][1].push(e)):(i++,n=from(new Promise((e=>{(0,Ye.d)((()=>{const r=t[i][1];delete t[i],e(r)}))}))).pipe(switchMap((e=>r(e)))),t.push([n,[e]])),n.pipe(map((e=>e[s])))}_decorateStorageCall(e,t){return t(memo(this.__internal__instanceId,((...t)=>{const r=extractStorageArgs(this.__internal__registry,e,t);return this.hasSubscriptions?this._queueStorage(r,this.__internal__storageSubQ):this._rpcCore.state.getStorage(r)})),{methodName:e.method,overrideNoSub:(...t)=>this._queueStorage(extractStorageArgs(this.__internal__registry,e,t),this.__internal__storageGetQ)})}_retrieveMulti(e,t){if(!e.length)return of([]);const r=this.hasSubscriptions&&!t?this._rpcCore.state.subscribeStorage:this._rpcCore.state.queryStorageAt;return e.length<=250?t?r(e,t):r(e):combineLatest((0,Bt.R)(e,250).map((e=>t?r(e,t):r(e)))).pipe(map(dt.a))}_retrieveMapKeys({iterKey:e,meta:t,method:r,section:n},i,s){if(!e||!t.type.isMap)throw new Error("keys can only be retrieved on maps");const a=e(...s).toHex(),o=new ae(a),c=i?e=>this._rpcCore.state.getKeysPaged(a,Xr,e,i):e=>this._rpcCore.state.getKeysPaged(a,Xr,e),setMeta=e=>e.setMeta(t,n,r);return o.pipe(switchMap(c),map((e=>e.map(setMeta))),tap((e=>(0,Ye.d)((()=>{e.length===Xr?o.next(e[999].toHex()):o.complete()})))),toArray(),map(dt.a))}_retrieveMapKeysPaged({iterKey:e,meta:t,method:r,section:n},i,s){if(!e||!t.type.isMap)throw new Error("keys can only be retrieved on maps");const setMeta=e=>e.setMeta(t,n,r);return(i?e=>this._rpcCore.state.getKeysPaged(e,s.pageSize,s.startKey||e,i):e=>this._rpcCore.state.getKeysPaged(e,s.pageSize,s.startKey||e))(e(...s.args).toHex()).pipe(map((e=>e.map(setMeta))))}_retrieveMapEntries(e,t,r){const n=t?e=>this._rpcCore.state.queryStorageAt(e,t):e=>this._rpcCore.state.queryStorageAt(e);return this._retrieveMapKeys(e,t,r).pipe(switchMap((e=>e.length?combineLatest((0,Bt.R)(e,250).map(n)).pipe(map((t=>(0,dt.a)(t).map(((t,r)=>[e[r],t]))))):of([]))))}_retrieveMapEntriesPaged(e,t,r){const n=t?e=>this._rpcCore.state.queryStorageAt(e,t):e=>this._rpcCore.state.queryStorageAt(e);return this._retrieveMapKeysPaged(e,t,r).pipe(switchMap((e=>e.length?n(e).pipe(map((t=>t.map(((t,r)=>[e[r],t]))))):of([]))))}_decorateDeriveRx(e){const t=this._runtimeVersion?.specName.toString();return decorateDeriveSections(e,function getAvailableDerives(e,t,r={}){return{...injectFunctions(e,t,xr),...injectFunctions(e,t,r)}}(this.__internal__instanceId,this._rx,(0,x.b)({},this._options.derives,this._options.typesBundle?.spec?.[t||""]?.derives)))}_decorateDerive(e){return decorateDeriveSections(e,this._rx.derive)}_rxDecorateMethod=e=>e}const tn=(0,Z.v)("api/init");function textToString(e){return e.toString()}class Init extends Decorate{__internal__atLast=null;__internal__healthTimer=null;__internal__registries=[];__internal__updateSub=null;__internal__waitingRegistries={};constructor(e,t,r){super(e,t,r),this.registry.setKnownTypes(e),e.source?this.__internal__registries=e.source.__internal__registries:this.registerTypes(e.types),this._rpc=this._decorateRpc(this._rpcCore,this._decorateMethod),this._rx.rpc=this._decorateRpc(this._rpcCore,this._rxDecorateMethod),this.supportMulti&&(this._queryMulti=this._decorateMulti(this._decorateMethod),this._rx.queryMulti=this._decorateMulti(this._rxDecorateMethod)),this._rx.signer=e.signer,this._rpcCore.setRegistrySwap((e=>this.getBlockRegistry(e))),this._rpcCore.setResolveBlockHash((e=>firstValueFrom(this._rpcCore.chain.getBlockHash(e)))),this.hasSubscriptions?(this._rpcCore.provider.on("disconnected",(()=>this.__internal__onProviderDisconnect())),this._rpcCore.provider.on("error",(e=>this.__internal__onProviderError(e))),this._rpcCore.provider.on("connected",(()=>this.__internal__onProviderConnect()))):this._options.noInitWarn||tn.warn("Api will be available in a limited mode since the provider does not support subscriptions"),this._rpcCore.provider.isConnected&&this.__internal__onProviderConnect().catch(k.l)}_initRegistry(e,t,r,n,i){e.clearCache(),e.setChainProperties(i||this.registry.getChainProperties()),e.setKnownTypes(this._options),e.register((0,J.hQ)(e,t,r.specName,r.specVersion)),e.setHasher((0,J.Pc)(e,t,r.specName)),e.knownTypes.typesBundle&&(e.knownTypes.typesAlias=(0,J.Os)(e,t,r.specName)),e.setMetadata(n,void 0,(0,x.b)({},(0,J.Kx)(e,t,r.specName),this._options.signedExtensions),this._options.noInitWarn)}_getDefaultRegistry(){return(0,X.Z8)(this.__internal__registries.find((({isDefault:e})=>e)),"Initialization error, cannot find the default registry")}async at(e,t){const r=(0,C.e)(e),n=(0,A.X)(r),i=await this.getBlockRegistry(r,t);return this.__internal__atLast&&this.__internal__atLast[0]===n||(this.__internal__atLast=[n,this._createDecorated(i,!0,null,r).decoratedApi]),this.__internal__atLast[1]}async _createBlockRegistry(e,t,r){const n=new Y.O(e),i=new Q.O(n,await firstValueFrom(this._rpcCore.state.getMetadata.raw(t.parentHash))),s=this._runtimeChain;if(!s)throw new Error("Invalid initializion order, runtimeChain is not available");this._initRegistry(n,s,r,i);const a={counter:0,lastBlockHash:e,metadata:i,registry:n,runtimeVersion:r};return this.__internal__registries.push(a),a}_cacheBlockRegistryProgress(e,t){let r=this.__internal__waitingRegistries[e];return(0,G.b)(r)&&(r=this.__internal__waitingRegistries[e]=new Promise(((r,n)=>{t().then((t=>{delete this.__internal__waitingRegistries[e],r(t)})).catch((t=>{delete this.__internal__waitingRegistries[e],n(t)}))}))),r}_getBlockRegistryViaVersion(e,t){if(t){const r=this.__internal__registries.find((({runtimeVersion:{specName:e,specVersion:r}})=>e.eq(t.specName)&&r.eq(t.specVersion)));if(r)return r.counter++,r.lastBlockHash=e,r}return null}async _getBlockRegistryViaHash(e){if(!this._genesisHash||!this._runtimeVersion)throw new Error("Cannot retrieve data on an uninitialized chain");const t=this.registry.createType("HeaderPartial",this._genesisHash.eq(e)?{number:ee.Yz,parentHash:this._genesisHash}:await firstValueFrom(this._rpcCore.chain.getHeader.raw(e)));if(t.parentHash.isEmpty)throw new Error("Unable to retrieve header and parent from supplied hash");const[r,n]=(0,J.BN)(this._genesisHash,t.number),i=this.registry.createType("RuntimeVersionPartial",await firstValueFrom(this._rpcCore.state.getRuntimeVersion.raw(t.parentHash)));return this._getBlockRegistryViaVersion(e,i)||await this._cacheBlockRegistryProgress(i.toHex(),(()=>this._createBlockRegistry(e,t,i)))}async getBlockRegistry(e,t){return this.__internal__registries.find((({lastBlockHash:t})=>t&&(0,te.f)(t,e)))||this._getBlockRegistryViaVersion(e,t)||await this._cacheBlockRegistryProgress((0,A.X)(e),(()=>this._getBlockRegistryViaHash(e)))}async _loadMeta(){return this._isReady?(this._options.source||this._subscribeUpdates(),!0):(this._unsubscribeUpdates(),[this._genesisHash,this._runtimeMetadata]=this._options.source?._isReady?await this._metaFromSource(this._options.source):await this._metaFromChain(this._options.metadata),this._initFromMeta(this._runtimeMetadata))}async _metaFromSource(e){this._extrinsicType=e.extrinsicVersion,this._runtimeChain=e.runtimeChain,this._runtimeVersion=e.runtimeVersion;const t=Object.keys(e.rpc),r=[];for(let n=0,i=t.length;n<i;n++){const i=t[n],s=Object.keys(e.rpc[i]);for(let e=0,t=s.length;e<t;e++)r.push(`${i}_${s[e]}`)}return this._filterRpc(r,(0,J.V3)(this.registry,e.runtimeChain,e.runtimeVersion.specName)),[e.genesisHash,e.runtimeMetadata]}_subscribeUpdates(){!this.__internal__updateSub&&this.hasSubscriptions&&(this.__internal__updateSub=this._rpcCore.state.subscribeRuntimeVersion().pipe(switchMap((e=>this._runtimeVersion?.specVersion.eq(e.specVersion)?of(!1):this._rpcCore.state.getMetadata().pipe(map((t=>{tn.log(`Runtime version updated to spec=${e.specVersion.toString()}, tx=${e.transactionVersion.toString()}`),this._runtimeMetadata=t,this._runtimeVersion=e,this._rx.runtimeVersion=e;const r=this._getDefaultRegistry(),n=this._runtimeChain;if(!n)throw new Error("Invalid initializion order, runtimeChain is not available");return r.metadata=t,r.runtimeVersion=e,this._initRegistry(this.registry,n,e,t),this._injectMetadata(r,!0),!0})))))).subscribe())}async _metaFromChain(e){const[t,r,n,i,s,a]=await Promise.all([firstValueFrom(this._rpcCore.chain.getBlockHash(0)),firstValueFrom(this._rpcCore.state.getRuntimeVersion()),firstValueFrom(this._rpcCore.system.chain()),firstValueFrom(this._rpcCore.system.properties()),firstValueFrom(this._rpcCore.rpc.methods()),e?Promise.resolve(null):firstValueFrom(this._rpcCore.state.getMetadata())]);this._runtimeChain=n,this._runtimeVersion=r,this._rx.runtimeVersion=r;const o=`${t.toHex()||"0x"}-${r.specVersion.toString()}`,c=a||(e?.[o]?new Q.O(this.registry,e[o]):await firstValueFrom(this._rpcCore.state.getMetadata()));return this._initRegistry(this.registry,n,r,c,i),this._filterRpc(s.methods.map(textToString),(0,J.V3)(this.registry,n,r.specName)),this._subscribeUpdates(),this.__internal__registries.length||this.__internal__registries.push({counter:0,isDefault:!0,metadata:c,registry:this.registry,runtimeVersion:r}),c.getUniqTypes(this._options.throwOnUnknown||!1),[t,c]}_initFromMeta(e){const t=this._runtimeVersion;if(!t)throw new Error("Invalid initializion order, runtimeVersion is not available");return this._extrinsicType=e.asLatest.extrinsic.version.toNumber(),this._rx.extrinsicType=this._extrinsicType,this._rx.genesisHash=this._genesisHash,this._rx.runtimeVersion=t,this._injectMetadata(this._getDefaultRegistry(),!0),this._rx.derive=this._decorateDeriveRx(this._rxDecorateMethod),this._derive=this._decorateDerive(this._decorateMethod),!0}_subscribeHealth(){this._unsubscribeHealth(),this.__internal__healthTimer=this.hasSubscriptions?setInterval((()=>{firstValueFrom(this._rpcCore.system.health.raw()).catch(k.l)}),1e4):null}_unsubscribeHealth(){this.__internal__healthTimer&&(clearInterval(this.__internal__healthTimer),this.__internal__healthTimer=null)}_unsubscribeUpdates(){this.__internal__updateSub&&(this.__internal__updateSub.unsubscribe(),this.__internal__updateSub=null)}_unsubscribe(){this._unsubscribeHealth(),this._unsubscribeUpdates()}async __internal__onProviderConnect(){this._isConnected.next(!0),this.emit("connected");try{const e=!1===this._options.initWasm||await(0,re.C)(),t=await this._loadMeta();this._subscribeHealth(),t&&!this._isReady&&e&&(this._isReady=!0,this.emit("ready",this))}catch(e){const t=new Error(`FATAL: Unable to initialize the API: ${e.message}`);tn.error(t),this.emit("error",t)}}__internal__onProviderDisconnect(){this._isConnected.next(!1),this._unsubscribe(),this.emit("disconnected")}__internal__onProviderError(e){this.emit("error",e)}}function assertResult(e){if(void 0===e)throw new Error("Api interfaces needs to be initialized before using, wait for 'isReady'");return e}class Getters extends Init{get call(){return assertResult(this._call)}get consts(){return assertResult(this._consts)}get derive(){return assertResult(this._derive)}get errors(){return assertResult(this._errors)}get events(){return assertResult(this._events)}get extrinsicVersion(){return this._extrinsicType}get genesisHash(){return assertResult(this._genesisHash)}get isConnected(){return this._isConnected.getValue()}get libraryInfo(){return`${q} v${I}`}get query(){return assertResult(this._query)}get queryMulti(){return assertResult(this._queryMulti)}get rpc(){return assertResult(this._rpc)}get runtimeChain(){return assertResult(this._runtimeChain)}get runtimeMetadata(){return assertResult(this._runtimeMetadata)}get runtimeVersion(){return assertResult(this._runtimeVersion)}get rx(){return assertResult(this._rx)}get stats(){return this._rpcCore.stats}get type(){return this._type}get tx(){return assertResult(this._extrinsics)}findCall(e){return findCall(this.registry,e)}findError(e){return findError(this.registry,e)}}class ApiBase extends Getters{constructor(e={},t,r){super(e,t,r)}connect(){return this._rpcCore.connect()}disconnect(){return this._unsubscribe(),this._rpcCore.disconnect()}setSigner(e){this._rx.signer=e}async sign(e,t,{signer:r}={}){if((0,E.K)(e)){const n=r||this._rx.signer;if(!n?.signRaw)throw new Error("No signer exists with a signRaw interface. You possibly need to pass through an explicit keypair for the origin so it can be used for signing.");return(await n.signRaw((0,x.b)({type:"bytes"},t,{address:e}))).signature}return(0,A.X)(e.sign((0,C.e)(t.data)))}}class Combinator{__internal__allHasFired=!1;__internal__callback;__internal__fired=[];__internal__fns=[];__internal__isActive=!0;__internal__results=[];__internal__subscriptions=[];constructor(e,t){this.__internal__callback=t,this.__internal__subscriptions=e.map((async(e,t)=>{const[r,...n]=Array.isArray(e)?e:[e];return this.__internal__fired.push(!1),this.__internal__fns.push(r),r(...n,this._createCallback(t))}))}_allHasFired(){return this.__internal__allHasFired||=0===this.__internal__fired.filter((e=>!e)).length,this.__internal__allHasFired}_createCallback(e){return t=>{this.__internal__fired[e]=!0,this.__internal__results[e]=t,this._triggerUpdate()}}_triggerUpdate(){if(this.__internal__isActive&&(0,Oe.T)(this.__internal__callback)&&this._allHasFired())try{Promise.resolve(this.__internal__callback(this.__internal__results)).catch(k.l)}catch{}}unsubscribe(){this.__internal__isActive&&(this.__internal__isActive=!1,Promise.all(this.__internal__subscriptions.map((async e=>{try{const t=await e;(0,Oe.T)(t)&&t()}catch{}}))).catch((()=>{})))}}function promiseTracker(e,t){let r=!1;return{reject:e=>(r||(r=!0,t(e)),pt),resolve:t=>{r||(r=!0,e(t))}}}function toPromiseMethod(e,t){const r=!(!t?.methodName||!t.methodName.includes("subscribe"));return function(...n){const[i,s]=function extractArgs(e,t){const r=e.slice(),n=e.length&&(0,Oe.T)(e[e.length-1])?r.pop():void 0;if(t&&!(0,Oe.T)(n))throw new Error("Expected a callback to be passed with subscriptions");return[r,n]}(n,r);return s?function decorateSubscribe(e,t,r){return new Promise(((n,i)=>{const s=promiseTracker(n,i),a=e(...t).pipe(catchError((e=>s.reject(e))),tap((()=>s.resolve((()=>a.unsubscribe()))))).subscribe((e=>{(0,Ye.d)((()=>r(e)))}))}))}(e,i,s):function decorateCall(e,t){return new Promise(((r,n)=>{const i=promiseTracker(r,n),s=e(...t).pipe(catchError((e=>i.reject(e)))).subscribe((e=>{i.resolve(e),(0,Ye.d)((()=>s.unsubscribe()))}))}))}(t?.overrideNoSub||e,i)}}class ApiPromise extends ApiBase{__internal__isReadyPromise;__internal__isReadyOrErrorPromise;constructor(e){super(e,"promise",toPromiseMethod),this.__internal__isReadyPromise=new Promise((e=>{super.once("ready",(()=>e(this)))})),this.__internal__isReadyOrErrorPromise=new Promise(((e,t)=>{const r=promiseTracker(e,t);super.once("ready",(()=>r.resolve(this))),super.once("error",(e=>r.reject(e)))}))}static create(e){const t=new ApiPromise(e);return e&&e.throwOnConnect?t.isReadyOrError:(t.isReadyOrError.catch(k.l),t.isReady)}get isReady(){return this.__internal__isReadyPromise}get isReadyOrError(){return this.__internal__isReadyOrErrorPromise}clone(){return new ApiPromise((0,x.b)({},this._options,{source:this}))}async combineLatest(e,t){const r=new Combinator(e,t);return()=>{r.unsubscribe()}}}}}]);
//# sourceMappingURL=25261.9efe4fc434.chunk.js.map