!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c02d2e6f-79be-4da2-86d0-05eb998b155d",e._sentryDebugIdIdentifier="sentry-dbid-c02d2e6f-79be-4da2-86d0-05eb998b155d")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[13749],{313749:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var r=n(324586),a=n(586330),o=n(514041),i=n(490343),s=n(325809),c=n(162616),u=n(384013),l=n(208257),d=n(351574),p=n(834015),f=n(714191),m=n(654004),y=n(831085);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ScanQrCameraDemo=function(){var e,[t,n]=(0,o.useState)(!1);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(i.Button,{onPress:function(){return n(!t)},"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/ScanQrCode.tsx",children:t?"关闭":"打开"}),t?(0,y.jsx)(i.Stack,{mt:20,w:360,h:600,children:(0,y.jsx)(d.g,{handleBarCodeScanned:(e=(0,a.A)((function*(e){return alert(e),{}})),function(t){return e.apply(this,arguments)})})}):null]})},ScanQRCodeGallery=function(){var e,t=(0,p.A)(),{activeAccount:{account:n}}=(0,c.LH)({num:0}),[r]=(0,u.RI)(),[s]=(0,u.D4)(),l=(0,o.useCallback)((e=(0,a.A)((function*(e){try{yield t.start(_objectSpread(_objectSpread({handlers:t.PARSE_HANDLER_NAMES.all},e),{},{account:n,tokens:{data:r.tokens,keys:r.keys,map:s}}))}catch(e){}})),function(t){return e.apply(this,arguments)}),[t,n,r,s]);return(0,y.jsx)(m.P,{description:"..",suggestions:["..."],boundaryConditions:["..."],elements:[{title:"命令式弹出 Modal(自动处理)",element:(0,y.jsx)(i.Button,{onPress:function(){return l({autoHandleResult:!0})},children:"打开"})},{title:"命令式弹出 Modal(不自动处理，qrWalletScene = true & showProTutorial = false)",element:(0,y.jsx)(i.Button,{onPress:function(){return l({autoHandleResult:!1,qrWalletScene:!0,showProTutorial:!1})},children:"打开"})},{title:"命令式弹出 Modal(不自动处理，qrWalletScene = true & showProTutorial = true)",element:(0,y.jsx)(i.Button,{onPress:function(){return l({autoHandleResult:!1,qrWalletScene:!0,showProTutorial:!0})},children:"打开"})},{title:"单独测试 Camera 权限等",element:(0,y.jsx)(ScanQrCameraDemo,{})}],"data-sentry-element":"Layout","data-sentry-component":"ScanQRCodeGallery","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/ScanQrCode.tsx"})};const g=function ScanQRCodeGalleryContainer(){return(0,y.jsx)(l.p,{"data-sentry-element":"HomeTokenListProviderMirror","data-sentry-component":"ScanQRCodeGalleryContainer","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/ScanQrCode.tsx",children:(0,y.jsx)(s.b8,{config:{sceneName:f.Zs.home},enabledNum:[0],"data-sentry-element":"AccountSelectorProviderMirror","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/ScanQrCode.tsx",children:(0,y.jsx)(ScanQRCodeGallery,{"data-sentry-element":"ScanQRCodeGallery","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/ScanQrCode.tsx"})})})}},654004:(e,t,n)=>{"use strict";n.d(t,{P:()=>Layout});var r=n(586330),a=n(654266),o=n(490343),i=n(765388),s=n(643087),c=n(498356),u=n(193068),l=n(831085),FormattedText=function({text:e}){return"string"==typeof e?(0,l.jsx)(o.Stack,{children:(0,l.jsxs)(o.SizableText,{children:[e,"。 "]})}):Array.isArray(e)&&0===e.length?null:(0,l.jsx)(o.Stack,{"data-sentry-element":"Stack","data-sentry-component":"FormattedText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:(0,l.jsx)(o.Stack,{gap:"$1","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:e.map((function(t,n){return(0,l.jsx)(o.Stack,{children:(0,l.jsxs)(o.SizableText,{children:[n+1,". ",t,n===e.length-1?"。":"；"]})},n.toString())}))})})};function Layout({description:e="",suggestions:t=[],boundaryConditions:n=[],elements:d=[],scrollEnabled:p=!0,contentInsetAdjustmentBehavior:f="never",skipLoading:m=!1,children:y}){var g=(0,i.U6)(),h=(0,c.A)();return(0,l.jsx)(o.Page,{skipLoading:m,"data-sentry-element":"Page","data-sentry-component":"Layout","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:(0,l.jsx)(o.ScrollView,{maxWidth:"100%",scrollEnabled:p,flex:1,marginBottom:g,paddingHorizontal:"$5",contentContainerStyle:{paddingTop:20,paddingBottom:280},keyboardDismissMode:"on-drag",contentInsetAdjustmentBehavior:f,"data-sentry-element":"ScrollView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:(0,l.jsxs)(o.Stack,{marginHorizontal:"auto",maxWidth:"100%",width:576,gap:"$6","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:[(0,l.jsxs)(o.XStack,{"data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:[(0,l.jsx)(o.IconButton,{icon:"HomeLineOutline",onPress:function(){h.dispatch(a.y9.replace(u.WP.Main,{screen:u.V4.Developer,params:{screen:u.f$.TabDeveloper}}))},"data-sentry-element":"IconButton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx"}),(0,l.jsx)(o.Button,{ml:"$4",onPress:(0,r.A)((function*(){yield s.A.serviceSetting.setTheme("light")})),"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:"Light Theme"}),(0,l.jsx)(o.Button,{ml:"$4",variant:"primary",onPress:(0,r.A)((function*(){yield s.A.serviceSetting.setTheme("dark")})),"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:"Dark Theme"})]}),e?(0,l.jsxs)(o.Stack,{gap:"$2",children:[(0,l.jsx)(o.Stack,{children:(0,l.jsx)(o.SizableText,{size:"$headingXl",children:"使用说明"})}),(0,l.jsx)(o.Stack,{children:(0,l.jsx)(FormattedText,{text:e})})]}):null,t?(0,l.jsxs)(o.Stack,{gap:"$2",children:[(0,l.jsx)(o.Stack,{children:(0,l.jsx)(o.SizableText,{size:"$headingXl",children:"使用建议"})}),(0,l.jsx)(FormattedText,{text:t})]}):null,n?.length>0?(0,l.jsxs)(o.Stack,{gap:"$2",children:[(0,l.jsx)(o.Stack,{children:(0,l.jsx)(o.SizableText,{size:"$headingXl",children:"注意事项"})}),(0,l.jsx)(FormattedText,{text:n})]}):null,(0,l.jsxs)(o.Stack,{gap:"$2","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:[(0,l.jsx)(o.Stack,{"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:(0,l.jsx)(o.SizableText,{size:"$headingXl","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:"组件案例"})}),(0,l.jsx)(o.Stack,{"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:d?.map((function(e,t){return(0,l.jsxs)(o.Stack,{gap:"$2",pb:"$8",mb:"$8",borderBottomWidth:"$px",borderBottomColor:"$borderSubdued",children:[(0,l.jsxs)(o.Stack,{flexDirection:"column",children:[(0,l.jsx)(o.SizableText,{size:"$headingLg",children:e.title}),e.description?(0,l.jsx)(o.Stack,{paddingTop:1,children:(0,l.jsxs)(o.SizableText,{children:[e.description,"。"]})}):null]}),(0,l.jsx)(o.Stack,{children:"function"==typeof e.element?(0,l.jsx)(e.element,{}):e.element})]},`elements-${t}`)}))}),(0,l.jsx)(o.Stack,{"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Developer/pages/Gallery/Components/stories/utils/Layout.tsx",children:y?(0,l.jsx)(o.Stack,{gap:"$3",children:y}):null})]})]})})})}},351574:(e,t,n)=>{"use strict";n.d(t,{g:()=>ScanQrCode});var r=n(586330),a=n(514041),o=n(324586),i=n(230414),s=n(929296),c=n(195309),u=n(972715),l=n(72631),d=n(719102),p=n(16706);function _handleRequestPermissionsAsync(){return _handleRequestPermissionsAsync=(0,r.A)((function*(){try{return yield function getUserMedia(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||function(){var e=new Error("Permission unimplemented");throw e.code=0,e.name="NotAllowedError",e};return new Promise((function(n,r){t.call(navigator,e,n,r)}))}({video:!0}),{status:p.W.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch({message:e}){return function handleGetUserMediaError({message:e}){return"Permission dismissed"===e?{status:p.W.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1}:{status:p.W.DENIED,expires:"never",canAskAgain:!0,granted:!1}}({message:e})}})),_handleRequestPermissionsAsync.apply(this,arguments)}function _handlePermissionsQueryAsync(){return(_handlePermissionsQueryAsync=(0,r.A)((function*(){if(!navigator?.permissions?.query)throw new l.V("expo-barcode-scanner","navigator.permissions API is not available");var{state:e}=yield navigator.permissions.query({name:"camera"});switch(e){case"prompt":return{status:p.W.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1};case"granted":return{status:p.W.GRANTED,expires:"never",canAskAgain:!0,granted:!0};case"denied":return{status:p.W.DENIED,expires:"never",canAskAgain:!0,granted:!1}}}))).apply(this,arguments)}const f={get name(){return"ExpoBarCodeScannerModule"},get BarCodeType(){return{code39mod43:"code39mod43",code138:"code138",interleaved2of5:"interleaved2of5",aztec:"aztec",ean13:"ean13",ean8:"ean8",qr:"qr",pdf417:"pdf417",upc_e:"upc_e",datamatrix:"datamatrix",code39:"code39",code93:"code93",itf14:"itf14",codabar:"codabar",code128:"code128",upc_a:"upc_a"}},get Type(){return{front:"front",back:"back"}},requestPermissionsAsync:()=>(0,r.A)((function*(){return function handleRequestPermissionsAsync(){return _handleRequestPermissionsAsync.apply(this,arguments)}()}))(),getPermissionsAsync:()=>(0,r.A)((function*(){return function handlePermissionsQueryAsync(){return _handlePermissionsQueryAsync.apply(this,arguments)}()}))()};var m=n(722844),y=n(230690),g=n(831085);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var n,r=(0,u.A)(e);if(t){var a=(0,u.A)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.A)(this,n)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var h,v=function(e){(0,s.A)(ExpoBarCodeScannerView,e);var t=_createSuper(ExpoBarCodeScannerView);function ExpoBarCodeScannerView(){return t.apply(this,arguments)}return ExpoBarCodeScannerView.prototype.render=function render(){return(0,g.jsx)(y.A,{"data-sentry-element":"View","data-sentry-component":"ExpoBarCodeScannerView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/node_modules/expo-barcode-scanner/build/ExpoBarCodeScannerView.web.js",children:(0,g.jsx)(m.A,{"data-sentry-element":"Text","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/node_modules/expo-barcode-scanner/build/ExpoBarCodeScannerView.web.js",children:"BarCodeScanner Component not supported on the web"})})},(0,i.A)(ExpoBarCodeScannerView)}(a.Component);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BarCodeScanner_createSuper(e){var t=BarCodeScanner_isNativeReflectConstruct();return function _createSuperInternal(){var n,r=(0,u.A)(e);if(t){var a=(0,u.A)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.A)(this,n)}}function BarCodeScanner_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BarCodeScanner_isNativeReflectConstruct=function(){return!!e})()}var{BarCodeType:A,Type:b}=f,_=!1,C=function(e){(0,s.A)(BarCodeScanner,e);var t=BarCodeScanner_createSuper(BarCodeScanner);function BarCodeScanner(...e){var n;return(n=t.call(this,...e)).lastEvents={},n.lastEventsTimes={},n.onObjectDetected=function(e){return function({nativeEvent:t}){var{type:r}=t;n.lastEvents[r]&&n.lastEventsTimes[r]&&JSON.stringify(t)===n.lastEvents[r]&&Date.now()-n.lastEventsTimes[r]<500||e&&(e(t),n.lastEventsTimes[r]=new Date,n.lastEvents[r]=JSON.stringify(t))}},n}var n,a,o,c=BarCodeScanner.prototype;return c.componentDidMount=function componentDidMount(){_||(_=!0)},BarCodeScanner.getPermissionsAsync=(n=(0,r.A)((function*(){return f.getPermissionsAsync()})),function getPermissionsAsync(){return n.apply(this,arguments)}),BarCodeScanner.requestPermissionsAsync=(a=(0,r.A)((function*(){return f.requestPermissionsAsync()})),function requestPermissionsAsync(){return a.apply(this,arguments)}),BarCodeScanner.scanFromURLAsync=(o=(0,r.A)((function*(e,t=Object.values(A)){if(!f.scanFromURLAsync)throw new l.V("expo-barcode-scanner","scanFromURLAsync");if(Array.isArray(t)&&!t.length)throw new Error("No barCodeTypes specified; provide at least one barCodeType for scanner");return yield f.scanFromURLAsync(e,t)})),function scanFromURLAsync(e){return o.apply(this,arguments)}),c.render=function render(){var e=this.convertNativeProps(this.props),{onBarCodeScanned:t}=this.props;return(0,g.jsx)(v,_objectSpread(_objectSpread({},e),{},{onBarCodeScanned:this.onObjectDetected(t),"data-sentry-element":"ExpoBarCodeScannerView","data-sentry-component":"BarCodeScanner","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/node_modules/expo-barcode-scanner/build/BarCodeScanner.js"}))},c.convertNativeProps=function convertNativeProps(e){var t={};for(var[n,r]of Object.entries(e))"string"==typeof r&&BarCodeScanner.ConversionTables[n]?t[n]=BarCodeScanner.ConversionTables[n][r]:t[n]=r;return t},(0,i.A)(BarCodeScanner)}(a.Component);h=C,C.Constants={BarCodeType:A,Type:b},C.ConversionTables={type:b},C.defaultProps={type:b.back,barCodeTypes:Object.values(A)},C.usePermissions=(0,d.V)({getMethod:h.getPermissionsAsync,requestMethod:h.requestPermissionsAsync});var S,w,E,P,R,O,j,k,x,{Constants:M,getPermissionsAsync:D,requestPermissionsAsync:T,scanFromURLAsync:B}=C,I=n(908867),N=n(490343),U=n(153763),G=n(334439),F=n(663522),q=(n(596020),n(117746)),W=n(839850),V=n(34546),L=n(17617),H=n(867597);!function(e){e.front="front",e.back="back"}(S||(S={})),function(e){e.on="on",e.off="off",e.auto="auto",e.torch="torch"}(w||(w={})),function(e){e.on="on",e.off="off",e.auto="auto",e.singleShot="singleShot"}(E||(E={})),function(e){e.auto="auto",e.sunny="sunny",e.cloudy="cloudy",e.shadow="shadow",e.incandescent="incandescent",e.fluorescent="fluorescent",e.continuous="continuous",e.manual="manual"}(P||(P={})),function(e){e.png="png",e.jpg="jpg"}(R||(R={})),function(e){e.H264="avc1",e.HEVC="hvc1",e.JPEG="jpeg",e.AppleProRes422="apcn",e.AppleProRes4444="ap4h"}(O||(O={})),function(e){e.off="off",e.standard="standard",e.cinematic="cinematic",e.auto="auto"}(j||(j={})),function(e){e["2160p"]="2160p",e["1080p"]="1080p",e["720p"]="720p",e["480p"]="480p",e["4:3"]="4:3"}(k||(k={})),function(e){e[e.portrait=1]="portrait",e[e.portraitUpsideDown=2]="portraitUpsideDown",e[e.landscapeLeft=3]="landscapeLeft",e[e.landscapeRight=4]="landscapeRight"}(x||(x={}));var Z=n(683180);function WebUserMediaManager_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WebUserMediaManager_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WebUserMediaManager_ownKeys(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WebUserMediaManager_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _requestLegacyUserMediaAsync(){return(_requestLegacyUserMediaAsync=(0,r.A)((function*(e){var optionalSource=function(e){return{optional:[{sourceId:e}]}},constraintToSourceId=function(e){var{deviceId:t}=e;return"string"==typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"==typeof t&&t.ideal?t.ideal:null},t=yield new Promise((function(e){return MediaStreamTrack.getSources((function(t){return e(t)}))})),n=null,r=null;t.forEach((function(e){"audio"===e.kind?n=e.id:"video"===e.kind&&(r=e.id)}));var a=constraintToSourceId(e.audioConstraints);a&&(n=a);var o=constraintToSourceId(e.videoConstraints);return o&&(r=o),[optionalSource(n),optionalSource(r)]}))).apply(this,arguments)}function sourceSelectedAsync(e,t,n){return _sourceSelectedAsync.apply(this,arguments)}function _sourceSelectedAsync(){return(_sourceSelectedAsync=(0,r.A)((function*(e,t,n){var r={video:void 0===n||n};return e||(r.audio=void 0===t||t),yield getAnyUserMediaAsync(r)}))).apply(this,arguments)}function _requestUserMediaAsync(){return _requestUserMediaAsync=(0,r.A)((function*(e,t=!0){if(canGetUserMedia())return yield sourceSelectedAsync(t,e.audio,e.video);var[n,r]=yield function requestLegacyUserMediaAsync(e){return _requestLegacyUserMediaAsync.apply(this,arguments)}(e);return yield sourceSelectedAsync(t,n,r)})),_requestUserMediaAsync.apply(this,arguments)}function getAnyUserMediaAsync(e){return _getAnyUserMediaAsync.apply(this,arguments)}function _getAnyUserMediaAsync(){return _getAnyUserMediaAsync=(0,r.A)((function*(e,t=!1){try{return yield function getUserMediaAsync(e){return _getUserMediaAsync.apply(this,arguments)}(WebUserMediaManager_objectSpread(WebUserMediaManager_objectSpread({},e),{},{video:t||e.video}))}catch(n){if(!t&&"ConstraintNotSatisfiedError"===n.name)return yield getAnyUserMediaAsync(e,!0);throw n}})),_getAnyUserMediaAsync.apply(this,arguments)}function _getUserMediaAsync(){return(_getUserMediaAsync=(0,r.A)((function*(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);var t=navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia;return new Promise((function(n,r){return t.call(navigator,e,n,r)}))}))).apply(this,arguments)}function canGetUserMedia(){return Z.A.isDOMAvailable&&!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia)}function isFrontCameraAvailableAsync(e){return _isFrontCameraAvailableAsync.apply(this,arguments)}function _isFrontCameraAvailableAsync(){return(_isFrontCameraAvailableAsync=(0,r.A)((function*(e){return yield supportsCameraType(["front","user","facetime"],"user",e)}))).apply(this,arguments)}function isBackCameraAvailableAsync(e){return _isBackCameraAvailableAsync.apply(this,arguments)}function _isBackCameraAvailableAsync(){return(_isBackCameraAvailableAsync=(0,r.A)((function*(e){return yield supportsCameraType(["back","rear"],"environment",e)}))).apply(this,arguments)}function supportsCameraType(e,t,n){return _supportsCameraType.apply(this,arguments)}function _supportsCameraType(){return(_supportsCameraType=(0,r.A)((function*(e,t,n){if(!n){if(!navigator.mediaDevices.enumerateDevices)return null;n=yield navigator.mediaDevices.enumerateDevices()}var r=n.filter((function(e){return"videoinput"===e.kind})),[a]=r.filter((function(t){return e.some((function(e){return t.label.toLowerCase().includes(e)}))})),[o]=r.filter((function(e){if(!("getCapabilities"in e))return null;var n=e.getCapabilities();return n.facingMode?n.facingMode.find((function(e){return t})):null}));return o?.deviceId||a?.deviceId||null}))).apply(this,arguments)}function ExpoCameraManager_web_getUserMedia(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||function(){var e=new Error("Permission unimplemented");throw e.code=0,e.name="NotAllowedError",e};return new Promise((function(n,r){t.call(navigator,e,n,r)}))}function ExpoCameraManager_web_handleGetUserMediaError({message:e}){return"Permission dismissed"===e?{status:p.W.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1}:{status:p.W.DENIED,expires:"never",canAskAgain:!0,granted:!1}}function ExpoCameraManager_web_handleRequestPermissionsAsync(){return build_ExpoCameraManager_web_handleRequestPermissionsAsync.apply(this,arguments)}function build_ExpoCameraManager_web_handleRequestPermissionsAsync(){return(build_ExpoCameraManager_web_handleRequestPermissionsAsync=(0,r.A)((function*(){try{return yield ExpoCameraManager_web_getUserMedia({video:!0}),{status:p.W.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch({message:e}){return ExpoCameraManager_web_handleGetUserMediaError({message:e})}}))).apply(this,arguments)}function ExpoCameraManager_web_handlePermissionsQueryAsync(e){return build_ExpoCameraManager_web_handlePermissionsQueryAsync.apply(this,arguments)}function build_ExpoCameraManager_web_handlePermissionsQueryAsync(){return(build_ExpoCameraManager_web_handlePermissionsQueryAsync=(0,r.A)((function*(e){if(!navigator?.permissions?.query)throw new l.V("expo-camera","navigator.permissions API is not available");try{var{state:t}=yield navigator.permissions.query({name:e});switch(t){case"prompt":return{status:p.W.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1};case"granted":return{status:p.W.GRANTED,expires:"never",canAskAgain:!0,granted:!0};case"denied":return{status:p.W.DENIED,expires:"never",canAskAgain:!0,granted:!1}}}catch(e){if(e instanceof TypeError)return{status:p.W.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1};throw e}}))).apply(this,arguments)}const z={get name(){return"ExponentCameraManager"},get Type(){return{back:"back",front:"front"}},get FlashMode(){return{on:"on",off:"off",auto:"auto",torch:"torch"}},get AutoFocus(){return{on:"on",off:"off",auto:"auto",singleShot:"singleShot"}},get WhiteBalance(){return{auto:"auto",continuous:"continuous",manual:"manual"}},get VideoQuality(){return{}},get VideoStabilization(){return{}},isAvailableAsync:()=>(0,r.A)((function*(){return canGetUserMedia()}))(),takePicture:(e,t)=>(0,r.A)((function*(){return yield t.takePicture(e)}))(),pausePreview:e=>(0,r.A)((function*(){yield e.pausePreview()}))(),resumePreview:e=>(0,r.A)((function*(){return yield e.resumePreview()}))(),getAvailableCameraTypesAsync:()=>(0,r.A)((function*(){if(!canGetUserMedia()||!navigator.mediaDevices.enumerateDevices)return[];var e=yield navigator.mediaDevices.enumerateDevices();return(yield Promise.all([(yield isFrontCameraAvailableAsync(e))&&S.front,(yield isBackCameraAvailableAsync())&&S.back])).filter(Boolean)}))(),getAvailablePictureSizes:(e,t)=>(0,r.A)((function*(){return yield t.getAvailablePictureSizes(e)}))(),getPermissionsAsync:()=>(0,r.A)((function*(){return ExpoCameraManager_web_handlePermissionsQueryAsync("camera")}))(),requestPermissionsAsync:()=>(0,r.A)((function*(){return ExpoCameraManager_web_handleRequestPermissionsAsync()}))(),getCameraPermissionsAsync:()=>(0,r.A)((function*(){return ExpoCameraManager_web_handlePermissionsQueryAsync("camera")}))(),requestCameraPermissionsAsync:()=>(0,r.A)((function*(){return ExpoCameraManager_web_handleRequestPermissionsAsync()}))(),getMicrophonePermissionsAsync:()=>(0,r.A)((function*(){return ExpoCameraManager_web_handlePermissionsQueryAsync("microphone")}))(),requestMicrophonePermissionsAsync:()=>(0,r.A)((function*(){try{return yield ExpoCameraManager_web_getUserMedia({audio:!0}),{status:p.W.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch({message:e}){return ExpoCameraManager_web_handleGetUserMediaError({message:e})}}))()};var K=n(78958),$=n.n(K);function convertFlashModeJSONToNative(e){return"torch"===e}function convertWhiteBalanceJSONToNative(e){switch(e){case"on":case"auto":return"continuous";case"off":return"none";case"singleShot":return"single-shot";default:return}}function convertAutoFocusJSONToNative(e){switch(e){case"on":case"auto":return"continuous";case"off":return"manual";case"singleShot":return"single-shot";default:return}}var Q=Object.keys({"3840x2160":3840/2160,"1920x1080":1920/1080,"1280x720":1280/720,"640x480":640/480,"352x288":352/288}),Y={[R.jpg]:"image/jpeg",[R.png]:"image/png"},X={audio:!1,video:!0},J={[S.front]:"user",[S.back]:"environment"},ee={user:S.front,environment:S.back};var te=.92;function captureImageContext(e,{scale:t=1,isImageMirror:n=!1}){var{videoWidth:r,videoHeight:a}=e,{width:o,height:i}=function getImageSize(e,t,n){var r=e*n;return{width:r,height:t/(e/r)}}(r,a,t),s=document.createElement("canvas");s.width=o,s.height=i;var c=s.getContext("2d",{alpha:!1});if(!c)throw new Error("Context is not defined");return n&&c.setTransform(-1,0,0,1,s.width,0),c.drawImage(e,0,0,o,i),s}function captureImage(e,t){var n=function ensureCameraPictureOptions(e){var t={scale:1,imageType:R.png,isImageMirror:!1};for(var n in e)n in e&&void 0!==e[n]&&n in t&&(t[n]=e[n]);return t}(t),r=captureImageContext(e,n),{imageType:a,quality:o=te}=n;return function toDataURL(e,t,n){$()(Object.values(R).includes(t),`expo-camera: ${t} is not a valid ImageType. Expected a string from: ${Object.values(R).join(", ")}`);var r=Y[t];return t===R.jpg?($()(n<=1&&n>=0,`expo-camera: ${n} is not a valid image quality. Expected a number from 0...1`),e.toDataURL(r,n)):e.toDataURL(r)}(r,a,o)}function getIdealConstraints(e,t,n){var r={audio:!1,video:{}};if(function hasValidConstraints(e,t,n){return void 0!==e&&void 0!==t&&void 0!==n}(e,t,n))return X;var a=function getSupportedConstraints(){return navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints?navigator.mediaDevices.getSupportedConstraints():null}();if(!(a&&a.facingMode&&a.width&&a.height))return X;if(e&&Object.values(S).includes(e)){var o=J[e];if(function isWebKit(){return/WebKit/.test(navigator.userAgent)&&!/Edg/.test(navigator.userAgent)}()){var i="user"===o?"exact":"ideal";r.video.facingMode={[i]:o}}else r.video.facingMode={ideal:J[e]}}return function isMediaTrackConstraints(e){return e&&"boolean"!=typeof e.video}(r.video)&&(r.video.width=t,r.video.height=n),r}function _getPreferredStreamDevice(){return(_getPreferredStreamDevice=(0,r.A)((function*(e,t,n){try{return yield getStreamDevice(e,t,n)}catch(a){if(a instanceof OverconstrainedError&&"facingMode"===a.constraint){var r=e===S.back?S.front:S.back;return yield getStreamDevice(r,t,n)}throw a}}))).apply(this,arguments)}function getStreamDevice(e,t,n){return _getStreamDevice.apply(this,arguments)}function _getStreamDevice(){return _getStreamDevice=(0,r.A)((function*(e,t,n){var r=getIdealConstraints(e,t,n),a=yield function requestUserMediaAsync(e){return _requestUserMediaAsync.apply(this,arguments)}(r);return a})),_getStreamDevice.apply(this,arguments)}function syncTrackCapabilities(e,t){return _syncTrackCapabilities.apply(this,arguments)}function _syncTrackCapabilities(){return _syncTrackCapabilities=(0,r.A)((function*(e,t,n={}){t?.getVideoTracks&&(yield Promise.all(t.getVideoTracks().map((function(t){return function onCapabilitiesReady(e,t){return _onCapabilitiesReady.apply(this,arguments)}(e,t,n)}))))})),_syncTrackCapabilities.apply(this,arguments)}function _onCapabilitiesReady(){return(_onCapabilitiesReady=(0,r.A)((function*(e,t,n={}){var r=t.getCapabilities(),a={};for(var o of["exposureCompensation","colorTemperature","iso","brightness","contrast","saturation","sharpness","focusDistance","zoom"])r[o]&&(a[o]=convertNormalizedSetting(r[o],n[o]));function validatedInternalConstrainedValue(t,a,o){return function validatedConstrainedValue(e){var{constraintKey:t,settingsKey:n,convertedSetting:r,capabilities:a,settings:o,cameraType:i}=e;o[n];if(Array.isArray(a[t])&&r&&!a[t].includes(r))return void 0;return r}({constraintKey:t,settingsKey:a,convertedSetting:o(n[a]),capabilities:r,settings:n,cameraType:e})}r.focusMode&&void 0!==n.autoFocus&&(a.focusMode=validatedInternalConstrainedValue("focusMode","autoFocus",convertAutoFocusJSONToNative)),r.torch&&void 0!==n.flashMode&&(a.torch=validatedInternalConstrainedValue("torch","flashMode",convertFlashModeJSONToNative)),r.whiteBalanceMode&&void 0!==n.whiteBalance&&(a.whiteBalanceMode=validatedInternalConstrainedValue("whiteBalanceMode","whiteBalance",convertWhiteBalanceJSONToNative));try{yield t.applyConstraints({advanced:[a]})}catch(e){0}}))).apply(this,arguments)}function stopMediaStream(e){e&&(e.getAudioTracks&&e.getAudioTracks().forEach((function(e){return e.stop()})),e.getVideoTracks&&e.getVideoTracks().forEach((function(e){return e.stop()})),function isMediaStreamTrack(e){return"function"==typeof e.stop}(e)&&e.stop())}function setVideoSource(e,t){var n,r=null!=(n=window.URL.createObjectURL)?n:window.webkitURL.createObjectURL;if(void 0!==e.srcObject?e.srcObject=t:void 0!==e.mozSrcObject?e.mozSrcObject=t:t&&r&&(e.src=r(t)),!t){var a,o,i,s=null!=(a=window.URL.revokeObjectURL)?a:window.webkitURL.revokeObjectURL,c=null!=(o=null!=(i=e.src)?i:e.srcObject)?o:e.mozSrcObject;s&&"string"==typeof c&&s(c)}}function convertNormalizedSetting(e,t){if(t){var n=function convertRange(e,t,n=[0,1]){return(e-n[0])*(t[1]-t[0])/(n[1]-n[0])+t[0]}(t,[e.min,e.max]);return Math.min(e.max,Math.max(e.min,n))}}function useWebCameraStream_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useWebCameraStream_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useWebCameraStream_ownKeys(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useWebCameraStream_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=["autoFocus","flashMode","exposureCompensation","colorTemperature","iso","brightness","contrast","saturation","sharpness","focusDistance","whiteBalance","zoom"];function useWebCameraStream(e,t,n,{onCameraReady:o,onMountError:i}){var s=a.useRef(!1),c=a.useRef([]),u=a.useRef({autoFocus:"continuous",flashMode:"off",whiteBalance:"continuous",zoom:1}),[l,d]=a.useState(null),p=a.useMemo((function(){return l?l.getTracks()[0].getSettings():null}),[l]),f=a.useMemo((function(){if(!p)return null;var{facingMode:e="user"}=p;return ee[e]}),[p]),m=a.useCallback((0,r.A)((function*(){try{return yield function getPreferredStreamDevice(e,t,n){return _getPreferredStreamDevice.apply(this,arguments)}(t)}catch(e){return i&&i({nativeEvent:e}),null}})),[t,i]),y=a.useCallback((0,r.A)((function*(){var e=yield m();return function compareStreams(e,t){if(!e||!t)return!1;var n=e.getTracks()[0].getSettings(),r=t.getTracks()[0].getSettings();return n.deviceId===r.deviceId}(e,l)||(c.current.some((function(t){return t.id===e?.id}))||c.current.push(e),d(e),o&&o()),!1})),[m,d,o,l,c.current]);return a.useEffect((function(){s.current||(s.current=!0,y().then((function(e){s.current=e})).catch((function(){s.current=!1})))}),[t]),a.useEffect((function(){var e={};for(var r of Object.keys(n))if(ne.includes(r)){var a=n[r];a!==u.current[r]&&(e[r]=a)}var o=!!Object.keys(e).length,i=useWebCameraStream_objectSpread(useWebCameraStream_objectSpread({},u.current),e);o&&syncTrackCapabilities(t,l,e),u.current=i}),[n.autoFocus,n.flashMode,n.exposureCompensation,n.colorTemperature,n.iso,n.brightness,n.contrast,n.saturation,n.sharpness,n.focusDistance,n.whiteBalance,n.zoom]),a.useEffect((function(){e.current&&setVideoSource(e.current,l)}),[e.current,l]),a.useEffect((function(){return function(){for(var t of c.current)stopMediaStream(t);e.current&&setVideoSource(e.current,l)}}),[]),function useLoadedVideo(e,t){a.useEffect((function(){e&&e.addEventListener("loadedmetadata",(function(){requestAnimationFrame((function(){t()}))}))}),[e])}(e.current,(function(){syncTrackCapabilities(t,l,u.current)})),{type:f,mediaTrackSettings:p}}var re=n(166062);function useWebQRScanner(e,{isEnabled:t,captureOptions:n,interval:o,onScanned:i,onError:s}){var c=a.useRef(!1),u=a.useRef(void 0);function scanAsync(){return _scanAsync.apply(this,arguments)}function _scanAsync(){return _scanAsync=(0,r.A)((function*(){if(c.current&&i)try{var t=function captureImageData(e,t={}){if(!e||e.readyState!==e.HAVE_ENOUGH_DATA)return null;var n=captureImageContext(e,t),r=n.getContext("2d",{alpha:!1});return r&&n.width&&n.height?r.getImageData(0,0,n.width,n.height):null}(e.current,n);if(t){var[r]=yield(0,re.scanImageData)(t);r&&i({nativeEvent:{type:r.typeName,data:r.decode(),cornerPoints:r.points}})}}catch(e){s&&s({nativeEvent:e})}finally{if(0===o)return void stop();var a=!o||o<0?16:o;u.current=setTimeout((function(){scanAsync()}),a)}else stop()})),_scanAsync.apply(this,arguments)}function stop(){c.current=!1,clearTimeout(u.current)}a.useEffect((function(){return t&&(c.current=!0,scanAsync()),function(){t&&stop()}}),[t])}var ae=["type","pictureSize","poster"];function ExpoCamera_web_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ExpoCamera_web_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ExpoCamera_web_ownKeys(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ExpoCamera_web_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const oe=a.forwardRef((function(e,t){var{type:n,pictureSize:o,poster:i}=e,s=(0,W.A)(e,ae),c=a.useRef(null),u=useWebCameraStream(c,n,s,{onCameraReady(){s.onCameraReady&&s.onCameraReady()},onMountError:s.onMountError}),l=a.useMemo((function(){return!(!s.barCodeScannerSettings?.barCodeTypes?.includes("qr")||!s.onBarCodeScanned)}),[s.barCodeScannerSettings?.barCodeTypes,s.onBarCodeScanned]);useWebQRScanner(c,{interval:s.barCodeScannerSettings?.interval,isEnabled:l,captureOptions:{scale:1,isImageMirror:u.type===S.front},onScanned(e){s.onBarCodeScanned&&s.onBarCodeScanned(e)}}),a.useImperativeHandle(t,(function(){return{getAvailablePictureSizes:e=>(0,r.A)((function*(){return Q}))(),takePicture:e=>(0,r.A)((function*(){if(!c.current||c.current?.readyState!==c.current?.HAVE_ENOUGH_DATA)throw new V.A("ERR_CAMERA_NOT_READY","HTMLVideoElement does not have enough camera data to construct an image yet.");var t=u.mediaTrackSettings;if(!t)throw new V.A("ERR_CAMERA_NOT_READY","MediaStream is not ready yet.");return function capture(e,t,n){var r=captureImage(e,n),a={uri:r,base64:r,width:0,height:0};if(t){var{width:o=0,height:i=0}=t;a.width=o,a.height=i,a.exif=t}return n.onPictureSaved&&n.onPictureSaved(a),a}(c.current,t,ExpoCamera_web_objectSpread(ExpoCamera_web_objectSpread({},e),{},{onPictureSaved(t){e.onPictureSaved&&e.onPictureSaved(t),s.onPictureSaved&&s.onPictureSaved({nativeEvent:{data:t,id:-1}})}}))}))(),resumePreview:()=>(0,r.A)((function*(){c.current&&c.current.play()}))(),pausePreview:()=>(0,r.A)((function*(){c.current&&c.current.pause()}))()}}),[u.mediaTrackSettings,s.onPictureSaved]);var d=a.useMemo((function(){var e=u.type===z.Type.front;return[L.A.absoluteFill,ce.video,{pointerEvents:s.pointerEvents,transform:e?[{scaleX:-1}]:void 0}]}),[s.pointerEvents,u.type]);return(0,g.jsxs)(y.A,{style:[ce.videoWrapper,s.style],children:[(0,g.jsx)(se,{autoPlay:!0,playsInline:!0,muted:!0,poster:i,ref:c,style:d}),s.children]})}));var ie,se=a.forwardRef((function(e,t){return(0,H.A)("video",ExpoCamera_web_objectSpread(ExpoCamera_web_objectSpread({},e),{},{ref:t}))})),ce=L.A.create({videoWrapper:{flex:1,alignItems:"stretch",pointerEvents:"box-none"},video:{width:"100%",height:"100%",objectFit:"cover"}}),ue={type:z.Type,flashMode:z.FlashMode,autoFocus:z.AutoFocus,whiteBalance:z.WhiteBalance};function ensureNativeProps(e){var t=function convertNativeProps(e){if(!e||"object"!=typeof e)return{};var t={};for(var[n,r]of Object.entries(e))"string"==typeof r&&ue[n]?t[n]=ue[n][r]:t[n]=r;return t}(e);return t.onBarCodeScanned&&(t.barCodeScannerEnabled=!0),t.onFacesDetected&&(t.faceDetectorEnabled=!0),delete t.ratio,delete t.useCamera2Api,t}function Camera_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Camera_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Camera_ownKeys(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Camera_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Camera_createSuper(e){var t=Camera_isNativeReflectConstruct();return function _createSuperInternal(){var n,r=(0,u.A)(e);if(t){var a=(0,u.A)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.A)(this,n)}}function Camera_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Camera_isNativeReflectConstruct=function(){return!!e})()}var le={},de=1;function ensureRecordingOptions(e){var t=e||{};return t&&"object"==typeof t?"string"==typeof t.quality&&(t.quality=pe.Constants.VideoQuality[t.quality]):t={},t}function _onPictureSaved({nativeEvent:e}){var{id:t,data:n}=e,r=le[t];r&&(r(n),delete le[t])}var pe=function(e){(0,s.A)(Camera,e);var t,n,a,o,c,u,d,p,f,m=Camera_createSuper(Camera);function Camera(...e){var t;return(t=m.call(this,...e))._lastEvents={},t._lastEventsTimes={},t._onCameraReady=function(){t.props.onCameraReady&&t.props.onCameraReady()},t._onMountError=function({nativeEvent:e}){t.props.onMountError&&t.props.onMountError(e)},t._onResponsiveOrientationChanged=function({nativeEvent:e}){t.props.onResponsiveOrientationChanged&&t.props.onResponsiveOrientationChanged(e)},t._onObjectDetected=function(e){return function({nativeEvent:n}){var{type:r}=n;t._lastEvents[r]&&t._lastEventsTimes[r]&&JSON.stringify(n)===t._lastEvents[r]&&(new Date).getTime()-t._lastEventsTimes[r].getTime()<500||e&&(e(n),t._lastEventsTimes[r]=new Date,t._lastEvents[r]=JSON.stringify(n))}},t._setReference=function(e){e?(t._cameraRef=e,t._cameraHandle=e):(t._cameraRef=null,t._cameraHandle=null)},t}Camera.isAvailableAsync=(t=(0,r.A)((function*(){if(!z.isAvailableAsync)throw new l.V("expo-camera","isAvailableAsync");return yield z.isAvailableAsync()})),function isAvailableAsync(){return t.apply(this,arguments)}),Camera.getAvailableCameraTypesAsync=(n=(0,r.A)((function*(){if(!z.getAvailableCameraTypesAsync)throw new l.V("expo-camera","getAvailableCameraTypesAsync");return yield z.getAvailableCameraTypesAsync()})),function getAvailableCameraTypesAsync(){return n.apply(this,arguments)}),Camera.getAvailableVideoCodecsAsync=(a=(0,r.A)((function*(){if(!z.getAvailableVideoCodecsAsync)throw new l.V("Camera","getAvailableVideoCodecsAsync");return yield z.getAvailableVideoCodecsAsync()})),function getAvailableVideoCodecsAsync(){return a.apply(this,arguments)}),Camera.getPermissionsAsync=(o=(0,r.A)((function*(){return z.getPermissionsAsync()})),function getPermissionsAsync(){return o.apply(this,arguments)}),Camera.requestPermissionsAsync=(c=(0,r.A)((function*(){return z.requestPermissionsAsync()})),function requestPermissionsAsync(){return c.apply(this,arguments)}),Camera.getCameraPermissionsAsync=(u=(0,r.A)((function*(){return z.getCameraPermissionsAsync()})),function getCameraPermissionsAsync(){return u.apply(this,arguments)}),Camera.requestCameraPermissionsAsync=(d=(0,r.A)((function*(){return z.requestCameraPermissionsAsync()})),function requestCameraPermissionsAsync(){return d.apply(this,arguments)}),Camera.getMicrophonePermissionsAsync=(p=(0,r.A)((function*(){return z.getMicrophonePermissionsAsync()})),function getMicrophonePermissionsAsync(){return p.apply(this,arguments)}),Camera.requestMicrophonePermissionsAsync=(f=(0,r.A)((function*(){return z.requestMicrophonePermissionsAsync()})),function requestMicrophonePermissionsAsync(){return f.apply(this,arguments)});var y,h,v,A,b,_,C,S=Camera.prototype;return S.takePictureAsync=(y=(0,r.A)((function*(e){var t=function ensurePictureOptions(e){var t=e&&"object"==typeof e?e:{};if(t.quality||(t.quality=1),t.onPictureSaved){var n=de++;le[n]=t.onPictureSaved,t.id=n,t.fastMode=!0}return t}(e);return yield z.takePicture(t,this._cameraHandle)})),function takePictureAsync(e){return y.apply(this,arguments)}),S.getSupportedRatiosAsync=(h=(0,r.A)((function*(){if(!z.getSupportedRatios)throw new l.V("Camera","getSupportedRatiosAsync");return yield z.getSupportedRatios(this._cameraHandle)})),function getSupportedRatiosAsync(){return h.apply(this,arguments)}),S.getAvailablePictureSizesAsync=(v=(0,r.A)((function*(e){if(!z.getAvailablePictureSizes)throw new l.V("Camera","getAvailablePictureSizesAsync");return yield z.getAvailablePictureSizes(e,this._cameraHandle)})),function getAvailablePictureSizesAsync(e){return v.apply(this,arguments)}),S.recordAsync=(A=(0,r.A)((function*(e){if(!z.record)throw new l.V("Camera","recordAsync");var t=ensureRecordingOptions(e);return yield z.record(t,this._cameraHandle)})),function recordAsync(e){return A.apply(this,arguments)}),S.stopRecording=(b=(0,r.A)((function*(){if(!z.stopRecording)throw new l.V("Camera","stopRecording");return yield z.stopRecording(this._cameraHandle)})),function stopRecording(){return b.apply(this,arguments)}),S.pausePreview=(_=(0,r.A)((function*(){if(!z.pausePreview)throw new l.V("Camera","pausePreview");return yield z.pausePreview(this._cameraHandle)})),function pausePreview(){return _.apply(this,arguments)}),S.resumePreview=(C=(0,r.A)((function*(){if(!z.resumePreview)throw new l.V("Camera","resumePreview");return yield z.resumePreview(this._cameraHandle)})),function resumePreview(){return C.apply(this,arguments)}),S.render=function render(){var e=ensureNativeProps(this.props),t=this.props.onBarCodeScanned?this._onObjectDetected(this.props.onBarCodeScanned):void 0,n=this._onObjectDetected(this.props.onFacesDetected);return(0,g.jsx)(oe,Camera_objectSpread(Camera_objectSpread({},e),{},{ref:this._setReference,onCameraReady:this._onCameraReady,onMountError:this._onMountError,onBarCodeScanned:t,onFacesDetected:n,onPictureSaved:_onPictureSaved,onResponsiveOrientationChanged:this._onResponsiveOrientationChanged,"data-sentry-element":"ExpoCamera","data-sentry-component":"Camera","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/node_modules/expo-camera/build/Camera.js"}))},(0,i.A)(Camera)}(a.Component);ie=pe,pe.Constants={Type:z.Type,FlashMode:z.FlashMode,AutoFocus:z.AutoFocus,WhiteBalance:z.WhiteBalance,VideoQuality:z.VideoQuality,VideoStabilization:z.VideoStabilization||{},VideoCodec:z.VideoCodec},pe.ConversionTables=ue,pe.defaultProps={zoom:0,ratio:"4:3",focusDepth:0,faceDetectorSettings:{},type:z.Type.back,autoFocus:z.AutoFocus.on,flashMode:z.FlashMode.off,whiteBalance:z.WhiteBalance.auto},pe.useCameraPermissions=(0,d.V)({getMethod:ie.getCameraPermissionsAsync,requestMethod:ie.requestCameraPermissionsAsync}),pe.useMicrophonePermissions=(0,d.V)({getMethod:ie.getMicrophonePermissionsAsync,requestMethod:ie.requestMicrophonePermissionsAsync});var{Constants:fe,getPermissionsAsync:me,requestPermissionsAsync:ye,getCameraPermissionsAsync:ge,requestCameraPermissionsAsync:he,getMicrophonePermissionsAsync:ve,requestMicrophonePermissionsAsync:Ae}=pe,be=n(296827),_e=["style","children","handleScanResult"];function ScanCamera_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ScanCamera_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ScanCamera_ownKeys(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ScanCamera_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ScanCamera(e){var{style:t,children:n,handleScanResult:r}=e,a=(0,W.A)(e,_e);return(0,g.jsx)(pe,ScanCamera_objectSpread(ScanCamera_objectSpread({ref:function(e){return null===e&&be.U.scanQrCode.readQrCode.releaseCamera()},style:t,onBarCodeScanned:function({data:e}){return r?.(e)},barCodeScannerSettings:{barCodeTypes:[C.Constants.BarCodeType.qr]},responsiveOrientationWhenOrientationLocked:F.Ay.isNativeIOSPad},a),{},{"data-sentry-element":"Camera","data-sentry-component":"ScanCamera","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/ScanQrCode/components/ScanCamera/index.tsx",children:n}))}function ScanQrCode({handleBarCodeScanned:e,qrWalletScene:t}){var n=(0,I.A)(),o=(0,a.useRef)(void 0),[i,s]=(0,a.useState)(p.W.UNDETERMINED),c=(0,U.E)(),[u,l]=(0,a.useState)();c&&(o.current=void 0);var d,f=(0,a.useCallback)((d=(0,r.A)((function*(t){if(t&&o.current!==t&&(o.current=t,e)){var{progress:n}=yield e(t);n&&l(n)}})),function(e){return d.apply(this,arguments)}),[e]);(0,a.useEffect)((function(){return function(){o.current||e?.("")}}),[e]);var m=(0,a.useCallback)((0,r.A)((function*(){if((F.Ay.isDesktopMac||F.Ay.isDesktopWin?globalThis.desktopApi.getMediaAccessStatus("camera"):(yield D())?.status)!==p.W.GRANTED){var{status:e}=yield T();if(s(e),e!==p.W.GRANTED){var t=F.Ay.isRuntimeBrowser&&(F.Ay.isRuntimeChrome||F.Ay.isRuntimeEdge||F.Ay.isRuntimeBrave)?G.ETranslations.global_view_tutorial:G.ETranslations.global_go_settings;N.Dialog.show({tone:"warning",icon:"ErrorOutline",title:n.formatMessage({id:G.ETranslations.scan_camera_access_denied}),description:n.formatMessage({id:G.ETranslations.scan_enable_camera_permissions}),onConfirmText:n.formatMessage({id:t}),showCancelButton:!0,showConfirmButton:!0,onConfirm:function(){if(F.Ay.isRuntimeBrowser){if(F.Ay.isRuntimeChrome)return void(0,q.Dr)("https://support.google.com/chrome/answer/2693767");if(F.Ay.isRuntimeEdge)return void(0,q.Dr)("https://support.microsoft.com/zh-cn/windows/a83257bc-e990-d54a-d212-b5e41beba857");if(F.Ay.isRuntimeBrave)return void(0,q.Dr)("https://support.brave.com/hc/en-us/articles/360018205431")}(0,q.Ow)("camera")}})}}else s(p.W.GRANTED)})),[n]);return(0,a.useEffect)((function(){m()}),[m]),i===p.W.GRANTED?(0,g.jsxs)(ScanCamera,{style:{flex:1},handleScanResult:f,children:[t?(0,g.jsx)(N.YStack,{fullscreen:!0,children:F.Ay.isNativeAndroid?null:(0,g.jsx)(N.BlurView,{flex:1,contentStyle:{flex:1}})}):null,u?(0,g.jsx)(N.YStack,{fullscreen:!0,justifyContent:"flex-end",alignItems:"flex-end",children:(0,g.jsx)(N.Stack,{bg:"$blackA9",borderRadius:"$2",mr:"$3",mb:"$3",px:"$2",py:"$1",children:(0,g.jsx)(N.SizableText,{size:"$bodySmMedium",color:"$whiteA12",children:`${n.formatMessage({id:G.ETranslations.scanning_text})} ${(100*u).toFixed(0)}%`})})}):null]}):null}},719102:(e,t,n)=>{"use strict";n.d(t,{V:()=>createPermissionHook});var r=n(586330),a=n(839850),o=n(514041),i=["get","request"];function createPermissionHook(e){return function(t){return function usePermission(e,t){var n=(0,o.useRef)(!0),[s,c]=(0,o.useState)(null),u=t||{},{get:l=!0,request:d=!1}=u,p=(0,a.A)(u,i),f=(0,o.useCallback)((0,r.A)((function*(){var t=yield e.getMethod(Object.keys(p).length>0?p:void 0);return n.current&&c(t),t})),[e.getMethod]),m=(0,o.useCallback)((0,r.A)((function*(){var t=yield e.requestMethod(Object.keys(p).length>0?p:void 0);return n.current&&c(t),t})),[e.requestMethod]);return(0,o.useEffect)((function runMethods(){d&&m(),!d&&l&&f()}),[l,d,m,f]),(0,o.useEffect)((function didMount(){return n.current=!0,function(){n.current=!1}}),[]),[s,m,f]}(e,t)}}},16706:(e,t,n)=>{"use strict";var r;n.d(t,{W:()=>r}),function(e){e.GRANTED="granted",e.UNDETERMINED="undetermined",e.DENIED="denied"}(r||(r={}))},614745:e=>{e.exports={}},486e3:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CppObject=void 0;t.CppObject=class CppObject{constructor(e,t){this.ptr=e,this.inst=t}checkAlive(){if(!this.ptr)throw Error("Call after destroyed")}getPointer(){return this.checkAlive(),this.ptr}}},565859:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Image=void 0;const r=n(486e3),a=n(244292),o=n(21323);class Image extends r.CppObject{static async createFromGrayBuffer(e,t,n,r=0){const a=await(0,o.getInstance)(),i=a.HEAPU8,s=new Uint8Array(n),c=e*t;if(c!==s.byteLength)throw Error("dataBuf does not match width and height");const u=a._malloc(c);i.set(s,u);return new this(a._Image_create(e,t,808466521,u,c,r),a)}static async createFromRGBABuffer(e,t,n,r=0){const a=await(0,o.getInstance)(),i=a.HEAPU8,s=new Uint8Array(n),c=e*t;if(4*c!==s.byteLength)throw Error("dataBuf does not match width and height");const u=a._malloc(c);for(let e=0;e<c;++e){const t=s[4*e],n=s[4*e+1],r=s[4*e+2];i[u+e]=19595*t+38469*n+7472*r>>16}return new this(a._Image_create(e,t,808466521,u,c,r),a)}destroy(){this.checkAlive(),this.inst._Image_destory(this.ptr),this.ptr=0}getSymbols(){this.checkAlive();const e=this.inst._Image_get_symbols(this.ptr);return a.Symbol.createSymbolsFromPtr(e,this.inst.HEAPU8.buffer)}}t.Image=Image},586837:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageScanner=void 0;const r=n(486e3),a=n(21323),o=n(244292);class ImageScanner extends r.CppObject{static async create(){const e=await(0,a.getInstance)();return new this(e._ImageScanner_create(),e)}destroy(){this.checkAlive(),this.inst._ImageScanner_destory(this.ptr),this.ptr=0}setConfig(e,t,n){return this.checkAlive(),this.inst._ImageScanner_set_config(this.ptr,e,t,n)}enableCache(e=!0){this.checkAlive(),this.inst._ImageScanner_enable_cache(this.ptr,e)}recycleImage(e){this.checkAlive(),this.inst._ImageScanner_recycle_image(this.ptr,e.getPointer())}getResults(){this.checkAlive();const e=this.inst._ImageScanner_get_results(this.ptr);return o.Symbol.createSymbolsFromPtr(e,this.inst.HEAPU8.buffer)}scan(e){return this.checkAlive(),this.inst._ImageScanner_scan(this.ptr,e.getPointer())}}t.ImageScanner=ImageScanner},244292:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Symbol=void 0;const r=n(16537);class TypePointer{constructor(e,t){this.ptr=e,this.ptr32=e>>2,this.buf=t,this.HEAP8=new Int8Array(t),this.HEAPU32=new Uint32Array(t),this.HEAP32=new Int32Array(t)}}class SymbolPtr extends TypePointer{get type(){return this.HEAPU32[this.ptr32]}get data(){const e=this.HEAPU32[this.ptr32+4],t=this.HEAPU32[this.ptr32+5];return Int8Array.from(this.HEAP8.subarray(t,t+e))}get points(){const e=this.HEAPU32[this.ptr32+7],t=this.HEAPU32[this.ptr32+8]>>2,n=[];for(let r=0;r<e;++r){const e=this.HEAP32[t+2*r],a=this.HEAP32[t+2*r+1];n.push({x:e,y:a})}return n}get next(){const e=this.HEAPU32[this.ptr32+11];return e?new SymbolPtr(e,this.buf):null}get time(){return this.HEAPU32[this.ptr32+13]}get cacheCount(){return this.HEAP32[this.ptr32+14]}get quality(){return this.HEAP32[this.ptr32+15]}}class SymbolSetPtr extends TypePointer{get head(){const e=this.HEAPU32[this.ptr32+2];return e?new SymbolPtr(e,this.buf):null}}class Symbol{constructor(e){this.type=e.type,this.typeName=r.ZBarSymbolType[this.type],this.data=e.data,this.points=e.points,this.time=e.time,this.cacheCount=e.cacheCount,this.quality=e.quality}static createSymbolsFromPtr(e,t){if(0==e)return[];let n=new SymbolSetPtr(e,t).head;const r=[];for(;null!==n;)r.push(new Symbol(n)),n=n.next;return r}decode(e){return new TextDecoder(e).decode(this.data)}}t.Symbol=Symbol},16537:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZBarConfigType=t.ZBarSymbolType=void 0,function(e){e[e.ZBAR_NONE=0]="ZBAR_NONE",e[e.ZBAR_PARTIAL=1]="ZBAR_PARTIAL",e[e.ZBAR_EAN8=8]="ZBAR_EAN8",e[e.ZBAR_UPCE=9]="ZBAR_UPCE",e[e.ZBAR_ISBN10=10]="ZBAR_ISBN10",e[e.ZBAR_UPCA=12]="ZBAR_UPCA",e[e.ZBAR_EAN13=13]="ZBAR_EAN13",e[e.ZBAR_ISBN13=14]="ZBAR_ISBN13",e[e.ZBAR_I25=25]="ZBAR_I25",e[e.ZBAR_CODE39=39]="ZBAR_CODE39",e[e.ZBAR_PDF417=57]="ZBAR_PDF417",e[e.ZBAR_QRCODE=64]="ZBAR_QRCODE",e[e.ZBAR_CODE128=128]="ZBAR_CODE128",e[e.ZBAR_SYMBOL=255]="ZBAR_SYMBOL",e[e.ZBAR_ADDON2=512]="ZBAR_ADDON2",e[e.ZBAR_ADDON5=1280]="ZBAR_ADDON5",e[e.ZBAR_ADDON=1792]="ZBAR_ADDON"}(t.ZBarSymbolType||(t.ZBarSymbolType={})),function(e){e[e.ZBAR_CFG_ENABLE=0]="ZBAR_CFG_ENABLE",e[e.ZBAR_CFG_ADD_CHECK=1]="ZBAR_CFG_ADD_CHECK",e[e.ZBAR_CFG_EMIT_CHECK=2]="ZBAR_CFG_EMIT_CHECK",e[e.ZBAR_CFG_ASCII=3]="ZBAR_CFG_ASCII",e[e.ZBAR_CFG_NUM=4]="ZBAR_CFG_NUM",e[e.ZBAR_CFG_MIN_LEN=32]="ZBAR_CFG_MIN_LEN",e[e.ZBAR_CFG_MAX_LEN=33]="ZBAR_CFG_MAX_LEN",e[e.ZBAR_CFG_UNCERTAINTY=64]="ZBAR_CFG_UNCERTAINTY",e[e.ZBAR_CFG_POSITION=128]="ZBAR_CFG_POSITION",e[e.ZBAR_CFG_X_DENSITY=256]="ZBAR_CFG_X_DENSITY",e[e.ZBAR_CFG_Y_DENSITY=257]="ZBAR_CFG_Y_DENSITY"}(t.ZBarConfigType||(t.ZBarConfigType={}))},166062:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(565859),t),a(n(586837),t),a(n(218120),t),a(n(244292),t)},21323:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInstance=void 0;const r=n(943573);let a=null,o=(async()=>{if(a=await(0,r.loadWasmInstance)({}),!a)throw Error("WASM was not loaded");return a})();t.getInstance=async()=>await o},943573:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadWasmInstance=void 0;const a=r(n(242998)),o=r(n(843703)),locateFile=(e,t)=>("zbar.wasm"!=e&&console.error("Unexpected file:",e),a.default);t.loadWasmInstance=async e=>(e.locateFile=locateFile,await(0,o.default)(e))},218120:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scanImageData=t.scanRGBABuffer=t.scanGrayBuffer=t.getDefaultScanner=void 0;const r=n(565859),a=n(586837).ImageScanner.create();t.getDefaultScanner=async()=>await a;const scanImage=async(e,t)=>{void 0===t&&(t=await a);const n=t.scan(e);if(n<0)throw Error("Scan Failed");return 0===n?[]:e.getSymbols()};t.scanGrayBuffer=async(e,t,n,a)=>{const o=await r.Image.createFromGrayBuffer(t,n,e),i=await scanImage(o,a);return o.destroy(),i};t.scanRGBABuffer=async(e,t,n,a)=>{const o=await r.Image.createFromRGBABuffer(t,n,e),i=await scanImage(o,a);return o.destroy(),i};t.scanImageData=async(e,n)=>await(0,t.scanRGBABuffer)(e.data.buffer,e.width,e.height,n)},843703:(e,t,n)=>{var r,a=(r=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var t,a,o=void 0!==(e=e||{})?e:{};o.ready=new Promise((function(e,n){t=e,a=n}));var i,s={};for(i in o)o.hasOwnProperty(i)&&(s[i]=o[i]);var c,u,l,d,p,f=[],m="object"==typeof window,y="function"==typeof importScripts,g="object"==typeof{env:{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}}.versions&&"string"==typeof{env:{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}}.versions.node,h="";g?(h=y?n(241297).dirname(h)+"/":"//",c=function shell_read(e,t){return d||(d=n(614745)),p||(p=n(241297)),e=p.normalize(e),d.readFileSync(e,t?null:"utf8")},l=function readBinary(e){var t=c(e,!0);return t.buffer||(t=new Uint8Array(t)),function assert(e,t){e||abort("Assertion failed: "+t)}(t.buffer),t},u=function readAsync(e,t,r){d||(d=n(614745)),p||(p=n(241297)),e=p.normalize(e),d.readFile(e,(function(e,n){e?r(e):t(n.buffer)}))},{env:{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}}.argv.length>1&&{env:{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}}.argv[1].replace(/\\/g,"/"),f={env:{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}}.argv.slice(2),{env:{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}}.on("uncaughtException",(function(e){if(!(e instanceof ExitStatus))throw e})),{env:{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}}.on("unhandledRejection",(function(e){throw e})),o.inspect=function(){return"[Emscripten Module object]"}):(m||y)&&(y?h=self.location.href:"undefined"!=typeof document&&document.currentScript&&(h=document.currentScript.src),r&&(h=r),h=0!==h.indexOf("blob:")?h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):"",c=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},y&&(l=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),u=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var v,A=o.print||console.log.bind(console),b=o.printErr||console.warn.bind(console);for(i in s)s.hasOwnProperty(i)&&(o[i]=s[i]);s=null,o.arguments&&(f=o.arguments),o.thisProgram&&o.thisProgram,o.quit&&o.quit,o.wasmBinary&&(v=o.wasmBinary);var _;o.noExitRuntime;"object"!=typeof WebAssembly&&abort("no native wasm support detected");var C,S,w,E=!1,P="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&P)return P.decode(e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var c=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|c:(7&i)<<18|s<<12|c<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var u=i-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&i)<<6|s)}else o+=String.fromCharCode(i)}return o}function updateGlobalBufferAndViews(e){C=e,o.HEAP8=new Int8Array(e),o.HEAP16=new Int16Array(e),o.HEAP32=w=new Int32Array(e),o.HEAPU8=S=new Uint8Array(e),o.HEAPU16=new Uint16Array(e),o.HEAPU32=new Uint32Array(e),o.HEAPF32=new Float32Array(e),o.HEAPF64=new Float64Array(e)}o.INITIAL_MEMORY;var R,O=[],j=[],k=[],x=0,M=null,D=null;function abort(e){o.onAbort&&o.onAbort(e),b(e="Aborted("+e+")"),E=!0,e+=". Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw a(t),t}o.preloadedImages={},o.preloadedAudios={};var T,B,I="data:application/octet-stream;base64,";function isDataURI(e){return e.startsWith(I)}function isFileURI(e){return e.startsWith("file://")}function getBinary(e){try{if(e==T&&v)return new Uint8Array(v);if(l)return l(e);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?getWasmTableEntry(n)():getWasmTableEntry(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(o)}}function getWasmTableEntry(e){return R.get(e)}function emscripten_realloc_buffer(e){try{return _.grow(e-C.byteLength+65535>>>16),updateGlobalBufferAndViews(_.buffer),1}catch(e){}}isDataURI(T="zbar.wasm")||(T=function locateFile(e){return o.locateFile?o.locateFile(e,h):h+e}(T)),B=g?function(){var e={env:{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}}.hrtime();return 1e3*e[0]+e[1]/1e6}:function(){return performance.now()};var N,U={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=U.buffers[e];0===t||10===t?((1===e?A:b)(UTF8ArrayToString(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return U.varargs+=4,w[U.varargs-4>>2]},getStr:function(e){var t=function UTF8ToString(e,t){return e?UTF8ArrayToString(S,e,t):""}(e);return t},get64:function(e,t){return e}},G={f:function _clock_gettime(e,t){var n;if(0===e)n=Date.now();else{if(1!==e&&4!==e)return function setErrNo(e){return w[F()>>2]=e,e}(28),-1;n=B()}return w[t>>2]=n/1e3|0,w[t+4>>2]=n%1e3*1e3*1e3|0,0},c:function _emscripten_memcpy_big(e,t,n){S.copyWithin(e,t,t+n)},d:function _emscripten_resize_heap(e){var t,n,r=S.length,a=2147483648;if((e>>>=0)>a)return!1;for(var o=1;o<=4;o*=2){var i=r*(1+.2/o);if(i=Math.min(i,e+100663296),emscripten_realloc_buffer(Math.min(a,((t=Math.max(e,i))%(n=65536)>0&&(t+=n-t%n),t))))return!0}return!1},e:function _fd_close(e){return 0},b:function _fd_seek(e,t,n,r,a){},a:function _fd_write(e,t,n,r){for(var a=0,o=0;o<n;o++){var i=w[t>>2],s=w[t+4>>2];t+=8;for(var c=0;c<s;c++)U.printChar(e,S[i+c]);a+=s}return w[r>>2]=a,0}},F=(function createWasm(){var e={a:G};function receiveInstance(e,t){var n=e.exports;o.asm=n,updateGlobalBufferAndViews((_=o.asm.g).buffer),R=o.asm.s,function addOnInit(e){j.unshift(e)}(o.asm.h),function removeRunDependency(e){if(x--,o.monitorRunDependencies&&o.monitorRunDependencies(x),0==x&&(null!==M&&(clearInterval(M),M=null),D)){var t=D;D=null,t()}}()}function receiveInstantiationResult(e){receiveInstance(e.instance)}function instantiateArrayBuffer(t){return function getBinaryPromise(){if(!v&&(m||y)){if("function"==typeof fetch&&!isFileURI(T))return fetch(T,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+T+"'";return e.arrayBuffer()})).catch((function(){return getBinary(T)}));if(u)return new Promise((function(e,t){u(T,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return getBinary(T)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){b("failed to asynchronously prepare wasm: "+e),abort(e)}))}if(function addRunDependency(e){x++,o.monitorRunDependencies&&o.monitorRunDependencies(x)}(),o.instantiateWasm)try{return o.instantiateWasm(e,receiveInstance)}catch(e){return b("Module.instantiateWasm callback failed with error: "+e),!1}return function instantiateAsync(){return v||"function"!=typeof WebAssembly.instantiateStreaming||isDataURI(T)||isFileURI(T)||"function"!=typeof fetch?instantiateArrayBuffer(receiveInstantiationResult):fetch(T,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(receiveInstantiationResult,(function(e){return b("wasm streaming compile failed: "+e),b("falling back to ArrayBuffer instantiation"),instantiateArrayBuffer(receiveInstantiationResult)}))}))}().catch(a),{}}(),o.___wasm_call_ctors=function(){return(o.___wasm_call_ctors=o.asm.h).apply(null,arguments)},o._ImageScanner_create=function(){return(o._ImageScanner_create=o.asm.i).apply(null,arguments)},o._ImageScanner_destory=function(){return(o._ImageScanner_destory=o.asm.j).apply(null,arguments)},o._ImageScanner_set_config=function(){return(o._ImageScanner_set_config=o.asm.k).apply(null,arguments)},o._ImageScanner_enable_cache=function(){return(o._ImageScanner_enable_cache=o.asm.l).apply(null,arguments)},o._ImageScanner_recycle_image=function(){return(o._ImageScanner_recycle_image=o.asm.m).apply(null,arguments)},o._ImageScanner_get_results=function(){return(o._ImageScanner_get_results=o.asm.n).apply(null,arguments)},o._ImageScanner_scan=function(){return(o._ImageScanner_scan=o.asm.o).apply(null,arguments)},o._Image_create=function(){return(o._Image_create=o.asm.p).apply(null,arguments)},o._Image_destory=function(){return(o._Image_destory=o.asm.q).apply(null,arguments)},o._Image_get_symbols=function(){return(o._Image_get_symbols=o.asm.r).apply(null,arguments)},o.___errno_location=function(){return(F=o.___errno_location=o.asm.t).apply(null,arguments)});function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function run(e){function doRun(){N||(N=!0,o.calledRun=!0,E||(function initRuntime(){callRuntimeCallbacks(j)}(),t(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),function postRun(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)e=o.postRun.shift(),k.unshift(e);var e;callRuntimeCallbacks(k)}()))}e=e||f,x>0||(function preRun(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)e=o.preRun.shift(),O.unshift(e);var e;callRuntimeCallbacks(O)}(),x>0||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),doRun()}),1)):doRun()))}if(o._free=function(){return(o._free=o.asm.u).apply(null,arguments)},o._malloc=function(){return(o._malloc=o.asm.v).apply(null,arguments)},D=function runCaller(){N||run(),N||(D=runCaller)},o.run=run,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return run(),e.ready});e.exports=a},242998:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/zbar.wasm.235eff51d7a9ded7a612.bin"},241297:()=>{}}]);
//# sourceMappingURL=13749.d6376a7b6a.chunk.js.map