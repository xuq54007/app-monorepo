!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=(new e.Error).stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="3fc14115-319f-459a-b807-9497d59139e7",e._sentryDebugIdIdentifier="sentry-dbid-3fc14115-319f-459a-b807-9497d59139e7")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[19634],{719634:(e,o,t)=>{t.r(o),t.d(o,{default:()=>I,tabGridRefs:()=>v});var n=t(324586),r=t(586330),s=t(514041),a=t(908867),i=t(17617),l=t(490343),c=t(643087),p=t(498356),d=t(657412),m=t(334439),u=t(193068),b=t(574319),k=t(831085);const y=function MobileTabListItem({id:e,activeTabId:o,onSelectedItem:t,onCloseItem:n,onLongPress:r}){var s,{tab:a}=(0,b.D$)(e),c=o===e;return(0,k.jsx)(l.Stack,{width:"100%",onPress:function(){t(e)},onLongPress:function(){r(e)},p:"$1",animation:"quick",pressStyle:{scale:.95},testID:`tab-modal-list-item-${e}`,"data-sentry-element":"Stack","data-sentry-component":"MobileTabListItem","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx",children:(0,k.jsx)(l.Stack,{borderRadius:"$4",borderWidth:"$1",borderColor:c?"$brand6":"$transparent",p:"$0.5",borderCurve:"continuous",testID:c?`tab-modal-active-item-${e}`:`tab-modal-no-active-item-${e}`,"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx",children:(0,k.jsxs)(l.Group,{borderRadius:"$2.5",borderWidth:i.A.hairlineWidth,borderColor:"$borderSubdued",separator:(0,k.jsx)(l.Divider,{}),"data-sentry-element":"Group","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx",children:[(0,k.jsx)(l.Group.Item,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx",children:(0,k.jsxs)(l.XStack,{py:"$2",pl:"$2.5",pr:"$2",alignItems:"center",bg:"$bgSubdued",borderCurve:"continuous","data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx",children:[(0,k.jsxs)(l.Image,{size:"$4",borderRadius:"$1","data-sentry-element":"Image","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx",children:[(0,k.jsx)(l.Image.Source,{src:a?.favicon,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx"}),(0,k.jsx)(l.Image.Fallback,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx",children:(0,k.jsx)(l.Icon,{name:"GlobusOutline",size:"$4","data-sentry-element":"Icon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx"})}),(0,k.jsx)(l.Image.Loading,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx",children:(0,k.jsx)(l.Skeleton,{width:"100%",height:"100%","data-sentry-element":"Skeleton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx"})})]}),(0,k.jsx)(l.SizableText,{flex:1,size:"$bodySm",textAlign:"left",numberOfLines:1,mx:"$2","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx",children:(null!=(s=a?.customTitle?.length)?s:0)>0?a?.customTitle:a?.title}),(0,k.jsx)(l.IconButton,{variant:"tertiary",size:"small",icon:"CrossedSmallOutline",onPress:function(){return n(e)},testID:`tab-modal-header-close-${e}`,"data-sentry-element":"IconButton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx"})]})}),(0,k.jsx)(l.Group.Item,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx",children:(0,k.jsx)(l.Stack,{pb:"100%","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx",children:(0,k.jsx)(l.Stack,{position:"absolute",left:0,top:0,right:0,bottom:0,"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx",children:(0,k.jsx)(l.Image,{w:"100%",h:"100%",borderBottomLeftRadius:10,borderBottomRightRadius:10,"data-sentry-element":"Image","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx",children:(0,k.jsx)(l.Image.Source,{source:{uri:a?.thumbnail},"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/index.tsx"})})})})})]})})})};const f=function MobileTabListPinnedItem({id:e,activeTabId:o,onSelectedItem:t,onLongPress:n}){var r,{tab:s}=(0,b.D$)(e),a=o===e;return(0,k.jsx)(l.Stack,{p:"$0.5",minWidth:"$28",maxWidth:"$40",borderRadius:"$4",borderWidth:4,borderColor:a?"$brand6":"$transparent",marginHorizontal:2,onPress:function(){t(e)},onLongPress:function(){n(e)},animation:"quick",pressStyle:{scale:.95},"data-sentry-element":"Stack","data-sentry-component":"MobileTabListPinnedItem","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/MobileTabListPinnedItem.tsx",children:(0,k.jsxs)(l.XStack,{bg:"$bgStrong",p:"$2",alignItems:"center",borderRadius:"$2.5",testID:`tab-list-stack-pinned-${e}`,"data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/MobileTabListPinnedItem.tsx",children:[(0,k.jsxs)(l.Image,{size:"$4",borderRadius:"$1","data-sentry-element":"Image","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/MobileTabListPinnedItem.tsx",children:[(0,k.jsx)(l.Image.Source,{src:s?.favicon,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/MobileTabListPinnedItem.tsx"}),(0,k.jsx)(l.Image.Fallback,{delayMs:100,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/MobileTabListPinnedItem.tsx",children:(0,k.jsx)(l.Icon,{name:"GlobusOutline",size:"$4","data-sentry-element":"Icon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/MobileTabListPinnedItem.tsx"})}),(0,k.jsx)(l.Image.Loading,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/MobileTabListPinnedItem.tsx",children:(0,k.jsx)(l.Skeleton,{width:"100%",height:"100%","data-sentry-element":"Skeleton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/MobileTabListPinnedItem.tsx"})})]}),(0,k.jsx)(l.SizableText,{flex:1,size:"$bodySm",numberOfLines:1,ml:"$2","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/MobileTabListItem/MobileTabListPinnedItem.tsx",children:(null!=(r=s?.customTitle?.length)?r:0)>0?s?.customTitle:s?.title})]})})};var g=t(416526),x=t(670656),w=(g.A.get("window").width,g.A.get("window").width,x.A.get(),t(958411)),h=t(564452);function ownKeys(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?ownKeys(Object(t),!0).forEach((function(o){(0,n.A)(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}var v={};function TabToolBar({closeAllDisabled:e,onAddTab:o,onCloseAll:t,onDone:n}){var r=(0,a.A)();return(0,k.jsxs)(l.Stack,{py:"$2",flexDirection:"row",alignItems:"center",borderTopWidth:i.A.hairlineWidth,borderTopColor:"$borderSubdued","data-sentry-element":"Stack","data-sentry-component":"TabToolBar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/MobileTabListModal/index.tsx",children:[(0,k.jsx)(l.Stack,{flex:1,alignItems:"center",justifyContent:"center","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/MobileTabListModal/index.tsx",children:(0,k.jsx)(l.Button,{variant:"tertiary",size:"medium",onPress:t,disabled:e,testID:"tab-list-modal-close-all","data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/MobileTabListModal/index.tsx",children:r.formatMessage({id:m.ETranslations.explore_close_all})})}),(0,k.jsx)(l.Stack,{flex:1,alignItems:"center",justifyContent:"center","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/MobileTabListModal/index.tsx",children:(0,k.jsx)(l.IconButton,{variant:"secondary",size:"medium",icon:"PlusLargeOutline",testID:"browser-bar-add",onPress:o,"data-sentry-element":"IconButton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/MobileTabListModal/index.tsx"})}),(0,k.jsx)(l.Stack,{flex:1,alignItems:"center",justifyContent:"center","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/MobileTabListModal/index.tsx",children:(0,k.jsx)(l.Button,{variant:"tertiary",size:"medium",onPress:n,testID:"tab-list-modal-done","data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/MobileTabListModal/index.tsx",children:r.formatMessage({id:m.ETranslations.global_done})})})]})}const I=(0,h.k)((function MobileTabListModal(){var e,o=(0,a.A)(),t=(0,p.A)(),{tabs:n}=(0,b.oM)(),i=(0,s.useMemo)((function(){return(null!=n?n:[]).filter((function(e){return!e.isPinned}))}),[n]),g=(0,s.useMemo)((function(){return(null!=n?n:[]).filter((function(e){return e.isPinned}))}),[n]),{disabledAddedNewTab:x}=(0,b.bI)(),{activeTabId:h}=(0,b.cf)(),{addBrowserBookmark:v,removeBrowserBookmark:I}=(0,d.Gd)().current,{closeAllWebTabs:T,setCurrentWebTab:M,closeWebTab:L,setPinnedTab:D,setDisplayHomePage:S}=(0,d.AO)().current,j=(0,s.useRef)(!1);(0,s.useEffect)((function(){j.current&&!n.length&&(S(!0),t.pop()),j.current=!1}),[n,S,t]);var P,$,_=(0,s.useMemo)((function(){return i.findIndex((function(e){return e.id===h}))}),[i,h]),C=(0,s.useMemo)((function(){return g.findIndex((function(e){return e.id===h}))}),[g,h]),{handleShareUrl:B,handleRenameTab:O}=(0,w.A)(),{copyText:A}=(0,l.useClipboard)(),E=(0,s.useCallback)((function(e,t,n){e?v({url:t,title:n}):I(t),l.Toast.success({title:e?o.formatMessage({id:m.ETranslations.explore_toast_bookmark_added}):o.formatMessage({id:m.ETranslations.explore_toast_bookmark_removed})})}),[v,I,o]),z=(0,s.useCallback)((function(e){B(e)}),[B]),R=(0,s.useCallback)((P=(0,r.A)((function*(e){var o=e?new URL(e).origin:null;o&&(yield c.A.serviceDApp.disconnectWebsite({origin:o,storageType:"injectedProvider",entry:"Browser"}))})),function(e){return P.apply(this,arguments)}),[]),W=(0,s.useCallback)((function(e,t){D({id:e,pinned:t}),l.Toast.success({title:t?o.formatMessage({id:m.ETranslations.explore_toast_pinned}):o.formatMessage({id:m.ETranslations.explore_toast_unpinned})})}),[D,o]),G=(0,s.useCallback)((function(e){j.current=!0,L({tabId:e,entry:"Menu"})}),[L]),H=(0,s.useCallback)((function(){x?l.Toast.message({title:o.formatMessage({id:m.ETranslations.explore_toast_tab_limit_reached},{number:"20"})}):(t.pop(),setTimeout((function(){t.pushModal(u.ry.DiscoveryModal,{screen:u.v1.SearchModal})}),0))}),[x,t,o]),V=(0,s.useCallback)(($=(0,r.A)((function*(e,t){var n=e?.url?new URL(e.url).origin:null,r=!1;if(n){var s=yield c.A.serviceDApp.findInjectedAccountByOrigin(n);r=(null!=s?s:[]).length>0}l.ActionList.show({title:o.formatMessage({id:m.ETranslations.explore_options}),sections:[{items:[{label:o.formatMessage({id:e.isBookmark?m.ETranslations.explore_remove_bookmark:m.ETranslations.explore_add_bookmark}),icon:e.isBookmark?"StarSolid":"StarOutline",onPress:function(){var o;return E(!e.isBookmark,e.url,null!=(o=e.title)?o:"")},testID:"action-list-item-"+(e.isBookmark?"remove-bookmark":"bookmark")},{label:o.formatMessage({id:e.isPinned?m.ETranslations.explore_unpin:m.ETranslations.explore_pin}),icon:e.isPinned?"ThumbtackSolid":"ThumbtackOutline",onPress:function(){return W(t,!e.isPinned)},testID:"action-list-item-"+(e.isPinned?"un-pin":"pin")},{label:o.formatMessage({id:m.ETranslations.explore_rename}),icon:"PencilOutline",onPress:function(){O(e)},testID:"action-list-item-rename"}].filter(Boolean)},{items:[{label:o.formatMessage({id:m.ETranslations.global_copy_url}),icon:"LinkOutline",onPress:function(){A(e.url)},testID:"action-list-item-copy"},{label:o.formatMessage({id:m.ETranslations.explore_share}),icon:"ShareOutline",onPress:function(){return z(e.url)},testID:"action-list-item-share"}].filter(Boolean)},{items:[r&&{label:o.formatMessage({id:m.ETranslations.explore_disconnect}),icon:"BrokenLinkOutline",onPress:function(){R(e.url)},testID:"action-list-item-disconnect"},{label:o.formatMessage({id:m.ETranslations.explore_close_tab}),icon:"CrossedLargeOutline",onPress:function(){return G(t)},testID:"action-list-item-close-close-tab"}].filter(Boolean)}]})})),function(e,o){return $.apply(this,arguments)}),[E,W,z,O,R,G,A,o]),X=(0,s.useCallback)((function(e){return e.id}),[]),F=(0,s.useCallback)((function({item:e}){return(0,k.jsx)(y,_objectSpread(_objectSpread({},e),{},{activeTabId:h,onSelectedItem:function(e){M(e),t.pop()},onCloseItem:G,onLongPress:function(o){V(e,o)}}))}),[h,G,M,t,V]),K=(0,s.useCallback)((function({item:e}){return(0,k.jsx)(f,_objectSpread(_objectSpread({},e),{},{activeTabId:h,onSelectedItem:function(e){M(e),t.pop()},onCloseItem:G,onLongPress:function(o){V(e,o)}}))}),[t,M,h,G,V]),U=(0,s.useMemo)((function(){return 0===g.length?null:(0,k.jsx)(l.BlurView,{position:"absolute",left:"$2.5",bottom:"$2.5",right:"$2.5",borderRadius:"$5",bg:"$bgStrong",testID:"tab-pined-container",experimentalBlurMethod:"none",children:(0,k.jsx)(l.ListView,{contentContainerStyle:{p:"$1"},horizontal:!0,data:g,showsHorizontalScrollIndicator:!1,keyExtractor:function(e){return e.id},estimatedItemSize:"$28",estimatedListSize:{width:370,height:52},renderItem:K,initialScrollIndex:C})})}),[g,K,C]);return(0,k.jsxs)(l.Page,{"data-sentry-element":"Page","data-sentry-component":"MobileTabListModal","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/MobileTabListModal/index.tsx",children:[(0,k.jsx)(l.Page.Header,{title:o.formatMessage({id:m.ETranslations.explore_tabs_count},{number:`${null!=(e=n.length)?e:0}`}),"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/MobileTabListModal/index.tsx"}),(0,k.jsxs)(l.Page.Body,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/MobileTabListModal/index.tsx",children:[(0,k.jsx)(l.ListView,{initialScrollIndex:_,estimatedItemSize:223,data:i,renderItem:F,keyExtractor:X,numColumns:2,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,contentContainerStyle:{paddingHorizontal:10,paddingBottom:62},testID:"tab-container","data-sentry-element":"ListView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/MobileTabListModal/index.tsx"}),U]}),(0,k.jsx)(l.Page.Footer,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/MobileTabListModal/index.tsx",children:(0,k.jsx)(TabToolBar,{closeAllDisabled:i.length<=0,onAddTab:H,onCloseAll:function(){j.current=!0,T()},onDone:function(){t.pop()},"data-sentry-element":"TabToolBar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/MobileTabListModal/index.tsx"})})]})}))}}]);
//# sourceMappingURL=19634.546da564d2.chunk.js.map