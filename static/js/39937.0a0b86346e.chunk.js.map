{"version":3,"file":"static/js/39937.0a0b86346e.chunk.js","mappings":"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","sources":["webpack://web/../../packages/kit/src/views/Swap/hooks/useSwapAccount.ts","webpack://web/../../packages/kit/src/views/Swap/pages/SwapProviderMirror.tsx","webpack://web/../../packages/kit/src/views/Swap/pages/modal/SwapToAnotherAddressModal.tsx"],"sourcesContent":["import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _debounce from\"lodash/debounce\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{useCallback,useEffect,useMemo,useRef}from'react';import{EPageType,usePageType}from'@onekeyhq/components';import{useRouteIsFocused as useIsFocused}from'@onekeyhq/kit/src/hooks/useRouteIsFocused';import{useSettingsAtom}from'@onekeyhq/kit-bg/src/states/jotai/atoms';import{ETabRoutes}from'@onekeyhq/shared/src/routes';import accountUtils from'@onekeyhq/shared/src/utils/accountUtils';import networkUtils from'@onekeyhq/shared/src/utils/networkUtils';import{ESwapDirectionType}from'@onekeyhq/shared/types/swap/types';import backgroundApiProxy from\"../../../background/instance/backgroundApiProxy\";import useListenTabFocusState from\"../../../hooks/useListenTabFocusState\";import{usePromiseResult}from\"../../../hooks/usePromiseResult\";import{useAccountSelectorActions,useActiveAccount}from\"../../../states/jotai/contexts/accountSelector\";import{useSwapProviderSupportReceiveAddressAtom,useSwapQuoteCurrentSelectAtom,useSwapSelectFromTokenAtom,useSwapSelectToTokenAtom,useSwapToAnotherAccountAddressAtom}from\"../../../states/jotai/contexts/swap\";export function useSwapFromAccountNetworkSync(){var{updateSelectedAccountNetwork}=useAccountSelectorActions().current;var[fromToken]=useSwapSelectFromTokenAtom();var{activeAccount:toActiveAccount}=useActiveAccount({num:1});var{activeAccount:fromActiveAccount}=useActiveAccount({num:0});var[swapToAnotherAccount,setSwapToAnotherAccount]=useSwapToAnotherAccountAddressAtom();var[swapProviderSupportReceiveAddress]=useSwapProviderSupportReceiveAddressAtom();var[,setSettings]=useSettingsAtom();var[toToken]=useSwapSelectToTokenAtom();var fromTokenRef=useRef();var toTokenRef=useRef();var swapProviderSupportReceiveAddressRef=useRef();var swapToAnotherAccountRef=useRef(swapToAnotherAccount);var swapToAccountRef=useRef(toActiveAccount);var swapFromAccountRef=useRef(fromActiveAccount);if(swapToAccountRef.current!==toActiveAccount){swapToAccountRef.current=toActiveAccount;}if(swapFromAccountRef.current!==fromActiveAccount){swapFromAccountRef.current=fromActiveAccount;}if(fromTokenRef.current!==fromToken){fromTokenRef.current=fromToken;}if(toTokenRef.current!==toToken){toTokenRef.current=toToken;}if(swapToAnotherAccountRef.current!==swapToAnotherAccount){swapToAnotherAccountRef.current=swapToAnotherAccount;}if(swapProviderSupportReceiveAddressRef.current!==swapProviderSupportReceiveAddress){swapProviderSupportReceiveAddressRef.current=swapProviderSupportReceiveAddress;}var checkTokenForAccountNetworkDebounce=useCallback(_debounce(_asyncToGenerator(function*(){if(fromTokenRef.current){yield updateSelectedAccountNetwork({num:0,networkId:fromTokenRef.current?.networkId});}if(toTokenRef.current){yield updateSelectedAccountNetwork({num:1,networkId:toTokenRef.current?.networkId});}if(fromTokenRef.current&&toTokenRef.current){if(swapToAnotherAccountRef.current?.networkId&&toTokenRef.current?.networkId!==swapToAnotherAccountRef.current?.networkId||!swapToAnotherAccountRef.current?.networkId&&!swapToAccountRef.current?.account&&swapToAccountRef.current?.wallet||swapProviderSupportReceiveAddressRef.current===false||!swapToAnotherAccountRef.current.address&&swapToAccountRef.current.account?.id!==swapFromAccountRef.current.account?.id){setSettings(function(v){return _objectSpread(_objectSpread({},v),{},{swapToAnotherAccountSwitchOn:false});});setSwapToAnotherAccount(function(v){return _objectSpread(_objectSpread({},v),{},{address:undefined});});setTimeout(function(){if(toTokenRef.current?.networkId&&swapToAccountRef.current.network?.id&&toTokenRef.current?.networkId!==swapToAccountRef.current.network.id)void updateSelectedAccountNetwork({num:1,networkId:toTokenRef.current?.networkId});},500);}}}),100),[setSettings,updateSelectedAccountNetwork]);var pageType=usePageType();useListenTabFocusState(ETabRoutes.Swap,function(){var _ref2=_asyncToGenerator(function*(isFocus,isHideByModal){if(pageType!==EPageType.modal){if(isHideByModal)return;if(isFocus){yield checkTokenForAccountNetworkDebounce();}}});return function(_x,_x2){return _ref2.apply(this,arguments);};}());useEffect(function(){if(pageType!==EPageType.modal){void _asyncToGenerator(function*(){yield checkTokenForAccountNetworkDebounce();})();}},[checkTokenForAccountNetworkDebounce,fromToken?.networkId,fromToken?.contractAddress,toToken?.networkId,toToken?.contractAddress,swapProviderSupportReceiveAddress,pageType]);var isFocused=useIsFocused();useEffect(function(){if(pageType===EPageType.modal){if(isFocused){void _asyncToGenerator(function*(){yield checkTokenForAccountNetworkDebounce();})();}}},[checkTokenForAccountNetworkDebounce,isFocused,pageType,fromToken?.networkId,fromToken?.contractAddress,toToken?.networkId,toToken?.contractAddress,swapProviderSupportReceiveAddress]);}export function useSwapAddressInfo(type){var{activeAccount}=useActiveAccount({num:type===ESwapDirectionType.FROM?0:1});var[{swapToAnotherAccountSwitchOn}]=useSettingsAtom();var[swapToAnotherAccountAddressAtom]=useSwapToAnotherAccountAddressAtom();var addressInfo=useMemo(function(){var res={networkId:undefined,address:undefined,accountInfo:undefined,activeAccount:undefined};if(type===ESwapDirectionType.TO&&swapToAnotherAccountSwitchOn&&swapToAnotherAccountAddressAtom.address&&swapToAnotherAccountAddressAtom.networkId&&activeAccount&&activeAccount.network?.id===swapToAnotherAccountAddressAtom.networkId){return _objectSpread(_objectSpread({},res),{},{address:swapToAnotherAccountAddressAtom.address,networkId:swapToAnotherAccountAddressAtom.networkId,accountInfo:swapToAnotherAccountAddressAtom.accountInfo,activeAccount:_objectSpread({},activeAccount)});}if(activeAccount){return _objectSpread(_objectSpread({},res),{},{address:activeAccount.account?.address,networkId:activeAccount.network?.id,accountInfo:_objectSpread({},activeAccount),activeAccount:_objectSpread({},activeAccount)});}return res;},[type,swapToAnotherAccountSwitchOn,swapToAnotherAccountAddressAtom,activeAccount]);return addressInfo;}export function useSwapRecipientAddressInfo(enable){var fromAccountInfo=useSwapAddressInfo(ESwapDirectionType.FROM);var swapToAddressInfo=useSwapAddressInfo(ESwapDirectionType.TO);var[currentQuoteRes]=useSwapQuoteCurrentSelectAtom();var[{swapToAnotherAccountSwitchOn}]=useSettingsAtom();var[swapToAnotherAddressInfo]=useSwapToAnotherAccountAddressAtom();var getToNetWorkAddressFromAccountId=usePromiseResult(_asyncToGenerator(function*(){if(!enable){return null;}if(swapToAddressInfo.networkId&&!networkUtils.isAllNetwork({networkId:swapToAddressInfo.networkId})&&fromAccountInfo.accountInfo?.account?.id&&fromAccountInfo.accountInfo?.indexedAccount?.id){var accountInfos=yield backgroundApiProxy.serviceStaking.getEarnAccount({accountId:fromAccountInfo.accountInfo?.account?.id,networkId:swapToAddressInfo.networkId,indexedAccountId:fromAccountInfo.accountInfo?.indexedAccount?.id});return accountInfos;}}),[enable,swapToAddressInfo.networkId,fromAccountInfo.accountInfo?.account?.id,fromAccountInfo.accountInfo?.indexedAccount?.id],{});var getToAddressAccountInfos=usePromiseResult(_asyncToGenerator(function*(){if(swapToAnotherAddressInfo.networkId&&swapToAnotherAddressInfo.address){var res=yield backgroundApiProxy.serviceAccount.getAccountNameFromAddress({networkId:swapToAnotherAddressInfo.networkId,address:swapToAnotherAddressInfo.address});if(res.length>0){return res[0];}}}),[swapToAnotherAddressInfo.address,swapToAnotherAddressInfo.networkId],{});if(swapToAddressInfo.address===swapToAnotherAddressInfo.address&&swapToAnotherAccountSwitchOn){if(getToNetWorkAddressFromAccountId?.result?.accountAddress&&getToNetWorkAddressFromAccountId?.result?.accountAddress!==swapToAnotherAddressInfo.address&&swapToAnotherAddressInfo.networkId===currentQuoteRes?.toTokenInfo.networkId){return{accountInfo:swapToAnotherAddressInfo.accountInfo?.account?.address===swapToAnotherAddressInfo.address?{walletName:swapToAnotherAddressInfo.accountInfo?.wallet?.name,accountName:swapToAnotherAddressInfo.accountInfo?.accountName,accountId:swapToAnotherAddressInfo.accountInfo?.account?.id}:getToAddressAccountInfos.result,showAddress:accountUtils.shortenAddress({address:swapToAnotherAddressInfo.address,leadingLength:6,trailingLength:6}),isExtAccount:swapToAnotherAddressInfo.accountInfo?.account?.address!==swapToAnotherAddressInfo.address&&!getToAddressAccountInfos.result};}}}","import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{memo}from'react';import{ProviderJotaiContextSwap}from\"../../../states/jotai/contexts/swap\";import{jotaiContextStore}from\"../../../states/jotai/utils/jotaiContextStore\";import{JotaiContextStoreMirrorTracker}from\"../../../states/jotai/utils/JotaiContextStoreMirrorTracker\";import{useSwapContextStoreInitData}from\"./SwapRootProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var SwapProviderMirror=memo(function(props){var{children,storeName}=props;var data=useSwapContextStoreInitData(storeName);var store=jotaiContextStore.getOrCreateStore(data);return _jsxs(_Fragment,{children:[_jsx(JotaiContextStoreMirrorTracker,_objectSpread({},data)),_jsx(ProviderJotaiContextSwap,{store:store,children:children})]});});SwapProviderMirror.displayName='SwapProviderMirror';","import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{useCallback,useEffect,useMemo}from'react';import{useRoute}from'@react-navigation/core';import{useIntl}from'react-intl';import{Form,Icon,Page,SizableText,Stack,XStack,useForm}from'@onekeyhq/components';import{AccountSelectorProviderMirror}from'@onekeyhq/kit/src/components/AccountSelector';import{AddressInput}from'@onekeyhq/kit/src/components/AddressInput';import useAppNavigation from'@onekeyhq/kit/src/hooks/useAppNavigation';import{useSwapManualSelectQuoteProvidersAtom,useSwapQuoteCurrentSelectAtom,useSwapToAnotherAccountAddressAtom}from'@onekeyhq/kit/src/states/jotai/contexts/swap';import{useSettingsAtom}from'@onekeyhq/kit-bg/src/states/jotai/atoms';import{ETranslations}from'@onekeyhq/shared/src/locale';import{EAccountSelectorSceneName}from'@onekeyhq/shared/types';import{ESwapDirectionType}from'@onekeyhq/shared/types/swap/types';import{useSwapAddressInfo}from\"../../hooks/useSwapAccount\";import{SwapProviderMirror}from\"../SwapProviderMirror\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SwapToAnotherAddressPage=function(){var navigation=useAppNavigation();var route=useRoute();var paramAddress=route.params?.address;var{accountInfo,address,activeAccount}=useSwapAddressInfo(ESwapDirectionType.TO);var[,setSettings]=useSettingsAtom();var[,setSwapToAddress]=useSwapToAnotherAccountAddressAtom();var[selectedQuote]=useSwapQuoteCurrentSelectAtom();var[,setSwapManualSelectQuote]=useSwapManualSelectQuoteProvidersAtom();var intl=useIntl();var form=useForm({defaultValues:{address:{raw:''}},mode:'onChange',reValidateMode:'onBlur'});useEffect(function(){if(address&&accountInfo?.account?.address===address){form.setValue('address',{raw:address});}else if(paramAddress){form.setValue('address',{raw:paramAddress});}},[accountInfo?.account?.address,address,form,paramAddress]);var handleOnOpenAccountSelector=useCallback(function(){setSettings(function(v){return _objectSpread(_objectSpread({},v),{},{swapToAnotherAccountSwitchOn:true});});},[setSettings]);var handleOnConfirm=useCallback(function(data){var finallyAddress=data.address.resolved;if(!finallyAddress)return;setSettings(function(v){return _objectSpread(_objectSpread({},v),{},{swapToAnotherAccountSwitchOn:true});});setSwapToAddress(function(v){return _objectSpread(_objectSpread({},v),{},{address:finallyAddress,networkId:activeAccount?.network?.id,accountInfo:activeAccount});});setSwapManualSelectQuote(selectedQuote);navigation.pop();},[activeAccount,navigation,selectedQuote,setSettings,setSwapManualSelectQuote,setSwapToAddress]);var handleOnCancel=useCallback(function(){setSettings(function(v){return _objectSpread(_objectSpread({},v),{},{swapToAnotherAccountSwitchOn:false});});setSwapToAddress(function(v){return _objectSpread(_objectSpread({},v),{},{address:undefined});});},[setSwapToAddress,setSettings]);var accountSelector=useMemo(function(){return{num:1,onBeforeAccountSelectorOpen:handleOnOpenAccountSelector};},[handleOnOpenAccountSelector]);return accountInfo&&accountInfo?.network?.id?_jsxs(Page,{scrollEnabled:true,children:[_jsxs(Page.Body,{px:\"$5\",gap:\"$6\",children:[_jsx(Form,{form:form,children:_jsx(Form.Field,{label:intl.formatMessage({id:ETranslations.global_recipient}),name:\"address\",rules:{required:true,validate:function(value){if(value.pending){return;}if(!value.resolved){var _value$validateError$;return(_value$validateError$=value.validateError?.message)!=null?_value$validateError$:intl.formatMessage({id:ETranslations.send_address_invalid});}}},children:_jsx(AddressInput,{networkId:accountInfo?.network?.id,enableAddressBook:true,enableWalletName:true,accountId:accountInfo?.account?.id,contacts:true,accountSelector:accountSelector})})}),_jsxs(Stack,{gap:\"$4\",children:[_jsxs(XStack,{children:[_jsx(Stack,{$md:{pt:'$0.5'},children:_jsx(Icon,{name:\"CheckRadioOutline\",size:\"$5\",color:\"$iconSuccess\"})}),_jsx(SizableText,{flex:1,pl:\"$2\",size:\"$bodyLg\",color:\"$textSubdued\",$gtMd:{size:'$bodyMd'},children:intl.formatMessage({id:ETranslations.swap_page_recipient_modal_verify})})]}),_jsxs(XStack,{children:[_jsx(Stack,{$md:{pt:'$0.5'},children:_jsx(Icon,{name:\"BlockOutline\",size:\"$5\",color:\"$iconCritical\"})}),_jsx(SizableText,{flex:1,pl:\"$2\",size:\"$bodyLg\",color:\"$textSubdued\",$gtMd:{size:'$bodyMd'},children:intl.formatMessage({id:ETranslations.swap_page_recipient_modal_do_not})})]})]})]}),_jsx(Page.Footer,{onConfirm:function(){return form.handleSubmit(handleOnConfirm)();},onConfirmText:intl.formatMessage({id:ETranslations.global_confirm}),onCancelText:intl.formatMessage({id:ETranslations.swap_account_to_address_edit_button}),onCancel:handleOnCancel})]}):null;};var SwapToAnotherAddressPageWithProvider=function(){var route=useRoute();var{storeName}=route.params;return _jsx(SwapProviderMirror,{storeName:storeName,\"data-sentry-element\":\"SwapProviderMirror\",\"data-sentry-component\":\"SwapToAnotherAddressPageWithProvider\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/pages/modal/SwapToAnotherAddressModal.tsx\",children:_jsx(SwapToAnotherAddressPage,{\"data-sentry-element\":\"SwapToAnotherAddressPage\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/pages/modal/SwapToAnotherAddressModal.tsx\"})});};export default function SwapToAnotherAddressPageModal(){return _jsx(AccountSelectorProviderMirror,{config:{sceneName:EAccountSelectorSceneName.swap},enabledNum:[0,1],\"data-sentry-element\":\"AccountSelectorProviderMirror\",\"data-sentry-component\":\"SwapToAnotherAddressPageModal\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/pages/modal/SwapToAnotherAddressModal.tsx\",children:_jsx(SwapToAnotherAddressPageWithProvider,{\"data-sentry-element\":\"SwapToAnotherAddressPageWithProvider\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/pages/modal/SwapToAnotherAddressModal.tsx\"})});}"],"names":["ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","useSwapFromAccountNetworkSync","updateSelectedAccountNetwork","current","fromToken","activeAccount","toActiveAccount","num","fromActiveAccount","swapToAnotherAccount","setSwapToAnotherAccount","swapProviderSupportReceiveAddress","setSettings","useSettingsAtom","toToken","fromTokenRef","useRef","toTokenRef","swapProviderSupportReceiveAddressRef","swapToAnotherAccountRef","swapToAccountRef","swapFromAccountRef","_ref2","checkTokenForAccountNetworkDebounce","useCallback","networkId","account","wallet","address","id","v","swapToAnotherAccountSwitchOn","undefined","setTimeout","network","pageType","usePageType","Swap","isFocus","isHideByModal","EPageType","modal","_x","_x2","this","useEffect","contractAddress","isFocused","useSwapAddressInfo","type","FROM","swapToAnotherAccountAddressAtom","useMemo","res","accountInfo","TO","useSwapRecipientAddressInfo","enable","fromAccountInfo","swapToAddressInfo","currentQuoteRes","swapToAnotherAddressInfo","getToNetWorkAddressFromAccountId","isAllNetwork","indexedAccount","serviceStaking","getEarnAccount","accountId","indexedAccountId","getToAddressAccountInfos","serviceAccount","getAccountNameFromAddress","result","accountAddress","toTokenInfo","walletName","name","accountName","showAddress","shortenAddress","leadingLength","trailingLength","isExtAccount","SwapProviderMirror","memo","props","children","storeName","data","store","getOrCreateStore","displayName","SwapToAnotherAddressPage","navigation","route","paramAddress","params","setSwapToAddress","selectedQuote","setSwapManualSelectQuote","intl","form","useForm","defaultValues","raw","mode","reValidateMode","setValue","handleOnOpenAccountSelector","handleOnConfirm","finallyAddress","resolved","pop","handleOnCancel","accountSelector","onBeforeAccountSelectorOpen","Page","scrollEnabled","Body","px","gap","Form","Field","label","formatMessage","ETranslations","global_recipient","rules","required","validate","value","_value$validateError$","pending","validateError","message","send_address_invalid","enableAddressBook","enableWalletName","contacts","Stack","XStack","$md","pt","Icon","size","color","SizableText","flex","pl","$gtMd","swap_page_recipient_modal_verify","swap_page_recipient_modal_do_not","Footer","onConfirm","handleSubmit","onConfirmText","global_confirm","onCancelText","swap_account_to_address_edit_button","onCancel","SwapToAnotherAddressPageWithProvider","SwapToAnotherAddressPageModal","config","sceneName","swap","enabledNum"],"sourceRoot":""}