{"version":3,"file":"static/js/22484.540b483240.chunk.js","mappings":"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","sources":["webpack://web/../../packages/core/src/base/ChainSigner.ts","webpack://web/../../packages/core/src/base/CoreChainApiBase.ts","webpack://web/../../packages/core/src/chains/bch/CoreChainHd.ts","webpack://web/../../packages/core/src/chains/bch/CoreChainSoftware.ts","webpack://web/../../packages/core/src/chains/bch/sdkBch/index.ts","webpack://web/../../packages/core/src/chains/btc/CoreChainSoftware.ts","webpack://web/../../packages/core/src/utils/index.ts"],"sourcesContent":["import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _createClass from\"@babel/runtime/helpers/createClass\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function(){return!!t;})();}import bufferUtils from'@onekeyhq/shared/src/utils/bufferUtils';import{N,decrypt,sign as _sign,uncompressPublicKey,verify}from\"../secret\";export var Verifier=function(){function Verifier(pub,curve){this.curve=curve;this.compressedPublicKey=Buffer.from(pub,'hex');this.uncompressedPublicKey=uncompressPublicKey(curve,this.compressedPublicKey);}var _proto=Verifier.prototype;_proto.getPubkey=function getPubkey(compressed){return Promise.resolve(compressed?this.compressedPublicKey:this.uncompressedPublicKey);};_proto.getPubkeyHex=function(){var _getPubkeyHex=_asyncToGenerator(function*(compressed){return bufferUtils.bytesToHex(yield this.getPubkey(compressed));});function getPubkeyHex(_x){return _getPubkeyHex.apply(this,arguments);}return getPubkeyHex;}();_proto.verify=function verify(){return Promise.resolve(Buffer.from([]));};_proto.verifySignature=function verifySignature({publicKey,digest,signature}){var p=bufferUtils.toBuffer(publicKey);var d=bufferUtils.toBuffer(digest);var s=bufferUtils.toBuffer(signature);var{curve}=this;var result=verify(curve,p,d,s);return Promise.resolve(result);};return _createClass(Verifier);}();export var ChainSigner=function(_Verifier){_inherits(ChainSigner,_Verifier);var _super=_createSuper(ChainSigner);function ChainSigner(encryptedPrivateKey,password,curve){var _this;var pub=N(curve,{key:encryptedPrivateKey,chainCode:Buffer.alloc(32)},password).key.toString('hex');_this=_super.call(this,pub,curve);_this.encryptedPrivateKey=encryptedPrivateKey;_this.password=password;_this.curve=curve;return _this;}var _proto2=ChainSigner.prototype;_proto2.getPrvkey=function getPrvkey(){return Promise.resolve(decrypt(this.password,this.encryptedPrivateKey));};_proto2.getPrvkeyHex=function(){var _getPrvkeyHex=_asyncToGenerator(function*(){return bufferUtils.bytesToHex(yield this.getPrvkey());});function getPrvkeyHex(){return _getPrvkeyHex.apply(this,arguments);}return getPrvkeyHex;}();_proto2.sign=function sign(digest){var signature=_sign(this.curve,this.encryptedPrivateKey,digest,this.password);if(this.curve==='secp256k1'){return Promise.resolve([signature.slice(0,-1),signature[signature.length-1]]);}return Promise.resolve([signature,0]);};return _createClass(ChainSigner);}(Verifier);","import _merge from\"lodash/merge\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _createClass from\"@babel/runtime/helpers/createClass\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{NotImplemented,OneKeyInternalError}from'@onekeyhq/shared/src/errors';import bufferUtils from'@onekeyhq/shared/src/utils/bufferUtils';import{batchGetPrivateKeys,batchGetPublicKeysAsync,decrypt,decryptImportedCredential,ed25519,encrypt,nistp256,secp256k1}from\"../secret\";import{ECoreCredentialType}from\"../types\";import{slicePathTemplate}from\"../utils\";import{ChainSigner}from\"./ChainSigner\";export var CoreChainApiBase=function(){function CoreChainApiBase(){}var _proto=CoreChainApiBase.prototype;_proto.baseGetCurve=function baseGetCurve(curveName){switch(curveName){case'ed25519':return ed25519;case'secp256k1':return secp256k1;case'nistp256':return nistp256;default:throw new OneKeyInternalError('Unsupported curve');}};_proto.baseCreateSigner=function(){var _baseCreateSigner=_asyncToGenerator(function*({curve,privateKey,password}){if(typeof password==='undefined'){throw new OneKeyInternalError('Software signing requires a password.');}var privateKeyBuffer=bufferUtils.toBuffer(privateKey);return Promise.resolve(new ChainSigner(privateKeyBuffer,password,curve));});function baseCreateSigner(_x){return _baseCreateSigner.apply(this,arguments);}return baseCreateSigner;}();_proto.baseGetSingleSigner=function(){var _baseGetSingleSigner=_asyncToGenerator(function*({payload,curve}){var privateKeys=yield this.getPrivateKeys(payload);var accountPath=payload.account.path;var privateKey=privateKeys[accountPath];var firstRelPath=payload?.relPaths?.[0];if(!privateKey&&firstRelPath){var fullPath=[accountPath,firstRelPath].join('/');privateKey=privateKeys[fullPath];}if(!privateKey){throw new Error(`No private key found: ${accountPath}`);}return this.baseCreateSigner({curve,privateKey,password:payload.password});});function baseGetSingleSigner(_x2){return _baseGetSingleSigner.apply(this,arguments);}return baseGetSingleSigner;}();_proto.baseGetPrivateKeys=function(){var _baseGetPrivateKeys=_asyncToGenerator(function*({payload,curve}){var{credentials,account,password,relPaths}=payload;var privateKeys={};if(credentials.hd&&credentials.imported){throw new OneKeyInternalError('getPrivateKeys ERROR: hd and imported credentials can NOT both set.');}if(credentials.hd){privateKeys=yield this.baseGetPrivateKeysHd({curve,account,hdCredential:credentials.hd,password,relPaths});}if(credentials.imported){var{privateKey:p}=decryptImportedCredential({password,credential:credentials.imported});var encryptPrivateKey=bufferUtils.bytesToHex(encrypt(password,p));privateKeys[account.path]=encryptPrivateKey;privateKeys['']=encryptPrivateKey;}if(!Object.keys(privateKeys).length){throw new Error('No private keys found');}return privateKeys;});function baseGetPrivateKeys(_x3){return _baseGetPrivateKeys.apply(this,arguments);}return baseGetPrivateKeys;}();_proto.baseGetPrivateKeysHd=function(){var _baseGetPrivateKeysHd=_asyncToGenerator(function*({curve,password,account,relPaths,hdCredential}){var{path}=account;var pathComponents=path.split('/');var usedRelativePaths=relPaths||[pathComponents.pop()];var basePath=pathComponents.join('/');if(usedRelativePaths.length===0){throw new OneKeyInternalError('getPrivateKeysHd ERROR: relPaths is empty.');}var keys=batchGetPrivateKeys(curve,hdCredential,password,basePath,usedRelativePaths);var map=keys.reduce(function(ret,key){var result=_objectSpread(_objectSpread({},ret),{},{[key.path]:bufferUtils.bytesToHex(key.extendedKey.key)});return result;},{});return map;});function baseGetPrivateKeysHd(_x4){return _baseGetPrivateKeysHd.apply(this,arguments);}return baseGetPrivateKeysHd;}();_proto.baseGetAddressesFromHd=function(){var _baseGetAddressesFromHd=_asyncToGenerator(function*(query,options){var _this=this;var{curve,generateFrom}=options;var{template,hdCredential,password,indexes}=query;var{pathPrefix,pathSuffix}=slicePathTemplate(template);var indexFormatted=indexes.map(function(index){return pathSuffix.replace('{index}',index.toString());});var isPrivateKeyMode=generateFrom==='privateKey';var pubkeyInfos=[];var pvtkeyInfos=[];if(isPrivateKeyMode){pvtkeyInfos=batchGetPrivateKeys(curve,hdCredential,password,pathPrefix,indexFormatted);}else{pubkeyInfos=yield batchGetPublicKeysAsync({curveName:curve,hdCredential,password,prefix:pathPrefix,relPaths:indexFormatted});}var infos=isPrivateKeyMode?pvtkeyInfos:pubkeyInfos;if(infos.length!==indexes.length){throw new OneKeyInternalError('Unable to get publick key.');}var addresses=yield Promise.all(infos.map(function(){var _ref=_asyncToGenerator(function*(info){var{path,extendedKey:{key}}=info;var publicKey;var result;if(isPrivateKeyMode){var privateKeyRaw=bufferUtils.bytesToHex(decrypt(password,key));result=yield _this.getAddressFromPrivate({networkInfo:query.networkInfo,privateKeyRaw,privateKeyInfo:info});}else{publicKey=key.toString('hex');result=yield _this.getAddressFromPublic({networkInfo:query.networkInfo,publicKey,publicKeyInfo:info});}return _merge({publicKey,path},result);});return function(_x7){return _ref.apply(this,arguments);};}()));return{addresses};});function baseGetAddressesFromHd(_x5,_x6){return _baseGetAddressesFromHd.apply(this,arguments);}return baseGetAddressesFromHd;}();_proto.baseGetCredentialsType=function baseGetCredentialsType({credentials}){if(credentials.hd&&credentials.imported){throw new OneKeyInternalError('getCredentialsType ERROR: hd and imported credentials can NOT both set.');}if(credentials.hd){return ECoreCredentialType.hd;}if(credentials.imported){return ECoreCredentialType.imported;}throw new OneKeyInternalError('getCredentialsType ERROR: no credentials found');};_proto.baseGetDefaultPrivateKey=function(){var _baseGetDefaultPrivateKey=_asyncToGenerator(function*(params){var privateKeysMap=yield this.getPrivateKeys(params);var[encryptedPrivateKey]=Object.values(privateKeysMap);return{privateKeyRaw:encryptedPrivateKey};});function baseGetDefaultPrivateKey(_x8){return _baseGetDefaultPrivateKey.apply(this,arguments);}return baseGetDefaultPrivateKey;}();_proto.validateXpub=function(){var _validateXpub=_asyncToGenerator(function*(params){throw new NotImplemented();});function validateXpub(_x9){return _validateXpub.apply(this,arguments);}return validateXpub;}();_proto.validateXprvt=function(){var _validateXprvt=_asyncToGenerator(function*(params){throw new NotImplemented();});function validateXprvt(_x10){return _validateXprvt.apply(this,arguments);}return validateXprvt;}();return _createClass(CoreChainApiBase);}();","import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function(){return!!t;})();}import CoreChainSoftware from\"./CoreChainSoftware\";var CoreChainHd=function(_CoreChainSoftware){_inherits(CoreChainHd,_CoreChainSoftware);var _super=_createSuper(CoreChainHd);function CoreChainHd(){return _super.apply(this,arguments);}return _createClass(CoreChainHd);}(CoreChainSoftware);export{CoreChainHd as default};","import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _createClass from\"@babel/runtime/helpers/createClass\";import _get from\"@babel/runtime/helpers/get\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function(){return!!t;})();}import{Psbt as PsbtBtcFork}from'@onekeyfe/bitcoinforksjs-lib';import CoreChainSoftwareBtc from\"../btc/CoreChainSoftware\";import*as sdkBch from\"./sdkBch\";var CoreChainSoftware=function(_CoreChainSoftwareBtc){_inherits(CoreChainSoftware,_CoreChainSoftwareBtc);var _super=_createSuper(CoreChainSoftware);function CoreChainSoftware(){return _super.apply(this,arguments);}var _proto=CoreChainSoftware.prototype;_proto.getCoinName=function(){var _getCoinName=_asyncToGenerator(function*(){return Promise.resolve('BCH');});function getCoinName(){return _getCoinName.apply(this,arguments);}return getCoinName;}();_proto.getXpubRegex=function(){var _getXpubRegex=_asyncToGenerator(function*(){return'^([x]pub)';});function getXpubRegex(){return _getXpubRegex.apply(this,arguments);}return getXpubRegex;}();_proto.getXprvtRegex=function(){var _getXprvtRegex=_asyncToGenerator(function*(){return'^([x]prv)';});function getXprvtRegex(){return _getXprvtRegex.apply(this,arguments);}return getXprvtRegex;}();_proto.decodeAddress=function decodeAddress(address){return sdkBch.decodeAddress(address);};_proto.encodeAddress=function encodeAddress(address){return sdkBch.encodeAddress(address);};_proto.getPsbt=function getPsbt({network}){return new PsbtBtcFork({network,forkCoin:'bch',maximumFeeRate:network.maximumFeeRate});};_proto.signMessage=function signMessage(payload){return _get(_getPrototypeOf(CoreChainSoftware.prototype),\"signMessage\",this).call(this,payload);};_proto.signTransaction=function signTransaction(payload){return _get(_getPrototypeOf(CoreChainSoftware.prototype),\"signTransaction\",this).call(this,payload);};_proto.getPrivateKeys=function getPrivateKeys(payload){return _get(_getPrototypeOf(CoreChainSoftware.prototype),\"getPrivateKeys\",this).call(this,payload);};_proto.getAddressFromPrivate=function getAddressFromPrivate(query){return _get(_getPrototypeOf(CoreChainSoftware.prototype),\"getAddressFromPrivate\",this).call(this,query);};_proto.getAddressFromPublic=function getAddressFromPublic(query){return _get(_getPrototypeOf(CoreChainSoftware.prototype),\"getAddressFromPublic\",this).call(this,query);};_proto.getAddressesFromHd=function getAddressesFromHd(query){return _get(_getPrototypeOf(CoreChainSoftware.prototype),\"getAddressesFromHd\",this).call(this,query);};return _createClass(CoreChainSoftware);}(CoreChainSoftwareBtc);export{CoreChainSoftware as default};","import{isCashAddress,isValidAddress,toCashAddress,toLegacyAddress}from'bchaddrjs';export function decodeAddress(address){if(!isValidAddress(address)||isCashAddress(address)&&!address.startsWith('bitcoincash:')){throw new Error(`Invalid address: ${address}`);}if(isCashAddress(address)){return toLegacyAddress(address);}return address;}export function encodeAddress(address){if(!isValidAddress(address)){throw new Error(`Invalid address: ${address}`);}if(!isCashAddress(address)){return toCashAddress(address);}return address;}","import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function(){return!!t;})();}import{sha256 as _sha256}from'@noble/hashes/sha256';import{address as BitcoinJsAddress,Transaction as BitcoinJsTransaction,Psbt,payments}from'bitcoinjs-lib';import bitcoinMessage from'bitcoinjs-message';import bs58check from'bs58check';import{encode as VaruintBitCoinEncode}from'varuint-bitcoin';import{presetNetworksMap}from'@onekeyhq/shared/src/config/presetNetworks';import{IMPL_TBTC}from'@onekeyhq/shared/src/engine/engineConsts';import{AddressNotSupportSignMethodError,OneKeyInternalError}from'@onekeyhq/shared/src/errors';import{defaultLogger}from'@onekeyhq/shared/src/logger/logger';import{checkIsDefined}from'@onekeyhq/shared/src/utils/assertUtils';import bufferUtils from'@onekeyhq/shared/src/utils/bufferUtils';import{EMessageTypesBtc}from'@onekeyhq/shared/types/message';import{CoreChainApiBase}from\"../../base/CoreChainApiBase\";import{BaseBip32KeyDeriver,batchGetPublicKeysAsync,decrypt,encrypt,mnemonicFromEntropyAsync,mnemonicToSeedAsync,secp256k1,verify}from\"../../secret\";import{EAddressEncodings,ECoreApiExportedSecretKeyType}from\"../../types\";import{slicePathTemplate}from\"../../utils\";import{btcForkVersionBytesToBuffer,buildBtcXpubSegwitAsync,getAddressFromXpub as _getAddressFromXpub,getBitcoinBip32,getBitcoinECPair,getBtcForkNetwork,getBtcForkVersionBytesByAddressEncoding,getBtcXpubFromXprvt,getInputsToSignFromPsbt,getPublicKeyFromXpub,initBitcoinEcc,tweakSigner,validateBtcAddress,validateBtcXprvt,validateBtcXpub}from\"./sdkBtc\";import{isTaprootInput}from\"./sdkBtc/bip371\";import{buildPsbt}from\"./sdkBtc/providerUtils\";var curveName='secp256k1';var validator=function(pubkey,msghash,signature){var pubkeyBuffer=Buffer.from(pubkey);var msghashBuffer=Buffer.from(msghash);var signatureBuffer=Buffer.from(signature);return verify(curveName,pubkeyBuffer,msghashBuffer,signatureBuffer);};export function sha256(buffer){return Buffer.from(_sha256(Uint8Array.from(buffer)));}var bip0322Hash=function(message){var tag='BIP0322-signed-message';var tagHash=sha256(Buffer.from(tag));var result=sha256(Buffer.concat([tagHash,tagHash,Buffer.from(message)]));return result.toString('hex');};var encodeVarString=function(buffer){var lengthBytes=VaruintBitCoinEncode(buffer.byteLength);return Buffer.concat([Buffer.from(lengthBytes.buffer),buffer]);};var CoreChainSoftwareBtc=function(_CoreChainApiBase){_inherits(CoreChainSoftwareBtc,_CoreChainApiBase);var _super=_createSuper(CoreChainSoftwareBtc);function CoreChainSoftwareBtc(){return _super.apply(this,arguments);}var _proto=CoreChainSoftwareBtc.prototype;_proto.getCoinName=function(){var _getCoinName=_asyncToGenerator(function*({network}){return Promise.resolve(network.isTestnet?'TEST':'BTC');});function getCoinName(_x){return _getCoinName.apply(this,arguments);}return getCoinName;}();_proto.getXpubRegex=function(){var _getXpubRegex=_asyncToGenerator(function*({btcForkNetwork}){if(btcForkNetwork.networkChainCode===presetNetworksMap.btc.code){return'^[xyz]pub';}if(btcForkNetwork.networkChainCode===presetNetworksMap.tbtc.code||btcForkNetwork.networkChainCode===presetNetworksMap.sbtc.code){return'^[tuv]pub';}return'';});function getXpubRegex(_x2){return _getXpubRegex.apply(this,arguments);}return getXpubRegex;}();_proto.getXprvtRegex=function(){var _getXprvtRegex=_asyncToGenerator(function*({btcForkNetwork}){if(btcForkNetwork.networkChainCode===presetNetworksMap.btc.code){return'^[xyz]prv';}if(btcForkNetwork.networkChainCode===presetNetworksMap.tbtc.code||btcForkNetwork.networkChainCode===presetNetworksMap.sbtc.code){return'^[tuv]prv';}return'';});function getXprvtRegex(_x3){return _getXprvtRegex.apply(this,arguments);}return getXprvtRegex;}();_proto.validateXprvt=function(){var _validateXprvt=_asyncToGenerator(function*(params){var{xprvt,btcForkNetwork}=params;return Promise.resolve(validateBtcXprvt({xprvt,regex:yield this.getXprvtRegex({btcForkNetwork})}));});function validateXprvt(_x4){return _validateXprvt.apply(this,arguments);}return validateXprvt;}();_proto.validateXpub=function(){var _validateXpub=_asyncToGenerator(function*(params){var{xpub,btcForkNetwork}=params;return Promise.resolve(validateBtcXpub({xpub,regex:yield this.getXpubRegex({btcForkNetwork})}));});function validateXpub(_x5){return _validateXpub.apply(this,arguments);}return validateXpub;}();_proto.decodeAddress=function decodeAddress(address){return address;};_proto.encodeAddress=function encodeAddress(address){return address;};_proto.getPsbt=function getPsbt({network}){return new Psbt({network});};_proto.getExportedSecretKey=function(){var _getExportedSecretKey=_asyncToGenerator(function*(query){var{account,keyType,addressEncoding,networkInfo,password,credentials}=query;var{privateKeyRaw}=yield this.baseGetDefaultPrivateKey(query);if(!privateKeyRaw){throw new Error('privateKeyRaw is required');}if(keyType===ECoreApiExportedSecretKeyType.xprvt){if(credentials.hd){if(!addressEncoding){throw new Error('addressEncoding is required');}if(!account.xpub){throw new Error('xpub is required');}var network=getBtcForkNetwork(networkInfo?.networkChainCode);var versionByte=getBtcForkVersionBytesByAddressEncoding({addressEncoding,btcForkNetwork:network});var xprvVersionBytes=versionByte.private;if(!xprvVersionBytes){throw new Error('xprvVersionBytes not found');}return bs58check.encode(Buffer.from(bs58check.decode(account.xpub)).fill(btcForkVersionBytesToBuffer({versionBytes:xprvVersionBytes}),0,4).fill(Buffer.concat([Buffer.from([0]),decrypt(password,privateKeyRaw)]),45,78));}if(credentials.imported){return bs58check.encode(decrypt(password,privateKeyRaw));}}throw new Error(`SecretKey type not support: ${keyType}`);});function getExportedSecretKey(_x6){return _getExportedSecretKey.apply(this,arguments);}return getExportedSecretKey;}();_proto.getAddressFromPublic=function(){var _getAddressFromPublic=_asyncToGenerator(function*(query){var{networkInfo,publicKey,addressEncoding}=query;var network=getBtcForkNetwork(networkInfo.networkChainCode);var xpub=publicKey;var firstRelPath='0/0';var{addresses,xpubSegwit}=yield this.getAddressFromXpub({network,xpub,relativePaths:[firstRelPath],addressEncoding});return{address:addresses[firstRelPath],publicKey:'',xpub,xpubSegwit,addresses};});function getAddressFromPublic(_x7){return _getAddressFromPublic.apply(this,arguments);}return getAddressFromPublic;}();_proto.getAddressFromXpub=function(){var _getAddressFromXpub2=_asyncToGenerator(function*({network,xpub,relativePaths,addressEncoding}){return _getAddressFromXpub({curve:curveName,network,xpub,relativePaths,addressEncoding,encodeAddress:this.encodeAddress.bind(this)});});function getAddressFromXpub(_x8){return _getAddressFromXpub2.apply(this,arguments);}return getAddressFromXpub;}();_proto.buildSignersMap=function(){var _buildSignersMap=_asyncToGenerator(function*({payload}){var{password}=payload;var privateKeys=yield this.getPrivateKeysInFullPath({payload});var pathToAddresses=payload?.btcExtraInfo?.pathToAddresses;var signers={};for(var[fullPath,privateKey]of Object.entries(privateKeys)){var _address=pathToAddresses?.[fullPath]?.address;if(!_address){throw new Error('getSignersMap ERROR: address is required, is privateKeys including fullPath?');}var signer=yield this.buildSignerBtc({privateKey,password});signers[_address]=signer;}return signers;});function buildSignersMap(_x9){return _buildSignersMap.apply(this,arguments);}return buildSignersMap;}();_proto.buildSignerBtc=function buildSignerBtc({privateKey,password}){return this.baseCreateSigner({curve:curveName,privateKey,password});};_proto.getBitcoinSignerPro=function(){var _getBitcoinSignerPro=_asyncToGenerator(function*({network,signer,input,disableTweakSigner,useTweakedSigner}){var publicKey=yield signer.getPubkey(true);if(isTaprootInput(input)){var needTweak=typeof useTweakedSigner==='boolean'?useTweakedSigner:true;if(!disableTweakSigner){if(input.tapLeafScript&&input.tapLeafScript?.length>0&&!input.tapMerkleRoot){input.tapLeafScript.forEach(function(e){if(e.controlBlock&&e.script){needTweak=false;}});}}else{needTweak=false;}if(input.tapInternalKey){var privateKey=yield signer.getPrvkey();var tweakedSigner=tweakSigner(privateKey,publicKey,{network,needTweak});return tweakedSigner;}}return{publicKey,sign:function(){var _ref=_asyncToGenerator(function*(hash){var[sig]=yield signer.sign(hash);return sig;});return function sign(_x11){return _ref.apply(this,arguments);};}()};});function getBitcoinSignerPro(_x10){return _getBitcoinSignerPro.apply(this,arguments);}return getBitcoinSignerPro;}();_proto.packTransactionToPSBT=function(){var _packTransactionToPSBT=_asyncToGenerator(function*({network,signers,payload}){var _this=this;var{unsignedTx,btcExtraInfo}=payload;var psbt=yield buildPsbt({network,unsignedTx,btcExtraInfo,getPsbt:function(params){return _this.getPsbt({network:params.network});},buildInputMixinInfo:function(){var _ref2=_asyncToGenerator(function*({address}){var signer=_this.pickSigner(signers,address);return Promise.resolve({pubkey:yield signer.getPubkey(true)});});return function buildInputMixinInfo(_x13){return _ref2.apply(this,arguments);};}()});return psbt;});function packTransactionToPSBT(_x12){return _packTransactionToPSBT.apply(this,arguments);}return packTransactionToPSBT;}();_proto.appendImportedRelPathPrivateKeys=function appendImportedRelPathPrivateKeys({privateKeys,password,relPaths}){var deriver=new BaseBip32KeyDeriver(Buffer.from('Bitcoin seed'),secp256k1);var privateKey=privateKeys[''];var xprv=decrypt(password,bufferUtils.toBuffer(privateKey));var startKey={chainCode:xprv.slice(13,45),key:xprv.slice(46,78)};var cache={};relPaths?.forEach(function(relPath){var pathComponents=relPath.split('/');var currentPath='';var parent=startKey;pathComponents.forEach(function(pathComponent){currentPath=currentPath.length>0?`${currentPath}/${pathComponent}`:pathComponent;if(typeof cache[currentPath]==='undefined'){var index=pathComponent.endsWith(\"'\")?parseInt(pathComponent.slice(0,-1),10)+2**31:parseInt(pathComponent,10);var thisPrivKey=deriver.CKDPriv(parent,index);cache[currentPath]=thisPrivKey;}parent=cache[currentPath];});privateKeys[relPath]=bufferUtils.bytesToHex(encrypt(password,cache[relPath].key));});return privateKeys;};_proto.getPrivateKeysInFullPath=function(){var _getPrivateKeysInFullPath=_asyncToGenerator(function*({payload}){var btcExtraInfo=checkIsDefined(payload.btcExtraInfo);var privateKeys=yield this.getPrivateKeys(payload);var isImported=!!payload.credentials.imported;var{pathToAddresses}=btcExtraInfo;var networkImpl=checkIsDefined(payload.networkInfo.networkImpl);var ret={};for(var[fullPath,{address:_address2,relPath}]of Object.entries(pathToAddresses)){var privateKeyPath=isImported?relPath:fullPath;var privateKey=privateKeys[privateKeyPath];if(networkImpl===IMPL_TBTC){if(!privateKey){var fixedPath=privateKeyPath.replace(`m/86'/0'/`,`m/86'/1'/`);privateKey=privateKeys[fixedPath];}if(!privateKey){var _fixedPath=privateKeyPath.replace(`m/86'/1'/`,`m/86'/0'/`);privateKey=privateKeys[_fixedPath];}}var addressFromPrivateKey=_address2;if(addressFromPrivateKey!==_address2){throw new Error('addressFromPrivateKey and utxoAddress not matched');}if(!privateKey){throw new Error(`privateKey not found: ${_address2} ${fullPath}`);}ret[fullPath]=privateKey;}return ret;});function getPrivateKeysInFullPath(_x14){return _getPrivateKeysInFullPath.apply(this,arguments);}return getPrivateKeysInFullPath;}();_proto.signBip322MessageSimple=function(){var _signBip322MessageSimple=_asyncToGenerator(function*({encodedTx,account,message,signers,psbtNetwork}){initBitcoinEcc();var addressInfo=validateBtcAddress({address:account.address,network:psbtNetwork});if(!addressInfo.isValid){throw new Error('Invalid address');}var supportedTypes=[EAddressEncodings.P2WPKH,EAddressEncodings.P2TR];if(!addressInfo.encoding||addressInfo.encoding&&!supportedTypes.includes(addressInfo.encoding)){throw new AddressNotSupportSignMethodError();}var outputScript=BitcoinJsAddress.toOutputScript(account.address,psbtNetwork);var prevoutHash=Buffer.from('0000000000000000000000000000000000000000000000000000000000000000','hex');var prevoutIndex=0xff_ff_ff_ff;var sequence=0;var scriptSig=Buffer.concat([Buffer.from('0020','hex'),Buffer.from(bip0322Hash(message),'hex')]);var txToSpend=new BitcoinJsTransaction();txToSpend.version=0;txToSpend.addInput(prevoutHash,prevoutIndex,sequence,scriptSig);txToSpend.addOutput(outputScript,BigInt(0));var psbtToSign=new Psbt();psbtToSign.setVersion(0);psbtToSign.addInput({hash:txToSpend.getHash(),index:0,sequence:0,witnessUtxo:{script:outputScript,value:BigInt(0)}});psbtToSign.addOutput({script:Buffer.from('6a','hex'),value:BigInt(0)});var inputsToSign=getInputsToSignFromPsbt({psbt:psbtToSign,psbtNetwork,account,isBtcWalletProvider:false});yield this.signPsbt({encodedTx,psbt:psbtToSign,signers,inputsToSign,network:psbtNetwork});inputsToSign.forEach(function(v){psbtToSign.finalizeInput(v.index);});var txToSign=psbtToSign.extractTransaction();var len=VaruintBitCoinEncode(txToSign.ins[0].witness.length);var signature=Buffer.concat([Buffer.from(len.buffer),...txToSign.ins[0].witness.map(function(w){return encodeVarString(Buffer.from(w));})]);return signature;});function signBip322MessageSimple(_x15){return _signBip322MessageSimple.apply(this,arguments);}return signBip322MessageSimple;}();_proto.signPsbt=function(){var _signPsbt=_asyncToGenerator(function*({encodedTx,network,psbt,signers,inputsToSign,signOnly}){for(var i=0,len=inputsToSign.length;i<len;i+=1){var input=inputsToSign[i];var signer=this.pickSigner(signers,input.address);var bitcoinSigner=yield this.getBitcoinSignerPro({network,signer,input:psbt.data.inputs[input.index],disableTweakSigner:input.disableTweakSigner,useTweakedSigner:input.useTweakedSigner});yield psbt.signInputAsync(input.index,bitcoinSigner,input.sighashTypes);}var rawTx='';var finalizedPsbtHex='';try{var finalizedPsbt=Psbt.fromHex(psbt.toHex(),{network});inputsToSign.forEach(function(v){finalizedPsbt.finalizeInput(v.index);});if(!signOnly){rawTx=finalizedPsbt.extractTransaction().toHex();}finalizedPsbtHex=finalizedPsbt.toHex();}catch(error){finalizedPsbtHex=psbt.toHex();}return{encodedTx,txid:'',rawTx,psbtHex:psbt.toHex(),finalizedPsbtHex};});function signPsbt(_x16){return _signPsbt.apply(this,arguments);}return signPsbt;}();_proto.getPrivateKeys=function(){var _getPrivateKeys=_asyncToGenerator(function*(payload){var{password,relPaths}=payload;var isImported=!!payload.credentials.imported;var privateKeys=yield this.baseGetPrivateKeys({payload,curve:curveName});if(isImported){this.appendImportedRelPathPrivateKeys({privateKeys,password,relPaths});}return privateKeys;});function getPrivateKeys(_x17){return _getPrivateKeys.apply(this,arguments);}return getPrivateKeys;}();_proto.getAddressFromPrivate=function(){var _getAddressFromPrivate=_asyncToGenerator(function*(query){var{privateKeyRaw,networkInfo,addressEncoding}=query;var network=getBtcForkNetwork(networkInfo.networkChainCode);var{xpub}=getBtcXpubFromXprvt({privateKeyRaw,network});var pubKey=getPublicKeyFromXpub({xpub,network,relPath:'0/0'});var usedAddressEncoding=addressEncoding;var firstAddressRelPath='0/0';var{addresses,xpubSegwit}=yield this.getAddressFromXpub({network,xpub,relativePaths:[firstAddressRelPath],addressEncoding:usedAddressEncoding});var{[firstAddressRelPath]:address}=addresses;return Promise.resolve({publicKey:pubKey,xpub,xpubSegwit,relPath:firstAddressRelPath,address,addresses});});function getAddressFromPrivate(_x18){return _getAddressFromPrivate.apply(this,arguments);}return getAddressFromPrivate;}();_proto.getAddressesFromHd=function(){var _getAddressesFromHd=_asyncToGenerator(function*(query){var _this2=this;defaultLogger.account.accountCreatePerf.getAddressesFromHdBtc();var{template,hdCredential,password,indexes,networkInfo:{networkChainCode},addressEncoding}=query;var{pathPrefix}=slicePathTemplate(template);var relPaths=indexes.map(function(index){return`${index.toString()}'`;});defaultLogger.account.accountCreatePerf.batchGetPublicKeysBtc();var pubkeyInfos=yield batchGetPublicKeysAsync({curveName,hdCredential,password,prefix:pathPrefix,relPaths});defaultLogger.account.accountCreatePerf.batchGetPublicKeysBtcDone();if(pubkeyInfos.length!==indexes.length){throw new OneKeyInternalError('Unable to get publick key.');}if(!networkChainCode){throw new Error('networkChainCode is required');}var network=getBtcForkNetwork(networkChainCode);var{public:xpubVersionBytes}=(network.segwitVersionBytes||{})[addressEncoding]||network.bip32;defaultLogger.account.accountCreatePerf.mnemonicFromEntropy();var mnemonic=yield mnemonicFromEntropyAsync({hdCredential,password});defaultLogger.account.accountCreatePerf.mnemonicFromEntropyDone();defaultLogger.account.accountCreatePerf.mnemonicToSeed();var seed=yield mnemonicToSeedAsync({mnemonic});defaultLogger.account.accountCreatePerf.mnemonicToSeedDone();defaultLogger.account.accountCreatePerf.seedToRootBip32();var root=getBitcoinBip32().fromSeed(seed);defaultLogger.account.accountCreatePerf.seedToRootBip32Done();var xpubBuffers=[Buffer.from(xpubVersionBytes.toString(16).padStart(8,'0'),'hex'),Buffer.from([3])];var addresses=yield Promise.all(pubkeyInfos.map(function(){var _ref3=_asyncToGenerator(function*(info,index){var{path,parentFingerPrint,extendedKey}=info;defaultLogger.account.accountCreatePerf.bip32DerivePath();var node=root.derivePath(`${path}/0/0`);defaultLogger.account.accountCreatePerf.derivePathKeyPair();var keyPair=getBitcoinECPair().fromWIF(node.toWIF());var publicKey=keyPair.publicKey.toString('hex');defaultLogger.account.accountCreatePerf.keypairToXpub();var xpub=bs58check.encode(Buffer.concat([...xpubBuffers,parentFingerPrint,Buffer.from((indexes[index]+2**31).toString(16).padStart(8,'0'),'hex'),extendedKey.chainCode,extendedKey.key]));defaultLogger.account.accountCreatePerf.keypairToXpubDone();var firstAddressRelPath='0/0';var relativePaths=[firstAddressRelPath];defaultLogger.account.accountCreatePerf.xpubToAddress();var{addresses:addressesMap,xpubSegwit}=yield _this2.getAddressFromXpub({network,xpub,relativePaths,addressEncoding});defaultLogger.account.accountCreatePerf.xpubToAddressDone();var{[firstAddressRelPath]:address}=addressesMap;defaultLogger.account.accountCreatePerf.xpubToSegwit();xpubSegwit=yield buildBtcXpubSegwitAsync({xpub,addressEncoding,hdAccountPayload:{curveName,hdCredential,password,path}});defaultLogger.account.accountCreatePerf.xpubToSegwitDone();var addressItem={address,publicKey,path,relPath:firstAddressRelPath,xpub,xpubSegwit,addresses:{[firstAddressRelPath]:address}};return addressItem;});return function(_x20,_x21){return _ref3.apply(this,arguments);};}()));defaultLogger.account.accountCreatePerf.getAddressesFromHdBtcDone();return{addresses};});function getAddressesFromHd(_x19){return _getAddressesFromHd.apply(this,arguments);}return getAddressesFromHd;}();_proto.signTransaction=function(){var _signTransaction=_asyncToGenerator(function*(payload){var{unsignedTx,networkInfo:{networkChainCode},relPaths,signOnly}=payload;var encodedTx=unsignedTx.encodedTx;var{psbtHex,inputsToSign}=encodedTx;if(!relPaths?.length){throw new Error('BTC sign transaction need relPaths');}var network=getBtcForkNetwork(networkChainCode);var signers=yield this.buildSignersMap({payload});if(psbtHex&&inputsToSign){var PsbtFn=Psbt;var _psbt=Psbt.fromHex(psbtHex,{network});var psbt2=_psbt;var b1=_psbt.data.inputs[0].witnessScript;var b2=_psbt.data.inputs[0].witnessUtxo?.script;var paymentsFn=payments;var pubkeyStr1;var pubkeyStr2;var pubkeyStr3;var pubkeyStr4;var pubkeyStr5;try{var r1=paymentsFn.p2tr({output:b2,network});pubkeyStr1=r1?.pubkey?Buffer.from(r1.pubkey).toString('hex'):undefined;}catch(error){}try{var r2=payments.p2pkh({output:b2,network});pubkeyStr2=r2?.pubkey?Buffer.from(r2.pubkey).toString('hex'):undefined;}catch(error){}try{var r3=payments.p2sh({output:b2,network});pubkeyStr3=r3?.pubkey?Buffer.from(r3.pubkey).toString('hex'):undefined;}catch(error){}try{var r4=payments.p2wpkh({output:b2,network});pubkeyStr4=r4?.pubkey?Buffer.from(r4.pubkey).toString('hex'):undefined;}catch(error){}try{var r5=payments.p2wsh({output:b2,network});pubkeyStr5=r5?.pubkey?Buffer.from(r5.pubkey).toString('hex'):undefined;}catch(error){}return this.signPsbt({encodedTx:unsignedTx.encodedTx,network,psbt:_psbt,signers,inputsToSign,signOnly});}var psbt=yield this.packTransactionToPSBT({network,signers,payload});if(\"production\"!=='production'){var buildPsbtHex=psbt.toHex();}for(var i=0;i<encodedTx.inputs.length;++i){var{address:_address3}=encodedTx.inputs[i];var signer=this.pickSigner(signers,_address3);var psbtInput=psbt.data.inputs[0];var bitcoinSigner=yield this.getBitcoinSignerPro({signer,input:psbtInput,network});yield psbt.signInputAsync(i,bitcoinSigner);}var{txid,rawTx}=yield this.extractPsbtToSignedTx({psbt});return{encodedTx:unsignedTx.encodedTx,txid,rawTx,psbtHex:undefined};});function signTransaction(_x22){return _signTransaction.apply(this,arguments);}return signTransaction;}();_proto.extractPsbtToSignedTx=function(){var _extractPsbtToSignedTx=_asyncToGenerator(function*({psbt}){psbt.validateSignaturesOfAllInputs(validator);var tx;try{tx=psbt.finalizeAllInputs().extractTransaction();}catch(error){throw error;}var result={txid:tx.getId(),rawTx:tx.toHex()};return Promise.resolve(result);});function extractPsbtToSignedTx(_x23){return _extractPsbtToSignedTx.apply(this,arguments);}return extractPsbtToSignedTx;}();_proto.pickSigner=function pickSigner(signers,address){var signer=signers[address];if(!signer){throw new Error(`BTC signer not found: ${address}`);}return signer;};_proto.signMessage=function(){var _signMessage=_asyncToGenerator(function*(payload){var{account,networkInfo:{networkChainCode},relPaths}=payload;if(!relPaths?.length){throw new Error('BTC sign message need relPaths');}var unsignedMsg=payload.unsignedMsg;var network=getBtcForkNetwork(networkChainCode);var signers=yield this.buildSignersMap({payload});if(unsignedMsg.type===EMessageTypesBtc.BIP322_SIMPLE){var buffer=yield this.signBip322MessageSimple({encodedTx:null,account,message:unsignedMsg.message,signers,psbtNetwork:network});return bufferUtils.bytesToHex(buffer);}var signer=this.pickSigner(signers,account.address);var privateKey=yield signer.getPrvkey();var keyPair=getBitcoinECPair().fromPrivateKey(privateKey,{network});var sigOptions=unsignedMsg.sigOptions||{segwitType:'p2wpkh'};var signature=bitcoinMessage.sign(unsignedMsg.message,checkIsDefined(keyPair.privateKey),keyPair.compressed,sigOptions);return bufferUtils.bytesToHex(signature);});function signMessage(_x24){return _signMessage.apply(this,arguments);}return signMessage;}();return _createClass(CoreChainSoftwareBtc);}(CoreChainApiBase);export{CoreChainSoftwareBtc as default};","import coinselectUtils from'@onekeyfe/coinselect/utils';import accountUtils from'@onekeyhq/shared/src/utils/accountUtils';export function slicePathTemplate(template){return accountUtils.slicePathTemplate(template);}export function getUtxoAccountPrefixPath({fullPath}){var pathComponent=fullPath.split('/');pathComponent.pop();pathComponent.pop();var prefixPath=pathComponent.join('/');return prefixPath;}export function getBIP44Path(account,address){var realPath='';for(var[key,value]of Object.entries(account.addresses)){if(value===address){realPath=key;break;}}return`${account.path}/${realPath}`;}export function estimateTxSize(inputsForCoinSelect,outputsForCoinSelect){return coinselectUtils.transactionBytes(inputsForCoinSelect,outputsForCoinSelect);}"],"names":["_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","result","Super","NewTarget","this","constructor","Reflect","construct","arguments","apply","t","Boolean","prototype","valueOf","call","ChainSigner","_Verifier","_super","encryptedPrivateKey","password","curve","_this","pub","N","key","chainCode","Buffer","alloc","toString","_getPrvkeyHex","_proto2","getPrvkey","Promise","resolve","getPrvkeyHex","bufferUtils","bytesToHex","sign","digest","signature","slice","length","Verifier","compressedPublicKey","from","uncompressedPublicKey","_getPubkeyHex","_proto","getPubkey","compressed","getPubkeyHex","_x","verify","verifySignature","publicKey","p","toBuffer","d","s","ownKeys","e","r","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","CoreChainApiBase","_baseCreateSigner","_baseGetSingleSigner","_baseGetPrivateKeys","_baseGetPrivateKeysHd","_baseGetAddressesFromHd","_baseGetDefaultPrivateKey","_validateXpub","_validateXprvt","baseGetCurve","curveName","baseCreateSigner","privateKey","privateKeyBuffer","baseGetSingleSigner","payload","privateKeys","getPrivateKeys","accountPath","account","path","firstRelPath","relPaths","join","Error","_x2","baseGetPrivateKeys","credentials","hd","imported","baseGetPrivateKeysHd","hdCredential","credential","encryptPrivateKey","_x3","pathComponents","split","usedRelativePaths","pop","basePath","reduce","ret","extendedKey","_x4","baseGetAddressesFromHd","query","options","generateFrom","template","indexes","pathPrefix","pathSuffix","indexFormatted","map","index","replace","isPrivateKeyMode","pubkeyInfos","pvtkeyInfos","prefix","infos","_ref","addresses","all","info","privateKeyRaw","getAddressFromPrivate","networkInfo","privateKeyInfo","getAddressFromPublic","publicKeyInfo","_x7","_x5","_x6","baseGetCredentialsType","ECoreCredentialType","baseGetDefaultPrivateKey","params","privateKeysMap","values","_x8","validateXpub","_x9","validateXprvt","_x10","CoreChainHd","_CoreChainSoftware","CoreChainSoftware","_CoreChainSoftwareBtc","_getCoinName","_getXpubRegex","_getXprvtRegex","getCoinName","getXpubRegex","getXprvtRegex","decodeAddress","address","encodeAddress","getPsbt","network","forkCoin","maximumFeeRate","signMessage","signTransaction","getAddressesFromHd","isValidAddress","isCashAddress","startsWith","toLegacyAddress","toCashAddress","validator","pubkey","msghash","pubkeyBuffer","msghashBuffer","signatureBuffer","sha256","buffer","Uint8Array","bip0322Hash","message","tagHash","concat","CoreChainSoftwareBtc","_CoreChainApiBase","_getExportedSecretKey","_getAddressFromPublic","_getAddressFromXpub2","_buildSignersMap","_getBitcoinSignerPro","_packTransactionToPSBT","_getPrivateKeysInFullPath","_signBip322MessageSimple","_signPsbt","_getPrivateKeys","_getAddressFromPrivate","_getAddressesFromHd","_signTransaction","_extractPsbtToSignedTx","_signMessage","isTestnet","btcForkNetwork","networkChainCode","btc","code","tbtc","sbtc","xprvt","validateBtcXprvt","regex","xpub","validateBtcXpub","getExportedSecretKey","keyType","addressEncoding","ECoreApiExportedSecretKeyType","getBtcForkNetwork","xprvVersionBytes","getBtcForkVersionBytesByAddressEncoding","private","fill","btcForkVersionBytesToBuffer","versionBytes","xpubSegwit","getAddressFromXpub","relativePaths","bind","buildSignersMap","getPrivateKeysInFullPath","pathToAddresses","btcExtraInfo","signers","fullPath","entries","_address","signer","buildSignerBtc","getBitcoinSignerPro","input","disableTweakSigner","useTweakedSigner","needTweak","tapLeafScript","tapMerkleRoot","controlBlock","script","tapInternalKey","tweakSigner","hash","sig","_x11","packTransactionToPSBT","_ref2","unsignedTx","psbt","buildInputMixinInfo","pickSigner","_x13","_x12","appendImportedRelPathPrivateKeys","deriver","xprv","startKey","cache","relPath","currentPath","parent","pathComponent","endsWith","parseInt","thisPrivKey","CKDPriv","isImported","networkImpl","_address2","privateKeyPath","_x14","signBip322MessageSimple","encodedTx","psbtNetwork","initBitcoinEcc","addressInfo","validateBtcAddress","isValid","supportedTypes","EAddressEncodings","P2WPKH","P2TR","encoding","includes","outputScript","prevoutHash","scriptSig","txToSpend","version","addInput","addOutput","BigInt","psbtToSign","setVersion","getHash","sequence","witnessUtxo","value","inputsToSign","getInputsToSignFromPsbt","isBtcWalletProvider","signPsbt","v","finalizeInput","txToSign","extractTransaction","len","ins","witness","w","lengthBytes","byteLength","_x15","signOnly","i","bitcoinSigner","data","inputs","signInputAsync","sighashTypes","rawTx","finalizedPsbtHex","finalizedPsbt","fromHex","toHex","error","txid","psbtHex","_x16","_x17","getBtcXpubFromXprvt","pubKey","getPublicKeyFromXpub","usedAddressEncoding","firstAddressRelPath","_x18","_this2","accountCreatePerf","getAddressesFromHdBtc","batchGetPublicKeysBtc","batchGetPublicKeysBtcDone","public","xpubVersionBytes","segwitVersionBytes","bip32","mnemonicFromEntropy","mnemonic","mnemonicFromEntropyDone","mnemonicToSeed","seed","mnemonicToSeedDone","seedToRootBip32","root","getBitcoinBip32","fromSeed","seedToRootBip32Done","_ref3","xpubBuffers","padStart","parentFingerPrint","bip32DerivePath","node","derivePath","derivePathKeyPair","getBitcoinECPair","fromWIF","toWIF","keypairToXpub","keypairToXpubDone","xpubToAddress","addressesMap","xpubToAddressDone","xpubToSegwit","buildBtcXpubSegwitAsync","hdAccountPayload","xpubToSegwitDone","_x20","_x21","getAddressesFromHdBtcDone","_x19","_psbt","b2","witnessScript","paymentsFn","r1","p2tr","output","r2","r3","r4","r5","_address3","psbtInput","extractPsbtToSignedTx","undefined","_x22","tx","validateSignaturesOfAllInputs","finalizeAllInputs","getId","_x23","unsignedMsg","type","BIP322_SIMPLE","keyPair","fromPrivateKey","sigOptions","segwitType","_x24","slicePathTemplate","getUtxoAccountPrefixPath","getBIP44Path","realPath","estimateTxSize","inputsForCoinSelect","outputsForCoinSelect"],"sourceRoot":""}