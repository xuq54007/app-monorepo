{"version":3,"file":"static/js/57413.1401b01636.chunk.js","mappings":"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","sources":["webpack://web/../../packages/core/src/base/ChainSigner.ts","webpack://web/../../packages/core/src/base/CoreChainApiBase.ts","webpack://web/../../packages/core/src/chains/lightning/CoreChainHd.ts","webpack://web/../../packages/core/src/chains/lightning/sdkLightning/account.ts","webpack://web/../../packages/core/src/chains/lightning/sdkLightning/signer.ts","webpack://web/../../packages/core/src/chains/lightning/CoreChainSoftware.ts","webpack://web/../../packages/core/src/chains/lightning/sdkLightning/lnurl.ts","webpack://web/../../packages/core/src/utils/index.ts"],"sourcesContent":["import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _createClass from\"@babel/runtime/helpers/createClass\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function(){return!!t;})();}import bufferUtils from'@onekeyhq/shared/src/utils/bufferUtils';import{N,decrypt,sign as _sign,uncompressPublicKey,verify}from\"../secret\";export var Verifier=function(){function Verifier(pub,curve){this.curve=curve;this.compressedPublicKey=Buffer.from(pub,'hex');this.uncompressedPublicKey=uncompressPublicKey(curve,this.compressedPublicKey);}var _proto=Verifier.prototype;_proto.getPubkey=function getPubkey(compressed){return Promise.resolve(compressed?this.compressedPublicKey:this.uncompressedPublicKey);};_proto.getPubkeyHex=function(){var _getPubkeyHex=_asyncToGenerator(function*(compressed){return bufferUtils.bytesToHex(yield this.getPubkey(compressed));});function getPubkeyHex(_x){return _getPubkeyHex.apply(this,arguments);}return getPubkeyHex;}();_proto.verify=function verify(){return Promise.resolve(Buffer.from([]));};_proto.verifySignature=function verifySignature({publicKey,digest,signature}){var p=bufferUtils.toBuffer(publicKey);var d=bufferUtils.toBuffer(digest);var s=bufferUtils.toBuffer(signature);var{curve}=this;var result=verify(curve,p,d,s);return Promise.resolve(result);};return _createClass(Verifier);}();export var ChainSigner=function(_Verifier){_inherits(ChainSigner,_Verifier);var _super=_createSuper(ChainSigner);function ChainSigner(encryptedPrivateKey,password,curve){var _this;var pub=N(curve,{key:encryptedPrivateKey,chainCode:Buffer.alloc(32)},password).key.toString('hex');_this=_super.call(this,pub,curve);_this.encryptedPrivateKey=encryptedPrivateKey;_this.password=password;_this.curve=curve;return _this;}var _proto2=ChainSigner.prototype;_proto2.getPrvkey=function getPrvkey(){return Promise.resolve(decrypt(this.password,this.encryptedPrivateKey));};_proto2.getPrvkeyHex=function(){var _getPrvkeyHex=_asyncToGenerator(function*(){return bufferUtils.bytesToHex(yield this.getPrvkey());});function getPrvkeyHex(){return _getPrvkeyHex.apply(this,arguments);}return getPrvkeyHex;}();_proto2.sign=function sign(digest){var signature=_sign(this.curve,this.encryptedPrivateKey,digest,this.password);if(this.curve==='secp256k1'){return Promise.resolve([signature.slice(0,-1),signature[signature.length-1]]);}return Promise.resolve([signature,0]);};return _createClass(ChainSigner);}(Verifier);","import _merge from\"lodash/merge\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _createClass from\"@babel/runtime/helpers/createClass\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{NotImplemented,OneKeyInternalError}from'@onekeyhq/shared/src/errors';import bufferUtils from'@onekeyhq/shared/src/utils/bufferUtils';import{batchGetPrivateKeys,batchGetPublicKeysAsync,decrypt,decryptImportedCredential,ed25519,encrypt,nistp256,secp256k1}from\"../secret\";import{ECoreCredentialType}from\"../types\";import{slicePathTemplate}from\"../utils\";import{ChainSigner}from\"./ChainSigner\";export var CoreChainApiBase=function(){function CoreChainApiBase(){}var _proto=CoreChainApiBase.prototype;_proto.baseGetCurve=function baseGetCurve(curveName){switch(curveName){case'ed25519':return ed25519;case'secp256k1':return secp256k1;case'nistp256':return nistp256;default:throw new OneKeyInternalError('Unsupported curve');}};_proto.baseCreateSigner=function(){var _baseCreateSigner=_asyncToGenerator(function*({curve,privateKey,password}){if(typeof password==='undefined'){throw new OneKeyInternalError('Software signing requires a password.');}var privateKeyBuffer=bufferUtils.toBuffer(privateKey);return Promise.resolve(new ChainSigner(privateKeyBuffer,password,curve));});function baseCreateSigner(_x){return _baseCreateSigner.apply(this,arguments);}return baseCreateSigner;}();_proto.baseGetSingleSigner=function(){var _baseGetSingleSigner=_asyncToGenerator(function*({payload,curve}){var privateKeys=yield this.getPrivateKeys(payload);var accountPath=payload.account.path;var privateKey=privateKeys[accountPath];var firstRelPath=payload?.relPaths?.[0];if(!privateKey&&firstRelPath){var fullPath=[accountPath,firstRelPath].join('/');privateKey=privateKeys[fullPath];}if(!privateKey){throw new Error(`No private key found: ${accountPath}`);}return this.baseCreateSigner({curve,privateKey,password:payload.password});});function baseGetSingleSigner(_x2){return _baseGetSingleSigner.apply(this,arguments);}return baseGetSingleSigner;}();_proto.baseGetPrivateKeys=function(){var _baseGetPrivateKeys=_asyncToGenerator(function*({payload,curve}){var{credentials,account,password,relPaths}=payload;var privateKeys={};if(credentials.hd&&credentials.imported){throw new OneKeyInternalError('getPrivateKeys ERROR: hd and imported credentials can NOT both set.');}if(credentials.hd){privateKeys=yield this.baseGetPrivateKeysHd({curve,account,hdCredential:credentials.hd,password,relPaths});}if(credentials.imported){var{privateKey:p}=decryptImportedCredential({password,credential:credentials.imported});var encryptPrivateKey=bufferUtils.bytesToHex(encrypt(password,p));privateKeys[account.path]=encryptPrivateKey;privateKeys['']=encryptPrivateKey;}if(!Object.keys(privateKeys).length){throw new Error('No private keys found');}return privateKeys;});function baseGetPrivateKeys(_x3){return _baseGetPrivateKeys.apply(this,arguments);}return baseGetPrivateKeys;}();_proto.baseGetPrivateKeysHd=function(){var _baseGetPrivateKeysHd=_asyncToGenerator(function*({curve,password,account,relPaths,hdCredential}){var{path}=account;var pathComponents=path.split('/');var usedRelativePaths=relPaths||[pathComponents.pop()];var basePath=pathComponents.join('/');if(usedRelativePaths.length===0){throw new OneKeyInternalError('getPrivateKeysHd ERROR: relPaths is empty.');}var keys=batchGetPrivateKeys(curve,hdCredential,password,basePath,usedRelativePaths);var map=keys.reduce(function(ret,key){var result=_objectSpread(_objectSpread({},ret),{},{[key.path]:bufferUtils.bytesToHex(key.extendedKey.key)});return result;},{});return map;});function baseGetPrivateKeysHd(_x4){return _baseGetPrivateKeysHd.apply(this,arguments);}return baseGetPrivateKeysHd;}();_proto.baseGetAddressesFromHd=function(){var _baseGetAddressesFromHd=_asyncToGenerator(function*(query,options){var _this=this;var{curve,generateFrom}=options;var{template,hdCredential,password,indexes}=query;var{pathPrefix,pathSuffix}=slicePathTemplate(template);var indexFormatted=indexes.map(function(index){return pathSuffix.replace('{index}',index.toString());});var isPrivateKeyMode=generateFrom==='privateKey';var pubkeyInfos=[];var pvtkeyInfos=[];if(isPrivateKeyMode){pvtkeyInfos=batchGetPrivateKeys(curve,hdCredential,password,pathPrefix,indexFormatted);}else{pubkeyInfos=yield batchGetPublicKeysAsync({curveName:curve,hdCredential,password,prefix:pathPrefix,relPaths:indexFormatted});}var infos=isPrivateKeyMode?pvtkeyInfos:pubkeyInfos;if(infos.length!==indexes.length){throw new OneKeyInternalError('Unable to get publick key.');}var addresses=yield Promise.all(infos.map(function(){var _ref=_asyncToGenerator(function*(info){var{path,extendedKey:{key}}=info;var publicKey;var result;if(isPrivateKeyMode){var privateKeyRaw=bufferUtils.bytesToHex(decrypt(password,key));result=yield _this.getAddressFromPrivate({networkInfo:query.networkInfo,privateKeyRaw,privateKeyInfo:info});}else{publicKey=key.toString('hex');result=yield _this.getAddressFromPublic({networkInfo:query.networkInfo,publicKey,publicKeyInfo:info});}return _merge({publicKey,path},result);});return function(_x7){return _ref.apply(this,arguments);};}()));return{addresses};});function baseGetAddressesFromHd(_x5,_x6){return _baseGetAddressesFromHd.apply(this,arguments);}return baseGetAddressesFromHd;}();_proto.baseGetCredentialsType=function baseGetCredentialsType({credentials}){if(credentials.hd&&credentials.imported){throw new OneKeyInternalError('getCredentialsType ERROR: hd and imported credentials can NOT both set.');}if(credentials.hd){return ECoreCredentialType.hd;}if(credentials.imported){return ECoreCredentialType.imported;}throw new OneKeyInternalError('getCredentialsType ERROR: no credentials found');};_proto.baseGetDefaultPrivateKey=function(){var _baseGetDefaultPrivateKey=_asyncToGenerator(function*(params){var privateKeysMap=yield this.getPrivateKeys(params);var[encryptedPrivateKey]=Object.values(privateKeysMap);return{privateKeyRaw:encryptedPrivateKey};});function baseGetDefaultPrivateKey(_x8){return _baseGetDefaultPrivateKey.apply(this,arguments);}return baseGetDefaultPrivateKey;}();_proto.validateXpub=function(){var _validateXpub=_asyncToGenerator(function*(params){throw new NotImplemented();});function validateXpub(_x9){return _validateXpub.apply(this,arguments);}return validateXpub;}();_proto.validateXprvt=function(){var _validateXprvt=_asyncToGenerator(function*(params){throw new NotImplemented();});function validateXprvt(_x10){return _validateXprvt.apply(this,arguments);}return validateXprvt;}();return _createClass(CoreChainApiBase);}();","import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function(){return!!t;})();}import CoreChainSoftware from\"./CoreChainSoftware\";var CoreChainHd=function(_CoreChainSoftware){_inherits(CoreChainHd,_CoreChainSoftware);var _super=_createSuper(CoreChainHd);function CoreChainHd(){return _super.apply(this,arguments);}return _createClass(CoreChainHd);}(CoreChainSoftware);export{CoreChainHd as default};","import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import bs58check from'bs58check';import{COINTYPE_BTC,COINTYPE_TBTC,IMPL_BTC,IMPL_TBTC}from'@onekeyhq/shared/src/engine/engineConsts';import{OneKeyInternalError}from'@onekeyhq/shared/src/errors';import{batchGetPublicKeys}from\"../../../secret\";import{EAddressEncodings}from\"../../../types\";import{getAddressFromXpub,getBtcForkNetwork}from\"../../btc/sdkBtc\";export var generateNativeSegwitAccounts=function(){var _ref=_asyncToGenerator(function*({curve,indexes,hdCredential,password,isTestnet}){var pathPrefix=`m/84'/${isTestnet?COINTYPE_TBTC:COINTYPE_BTC}'`;var relPaths=indexes.map(function(index){return`${index.toString()}'`;});var pubkeyInfos=batchGetPublicKeys(curve,hdCredential,password,pathPrefix,relPaths);if(pubkeyInfos.length!==indexes.length){throw new OneKeyInternalError('Unable to get publick key.');}var networkChainCode=isTestnet?IMPL_TBTC:IMPL_BTC;var network=getBtcForkNetwork(networkChainCode);var{public:xpubVersionBytes}=(network.segwitVersionBytes||{})[EAddressEncodings.P2WPKH]||network.bip32;var xpubBuffers=[Buffer.from(xpubVersionBytes.toString(16).padStart(8,'0'),'hex'),Buffer.from([3])];var addresses=yield Promise.all(pubkeyInfos.map(function(){var _ref2=_asyncToGenerator(function*(info,index){var{path,parentFingerPrint,extendedKey}=info;var xpub=bs58check.encode(Buffer.concat([...xpubBuffers,parentFingerPrint,Buffer.from((indexes[index]+2**31).toString(16).padStart(8,'0'),'hex'),extendedKey.chainCode,extendedKey.key]));var firstAddressRelPath='0/0';var relativePaths=[firstAddressRelPath];var{addresses:generatedAddresses}=yield getAddressFromXpub({curve,network,xpub,relativePaths,addressEncoding:EAddressEncodings.P2WPKH,encodeAddress:function(r){return r;}});var{[firstAddressRelPath]:address}=generatedAddresses;var accountIndex=indexes[index];var addressItem={accountIndex,address,publicKey:xpub,path,relPath:firstAddressRelPath};return addressItem;});return function(_x2,_x3){return _ref2.apply(this,arguments);};}()));return addresses;});return function generateNativeSegwitAccounts(_x){return _ref.apply(this,arguments);};}();","import _createClass from\"@babel/runtime/helpers/createClass\";import elliptic from'elliptic';var ec=new elliptic.ec('secp256k1');var HashKeySigner=function(){function HashKeySigner(keyHex){this.keyHex=keyHex;if(!keyHex){throw new Error('Invalid key');}this.sk=ec.keyFromPrivate(Buffer.from(keyHex,'hex'));}var _proto=HashKeySigner.prototype;_proto.sign=function sign(message){if(!message){throw new Error('Invalid message');}return this.sk.sign(message,{canonical:true});};_proto.verify=function verify(message,signature){try{return this.sk.verify(message,signature);}catch(e){return false;}};_createClass(HashKeySigner,[{key:\"pk\",get:function(){return this.sk.getPublic();}},{key:\"pkHex\",get:function(){return this.pk.encodeCompressed('hex');}}]);return HashKeySigner;}();export default HashKeySigner;","import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function(){return!!t;})();}import{mnemonicToSeedSync}from'bip39';import bitcoinMessage from'bitcoinjs-message';import stringify from'fast-json-stable-stringify';import{IMPL_BTC,IMPL_LIGHTNING_TESTNET,IMPL_TBTC}from'@onekeyhq/shared/src/engine/engineConsts';import{NotImplemented}from'@onekeyhq/shared/src/errors';import{checkIsDefined}from'@onekeyhq/shared/src/utils/assertUtils';import bufferUtils from'@onekeyhq/shared/src/utils/bufferUtils';import{CoreChainApiBase}from\"../../base/CoreChainApiBase\";import{mnemonicFromEntropy}from\"../../secret\";import{getAddressFromXpub as _getAddressFromXpub,getBitcoinBip32,getBitcoinECPair,getBtcForkNetwork}from\"../btc/sdkBtc\";import{generateNativeSegwitAccounts}from\"./sdkLightning/account\";import{getPathSuffix}from\"./sdkLightning/lnurl\";import HashKeySigner from\"./sdkLightning/signer\";var curve='secp256k1';var CoreChainSoftware=function(_CoreChainApiBase){_inherits(CoreChainSoftware,_CoreChainApiBase);var _super=_createSuper(CoreChainSoftware);function CoreChainSoftware(){return _super.apply(this,arguments);}var _proto=CoreChainSoftware.prototype;_proto.getExportedSecretKey=function getExportedSecretKey(query){throw new NotImplemented();};_proto.getPrivateKeys=function(){var _getPrivateKeys=_asyncToGenerator(function*(payload){return this.baseGetPrivateKeys({payload,curve});});function getPrivateKeys(_x){return _getPrivateKeys.apply(this,arguments);}return getPrivateKeys;}();_proto.signTransaction=function(){var _signTransaction=_asyncToGenerator(function*(payload){var{unsignedTx}=payload;var signer=yield this.baseGetSingleSigner({payload,curve});var encodedTx=unsignedTx.encodedTx;var txBytes=bufferUtils.toBuffer('');var[signature]=yield signer.sign(txBytes);var txid='';var rawTx='';return{encodedTx:unsignedTx.encodedTx,txid,rawTx};});function signTransaction(_x2){return _signTransaction.apply(this,arguments);}return signTransaction;}();_proto.signMessage=function(){var _signMessage=_asyncToGenerator(function*(payload){var unsignedMsg=payload.unsignedMsg;var signer=yield this.baseGetSingleSigner({payload,curve});var msgBytes=bufferUtils.toBuffer('');var[signature]=yield signer.sign(msgBytes);return'';});function signMessage(_x3){return _signMessage.apply(this,arguments);}return signMessage;}();_proto.getAddressFromPrivate=function(){var _getAddressFromPrivate=_asyncToGenerator(function*(query){var{privateKeyRaw}=query;var privateKey=bufferUtils.toBuffer(privateKeyRaw);var pub=this.baseGetCurve(curve).publicFromPrivate(privateKey);return this.getAddressFromPublic({publicKey:bufferUtils.bytesToHex(pub),networkInfo:query.networkInfo});});function getAddressFromPrivate(_x4){return _getAddressFromPrivate.apply(this,arguments);}return getAddressFromPrivate;}();_proto.getAddressFromPublic=function(){var _getAddressFromPublic=_asyncToGenerator(function*(query){var{publicKey}=query;var address='';return Promise.resolve({address,publicKey});});function getAddressFromPublic(_x5){return _getAddressFromPublic.apply(this,arguments);}return getAddressFromPublic;}();_proto.getAddressFromXpub=function(){var _getAddressFromXpub2=_asyncToGenerator(function*({network,xpub,relativePaths,addressEncoding}){var{addresses}=yield _getAddressFromXpub({curve,network,xpub,relativePaths,addressEncoding,encodeAddress:function(address){return address;}});return addresses;});function getAddressFromXpub(_x6){return _getAddressFromXpub2.apply(this,arguments);}return getAddressFromXpub;}();_proto.buildSignerLightning=function(){var _buildSignerLightning=_asyncToGenerator(function*({password,hdCredential,address,path,isTestnet}){var btcNetworkInfo=isTestnet?{networkChainCode:'tbtc',networkImpl:IMPL_TBTC,networkId:'tbtc--0',chainId:''}:{networkChainCode:'btc',networkImpl:IMPL_BTC,networkId:'btc--0',chainId:''};var fullPath=`${path}/0/0`;var privateKeys=yield this.getPrivateKeys({networkInfo:btcNetworkInfo,password,account:{address,path:fullPath},credentials:{hd:hdCredential}});if(!privateKeys[fullPath]){throw new Error('No private key found.');}var signer=yield this.baseCreateSigner({curve,password,privateKey:privateKeys[fullPath]});return signer;});function buildSignerLightning(_x7){return _buildSignerLightning.apply(this,arguments);}return buildSignerLightning;}();_proto.getAddressesFromHd=function(){var _getAddressesFromHd=_asyncToGenerator(function*(query){var{hdCredential,password,indexes,networkInfo:{networkChainCode}}=query;var isTestnet=networkChainCode===IMPL_LIGHTNING_TESTNET;var nativeSegwitAccounts=yield generateNativeSegwitAccounts({curve,indexes,hdCredential,password,isTestnet});return{addresses:nativeSegwitAccounts};});function getAddressesFromHd(_x8){return _getAddressesFromHd.apply(this,arguments);}return getAddressesFromHd;}();_proto.signApiMessage=function(){var _signApiMessage=_asyncToGenerator(function*({msgPayload,password,hdCredential,address,path,isTestnet}){var signer=yield this.buildSignerLightning({password,hdCredential,address,path,isTestnet});var impl=isTestnet?IMPL_TBTC:IMPL_BTC;var network=getBtcForkNetwork(impl);var privateKey=yield signer.getPrvkey();var keyPair=getBitcoinECPair().fromPrivateKey(privateKey,{network});var result=bitcoinMessage.sign(stringify(msgPayload),checkIsDefined(keyPair.privateKey),keyPair.compressed,{segwitType:'p2wpkh'});return result.toString('hex');});function signApiMessage(_x9){return _signApiMessage.apply(this,arguments);}return signApiMessage;}();_proto.lnurlAuth=function(){var _lnurlAuth=_asyncToGenerator(function*(params){var{password,credentials,lnurlDetail}=params;var mnemonic=mnemonicFromEntropy(checkIsDefined(credentials.hd),password);var root=getBitcoinBip32().fromSeed(mnemonicToSeedSync(mnemonic));var hashingKey=root.derivePath(`m/138'/0`);var hashingPrivateKey=hashingKey.privateKey;if(!hashingPrivateKey){throw new Error('lnurl-auth: invalid hashing key');}var url=new URL(lnurlDetail.url);var pathSuffix=getPathSuffix(url.host,bufferUtils.bytesToHex(hashingPrivateKey));var linkingKey=root.derivePath(`m/138'`);for(var index of pathSuffix){linkingKey=linkingKey.derive(index);}if(!linkingKey.privateKey){throw new Error('lnurl-auth: invalid linking private key');}var linkingKeyPriv=bufferUtils.bytesToHex(linkingKey.privateKey);if(!linkingKeyPriv){throw new Error('Invalid linkingKey');}var signer=new HashKeySigner(linkingKeyPriv);var k1=bufferUtils.hexToBytes(lnurlDetail.k1);var signedMessage=signer.sign(k1);var signedMessageDERHex=signedMessage.toDER('hex');var loginURL=url;loginURL.searchParams.set('sig',signedMessageDERHex);loginURL.searchParams.set('key',signer.pkHex);loginURL.searchParams.set('t',Date.now().toString());return loginURL.toString();});function lnurlAuth(_x10){return _lnurlAuth.apply(this,arguments);}return lnurlAuth;}();_proto.verifyMessage=function verifyMessage({message,address,signature}){var isValid=bitcoinMessage.verify(message,address,Buffer.from(signature,'hex'));return Promise.resolve({isValid,message,address,signature});};return _createClass(CoreChainSoftware);}(CoreChainApiBase);export{CoreChainSoftware as default};","import{hmac}from'@noble/hashes/hmac';import{sha256}from'@noble/hashes/sha256';import bufferUtils from'@onekeyhq/shared/src/utils/bufferUtils';export function getPathSuffix(domain,privateKeyHex){var derivationMaterial=bufferUtils.bytesToHex(hmac(sha256,Buffer.from(domain,'utf-8'),Buffer.from(privateKeyHex,'hex')));var buf=Buffer.from(derivationMaterial,'hex');var pathSuffix=[];for(var i=0;i<4;i+=1){pathSuffix.push(buf.readUInt32BE(i*4));}return pathSuffix;}","import coinselectUtils from'@onekeyfe/coinselect/utils';import accountUtils from'@onekeyhq/shared/src/utils/accountUtils';export function slicePathTemplate(template){return accountUtils.slicePathTemplate(template);}export function getUtxoAccountPrefixPath({fullPath}){var pathComponent=fullPath.split('/');pathComponent.pop();pathComponent.pop();var prefixPath=pathComponent.join('/');return prefixPath;}export function getBIP44Path(account,address){var realPath='';for(var[key,value]of Object.entries(account.addresses)){if(value===address){realPath=key;break;}}return`${account.path}/${realPath}`;}export function estimateTxSize(inputsForCoinSelect,outputsForCoinSelect){return coinselectUtils.transactionBytes(inputsForCoinSelect,outputsForCoinSelect);}"],"names":["_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","result","Super","NewTarget","this","constructor","Reflect","construct","arguments","apply","t","Boolean","prototype","valueOf","call","ChainSigner","_Verifier","_super","encryptedPrivateKey","password","curve","_this","pub","N","key","chainCode","Buffer","alloc","toString","_getPrvkeyHex","_proto2","getPrvkey","Promise","resolve","getPrvkeyHex","bufferUtils","bytesToHex","sign","digest","signature","slice","length","Verifier","compressedPublicKey","from","uncompressedPublicKey","_getPubkeyHex","_proto","getPubkey","compressed","getPubkeyHex","_x","verify","verifySignature","publicKey","p","toBuffer","d","s","ownKeys","e","r","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","CoreChainApiBase","_baseCreateSigner","_baseGetSingleSigner","_baseGetPrivateKeys","_baseGetPrivateKeysHd","_baseGetAddressesFromHd","_baseGetDefaultPrivateKey","_validateXpub","_validateXprvt","baseGetCurve","curveName","baseCreateSigner","privateKey","privateKeyBuffer","baseGetSingleSigner","payload","privateKeys","getPrivateKeys","accountPath","account","path","firstRelPath","relPaths","join","Error","_x2","baseGetPrivateKeys","credentials","hd","imported","baseGetPrivateKeysHd","hdCredential","credential","encryptPrivateKey","_x3","pathComponents","split","usedRelativePaths","pop","basePath","reduce","ret","extendedKey","_x4","baseGetAddressesFromHd","query","options","generateFrom","template","indexes","pathPrefix","pathSuffix","indexFormatted","map","index","replace","isPrivateKeyMode","pubkeyInfos","pvtkeyInfos","prefix","infos","_ref","addresses","all","info","privateKeyRaw","getAddressFromPrivate","networkInfo","privateKeyInfo","getAddressFromPublic","publicKeyInfo","_x7","_x5","_x6","baseGetCredentialsType","ECoreCredentialType","baseGetDefaultPrivateKey","params","privateKeysMap","values","_x8","validateXpub","_x9","validateXprvt","_x10","CoreChainHd","_CoreChainSoftware","generateNativeSegwitAccounts","isTestnet","_ref2","networkChainCode","network","getBtcForkNetwork","public","xpubVersionBytes","segwitVersionBytes","EAddressEncodings","P2WPKH","bip32","xpubBuffers","padStart","parentFingerPrint","xpub","concat","firstAddressRelPath","relativePaths","generatedAddresses","getAddressFromXpub","addressEncoding","encodeAddress","address","accountIndex","relPath","ec","HashKeySigner","keyHex","sk","keyFromPrivate","message","canonical","get","getPublic","pk","encodeCompressed","CoreChainSoftware","_CoreChainApiBase","_getPrivateKeys","_signTransaction","_signMessage","_getAddressFromPrivate","_getAddressFromPublic","_getAddressFromXpub2","_buildSignerLightning","_getAddressesFromHd","_signApiMessage","_lnurlAuth","getExportedSecretKey","signTransaction","unsignedTx","signer","txBytes","encodedTx","txid","rawTx","signMessage","unsignedMsg","msgBytes","publicFromPrivate","buildSignerLightning","btcNetworkInfo","networkImpl","networkId","chainId","fullPath","getAddressesFromHd","signApiMessage","msgPayload","impl","keyPair","getBitcoinECPair","fromPrivateKey","segwitType","lnurlAuth","lnurlDetail","mnemonic","root","getBitcoinBip32","fromSeed","mnemonicToSeedSync","hashingPrivateKey","derivePath","url","URL","getPathSuffix","domain","privateKeyHex","derivationMaterial","hmac","sha256","buf","i","readUInt32BE","host","linkingKey","derive","linkingKeyPriv","k1","hexToBytes","signedMessageDERHex","toDER","loginURL","searchParams","set","pkHex","Date","now","verifyMessage","isValid","slicePathTemplate","getUtxoAccountPrefixPath","pathComponent","getBIP44Path","realPath","value","entries","estimateTxSize","inputsForCoinSelect","outputsForCoinSelect"],"sourceRoot":""}