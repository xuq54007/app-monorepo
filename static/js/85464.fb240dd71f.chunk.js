!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="0fb89b09-cb6f-4c08-afc6-4fae8173bfa2",e._sentryDebugIdIdentifier="sentry-dbid-0fb89b09-cb6f-4c08-afc6-4fae8173bfa2")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[85464],{389587:(e,r,t)=>{"use strict";t.d(r,{K:()=>n});var n=80},82506:(e,r,t)=>{"use strict";t.d(r,{d:()=>useDebounce});var n=t(578104);function useDebounce(e,r,t){var[o]=(0,n.d7)(e,r,t);return o}},471230:(e,r,t)=>{"use strict";t.d(r,{YG:()=>b,U9:()=>o.U});t(490343),t(791088),t(193068);var n=t(498356);t(831085);var o=t(952954),a=t(324586),i=t(586330),s=t(514041),c=t(471169),l=t(318822),u=(t(334439),t(663522)),p=t(584186),d=t(643087),f=t(131397),m=t(621591);function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,a.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var g=0,y=!1,v=!1;var b=(0,s.memo)((function OnboardingOnMountCmp(){var e=(0,f.t1)(),r=(0,n.A)(),t=(0,m.D)(),[o,a]=(0,c.useV4migrationPersistAtom)(),b=o?.downgradeWarningConfirmed;(0,s.useRef)(b).current=b;var h=(0,s.useCallback)((0,i.A)((function*(){(yield d.A.serviceV4Migration.checkShouldMigrateV4OnMount())&&(y||(y=!0,yield d.A.serviceV4Migration.migrateBaseSettings()))})),[]),k=(0,s.useCallback)((0,i.A)((function*({checkingV4Migration:r}={}){try{if(r)if(yield d.A.serviceV4Migration.checkShouldMigrateV4OnMount()){if(yield h(),yield p.A.wait(600),!v){v=!0,yield t.navigateToV4MigrationPage({isAutoStartOnMount:!0});var n=Date.now();n-g>3e3&&(g=n,a((function(e){return _objectSpread(_objectSpread({},e),{},{v4migrationAutoStartCount:(e.v4migrationAutoStartCount||0)+1})})))}return}}catch(e){}if(!(0,f.p1)()){var{isOnboardingDone:o}=yield d.A.serviceOnboarding.isOnboardingDone();o||u.Ay.isWebDappMode||e({isFullModal:!0})}})),[h,a,e,t]),w=(0,s.useCallback)((0,i.A)((function*(){yield k({checkingV4Migration:!0})})),[k,h,a]);return(0,s.useEffect)((function(){}),[]),(0,s.useEffect)((function(){}),[a]),(0,s.useEffect)((function(){}),[r]),(0,s.useEffect)((function(){}),[t]),(0,s.useEffect)((function(){w()}),[w]),(0,s.useEffect)((function(){var fn=function(){k({checkingV4Migration:!1})};return l.iL.on(l.Tu.WalletClear,fn),function(){l.iL.off(l.Tu.WalletClear,fn)}}),[k]),null}))},85464:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>P});var n=t(586330),o=t(514041),a=t(908867),i=t(490343),s=t(643087),c=t(325809),l=t(498356),u=t(911998),p=t(162616),d=t(181447),f=t(334439),m=t(296827),g=t(714191),y=t(471230),v=t(324586),b=t(70107),h=t.n(b),k=t(575995),w=t(660395),I=t(389587),x=t(82506),O=t(834015),S=t(625931),j=t(831085);function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,v.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var fixInputImportSingleChain=function(e){return h()(e)};function ImportSingleChainBase({validationParams:e,title:r,inputLabel:t,inputPlaceholder:l,inputIsSecure:u,inputTestID:p,invalidMessage:m,children:g,onConfirm:y,networkIds:v}){var b=(0,a.A)(),h=(0,i.useMedia)(),{activeAccount:{network:P}}=(0,w.w)({num:0}),{onPasteClearText:_}=(0,i.useClipboard)(),A=(0,i.useForm)({values:{networkId:P?.id&&P.id!==(0,S.V)().onekeyall?P?.id:(0,S.V)().btc,input:"",deriveType:void 0,accountName:""},mode:"onChange",reValidateMode:"onBlur"}),{setValue:C,control:E}=A,[M,T]=(0,o.useState)(),D=(0,o.useRef)(!1),W=(0,i.useFormWatch)({control:E,name:"networkId"}),V=(0,i.useFormWatch)({control:E,name:"input"}),B=(0,x.d)(V,600),K=(0,i.useFormWatch)({control:E,name:"accountName"}),F=(0,x.d)(K?.trim()||"",600),N=(0,o.useCallback)((0,n.A)((function*(){if(F)try{yield s.A.serviceAccount.ensureAccountNameNotDuplicate({name:F,walletId:d.C5}),A.clearErrors("accountName")}catch(e){A.setError("accountName",{message:e?.message})}else A.clearErrors("accountName");if(C("deriveType",void 0),B&&W){var r=yield s.A.servicePassword.encodeSensitiveText({text:fixInputImportSingleChain(B)});try{var t=yield s.A.serviceAccount.validateGeneralInputOfImporting(_objectSpread(_objectSpread({},e),{},{input:r,networkId:W}));T(t)}catch(e){T({isValid:!1})}}else T(void 0)})),[F,A,B,W,C,e]);(0,o.useEffect)((function(){(0,n.A)((function*(){try{D.current=!0,yield N()}finally{D.current=!1}}))()}),[N]),(0,o.useEffect)((function(){}),[W,C]);var $,{start:R}=(0,O.A)();return(0,j.jsxs)(i.Page,{scrollEnabled:!0,"data-sentry-element":"Page","data-sentry-component":"ImportSingleChainBase","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportSingleChainBase.tsx",children:[(0,j.jsx)(i.Page.Header,{title:r,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportSingleChainBase.tsx"}),(0,j.jsxs)(i.Page.Body,{px:"$5","data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportSingleChainBase.tsx",children:[(0,j.jsxs)(i.Form,{form:A,"data-sentry-element":"Form","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportSingleChainBase.tsx",children:[(0,j.jsx)(i.Form.Field,{label:b.formatMessage({id:f.ETranslations.global_network}),name:"networkId","data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportSingleChainBase.tsx",children:(0,j.jsx)(c.YS,{networkIds:v,"data-sentry-element":"ControlledNetworkSelectorTrigger","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportSingleChainBase.tsx"})}),(0,j.jsx)(i.Form.Field,{label:t,name:"input","data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportSingleChainBase.tsx",children:(0,j.jsx)(i.Input,{secureTextEntry:u,placeholder:l,size:h.gtMd?"medium":"large",testID:p,onPaste:_,addOns:[{iconName:"ScanOutline",onPress:($=(0,n.A)((function*(){var e=yield R({handlers:[],autoHandleResult:!1});A.setValue("input",e.raw)})),function onPress(){return $.apply(this,arguments)})}],"data-sentry-element":"Input","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportSingleChainBase.tsx"})}),M&&!M?.isValid&&B?(0,j.jsx)(i.SizableText,{size:"$bodyMd",color:"$textCritical",children:m}):null,M?.deriveInfoItems?(0,j.jsx)(i.Form.Field,{label:b.formatMessage({id:f.ETranslations.derivation_path}),name:"deriveType",children:(0,j.jsx)(k.l$,{networkId:A.getValues().networkId||"",enabledItems:M?.deriveInfoItems||[],renderTrigger:function({label:e,onPress:r}){return(0,j.jsxs)(i.Stack,{testID:"wallet-derivation-path-selector-trigger",userSelect:"none",flexDirection:"row",px:"$3.5",py:"$2.5",borderWidth:1,borderColor:"$borderStrong",borderRadius:"$3",$gtMd:{px:"$3",py:"$1.5",borderRadius:"$2"},borderCurve:"continuous",hoverStyle:{bg:"$bgHover"},pressStyle:{bg:"$bgActive"},onPress:r,children:[(0,j.jsx)(i.SizableText,{flex:1,children:e}),(0,j.jsx)(i.Icon,{name:"ChevronDownSmallOutline",color:"$iconSubdued",mr:"$-0.5"})]})}})}):null,(0,j.jsx)(i.Form.Field,{label:b.formatMessage({id:f.ETranslations.form_enter_account_name}),name:"accountName","data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportSingleChainBase.tsx",children:(0,j.jsx)(i.Input,{maxLength:I.K,placeholder:b.formatMessage({id:f.ETranslations.form_enter_account_name_placeholder}),"data-sentry-element":"Input","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportSingleChainBase.tsx"})})]}),g]}),(0,j.jsx)(i.Page.Footer,{confirmButtonProps:{disabled:!M?.isValid||!!Object.values(A.formState.errors).length},onConfirm:(0,n.A)((function*(){return y(A)})),"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportSingleChainBase.tsx"})]})}function ImportPrivateKey(){var e,r=(0,a.A)(),t=(0,o.useMemo)((function(){return{input:"",validateXprvt:!0,validatePrivateKey:!0}}),[]),c=(0,p.z$)(),g=(0,l.A)(),{result:v}=(0,u.yk)((0,n.A)((function*(){return(yield s.A.serviceNetwork.getImportedAccountEnabledNetworks()).map((function(e){return e.id}))})),[],{initResult:[]});return(0,j.jsx)(ImportSingleChainBase,{title:r.formatMessage({id:f.ETranslations.global_import_private_key}),inputLabel:r.formatMessage({id:f.ETranslations.global_private_key}),inputPlaceholder:r.formatMessage({id:f.ETranslations.form_enter_private_key_placeholder}),inputIsSecure:!0,inputTestID:"private-key",invalidMessage:r.formatMessage({id:f.ETranslations.form_private_key_error_invalid}),validationParams:t,onConfirm:(e=(0,n.A)((function*(e){var t=e.getValues();if(t.input&&t.networkId){var n=yield s.A.servicePassword.encodeSensitiveText({text:fixInputImportSingleChain(t.input)}),o=yield s.A.serviceAccount.addImportedAccount({input:n,deriveType:t.deriveType,networkId:t.networkId,name:t.accountName,shouldCheckDuplicateName:!0}),a=o?.accounts?.[0]?.id;a&&i.Toast.success({title:r.formatMessage({id:f.ETranslations.global_success})}),c.current.updateSelectedAccountForSingletonAccount({num:0,networkId:t.networkId,walletId:d.C5,othersWalletAccountId:a}),g.popStack(),m.U.account.wallet.importWallet({importMethod:"privatekey"})}})),function(r){return e.apply(this,arguments)}),networkIds:v,"data-sentry-element":"ImportSingleChainBase","data-sentry-component":"ImportPrivateKey","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportPrivateKey.tsx",children:(0,j.jsx)(y.U9,{list:[{title:r.formatMessage({id:f.ETranslations.faq_private_key}),description:r.formatMessage({id:f.ETranslations.faq_private_key_desc})},{title:r.formatMessage({id:f.ETranslations.faq_recovery_phrase_safe_store}),description:r.formatMessage({id:f.ETranslations.faq_recovery_phrase_safe_store_desc})}],"data-sentry-element":"Tutorials","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportPrivateKey.tsx"})})}const P=function ImportPrivateKeyPage(){return(0,j.jsx)(c.b8,{config:{sceneName:g.Zs.home},enabledNum:[0],"data-sentry-element":"AccountSelectorProviderMirror","data-sentry-component":"ImportPrivateKeyPage","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportPrivateKey.tsx",children:(0,j.jsx)(ImportPrivateKey,{"data-sentry-element":"ImportPrivateKey","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportPrivateKey.tsx"})})}},552837:e=>{e.exports=function asciiToArray(e){return e.split("")}},751312:(e,r,t)=>{var n=t(73501);e.exports=function castSlice(e,r,t){var o=e.length;return t=void 0===t?o:t,!r&&t>=o?e:n(e,r,t)}},728774:(e,r,t)=>{var n=t(2478);e.exports=function charsEndIndex(e,r){for(var t=e.length;t--&&n(r,e[t],0)>-1;);return t}},217905:(e,r,t)=>{var n=t(2478);e.exports=function charsStartIndex(e,r){for(var t=-1,o=e.length;++t<o&&n(r,e[t],0)>-1;);return t}},283417:e=>{var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function hasUnicode(e){return r.test(e)}},482237:(e,r,t)=>{var n=t(552837),o=t(283417),a=t(792013);e.exports=function stringToArray(e){return o(e)?a(e):n(e)}},792013:e=>{var r="\\ud800-\\udfff",t="["+r+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",a="[^"+r+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+n+"|"+o+")"+"?",l="[\\ufe0e\\ufe0f]?",u=l+c+("(?:\\u200d(?:"+[a,i,s].join("|")+")"+l+c+")*"),p="(?:"+[a+n+"?",n,i,s,t].join("|")+")",d=RegExp(o+"(?="+o+")|"+p+u,"g");e.exports=function unicodeToArray(e){return e.match(d)||[]}},70107:(e,r,t)=>{var n=t(652291),o=t(386403),a=t(751312),i=t(728774),s=t(217905),c=t(482237),l=t(595243);e.exports=function trim(e,r,t){if((e=l(e))&&(t||void 0===r))return o(e);if(!e||!(r=n(r)))return e;var u=c(e),p=c(r),d=s(u,p),f=i(u,p)+1;return a(u,d,f).join("")}}}]);
//# sourceMappingURL=85464.fb240dd71f.chunk.js.map