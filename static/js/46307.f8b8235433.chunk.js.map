{"version":3,"file":"static/js/46307.f8b8235433.chunk.js","mappings":"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","sources":["webpack://web/../../packages/kit/src/views/Market/components/tradeHook.tsx","webpack://web/../../packages/kit/src/views/Swap/pages/modal/SwapLazyMarketModal.tsx","webpack://web/../../packages/shared/types/earn/earnProvider.constants.ts","webpack://web/../../packages/shared/types/market/marketProvider.constants.ts"],"sourcesContent":["import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{useCallback,useMemo,useRef,useState}from'react';import{useIntl}from'react-intl';import{Dialog,SizableText}from'@onekeyhq/components';import{ETranslations}from'@onekeyhq/shared/src/locale';import{defaultLogger}from'@onekeyhq/shared/src/logger/logger';import{EModalStakingRoutes}from'@onekeyhq/shared/src/routes';import{EModalRoutes}from'@onekeyhq/shared/src/routes/modal';import{EModalSwapRoutes}from'@onekeyhq/shared/src/routes/swap';import{openUrlExternal}from'@onekeyhq/shared/src/utils/openUrlUtils';import timerUtils from'@onekeyhq/shared/src/utils/timerUtils';import{isSupportStaking}from'@onekeyhq/shared/types/earn/earnProvider.constants';import{getImportFromToken,getNetworkIdBySymbol}from'@onekeyhq/shared/types/market/marketProvider.constants';import{ESwapTabSwitchType}from'@onekeyhq/shared/types/swap/types';import backgroundApiProxy from\"../../../background/instance/backgroundApiProxy\";import useAppNavigation from\"../../../hooks/useAppNavigation\";import{useActiveAccount}from\"../../../states/jotai/contexts/accountSelector\";import{jsx as _jsx}from\"react/jsx-runtime\";export var useMarketTradeNetwork=function(token){var{detailPlatforms,name}=token||{};var network=useMemo(function(){if(detailPlatforms&&name==='Toncoin'){return detailPlatforms['the-open-network'];}return detailPlatforms?Object.values(detailPlatforms)[0]:null;},[detailPlatforms,name]);return network;};export var useMarketTradeNetworkId=function(network,symbol){return useMemo(function(){var{onekeyNetworkId}=network||{};return onekeyNetworkId!=null?onekeyNetworkId:getNetworkIdBySymbol(symbol);},[network,symbol]);};export var useMarketTradeActions=function(token){var{symbol='',name}=token||{};var intl=useIntl();var network=useMarketTradeNetwork(token);var networkId=useMarketTradeNetworkId(network,symbol);var navigation=useAppNavigation();var{activeAccount}=useActiveAccount({num:0});var contractAddress=useMemo(function(){var _network$contract_add;return(_network$contract_add=network?.contract_address)!=null?_network$contract_add:'';},[network]);var remindUnsupportedToken=useCallback(function(action,showDialog=true){defaultLogger.market.token.unsupportedToken({name:symbol,action});if(showDialog){Dialog.confirm({title:intl.formatMessage({id:ETranslations.earn_unsupported_token}),tone:'warning',icon:'ErrorOutline',renderContent:_jsx(SizableText,{size:\"$bodyLg\",children:intl.formatMessage({id:ETranslations.earn_unsupported_token_desc})}),onConfirmText:intl.formatMessage({id:ETranslations.explore_got_it})});}},[intl,symbol]);var handleBuyOrSell=useCallback(function(){var _ref=_asyncToGenerator(function*(type){if(!activeAccount.account||!networkId){return;}var{isNative}=getImportFromToken({networkId,tokenSymbol:symbol,contractAddress})||{};var isSupported=yield backgroundApiProxy.serviceFiatCrypto.isTokenSupported({networkId,tokenAddress:isNative?'':contractAddress,type});if(!isSupported){remindUnsupportedToken(type);return;}var deriveType=yield backgroundApiProxy.serviceNetwork.getGlobalDeriveTypeOfNetwork({networkId});var dbAccount=yield backgroundApiProxy.serviceAccount.getNetworkAccount({accountId:undefined,indexedAccountId:activeAccount.account.indexedAccountId,networkId,deriveType});var{url,build}=yield backgroundApiProxy.serviceFiatCrypto.generateWidgetUrl({networkId,tokenAddress:'',accountId:dbAccount.id,type});if(!url||!build){remindUnsupportedToken(type);return;}openUrlExternal(url);});return function(_x){return _ref.apply(this,arguments);};}(),[activeAccount.account,contractAddress,networkId,remindUnsupportedToken,symbol]);var handleSwap=useCallback(function(){var _ref2=_asyncToGenerator(function*(mode){var navigateToSwapPage=function(params){if(mode==='modal'){navigation.replace(EModalSwapRoutes.SwapMainLand,params);}else{navigation.pushModal(EModalRoutes.SwapModal,{screen:EModalSwapRoutes.SwapMainLand,params});}};if(!networkId){remindUnsupportedToken('trade',false);navigateToSwapPage({importNetworkId:'unknown'});return;}var{isNative,realContractAddress=''}=getImportFromToken({networkId,tokenSymbol:symbol,contractAddress})||{};var{isSupportSwap,isSupportCrossChain}=yield backgroundApiProxy.serviceSwap.checkSupportSwap({networkId,contractAddress:isNative?realContractAddress:contractAddress});if(!isSupportSwap&&!isSupportCrossChain){remindUnsupportedToken('trade',false);navigateToSwapPage({importNetworkId:networkId});return;}var onekeyNetwork=yield backgroundApiProxy.serviceNetwork.getNetwork({networkId});navigateToSwapPage({importFromToken:_objectSpread(_objectSpread({},onekeyNetwork),{},{logoURI:isNative?onekeyNetwork.logoURI:undefined,contractAddress:isNative?'':contractAddress,networkId,isNative,networkLogoURI:onekeyNetwork.logoURI,symbol:symbol.toUpperCase(),name}),swapTabSwitchType:isSupportSwap?ESwapTabSwitchType.SWAP:ESwapTabSwitchType.BRIDGE});});return function(_x2){return _ref2.apply(this,arguments);};}(),[contractAddress,name,navigation,networkId,remindUnsupportedToken,symbol]);var handleStaking=useCallback(function(){if(networkId&&activeAccount.account){navigation.pushModal(EModalRoutes.StakingModal,{screen:EModalStakingRoutes.AssetProtocolList,params:{networkId,accountId:activeAccount.account?.id,indexedAccountId:activeAccount.indexedAccount?.id,symbol}});}},[activeAccount.account,activeAccount.indexedAccount,navigation,networkId,symbol]);var canStaking=useMemo(function(){return isSupportStaking(symbol);},[symbol]);return useMemo(function(){return{onSwap:handleSwap,onStaking:handleStaking,onBuy:function(){return handleBuyOrSell('buy');},onSell:function(){return handleBuyOrSell('sell');},canStaking};},[canStaking,handleBuyOrSell,handleStaking,handleSwap]);};export var useLazyMarketTradeActions=function(coinGeckoId){var[token,setToken]=useState(null);var fetchMarketTokenDetail=useCallback(_asyncToGenerator(function*(){var response=yield backgroundApiProxy.serviceMarket.fetchMarketTokenDetail(coinGeckoId);setToken(response);}),[coinGeckoId]);var actions=useMarketTradeActions(token);var actionsRef=useRef(actions);actionsRef.current=actions;var compose=useCallback(function(){var _ref4=_asyncToGenerator(function*(actionName){yield fetchMarketTokenDetail();yield timerUtils.wait(80);yield actionsRef.current[actionName]('modal');});return function(_x3){return _ref4.apply(this,arguments);};}(),[fetchMarketTokenDetail]);var navigation=useAppNavigation();var handleSwapLazyModal=useCallback(function(){navigation.pushModal(EModalRoutes.SwapModal,{screen:EModalSwapRoutes.SwapLazyMarketModal,params:{coinGeckoId}});},[coinGeckoId,navigation]);return useMemo(function(){return{onSwap:function(){return compose('onSwap');},onSwapLazyModal:handleSwapLazyModal,onStaking:function(){return compose('onStaking');},onBuy:function(){return compose('onBuy');},onSell:function(){return compose('onSell');}};},[compose,handleSwapLazyModal]);};","import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{useLayoutEffect}from'react';import{useIntl}from'react-intl';import{Page,Spinner,Stack}from'@onekeyhq/components';import{AccountSelectorProviderMirror}from'@onekeyhq/kit/src/components/AccountSelector';import{useLazyMarketTradeActions}from'@onekeyhq/kit/src/views/Market/components/tradeHook';import{ETranslations}from'@onekeyhq/shared/src/locale';import{EAccountSelectorSceneName}from'@onekeyhq/shared/types';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BaseSwapLazyMarketModalModal({route}){var{coinGeckoId}=route.params;var intl=useIntl();var{onSwap}=useLazyMarketTradeActions(coinGeckoId);useLayoutEffect(function(){void onSwap();},[onSwap]);return _jsxs(Page,{\"data-sentry-element\":\"Page\",\"data-sentry-component\":\"BaseSwapLazyMarketModalModal\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/pages/modal/SwapLazyMarketModal.tsx\",children:[_jsx(Page.Header,{title:intl.formatMessage({id:ETranslations.global_trade}),\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/pages/modal/SwapLazyMarketModal.tsx\"}),_jsx(Page.Body,{\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/pages/modal/SwapLazyMarketModal.tsx\",children:_jsx(Stack,{flex:1,ai:\"center\",jc:\"center\",\"data-sentry-element\":\"Stack\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/pages/modal/SwapLazyMarketModal.tsx\",children:_jsx(Spinner,{size:\"large\",\"data-sentry-element\":\"Spinner\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/pages/modal/SwapLazyMarketModal.tsx\"})})})]});}export default function SwapLazyMarketModal(props){return _jsx(AccountSelectorProviderMirror,{config:{sceneName:EAccountSelectorSceneName.home,sceneUrl:''},enabledNum:[0],\"data-sentry-element\":\"AccountSelectorProviderMirror\",\"data-sentry-component\":\"SwapLazyMarketModal\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/pages/modal/SwapLazyMarketModal.tsx\",children:_jsx(BaseSwapLazyMarketModalModal,_objectSpread(_objectSpread({},props),{},{\"data-sentry-element\":\"BaseSwapLazyMarketModalModal\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/pages/modal/SwapLazyMarketModal.tsx\"}))});}","import{getNetworkIdsMap}from\"../../src/config/networkIds\";import{ESwapTabSwitchType}from\"../swap/types\";var earnTradeDefaultSetETH={'networkId':'evm--1','contractAddress':'','name':'Ethereum','symbol':'ETH','decimals':18,'isNative':true,'networkLogoURI':'https://uni.onekey-asset.com/static/chain/eth.png'};var earnTradeDefaultSetUSDC={'networkId':'evm--1','contractAddress':'0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48','name':'USD Coin','symbol':'USDC','decimals':6,'isNative':false,'isPopular':true,'networkLogoURI':'https://uni.onekey-asset.com/static/chain/eth.png'};var earnTradeDefaultSetSOL={'networkId':'sol--101','contractAddress':'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v','name':'USDC','symbol':'USDC','decimals':6,'isNative':false,'networkLogoURI':'https://uni.onekey-asset.com/static/chain/sol.png'};export var isSupportStaking=function(symbol){return['BTC','SBTC','ETH','SOL','APT','ATOM','MATIC'].includes(symbol.toUpperCase());};export function getImportFromToken({networkId,tokenSymbol,isSupportSwap=true}){var importFromToken;var swapTabSwitchType=isSupportSwap?ESwapTabSwitchType.SWAP:ESwapTabSwitchType.BRIDGE;var networkIdsMap=getNetworkIdsMap();switch(networkId){case networkIdsMap.btc:case networkIdsMap.sbtc:importFromToken=earnTradeDefaultSetETH;swapTabSwitchType=ESwapTabSwitchType.BRIDGE;break;case networkIdsMap.eth:case networkIdsMap.holesky:case networkIdsMap.sepolia:{if(tokenSymbol==='MATIC'){importFromToken=earnTradeDefaultSetETH;}else{importFromToken=earnTradeDefaultSetUSDC;}swapTabSwitchType=ESwapTabSwitchType.SWAP;break;}case networkIdsMap.sol:{importFromToken=earnTradeDefaultSetSOL;swapTabSwitchType=ESwapTabSwitchType.SWAP;break;}case networkIdsMap.apt:importFromToken=earnTradeDefaultSetETH;swapTabSwitchType=ESwapTabSwitchType.BRIDGE;break;default:break;}return{importFromToken,swapTabSwitchType};}","import{memoizee}from'@onekeyhq/shared/src/utils/cacheUtils';import{getNetworkIdsMap}from\"../../src/config/networkIds\";var getSwapTokenMap=memoizee(function(){var networkIdsMap=getNetworkIdsMap();return{[networkIdsMap.btc]:{contractAddress:'',symbol:'BTC',realContractAddress:''},[networkIdsMap.eth]:{contractAddress:'0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',symbol:'ETH',realContractAddress:''},[networkIdsMap.sol]:{contractAddress:'So11111111111111111111111111111111111111112',symbol:'SOL',realContractAddress:''},[networkIdsMap.bsc]:{contractAddress:'0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c',symbol:'BNB',realContractAddress:''},[networkIdsMap.polygon]:{contractAddress:'0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270',symbol:'POL',realContractAddress:''},[networkIdsMap.avalanche]:{contractAddress:'0x0000000000000000000000000000000000000000',symbol:'AVAX',realContractAddress:''},[networkIdsMap.apt]:{contractAddress:'0x1::aptos_coin::AptosCoin',symbol:'APT',realContractAddress:''},[networkIdsMap.kaspa]:{contractAddress:'',symbol:'KAS',realContractAddress:''},[networkIdsMap.ton]:{contractAddress:'EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM9c',symbol:'TON',realContractAddress:''},[networkIdsMap.sui]:{contractAddress:'0x2::sui::SUI',symbol:'SUI',realContractAddress:'0x2::sui::SUI'}};});export var getNetworkIdBySymbol=memoizee(function(symbol){var networkIdsMap=getNetworkIdsMap();switch(symbol){case'btc':return networkIdsMap.btc;default:return undefined;}});export function getImportFromToken({networkId,tokenSymbol,contractAddress}){var map=getSwapTokenMap();var item=map[networkId];if(item){var isNative=tokenSymbol.toUpperCase()===item.symbol&&item.contractAddress===contractAddress;return{isNative,realContractAddress:item.realContractAddress};}return undefined;}"],"names":["ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","useMarketTradeNetwork","token","detailPlatforms","name","useMemo","values","useMarketTradeNetworkId","network","symbol","onekeyNetworkId","useMarketTradeActions","_ref","_ref2","intl","networkId","navigation","activeAccount","num","contractAddress","_network$contract_add","contract_address","remindUnsupportedToken","useCallback","action","showDialog","market","unsupportedToken","Dialog","confirm","title","formatMessage","id","ETranslations","earn_unsupported_token","tone","icon","renderContent","SizableText","size","children","earn_unsupported_token_desc","onConfirmText","explore_got_it","handleBuyOrSell","type","account","isNative","tokenSymbol","serviceFiatCrypto","isTokenSupported","tokenAddress","deriveType","serviceNetwork","getGlobalDeriveTypeOfNetwork","dbAccount","serviceAccount","getNetworkAccount","accountId","undefined","indexedAccountId","url","build","generateWidgetUrl","_x","this","handleSwap","mode","navigateToSwapPage","params","replace","SwapMainLand","pushModal","SwapModal","screen","importNetworkId","realContractAddress","isSupportSwap","isSupportCrossChain","serviceSwap","checkSupportSwap","onekeyNetwork","getNetwork","importFromToken","logoURI","networkLogoURI","toUpperCase","swapTabSwitchType","SWAP","BRIDGE","_x2","handleStaking","StakingModal","AssetProtocolList","indexedAccount","canStaking","onSwap","onStaking","onBuy","onSell","useLazyMarketTradeActions","coinGeckoId","setToken","useState","fetchMarketTokenDetail","response","serviceMarket","actions","actionsRef","useRef","current","_ref4","compose","actionName","wait","_x3","handleSwapLazyModal","SwapLazyMarketModal","onSwapLazyModal","BaseSwapLazyMarketModalModal","route","useLayoutEffect","Page","Header","global_trade","Body","Stack","flex","ai","jc","Spinner","props","config","sceneName","home","sceneUrl","enabledNum","earnTradeDefaultSetETH","earnTradeDefaultSetUSDC","earnTradeDefaultSetSOL","isSupportStaking","includes","getImportFromToken","networkIdsMap","btc","sbtc","eth","holesky","sepolia","sol","apt","getSwapTokenMap","bsc","polygon","avalanche","kaspa","ton","sui","getNetworkIdBySymbol","item"],"sourceRoot":""}