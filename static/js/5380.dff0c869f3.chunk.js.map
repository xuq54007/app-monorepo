{"version":3,"file":"static/js/5380.dff0c869f3.chunk.js","mappings":"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","sources":["webpack://web/../../packages/kit/src/views/Discovery/components/DiscoveryIcon.tsx","webpack://web/../../packages/kit/src/views/Discovery/pages/BookmarkListModal/index.tsx"],"sourcesContent":["import{memo}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import{Icon,Image,Skeleton,Stack}from'@onekeyhq/components';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BasicDiscoveryIcon({uri,size,borderRadius='$2'}){if(!uri){return _jsx(Skeleton,{width:size,height:size,radius:\"round\"});}return _jsxs(Image,{size:size,borderRadius:borderRadius,borderWidth:StyleSheet.hairlineWidth,borderColor:\"$borderSubdued\",borderCurve:\"continuous\",\"data-sentry-element\":\"Image\",\"data-sentry-component\":\"BasicDiscoveryIcon\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/DiscoveryIcon.tsx\",children:[_jsx(Image.Source,{source:{uri:decodeURIComponent(uri)},\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/DiscoveryIcon.tsx\"}),_jsx(Image.Fallback,{\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/DiscoveryIcon.tsx\",children:_jsx(Stack,{bg:\"$bgStrong\",ai:\"center\",jc:\"center\",width:\"100%\",height:\"100%\",\"data-sentry-element\":\"Stack\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/DiscoveryIcon.tsx\",children:_jsx(Icon,{name:\"GlobusOutline\",width:\"100%\",height:\"100%\",\"data-sentry-element\":\"Icon\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/DiscoveryIcon.tsx\"})})}),_jsx(Image.Loading,{\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/DiscoveryIcon.tsx\",children:_jsx(Skeleton,{width:\"100%\",height:\"100%\",\"data-sentry-element\":\"Skeleton\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/DiscoveryIcon.tsx\"})})]});}export var DiscoveryIcon=memo(BasicDiscoveryIcon);","import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{useCallback,useEffect,useRef,useState}from'react';import{useIntl}from'react-intl';import{Button,Dialog,Empty,Input,Page,SortableListView,Toast,XStack,useMedia}from'@onekeyhq/components';import backgroundApiProxy from'@onekeyhq/kit/src/background/instance/backgroundApiProxy';import{ListItem}from'@onekeyhq/kit/src/components/ListItem';import useAppNavigation from'@onekeyhq/kit/src/hooks/useAppNavigation';import{usePromiseResult}from'@onekeyhq/kit/src/hooks/usePromiseResult';import{useBrowserAction,useBrowserBookmarkAction}from'@onekeyhq/kit/src/states/jotai/contexts/discovery';import{ETranslations}from'@onekeyhq/shared/src/locale';import{defaultLogger}from'@onekeyhq/shared/src/logger/logger';import{EEnterMethod}from'@onekeyhq/shared/src/logger/scopes/discovery/scenes/dapp';import{DiscoveryIcon}from\"../../components/DiscoveryIcon\";import{withBrowserProvider}from\"../Browser/WithBrowserProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BookmarkListModal(){var navigation=useAppNavigation();var intl=useIntl();var{buildBookmarkData,removeBrowserBookmark,modifyBrowserBookmark}=useBrowserBookmarkAction().current;var{handleOpenWebSite}=useBrowserAction().current;var[dataSource,setDataSource]=useState([]);var{run,result}=usePromiseResult(_asyncToGenerator(function*(){var bookmarks=yield backgroundApiProxy.serviceDiscovery.getBookmarkData({generateIcon:true});setDataSource(bookmarks||[]);return bookmarks||[];}),[],{watchLoading:true});var onRename=useCallback(function(item){Dialog.confirm({title:intl.formatMessage({id:ETranslations.explore_rename}),renderContent:_jsx(Dialog.Form,{formProps:{defaultValues:{name:item.title}},children:_jsx(Dialog.FormField,{name:\"name\",rules:{required:{value:true,message:intl.formatMessage({id:ETranslations.global_name})}},children:_jsx(Input,{autoFocus:true,flex:1})})}),onConfirm:function(dialogInstance){var form=dialogInstance.getForm()?.getValues();if(form?.name){void modifyBrowserBookmark(_objectSpread(_objectSpread({},item),{},{title:form.name}));}Toast.success({title:intl.formatMessage({id:ETranslations.explore_bookmark_renamed})});setTimeout(function(){void run();},200);}});},[modifyBrowserBookmark,run,intl]);var removeBookmarkFlagRef=useRef(false);var[isEditing,setIsEditing]=useState(false);var deleteCell=useCallback(function(){var _ref2=_asyncToGenerator(function*(getIndex){var index=getIndex();if(index===undefined){return;}yield removeBrowserBookmark(dataSource[index].url);removeBookmarkFlagRef.current=true;setTimeout(_asyncToGenerator(function*(){yield run();}),200);});return function(_x){return _ref2.apply(this,arguments);};}(),[removeBrowserBookmark,run,dataSource]);useEffect(function(){if(removeBookmarkFlagRef.current&&result?.length===0){navigation.pop();removeBookmarkFlagRef.current=false;}},[result?.length,navigation]);var onSortBookmarks=useCallback(function(data){buildBookmarkData({data});setDataSource(data);},[buildBookmarkData]);var CELL_HEIGHT=60;var headerRight=useCallback(function(){return _jsx(Button,{variant:\"tertiary\",onPress:function(){setIsEditing(function(prev){return!prev;});},children:isEditing?intl.formatMessage({id:ETranslations.global_done}):intl.formatMessage({id:ETranslations.global_edit})});},[isEditing,intl]);var{gtMd}=useMedia();return _jsxs(Page,{\"data-sentry-element\":\"Page\",\"data-sentry-component\":\"BookmarkListModal\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/BookmarkListModal/index.tsx\",children:[_jsx(Page.Header,{title:intl.formatMessage({id:ETranslations.explore_bookmarks}),headerRight:headerRight,\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/BookmarkListModal/index.tsx\"}),_jsx(Page.Body,{\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/BookmarkListModal/index.tsx\",children:_jsx(SortableListView,{data:dataSource,enabled:isEditing,keyExtractor:function(item){return`${item.url}`;},getItemLayout:function(_,index){return{length:CELL_HEIGHT,offset:index*CELL_HEIGHT,index};},onDragEnd:function(ret){return onSortBookmarks(ret.data);},ListEmptyComponent:_jsx(Empty,{py:\"$32\",my:\"$4\",icon:\"BookmarkOutline\",title:intl.formatMessage({id:ETranslations.explore_no_boomark})}),renderItem:function({item,getIndex,drag,dragProps}){return _jsxs(ListItem,_objectSpread(_objectSpread({h:CELL_HEIGHT,testID:`search-modal-${item.url.toLowerCase()}`},!isEditing&&{onPress:function(){handleOpenWebSite({navigation,switchToMultiTabBrowser:gtMd,webSite:{url:item.url,title:item.title}});defaultLogger.discovery.dapp.enterDapp({dappDomain:item.url,dappName:item.title,enterMethod:EEnterMethod.bookmark});}}),{},{children:[isEditing?_jsx(ListItem.IconButton,{title:intl.formatMessage({id:ETranslations.global_remove}),icon:\"MinusCircleSolid\",iconProps:{color:'$iconCritical'},onPress:function(){void deleteCell(getIndex);Toast.success({title:intl.formatMessage({id:ETranslations.explore_removed_success})});},testID:\"action-list-item-rename\"},\"remove\"):null,_jsx(ListItem.Avatar,{avatar:_jsx(DiscoveryIcon,{size:\"$10\",uri:item.logo})}),_jsx(ListItem.Text,{primary:item.title,primaryTextProps:{numberOfLines:1},secondary:item.url,secondaryTextProps:{numberOfLines:1},flex:1}),isEditing?_jsxs(XStack,{gap:\"$6\",children:[_jsx(ListItem.IconButton,{title:intl.formatMessage({id:ETranslations.explore_rename}),icon:\"PencilOutline\",onPress:function(){return onRename(item);},testID:\"action-list-item-rename\"},\"rename\"),_jsx(ListItem.IconButton,{cursor:\"move\",icon:\"DragOutline\",onPressIn:drag,dataSet:dragProps},\"darg\")]}):null]}));},\"data-sentry-element\":\"SortableListView\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/BookmarkListModal/index.tsx\"})})]});}export default withBrowserProvider(BookmarkListModal);"],"names":["DiscoveryIcon","memo","BasicDiscoveryIcon","uri","size","borderRadius","Image","borderWidth","hairlineWidth","borderColor","borderCurve","children","Source","source","decodeURIComponent","Fallback","Stack","bg","ai","jc","width","height","Icon","name","Loading","Skeleton","radius","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","BookmarkListModal","_ref2","navigation","intl","buildBookmarkData","removeBrowserBookmark","modifyBrowserBookmark","current","handleOpenWebSite","dataSource","setDataSource","useState","run","result","bookmarks","serviceDiscovery","getBookmarkData","generateIcon","watchLoading","onRename","useCallback","item","Dialog","confirm","title","formatMessage","id","ETranslations","explore_rename","renderContent","Form","formProps","defaultValues","FormField","rules","required","value","message","global_name","Input","autoFocus","flex","onConfirm","dialogInstance","form","getForm","getValues","Toast","success","explore_bookmark_renamed","setTimeout","removeBookmarkFlagRef","useRef","isEditing","setIsEditing","deleteCell","getIndex","index","undefined","url","_x","this","useEffect","pop","onSortBookmarks","data","headerRight","Button","variant","onPress","prev","global_done","global_edit","gtMd","useMedia","Page","Header","explore_bookmarks","Body","SortableListView","enabled","keyExtractor","getItemLayout","_","offset","onDragEnd","ret","ListEmptyComponent","Empty","py","my","icon","explore_no_boomark","renderItem","drag","dragProps","h","testID","toLowerCase","switchToMultiTabBrowser","webSite","discovery","dapp","enterDapp","dappDomain","dappName","enterMethod","bookmark","IconButton","global_remove","iconProps","color","explore_removed_success","Avatar","avatar","logo","Text","primary","primaryTextProps","numberOfLines","secondary","secondaryTextProps","XStack","gap","cursor","onPressIn","dataSet"],"sourceRoot":""}