!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d7213262-6db5-4ff3-aadd-b77cfb1fcdfe",e._sentryDebugIdIdentifier="sentry-dbid-d7213262-6db5-4ff3-aadd-b77cfb1fcdfe")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[64448],{714718:(e,t,n)=>{n.d(t,{A:()=>useFormatDate});var o=n(514041),a=n(243915),r=n(152111),s=n(724726),i=n(584941),l=n(121684),c=n(567807),u=n(886738);function useFormatDate(){var e=(0,u.L)(),t=(0,o.useCallback)((function(t,n){var o;o="string"==typeof t?(0,a.A)(t):t;try{return(0,r.A)(o,null!=n?n:"PPp",{locale:(0,c.mw)(e)})}catch(e){return"-"}}),[e]),n=(0,o.useCallback)((function(n,o){var r,s;s="string"==typeof n?(0,a.A)(n):n;var i=(new Date).getFullYear(),l=(new Date).getMonth(),c="yyyy/LL/dd, HH:mm";return["de","es","en-US","fr-FR","it-IT","uk-UA"].includes(e)&&(c="LL/dd/yyyy, HH:mm"),(i===s.getFullYear()&&o?.hideTheYear||o?.hideYear)&&(c=(c=c.replace("yyyy/","")).replace("/yyyy","")),(l===s.getMonth()&&o?.hideTheMonth||o?.hideMonth)&&(c=c.replace("LL/","")),o?.hideTimeForever&&(c=c.replace(", HH:mm","")),o?.onlyTime&&(c="HH:mm"),null!=(r=t(s,c))?r:""}),[t,e]),d=(0,o.useCallback)((function(e,n){var o,r,s;return r="string"==typeof e?(0,a.A)(e):e,(new Date).getFullYear()===r.getFullYear()&&n?.hideTheYear||n?.hideYear?null!=(s=t(r,"MMMM"))?s:"":null!=(o=t(r,"MMMM, yyyy"))?o:""}),[t]),p=(0,o.useCallback)((function(t,n){var o;return null!=(o=(0,s.A)(t,n,{locale:(0,c.mw)(e)}))?o:""}),[e]),m=(0,o.useCallback)((function(t){var n;return null!=(n=(0,i.A)(t,{addSuffix:!0,locale:(0,c.mw)(e)}))?n:""}),[e]),f=(0,o.useCallback)((function(t){var n;return null!=(n=(0,l.A)(t,{locale:(0,c.mw)(e)}))?n:""}),[e]);return(0,o.useMemo)((function(){return{format:t,formatDate:n,formatMonth:d,formatDistanceToNow:m,formatDuration:f,formatDistanceStrict:p}}),[t,n,d,m,f,p])}},664448:(e,t,n)=>{n.r(t),n.d(t,{default:()=>modal_SwapHistoryListModal});var o=n(586330),a=n(514041),r=n(908867),s=n(490343),i=n(643087),l=n(791088),c=n(498356),u=n(714718),d=n(911998),p=n(471169),m=n(334439),f=n(628380),y=n(619390),g=n(241440),h=n(734818),w=n(391944),x=n(831085),SwapTxHistoryAvatar=function({fromUri:e,toUri:t}){return(0,x.jsxs)(s.Stack,{w:"$10",h:"$10",alignItems:"flex-end",justifyContent:"flex-end","data-sentry-element":"Stack","data-sentry-component":"SwapTxHistoryAvatar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/components/SwapTxHistoryListCell.tsx",children:[(0,x.jsx)(s.Stack,{position:"absolute",left:"$0",top:"$0","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/components/SwapTxHistoryListCell.tsx",children:(0,x.jsx)(w.o,{size:"sm",tokenImageUri:e,"data-sentry-element":"Token","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/components/SwapTxHistoryListCell.tsx"})}),(0,x.jsx)(s.Stack,{borderWidth:2,borderColor:"$bgApp",borderRadius:"$full",zIndex:1,"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/components/SwapTxHistoryListCell.tsx",children:(0,x.jsx)(w.o,{size:"sm",tokenImageUri:t,"data-sentry-element":"Token","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/components/SwapTxHistoryListCell.tsx"})})]})};const components_SwapTxHistoryListCell=function({item:e,onClickCell:t}){var n,o,i=(0,r.A)(),{formatDate:c}=(0,u.A)(),d=(0,a.useMemo)((function(){return e.status===y.lr.FAILED?(0,x.jsx)(s.Badge,{badgeType:"critical",badgeSize:"lg",children:i.formatMessage({id:m.ETranslations.swap_history_status_failed})}):e.status===y.lr.CANCELED?(0,x.jsx)(s.Badge,{badgeType:"warning",badgeSize:"lg",children:i.formatMessage({id:m.ETranslations.swap_history_status_canceled})}):e.status===y.lr.CANCELING?(0,x.jsx)(s.Badge,{badgeType:"warning",badgeSize:"lg",children:i.formatMessage({id:m.ETranslations.swap_history_status_cancelling})}):null}),[i,e.status]),p=(0,a.useMemo)((function(){var{created:t}=e.date,n=c(new Date(t),{hideYear:!0,onlyTime:e.status!==y.lr.PENDING&&e.status!==y.lr.CANCELING});return(0,x.jsxs)(s.XStack,{gap:"$2",children:[(0,x.jsx)(s.SizableText,{size:"$bodyMd",color:"$textSubdued",children:n}),d]})}),[c,e.date,e.status,d]),f=(0,a.useMemo)((function(){return(0,x.jsxs)(s.XStack,{alignItems:"center",gap:"$1",flex:1,flexWrap:"wrap",children:[(0,x.jsx)(s.SizableText,{size:"$bodyLgMedium",flexShrink:1,numberOfLines:1,children:e.baseInfo.fromToken.symbol.toUpperCase()}),(0,x.jsx)(s.Icon,{name:"ArrowRightOutline",size:"$5",color:"$iconSubdued"}),(0,x.jsx)(s.SizableText,{size:"$bodyLgMedium",flexShrink:1,numberOfLines:1,children:e.baseInfo.toToken.symbol.toUpperCase()})]})}),[e.baseInfo.fromToken.symbol,e.baseInfo.toToken.symbol]),w=(0,a.useMemo)((function(){var t=e.swapInfo.otherFeeInfos?.find((function(t){return(0,h.BQ)({token1:t.token,token2:e.baseInfo.fromToken})}))?.amount;return new g.A(e.baseInfo.fromAmount).plus(null!=t?t:0).toFixed()}),[e.baseInfo.fromAmount,e.baseInfo.fromToken,e.swapInfo.otherFeeInfos]);return(0,x.jsxs)(l.c,{onPress:t,userSelect:"none",renderAvatar:(0,x.jsx)(SwapTxHistoryAvatar,{fromUri:null!=(n=e.baseInfo.fromToken.logoURI)?n:"",toUri:null!=(o=e.baseInfo.toToken.logoURI)?o:""}),"data-sentry-element":"ListItem","data-sentry-component":"SwapTxHistoryListCell","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/components/SwapTxHistoryListCell.tsx",children:[(0,x.jsx)(l.c.Text,{flex:1,primary:f,secondary:p,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/components/SwapTxHistoryListCell.tsx"}),(0,x.jsx)(l.c.Text,{align:"right",flexShrink:0,primary:(0,x.jsxs)(s.SizableText,{color:"$textSuccess",textAlign:"right",children:["+",(0,x.jsx)(s.NumberSizeableText,{color:"$textSuccess",formatter:"balance",children:e.baseInfo.toAmount})," ",(0,x.jsx)(s.SizableText,{color:"$textSuccess",children:e.baseInfo.toToken.symbol.toUpperCase()})]}),primaryTextProps:{color:"$textSuccess"},secondary:(0,x.jsxs)(s.SizableText,{textAlign:"right",size:"$bodyMd",color:"$textSubdued",children:["-",(0,x.jsx)(s.NumberSizeableText,{formatter:"balance",size:"$bodyMd",color:"$textSubdued",children:w})," ",(0,x.jsx)(s.SizableText,{size:"$bodyMd",color:"$textSubdued",children:e.baseInfo.fromToken.symbol.toUpperCase()})]}),"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/components/SwapTxHistoryListCell.tsx"})]})};const modal_SwapHistoryListModal=function(){var e=(0,r.A)(),[{swapHistoryPendingList:t}]=(0,p.useInAppNotificationAtom)(),{result:n,isLoading:g}=(0,d.yk)((0,o.A)((function*(){return yield i.A.serviceSwap.fetchSwapHistoryListFromSimple()})),[t],{watchLoading:!0}),h=(0,c.A)(),{formatDate:w}=(0,u.A)(),b=(0,a.useMemo)((function(){var t,o,a=null!=(t=n?.filter((function(e){return e.status===y.lr.PENDING||e.status===y.lr.CANCELING})))?t:[],r=(null!=(o=n?.filter((function(e){return e.status!==y.lr.PENDING&&e.status!==y.lr.CANCELING})))?o:[]).reduce((function(e,t){var n=new Date(t.date.created),o=w(n,{hideTimeForever:!0,hideYear:!0});return e[o]||(e[o]=[]),e[o].push(t),e}),{}),s=Object.entries(r).map((function([e,t]){return{title:e,data:t}}));return a.length>0&&(s=[{title:e.formatMessage({id:m.ETranslations.swap_history_status_pending}),status:y.lr.PENDING,data:a},...s]),s}),[w,e,n]),k=(0,a.useCallback)((function(){var t;n?.length&&s.Dialog.show({icon:"BroomOutline",title:e.formatMessage({id:m.ETranslations.swap_history_all_history_title}),onConfirm:(t=(0,o.A)((function*(){yield i.A.serviceSwap.cleanSwapHistoryItems(),i.A.serviceApp.showToast({method:"success",title:e.formatMessage({id:m.ETranslations.settings_clear_successful})})})),function onConfirm(){return t.apply(this,arguments)}),onConfirmText:e.formatMessage({id:m.ETranslations.global_clear}),onCancelText:e.formatMessage({id:m.ETranslations.global_cancel})})}),[e,n?.length]),S=(0,a.useCallback)((function(){n?.some((function(e){return e.status===y.lr.PENDING}))&&s.Dialog.show({icon:"BroomOutline",description:e.formatMessage({id:m.ETranslations.swap_history_pending_history_content}),title:e.formatMessage({id:m.ETranslations.swap_history_pending_history_title}),onConfirm:function(){i.A.serviceSwap.cleanSwapHistoryItems([y.lr.PENDING])},onConfirmText:e.formatMessage({id:m.ETranslations.global_clear}),onCancelText:e.formatMessage({id:m.ETranslations.global_cancel})})}),[e,n]),T=(0,a.useCallback)((function(){return(0,x.jsx)(s.ActionList,{title:e.formatMessage({id:m.ETranslations.global_clear}),items:[{label:e.formatMessage({id:m.ETranslations.swap_history_pending_history}),onPress:S},{label:e.formatMessage({id:m.ETranslations.swap_history_all_history}),onPress:k}],renderTrigger:(0,x.jsx)(s.Button,{variant:"tertiary",children:e.formatMessage({id:m.ETranslations.global_clear})})})}),[e,k,S]),C=(0,a.useCallback)((function({item:e}){return(0,x.jsx)(components_SwapTxHistoryListCell,{item:e,onClickCell:function(){h.push(f.u.SwapHistoryDetail,{txHistory:e})}})}),[h]);return(0,x.jsxs)(s.Page,{"data-sentry-element":"Page","data-sentry-component":"SwapHistoryListModal","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/pages/modal/SwapHistoryListModal.tsx",children:[(0,x.jsx)(s.Page.Header,{headerRight:T,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Swap/pages/modal/SwapHistoryListModal.tsx"}),g?Array.from({length:5}).map((function(e,t){return(0,x.jsxs)(l.c,{children:[(0,x.jsx)(s.Skeleton,{w:"$10",h:"$10",radius:"round"}),(0,x.jsxs)(s.YStack,{children:[(0,x.jsx)(s.YStack,{py:"$1",children:(0,x.jsx)(s.Skeleton,{h:"$4",w:"$32"})}),(0,x.jsx)(s.YStack,{py:"$1",children:(0,x.jsx)(s.Skeleton,{h:"$3",w:"$24"})})]})]},t)})):(0,x.jsx)(s.SectionList,{renderItem:C,sections:b,py:"$1",renderSectionHeader:function({section:{title:e,status:t}}){return(0,x.jsxs)(s.XStack,{px:"$5",py:"$2",gap:"$3",alignItems:"center",children:[t===y.lr.PENDING?(0,x.jsx)(s.Stack,{w:"$2",h:"$2",backgroundColor:"$textCaution",borderRadius:"$full"}):null,(0,x.jsx)(s.Heading,{size:"$headingSm",color:t===y.lr.PENDING?"$textCaution":"$textSubdued",children:e})]})},estimatedItemSize:"$10",ListEmptyComponent:(0,x.jsx)(s.Empty,{icon:"InboxOutline",title:e.formatMessage({id:m.ETranslations.global_no_results})})})]})}},121684:(e,t,n)=>{n.d(t,{A:()=>formatDuration});var o=n(766017),a=n(372231),r=["years","months","weeks","days","hours","minutes","seconds"];function formatDuration(e,t){var n,s,i,l,c;if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var u=(0,o.q)(),d=null!==(n=null!==(s=null==t?void 0:t.locale)&&void 0!==s?s:u.locale)&&void 0!==n?n:a.A,p=null!==(i=null==t?void 0:t.format)&&void 0!==i?i:r,m=null!==(l=null==t?void 0:t.zero)&&void 0!==l&&l,f=null!==(c=null==t?void 0:t.delimiter)&&void 0!==c?c:" ";return d.formatDistance?p.reduce((function(t,n){var o="x".concat(n.replace(/(^.)/,(function(e){return e.toUpperCase()}))),a=e[n];return"number"==typeof a&&(m||e[n])?t.concat(d.formatDistance(o,a)):t}),[]).join(f):""}}}]);
//# sourceMappingURL=64448.96b69f9f87.chunk.js.map