{"version":3,"file":"static/js/4342.d68efd20d8.chunk.js","mappings":"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","sources":["webpack://web/../../packages/kit/src/views/Setting/pages/Currency/index.tsx"],"sourcesContent":["import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import{useCallback,useMemo,useRef,useState}from'react';import{useIntl}from'react-intl';import{Empty,Page,SectionList}from'@onekeyhq/components';import'@onekeyhq/components/src/layouts/SectionList';import backgroundApiProxy from'@onekeyhq/kit/src/background/instance/backgroundApiProxy';import{ListItem}from'@onekeyhq/kit/src/components/ListItem';import{useCurrencyPersistAtom,useSettingsPersistAtom}from'@onekeyhq/kit-bg/src/states/jotai/atoms';import{ETranslations}from'@onekeyhq/shared/src/locale';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var emptySections=[];var currencyFilterFn=function(keyword,item){var text=keyword.toLowerCase();return item.id.toLowerCase().includes(text)||item.name.toLowerCase().includes(text);};var CurrencyItem=function({item,onPress,currency}){var handlePress=useCallback(function(){onPress(item);},[item,onPress]);return _jsx(ListItem,{title:`${item.id.toUpperCase()} - ${item.unit}`,subtitle:item.name,checkMark:currency?.id===item.id,onPress:handlePress,\"data-sentry-element\":\"ListItem\",\"data-sentry-component\":\"CurrencyItem\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/Currency/index.tsx\"});};var keyExtractor=function(_,index){return`${index}`;};export default function SettingCurrencyModal(){var[settings]=useSettingsPersistAtom();var[text,onChangeText]=useState('');var currencyRef=useRef({id:settings.currencyInfo.id,unit:settings.currencyInfo.symbol});var[currency,setCurrency]=useState(currencyRef.current);var intl=useIntl();var[{currencyMap}]=useCurrencyPersistAtom();var sections=useMemo(function(){var currencyItems=Object.values(currencyMap);if(currencyItems.length===0){return[];}var section={'crypto':[],'fiat':[],'popular':[]};var data=currencyItems.filter(function(item){return currencyFilterFn(text,item);});var _loop=function(){var item=data[i];item.type.forEach(function(type){if(section[type]){section[type].push(item);}});};for(var i=0;i<data.length;i+=1){_loop();}return[{title:intl.formatMessage({id:ETranslations.global_popular}),data:section.popular},{title:intl.formatMessage({id:ETranslations.global_crypto}),data:section.crypto},{title:intl.formatMessage({id:ETranslations.settings_fiat}),data:section.fiat}].filter(function(item){return item.data.length>0;});},[currencyMap,intl,text]);var handlePress=useCallback(function(item){setCurrency(item);},[]);var renderItem=useCallback(function({item}){return _jsx(CurrencyItem,{item:item,currency:currency,onPress:handlePress});},[currency,handlePress]);var renderSectionHeader=useCallback(function({section}){return _jsx(SectionList.SectionHeader,{title:section.title});},[]);var handleConfirm=useCallback(_asyncToGenerator(function*(){if(currency){yield backgroundApiProxy.serviceSetting.setCurrency({id:currency.id,symbol:currency.unit});setTimeout(function(){backgroundApiProxy.serviceApp.restartApp();});}}),[currency]);var disabled=useMemo(function(){return currencyRef.current.id===currency?.id;},[currency?.id]);var headerSearchBarOptions=useMemo(function(){return{onChangeText:function({nativeEvent}){var afterTrim=nativeEvent.text.trim();onChangeText(afterTrim);},placeholder:intl.formatMessage({id:ETranslations.global_search})};},[intl]);return _jsxs(Page,{\"data-sentry-element\":\"Page\",\"data-sentry-component\":\"SettingCurrencyModal\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/Currency/index.tsx\",children:[_jsx(Page.Header,{title:intl.formatMessage({id:ETranslations.settings_default_currency}),headerSearchBarOptions:headerSearchBarOptions,\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/Currency/index.tsx\"}),_jsx(Page.Body,{\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/Currency/index.tsx\",children:_jsx(SectionList,{estimatedItemSize:60,ListEmptyComponent:_jsx(Empty,{icon:\"SearchOutline\",title:intl.formatMessage({id:ETranslations.global_no_results}),description:intl.formatMessage({id:ETranslations.global_search_no_results_desc})}),sections:sections!=null?sections:emptySections,renderItem:renderItem,renderSectionHeader:renderSectionHeader,extraData:currency,keyExtractor:keyExtractor,\"data-sentry-element\":\"SectionList\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/Currency/index.tsx\"})}),_jsx(Page.Footer,{onConfirm:handleConfirm,confirmButtonProps:{disabled},\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Setting/pages/Currency/index.tsx\"})]});}"],"names":["emptySections","currencyFilterFn","keyword","item","text","toLowerCase","id","includes","name","CurrencyItem","onPress","currency","handlePress","useCallback","title","toUpperCase","unit","subtitle","checkMark","keyExtractor","_","index","SettingCurrencyModal","settings","useSettingsPersistAtom","onChangeText","useState","currencyRef","useRef","currencyInfo","symbol","setCurrency","current","intl","currencyMap","useCurrencyPersistAtom","sections","useMemo","currencyItems","Object","values","length","section","data","filter","_loop","i","type","forEach","push","formatMessage","ETranslations","global_popular","popular","global_crypto","crypto","settings_fiat","fiat","renderItem","renderSectionHeader","SectionList","SectionHeader","handleConfirm","serviceSetting","setTimeout","serviceApp","restartApp","disabled","headerSearchBarOptions","nativeEvent","afterTrim","trim","placeholder","global_search","Page","children","Header","settings_default_currency","Body","estimatedItemSize","ListEmptyComponent","Empty","icon","global_no_results","description","global_search_no_results_desc","extraData","Footer","onConfirm","confirmButtonProps"],"sourceRoot":""}