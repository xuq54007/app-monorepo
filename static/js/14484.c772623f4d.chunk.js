!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d35b1594-511c-4fc9-a5d7-c90e48716777",e._sentryDebugIdIdentifier="sentry-dbid-d35b1594-511c-4fc9-a5d7-c90e48716777")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[14484],{696755:(e,t,n)=>{n.d(t,{A:()=>O});var r=n(586330),o=n(324586),a=n(514041),s=n(241440),i=n(490343),c=n(643087),d=n(298254),p=n(498356),u=n(564452),l=n(908867),k=n(353203),y=n(791088),m=n(391944),w=n(471169),f=n(625931),I=n(334439),b=n(193068),x=n(491180),g=n(553083),v=n(359395),h=n(911998),A=n(831085),j=(0,a.createContext)({}),NetworkContainer=function({networkIds:e,children:t}){var{result:{networks:n}}=(0,h.yk)((function(){return c.A.serviceNetwork.getNetworksByIds({networkIds:e})}),[e],{initResult:{networks:[]}}),r=(0,a.useMemo)((function(){return n.reduce((function(e,t){return e[t.id]=t,e}),{})}),[n]);return(0,A.jsx)(j.Provider,{value:r,"data-sentry-element":"unknown","data-sentry-component":"NetworkContainer","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/components/NetworkContainer/index.tsx",children:t})},S=n(941230),keyExtractor=function(e){var t=e.address;return`${e.networkId}--${t||"main"}`},ListItemFiatToken=function({item:e,onPress:t}){var n=(0,l.A)(),{networkId:o,accountId:s}=(0,a.useContext)(S.T3),{createAddress:u}=(0,k.m)(),[h,C]=(0,a.useState)(!1),{account:T}=(0,d.b)({networkId:o,accountId:s}),O=function({networkId:e}){return(0,a.useContext)(j)[e]}({networkId:e.networkId}),{fiatMap:M}=(0,S.gZ)(),[{currencyInfo:{symbol:P}}]=(0,w.useSettingsPersistAtom)(),F=(0,p.A)(),L=(0,a.useCallback)((0,r.A)((function*(){var n;if(g.Ay.isAllNetwork({networkId:o})&&T?.indexedAccountId)if(e.networkId===(0,f.V)().btc)F.push(b.Mg.DeriveTypesAddress,{networkId:e.networkId,indexedAccountId:T.indexedAccountId,accountId:s,actionType:v.rI.Select,tokenMap:M,onSelected:(n=(0,r.A)((function*({account:n}){t?.({realAccountId:n.id,token:e})})),function onSelected(e){return n.apply(this,arguments)})});else{var a=yield c.A.serviceNetwork.getGlobalDeriveTypeOfNetwork({networkId:e.networkId});try{var i=yield c.A.serviceAccount.getNetworkAccount({accountId:void 0,indexedAccountId:T.indexedAccountId,networkId:e.networkId,deriveType:a});t?.({token:e,realAccountId:i.id})}catch{C(!0);try{var d=x.A.getWalletIdFromAccountId({accountId:T.indexedAccountId});yield u({selectAfterCreate:!0,num:0,account:{walletId:d,indexedAccountId:T.indexedAccountId,deriveType:a,networkId:e.networkId}});var p=yield c.A.serviceAccount.getNetworkAccount({accountId:void 0,indexedAccountId:T.indexedAccountId,networkId:e.networkId,deriveType:a});p&&t?.({token:e,realAccountId:p.id})}finally{C(!1)}}}else t?.({token:e,realAccountId:s})})),[t,e,o,T,s,F,M,u]);return(0,A.jsxs)(y.c,{userSelect:"none",onPress:L,"data-sentry-element":"ListItem","data-sentry-component":"ListItemFiatToken","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/components/TokenList/index.tsx",children:[(0,A.jsx)(m.o,{size:"lg",tokenImageUri:e.icon,networkImageUri:O?.logoURI,"data-sentry-element":"Token","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/components/TokenList/index.tsx"}),(0,A.jsx)(y.c.Text,{flex:1,primary:(0,A.jsxs)(i.XStack,{alignItems:"center",children:[(0,A.jsx)(i.SizableText,{size:"$bodyLgMedium",children:e.symbol}),(0,A.jsx)(i.Stack,{ml:"$2",children:(0,A.jsx)(i.Badge,{badgeType:"default",badgeSize:"sm",children:O?.name})})]}),secondary:e.name,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/components/TokenList/index.tsx"}),(0,A.jsx)(i.YStack,{alignItems:"flex-end","data-sentry-element":"YStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/components/TokenList/index.tsx",children:h?(0,A.jsxs)(i.XStack,{alignItems:"center",children:[(0,A.jsx)(i.SizableText,{size:"$bodyMd",color:"$textSubdued",pr:"$2",children:n.formatMessage({id:I.ETranslations.global_creating_address})}),(0,A.jsx)(i.Spinner,{size:"small"})]}):(0,A.jsxs)(i.YStack,{alignItems:"flex-end",children:[e.balanceParsed?(0,A.jsx)(i.NumberSizeableText,{size:"$bodyLgMedium",formatter:"balance",children:e.balanceParsed}):null,e.fiatValue?(0,A.jsx)(i.NumberSizeableText,{size:"$bodyMd",formatter:"balance",color:"$textSubdued",formatterOptions:{currency:P},children:e.fiatValue}):null]})})]})},TokenList=function({items:e,onPress:t}){var[n,r]=(0,a.useState)(""),o=(0,a.useCallback)((function(e){r(e.trim())}),[]),s=(0,a.useMemo)((function(){var t=n.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(t)||e.symbol.toLowerCase().includes(n)}))}),[e,n]),c=(0,l.A)(),{bottom:d}=(0,i.useSafeAreaInsets)();return(0,A.jsxs)(i.Stack,{flex:1,"data-sentry-element":"Stack","data-sentry-component":"TokenList","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/components/TokenList/index.tsx",children:[(0,A.jsx)(i.Stack,{px:"$5",pb:"$4","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/components/TokenList/index.tsx",children:(0,A.jsx)(i.SearchBar,{placeholder:c.formatMessage({id:I.ETranslations.global_search_tokens}),value:n,onChangeText:o,"data-sentry-element":"SearchBar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/components/TokenList/index.tsx"})}),(0,A.jsx)(i.Stack,{flex:1,"data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/components/TokenList/index.tsx",children:(0,A.jsx)(i.ListView,{estimatedItemSize:60,data:s,renderItem:function({item:e}){return(0,A.jsx)(ListItemFiatToken,{item:e,onPress:t})},keyExtractor,ListFooterComponent:(0,A.jsx)(i.Stack,{h:d||"$2"}),ListEmptyComponent:(0,A.jsx)(i.Empty,{title:c.formatMessage({id:I.ETranslations.global_no_results}),icon:"SearchOutline"}),"data-sentry-element":"ListView","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/components/TokenList/index.tsx"})})]})},C=n(69531),T=n(117746);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const O=(0,u.k)((function({title:e,type:t,networkId:n,accountId:o}){var u,l=(0,p.A)(),{result:k,isLoading:y}=(0,C.ej)({networkId:n,accountId:o,type:t}),{getTokenFiatValue:m}=(0,S.gZ)(),{account:w}=(0,d.b)({networkId:n,accountId:o}),f=(0,a.useMemo)((function(){if(!g.Ay.isAllNetwork({networkId:n}))return k;var e=k.map((function(e){return _objectSpread(_objectSpread({},e),{},{fiatValue:m({networkId:e.networkId,tokenAddress:e.address.toLowerCase()})?.fiatValue,balanceParsed:m({networkId:e.networkId,tokenAddress:e.address.toLowerCase()})?.balanceParsed})}));return"sell"===t&&(e=e.filter((function(e){return e.balanceParsed&&0!==Number(e.balanceParsed)}))),w&&x.A.isOthersAccount({accountId:w.id})&&(e=e.filter((function(e){return x.A.isAccountCompatibleWithNetwork({account:w,networkId:e.networkId})}))),e.sort((function(e,t){var n,r,o=null!=(n=e.fiatValue)?n:"0",a=null!=(r=t.fiatValue)?r:"0";return(0,s.A)(o).gt(a)?-1:1}))}),[k,m,n,t,w]),I=(0,a.useCallback)((u=(0,r.A)((function*({token:e,realAccountId:n}){var{url:r}=yield c.A.serviceFiatCrypto.generateWidgetUrl({networkId:e.networkId,tokenAddress:e.address,accountId:n,type:t});(0,T.Dr)(r),l.popStack()})),function(e){return u.apply(this,arguments)}),[l,t]),b=(0,a.useMemo)((function(){return Array.from(new Set(f.map((function(e){return e.networkId}))))}),[f]);return(0,A.jsxs)(i.Page,{safeAreaEnabled:!1,"data-sentry-element":"Page","data-sentry-component":"SellOrBuy","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/components/SellOrBuy/index.tsx",children:[(0,A.jsx)(i.Page.Header,{title:e,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/components/SellOrBuy/index.tsx"}),(0,A.jsx)(i.Page.Body,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/components/SellOrBuy/index.tsx",children:(0,A.jsx)(NetworkContainer,{networkIds:b,"data-sentry-element":"NetworkContainer","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/components/SellOrBuy/index.tsx",children:y?(0,A.jsx)(i.Stack,{minHeight:300,justifyContent:"center",alignItems:"center",children:(0,A.jsx)(i.Spinner,{size:"large"})}):(0,A.jsx)(TokenList,{items:f,onPress:I})})})]})}))},941230:(e,t,n)=>{n.d(t,{T3:()=>c,gZ:()=>useTokenDataContext,jh:()=>TokenDataContainer});var r=n(324586),o=n(514041),a=n(384013),s=n(553083),i=n(831085);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var buildAccountTokenIndexKey=function({networkId:e,tokenAddress:t}){return e?`${e}__${t}`:""};function buildAccountTokenMap({tokens:e,lastResult:t={}}){for(var n=_objectSpread({},t),r=0;r<e.length;r+=1){var o=e[r],a=buildAccountTokenIndexKey({networkId:o.networkId,tokenAddress:o.address});a&&(n[a]=o)}return n}var c=(0,o.createContext)({tokensMap:{},fiatMap:{},networkId:""}),useTokenDataContext=function(){var{tokensMap:e,fiatMap:t,networkId:n}=(0,o.useContext)(c);return{getTokenFiatValue:(0,o.useCallback)((function({networkId:r,tokenAddress:o}){if(s.Ay.isAllNetwork({networkId:n})){var a=buildAccountTokenIndexKey({networkId:r,tokenAddress:o}),i=e[a]?.$key;return i?t[i]:void 0}}),[e,t,n]),tokensMap:e,fiatMap:t}};function TokenDataContainer({children:e,initialMap:t,initialTokens:n,networkId:r,accountId:s}){var[d]=(0,a.Cg)(),[p]=(0,a.pz)(),[u]=(0,a.cV)(),[l]=(0,a.r9)(),k=(0,o.useMemo)((function(){return{tokensMap:buildAccountTokenMap({tokens:n.concat([...d.tokens,...p.smallBalanceTokens])}),fiatMap:_objectSpread(_objectSpread(_objectSpread({},t),u),l),networkId:r,accountId:s}}),[n,d.tokens,p.smallBalanceTokens,t,u,l,r,s]);return(0,i.jsx)(c.Provider,{value:k,"data-sentry-element":"unknown","data-sentry-component":"TokenDataContainer","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/components/TokenDataContainer/index.tsx",children:e})}},69531:(e,t,n)=>{n.d(t,{M7:()=>useSupportToken,TH:()=>useFiatCrypto,ej:()=>useGetTokensList});var r=n(586330),o=n(514041),a=n(498356),s=n(384013),i=n(193068),c=n(553083),d=n(643087),p=n(911998),useSupportNetworkId=function(e,t){return(0,p.yk)((0,r.A)((function*(){return!!t&&(!!c.Ay.isAllNetwork({networkId:t})||d.A.serviceFiatCrypto.isNetworkSupported({networkId:t,type:e}))})),[t,e],{initResult:!1,debounced:100})},useSupportToken=function(e,t,n){return(0,p.yk)((0,r.A)((function*(){return d.A.serviceFiatCrypto.isTokenSupported({networkId:e,tokenAddress:t,type:n})})),[e,t,n],{initResult:!1,debounced:100})},useGetTokensList=function({networkId:e,type:t,accountId:n}){return(0,p.yk)((0,r.A)((function*(){return yield d.A.serviceFiatCrypto.getTokensList({networkId:e,type:t,accountId:n})})),[e,t,n],{initResult:[],watchLoading:!0})};function useFiatCrypto({accountId:e,networkId:t,fiatCryptoType:n}){var{result:r}=useSupportNetworkId(n,t),[c]=(0,s.RI)(),[d]=(0,s.D4)(),p=(0,a.A)();return{handleFiatCrypto:(0,o.useCallback)((function(){p.pushModal(i.ry.FiatCryptoModal,{screen:"buy"===n?i.Mg.BuyModal:i.Mg.SellModal,params:{networkId:t,accountId:e,tokens:c.tokens,map:d}})}),[e,p,t,c,d,n]),isSupported:Boolean(t&&e&&r)}}},814484:(e,t,n)=>{n.r(t),n.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=n(654266),o=n(908867),a=n(325809),s=n(334439),i=n(714191),c=n(208257),d=n(696755),p=n(941230),u=n(831085);const __WEBPACK_DEFAULT_EXPORT__=function(){var e=(0,r.lq)(),{networkId:t,accountId:n,tokens:l=[],map:k={}}=e.params,y=(0,o.A)();return(0,u.jsx)(a.b8,{config:{sceneName:i.Zs.home,sceneUrl:""},enabledNum:[0],"data-sentry-element":"AccountSelectorProviderMirror","data-sentry-component":"BuyPage","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/pages/Buy/index.tsx",children:(0,u.jsx)(c.p,{"data-sentry-element":"HomeTokenListProviderMirror","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/pages/Buy/index.tsx",children:(0,u.jsx)(p.jh,{networkId:t,accountId:n,initialMap:k,initialTokens:l,"data-sentry-element":"TokenDataContainer","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/pages/Buy/index.tsx",children:(0,u.jsx)(d.A,{title:y.formatMessage({id:s.ETranslations.global_buy}),type:"buy",networkId:t,accountId:n,"data-sentry-element":"SellOrBuy","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/FiatCrypto/pages/Buy/index.tsx"})})})})}}}]);
//# sourceMappingURL=14484.c772623f4d.chunk.js.map