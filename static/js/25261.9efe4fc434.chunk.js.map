{"version":3,"file":"static/js/25261.9efe4fc434.chunk.js","mappings":"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","sources":["webpack://web/../../node_modules/@polkadot/api/node_modules/eventemitter3/index.js","webpack://web/../../node_modules/@polkadot/api/node_modules/@polkadot/rpc-provider/coder/error.js","webpack://web/../../node_modules/@polkadot/api/node_modules/@polkadot/rpc-provider/coder/index.js","webpack://web/../../node_modules/@polkadot/api/node_modules/@polkadot/rpc-provider/defaults.js","webpack://web/../../node_modules/@polkadot/x-fetch/browser.js","webpack://web/../../node_modules/@polkadot/api/node_modules/@polkadot/rpc-provider/http/index.js","webpack://web/../../node_modules/@polkadot/api/node_modules/@polkadot/rpc-provider/lru.js","webpack://web/../../node_modules/@polkadot/api/packageInfo.js","webpack://web/../../node_modules/@polkadot/api/base/find.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/EmptyError.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/isFunction.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/Subscription.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/config.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/noop.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/NotificationFactories.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/errorContext.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/Subscriber.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/isPromise.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/symbol/observable.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/identity.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/pipe.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/Observable.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/symbol/iterator.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/isIterable.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/lift.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/args.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/isScheduler.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/executeSchedule.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/observeOn.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/subscribeOn.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduleAsyncIterable.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduled.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduleObservable.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduleArray.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduled/schedulePromise.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduleIterable.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduleReadableStreamLike.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/observable/from.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/observable/of.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/map.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/Subject.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/argsArgArrayOrObject.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/mapOneOrManyArgs.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/createObject.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/tap.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/reduce.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/scanInternals.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/toArray.js","webpack://web/../../node_modules/@polkadot/api-derive/util/lazy.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduler/dateTimestampProvider.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/refCount.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/observable/ConnectableObservable.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/connect.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/observable/fromSubscribable.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/publishReplay.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/multicast.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/util/Immediate.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduler/Action.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduler/intervalProvider.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduler/AsyncAction.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduler/immediateProvider.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduler/AsapAction.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/Scheduler.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduler/asap.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduler/AsapScheduler.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/scheduler/AsyncScheduler.js","webpack://web/../../node_modules/@polkadot/rpc-core/util/refCountDelay.js","webpack://web/../../node_modules/@polkadot/rpc-core/util/drr.js","webpack://web/../../node_modules/@polkadot/rpc-core/util/memo.js","webpack://web/../../node_modules/@polkadot/api-derive/accounts/accountId.js","webpack://web/../../node_modules/@polkadot/api-derive/accounts/flags.js","webpack://web/../../node_modules/@polkadot/api-derive/accounts/idAndIndex.js","webpack://web/../../node_modules/@polkadot/api-derive/util/first.js","webpack://web/../../node_modules/@polkadot/api-derive/accounts/identity.js","webpack://web/../../node_modules/@polkadot/api-derive/accounts/idToIndex.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/mergeInternals.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/concatAll.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/mergeAll.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/observable/concat.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/startWith.js","webpack://web/../../node_modules/@polkadot/api-derive/accounts/indexes.js","webpack://web/../../node_modules/@polkadot/api-derive/accounts/indexToId.js","webpack://web/../../node_modules/@polkadot/api-derive/accounts/info.js","webpack://web/../../node_modules/@polkadot/api-derive/collective/helpers.js","webpack://web/../../node_modules/@polkadot/api-derive/collective/members.js","webpack://web/../../node_modules/@polkadot/api-derive/collective/proposals.js","webpack://web/../../node_modules/@polkadot/api-derive/collective/prime.js","webpack://web/../../node_modules/@polkadot/api-derive/alliance/index.js","webpack://web/../../node_modules/@polkadot/api-derive/bagsList/util.js","webpack://web/../../node_modules/@polkadot/api-derive/bagsList/get.js","webpack://web/../../node_modules/@polkadot/api-derive/bagsList/getExpanded.js","webpack://web/../../node_modules/@polkadot/api-derive/bagsList/listNodes.js","webpack://web/../../node_modules/@polkadot/api-derive/balances/all.js","webpack://web/../../node_modules/@polkadot/api-derive/balances/account.js","webpack://web/../../node_modules/@polkadot/api-derive/balances/votingBalances.js","webpack://web/../../node_modules/@polkadot/api-derive/balances/index.js","webpack://web/../../node_modules/@polkadot/api-derive/bounties/helpers/filterBountyProposals.js","webpack://web/../../node_modules/@polkadot/api-derive/bounties/bounties.js","webpack://web/../../node_modules/@polkadot/api-derive/util/blockNumber.js","webpack://web/../../node_modules/@polkadot/api-derive/chain/util.js","webpack://web/../../node_modules/@polkadot/api-derive/chain/bestNumber.js","webpack://web/../../node_modules/@polkadot/api-derive/chain/bestNumberFinalized.js","webpack://web/../../node_modules/@polkadot/api-derive/chain/bestNumberLag.js","webpack://web/../../node_modules/@polkadot/api-derive/type/util.js","webpack://web/../../node_modules/@polkadot/api-derive/chain/getBlock.js","webpack://web/../../node_modules/@polkadot/api-derive/type/SignedBlockExtended.js","webpack://web/../../node_modules/@polkadot/api-derive/chain/getBlockByNumber.js","webpack://web/../../node_modules/@polkadot/api-derive/type/HeaderExtended.js","webpack://web/../../node_modules/@polkadot/api-derive/chain/getHeader.js","webpack://web/../../node_modules/@polkadot/api-derive/chain/subscribeFinalizedBlocks.js","webpack://web/../../node_modules/@polkadot/api-derive/chain/subscribeFinalizedHeads.js","webpack://web/../../node_modules/@polkadot/api-derive/chain/subscribeNewBlocks.js","webpack://web/../../node_modules/@polkadot/api-derive/chain/subscribeNewHeads.js","webpack://web/../../node_modules/@polkadot/api-derive/contracts/fees.js","webpack://web/../../node_modules/@polkadot/api-derive/council/votes.js","webpack://web/../../node_modules/@polkadot/api-derive/council/votesOf.js","webpack://web/../../node_modules/@polkadot/api-derive/council/index.js","webpack://web/../../node_modules/@polkadot/api-derive/crowdloan/childKey.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/observable/empty.js","webpack://web/../../node_modules/@polkadot/api-derive/crowdloan/util.js","webpack://web/../../node_modules/@polkadot/api-derive/crowdloan/contributions.js","webpack://web/../../node_modules/@polkadot/api-derive/crowdloan/ownContributions.js","webpack://web/../../node_modules/@polkadot/api-derive/democracy/util.js","webpack://web/../../node_modules/@polkadot/api-derive/democracy/dispatchQueue.js","webpack://web/../../node_modules/@polkadot/api-derive/democracy/locks.js","webpack://web/../../node_modules/@polkadot/api-derive/democracy/nextExternal.js","webpack://web/../../node_modules/@polkadot/api-derive/democracy/preimages.js","webpack://web/../../node_modules/@polkadot/api-derive/democracy/proposals.js","webpack://web/../../node_modules/@polkadot/api-derive/democracy/referendumIds.js","webpack://web/../../node_modules/@polkadot/api-derive/democracy/referendums.js","webpack://web/../../node_modules/@polkadot/api-derive/democracy/referendumsActive.js","webpack://web/../../node_modules/@polkadot/api-derive/democracy/referendumsFinished.js","webpack://web/../../node_modules/@polkadot/api-derive/democracy/referendumsInfo.js","webpack://web/../../node_modules/@polkadot/api-derive/democracy/sqrtElectorate.js","webpack://web/../../node_modules/@polkadot/api-derive/elections/info.js","webpack://web/../../node_modules/@polkadot/api-derive/imOnline/receivedHeartbeats.js","webpack://web/../../node_modules/@polkadot/api-derive/membership/index.js","webpack://web/../../node_modules/@polkadot/api-derive/parachains/util.js","webpack://web/../../node_modules/@polkadot/api-derive/parachains/info.js","webpack://web/../../node_modules/@polkadot/api-derive/parachains/overview.js","webpack://web/../../node_modules/@polkadot/api-derive/session/indexes.js","webpack://web/../../node_modules/@polkadot/api-derive/session/info.js","webpack://web/../../node_modules/@polkadot/api-derive/session/progress.js","webpack://web/../../node_modules/@polkadot/api-derive/society/candidates.js","webpack://web/../../node_modules/@polkadot/api-derive/society/info.js","webpack://web/../../node_modules/@polkadot/api-derive/society/member.js","webpack://web/../../node_modules/@polkadot/api-derive/society/members.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/account.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/currentPoints.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/electedInfo.js","webpack://web/../../node_modules/@polkadot/api-derive/util/cacheImpl.js","webpack://web/../../node_modules/@polkadot/api-derive/util/cache.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/cache.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/util.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/erasExposure.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/erasHistoric.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/erasPoints.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/erasPrefs.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/erasRewards.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/erasSlashes.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/keys.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/overview.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/ownExposure.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/ownSlashes.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/query.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/stakerExposure.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/stakerPoints.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/stakerPrefs.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/stakerRewards.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/stakerSlashes.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/stashes.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/validators.js","webpack://web/../../node_modules/@polkadot/api-derive/staking/waitingInfo.js","webpack://web/../../node_modules/@polkadot/api-derive/technicalCommittee/index.js","webpack://web/../../node_modules/@polkadot/api-derive/treasury/proposals.js","webpack://web/../../node_modules/@polkadot/api-derive/tx/events.js","webpack://web/../../node_modules/@polkadot/api-derive/tx/constants.js","webpack://web/../../node_modules/@polkadot/api-derive/tx/signingInfo.js","webpack://web/../../node_modules/@polkadot/api-derive/derive.js","webpack://web/../../node_modules/@polkadot/api-derive/bundle.js","webpack://web/../../node_modules/@polkadot/rpc-core/bundle.js","webpack://web/../../node_modules/@polkadot/x-ws/browser.js","webpack://web/../../node_modules/@polkadot/api/node_modules/@polkadot/rpc-provider/ws/errors.js","webpack://web/../../node_modules/@polkadot/api/node_modules/@polkadot/rpc-provider/ws/index.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/throwIfEmpty.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/first.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/filter.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/take.js","webpack://web/../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js","webpack://web/../../node_modules/@polkadot/api/util/isKeyringPair.js","webpack://web/../../node_modules/@polkadot/api/util/logging.js","webpack://web/../../node_modules/@polkadot/api/util/filterEvents.js","webpack://web/../../node_modules/@polkadot/api/submittable/Result.js","webpack://web/../../node_modules/@polkadot/api/submittable/createClass.js","webpack://web/../../node_modules/@polkadot/api/submittable/createSubmittable.js","webpack://web/../../node_modules/@polkadot/api/util/augmentObject.js","webpack://web/../../node_modules/@polkadot/api/util/decorate.js","webpack://web/../../node_modules/@polkadot/api/util/validate.js","webpack://web/../../node_modules/@polkadot/api/base/Events.js","webpack://web/../../node_modules/@polkadot/api/base/Decorate.js","webpack://web/../../node_modules/@polkadot/api/base/Init.js","webpack://web/../../node_modules/@polkadot/api/base/Getters.js","webpack://web/../../node_modules/@polkadot/api/base/index.js","webpack://web/../../node_modules/@polkadot/api/promise/Combinator.js","webpack://web/../../node_modules/@polkadot/api/promise/decorateMethod.js","webpack://web/../../node_modules/@polkadot/api/promise/Api.js"],"sourcesContent":["'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import { isFunction } from '@polkadot/util';\nconst UNKNOWN = -99999;\nfunction extend(that, name, value) {\n    Object.defineProperty(that, name, {\n        configurable: true,\n        enumerable: false,\n        value\n    });\n}\n/**\n * @name RpcError\n * @summary Extension to the basic JS Error.\n * @description\n * The built-in JavaScript Error class is extended by adding a code to allow for Error categorization. In addition to the normal `stack`, `message`, the numeric `code` and `data` (any types) parameters are available on the object.\n * @example\n * <BR>\n *\n * ```javascript\n * const { RpcError } from '@polkadot/util');\n *\n * throw new RpcError('some message', RpcError.CODES.METHOD_NOT_FOUND); // => error.code = -32601\n * ```\n */\nexport default class RpcError extends Error {\n    code;\n    data;\n    message;\n    name;\n    stack;\n    constructor(message = '', code = UNKNOWN, data) {\n        super();\n        extend(this, 'message', String(message));\n        extend(this, 'name', this.constructor.name);\n        extend(this, 'data', data);\n        extend(this, 'code', code);\n        if (isFunction(Error.captureStackTrace)) {\n            Error.captureStackTrace(this, this.constructor);\n        }\n        else {\n            const { stack } = new Error(message);\n            stack && extend(this, 'stack', stack);\n        }\n    }\n    static CODES = {\n        ASSERT: -90009,\n        INVALID_JSONRPC: -99998,\n        METHOD_NOT_FOUND: -32601, // Rust client\n        UNKNOWN\n    };\n}\n","import { isNumber, isString, isUndefined, stringify } from '@polkadot/util';\nimport RpcError from './error.js';\nfunction formatErrorData(data) {\n    if (isUndefined(data)) {\n        return '';\n    }\n    const formatted = `: ${isString(data)\n        ? data.replace(/Error\\(\"/g, '').replace(/\\(\"/g, '(').replace(/\"\\)/g, ')').replace(/\\(/g, ', ').replace(/\\)/g, '')\n        : stringify(data)}`;\n    // We need some sort of cut-off here since these can be very large and\n    // very nested, pick a number and trim the result display to it\n    return formatted.length <= 256\n        ? formatted\n        : `${formatted.substring(0, 255)}`;\n}\nfunction checkError(error) {\n    if (error) {\n        const { code, data, message } = error;\n        throw new RpcError(`${code}: ${message}${formatErrorData(data)}`, code, data);\n    }\n}\n/** @internal */\nexport class RpcCoder {\n    __internal__id = 0;\n    decodeResponse(response) {\n        if (!response || response.jsonrpc !== '2.0') {\n            throw new Error('Invalid jsonrpc field in decoded object');\n        }\n        const isSubscription = !isUndefined(response.params) && !isUndefined(response.method);\n        if (!isNumber(response.id) &&\n            (!isSubscription || (!isNumber(response.params.subscription) &&\n                !isString(response.params.subscription)))) {\n            throw new Error('Invalid id field in decoded object');\n        }\n        checkError(response.error);\n        if (response.result === undefined && !isSubscription) {\n            throw new Error('No result found in jsonrpc response');\n        }\n        if (isSubscription) {\n            checkError(response.params.error);\n            return response.params.result;\n        }\n        return response.result;\n    }\n    encodeJson(method, params) {\n        const [id, data] = this.encodeObject(method, params);\n        return [id, stringify(data)];\n    }\n    encodeObject(method, params) {\n        const id = ++this.__internal__id;\n        return [id, {\n                id,\n                jsonrpc: '2.0',\n                method,\n                params\n            }];\n    }\n}\n","const HTTP_URL = 'http://127.0.0.1:9933';\nconst WS_URL = 'ws://127.0.0.1:9944';\nexport default {\n    HTTP_URL,\n    WS_URL\n};\n","import { xglobal } from '@polkadot/x-global';\nexport { packageInfo } from './packageInfo.js';\nexport const fetch = xglobal.fetch;\n","import { logger, noop, stringify } from '@polkadot/util';\nimport { fetch } from '@polkadot/x-fetch';\nimport { RpcCoder } from '../coder/index.js';\nimport defaults from '../defaults.js';\nimport { LRUCache } from '../lru.js';\nconst ERROR_SUBSCRIBE = 'HTTP Provider does not have subscriptions, use WebSockets instead';\nconst l = logger('api-http');\n/**\n * # @polkadot/rpc-provider\n *\n * @name HttpProvider\n *\n * @description The HTTP Provider allows sending requests using HTTP to a HTTP RPC server TCP port. It does not support subscriptions so you won't be able to listen to events such as new blocks or balance changes. It is usually preferable using the [[WsProvider]].\n *\n * @example\n * <BR>\n *\n * ```javascript\n * import Api from '@polkadot/api/promise';\n * import { HttpProvider } from '@polkadot/rpc-provider';\n *\n * const provider = new HttpProvider('http://127.0.0.1:9933');\n * const api = new Api(provider);\n * ```\n *\n * @see [[WsProvider]]\n */\nexport class HttpProvider {\n    __internal__callCache = new LRUCache();\n    __internal__coder;\n    __internal__endpoint;\n    __internal__headers;\n    __internal__stats;\n    /**\n     * @param {string} endpoint The endpoint url starting with http://\n     */\n    constructor(endpoint = defaults.HTTP_URL, headers = {}) {\n        if (!/^(https|http):\\/\\//.test(endpoint)) {\n            throw new Error(`Endpoint should start with 'http://' or 'https://', received '${endpoint}'`);\n        }\n        this.__internal__coder = new RpcCoder();\n        this.__internal__endpoint = endpoint;\n        this.__internal__headers = headers;\n        this.__internal__stats = {\n            active: { requests: 0, subscriptions: 0 },\n            total: { bytesRecv: 0, bytesSent: 0, cached: 0, errors: 0, requests: 0, subscriptions: 0, timeout: 0 }\n        };\n    }\n    /**\n     * @summary `true` when this provider supports subscriptions\n     */\n    get hasSubscriptions() {\n        return !!false;\n    }\n    /**\n     * @description Returns a clone of the object\n     */\n    clone() {\n        return new HttpProvider(this.__internal__endpoint, this.__internal__headers);\n    }\n    /**\n     * @description Manually connect from the connection\n     */\n    async connect() {\n        // noop\n    }\n    /**\n     * @description Manually disconnect from the connection\n     */\n    async disconnect() {\n        // noop\n    }\n    /**\n     * @description Returns the connection stats\n     */\n    get stats() {\n        return this.__internal__stats;\n    }\n    /**\n     * @summary `true` when this provider supports clone()\n     */\n    get isClonable() {\n        return !!true;\n    }\n    /**\n     * @summary Whether the node is connected or not.\n     * @return {boolean} true if connected\n     */\n    get isConnected() {\n        return !!true;\n    }\n    /**\n     * @summary Events are not supported with the HttpProvider, see [[WsProvider]].\n     * @description HTTP Provider does not have 'on' emitters. WebSockets should be used instead.\n     */\n    on(_type, _sub) {\n        l.error('HTTP Provider does not have \\'on\\' emitters, use WebSockets instead');\n        return noop;\n    }\n    /**\n     * @summary Send HTTP POST Request with Body to configured HTTP Endpoint.\n     */\n    async send(method, params, isCacheable) {\n        this.__internal__stats.total.requests++;\n        const [, body] = this.__internal__coder.encodeJson(method, params);\n        const cacheKey = isCacheable ? `${method}::${stringify(params)}` : '';\n        let resultPromise = isCacheable\n            ? this.__internal__callCache.get(cacheKey)\n            : null;\n        if (!resultPromise) {\n            resultPromise = this.__internal__send(body);\n            if (isCacheable) {\n                this.__internal__callCache.set(cacheKey, resultPromise);\n            }\n        }\n        else {\n            this.__internal__stats.total.cached++;\n        }\n        return resultPromise;\n    }\n    async __internal__send(body) {\n        this.__internal__stats.active.requests++;\n        this.__internal__stats.total.bytesSent += body.length;\n        try {\n            const response = await fetch(this.__internal__endpoint, {\n                body,\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Length': `${body.length}`,\n                    'Content-Type': 'application/json',\n                    ...this.__internal__headers\n                },\n                method: 'POST'\n            });\n            if (!response.ok) {\n                throw new Error(`[${response.status}]: ${response.statusText}`);\n            }\n            const result = await response.text();\n            this.__internal__stats.total.bytesRecv += result.length;\n            const decoded = this.__internal__coder.decodeResponse(JSON.parse(result));\n            this.__internal__stats.active.requests--;\n            return decoded;\n        }\n        catch (e) {\n            this.__internal__stats.active.requests--;\n            this.__internal__stats.total.errors++;\n            throw e;\n        }\n    }\n    /**\n     * @summary Subscriptions are not supported with the HttpProvider, see [[WsProvider]].\n     */\n    // eslint-disable-next-line @typescript-eslint/require-await\n    async subscribe(_types, _method, _params, _cb) {\n        l.error(ERROR_SUBSCRIBE);\n        throw new Error(ERROR_SUBSCRIBE);\n    }\n    /**\n     * @summary Subscriptions are not supported with the HttpProvider, see [[WsProvider]].\n     */\n    // eslint-disable-next-line @typescript-eslint/require-await\n    async unsubscribe(_type, _method, _id) {\n        l.error(ERROR_SUBSCRIBE);\n        throw new Error(ERROR_SUBSCRIBE);\n    }\n}\n","export const DEFAULT_CAPACITY = 128;\nclass LRUNode {\n    key;\n    next;\n    prev;\n    constructor(key) {\n        this.key = key;\n        this.next = this.prev = this;\n    }\n}\nexport class LRUCache {\n    capacity;\n    __internal__data = new Map();\n    __internal__refs = new Map();\n    __internal__length = 0;\n    __internal__head;\n    __internal__tail;\n    constructor(capacity = DEFAULT_CAPACITY) {\n        this.capacity = capacity;\n        this.__internal__head = this.__internal__tail = new LRUNode('<empty>');\n    }\n    get length() {\n        return this.__internal__length;\n    }\n    get lengthData() {\n        return this.__internal__data.size;\n    }\n    get lengthRefs() {\n        return this.__internal__refs.size;\n    }\n    entries() {\n        const keys = this.keys();\n        const count = keys.length;\n        const entries = new Array(count);\n        for (let i = 0; i < count; i++) {\n            const key = keys[i];\n            entries[i] = [key, this.__internal__data.get(key)];\n        }\n        return entries;\n    }\n    keys() {\n        const keys = [];\n        if (this.__internal__length) {\n            let curr = this.__internal__head;\n            while (curr !== this.__internal__tail) {\n                keys.push(curr.key);\n                curr = curr.next;\n            }\n            keys.push(curr.key);\n        }\n        return keys;\n    }\n    get(key) {\n        const data = this.__internal__data.get(key);\n        if (data) {\n            this.__internal__toHead(key);\n            return data;\n        }\n        return null;\n    }\n    set(key, value) {\n        if (this.__internal__data.has(key)) {\n            this.__internal__toHead(key);\n        }\n        else {\n            const node = new LRUNode(key);\n            this.__internal__refs.set(node.key, node);\n            if (this.length === 0) {\n                this.__internal__head = this.__internal__tail = node;\n            }\n            else {\n                this.__internal__head.prev = node;\n                node.next = this.__internal__head;\n                this.__internal__head = node;\n            }\n            if (this.__internal__length === this.capacity) {\n                this.__internal__data.delete(this.__internal__tail.key);\n                this.__internal__refs.delete(this.__internal__tail.key);\n                this.__internal__tail = this.__internal__tail.prev;\n                this.__internal__tail.next = this.__internal__head;\n            }\n            else {\n                this.__internal__length += 1;\n            }\n        }\n        this.__internal__data.set(key, value);\n    }\n    __internal__toHead(key) {\n        const ref = this.__internal__refs.get(key);\n        if (ref && ref !== this.__internal__head) {\n            ref.prev.next = ref.next;\n            ref.next.prev = ref.prev;\n            ref.next = this.__internal__head;\n            this.__internal__head.prev = ref;\n            this.__internal__head = ref;\n        }\n    }\n}\n","\n      function getAbsoluteUrl(relativeUrl) {\n        const publicPath = __webpack_public_path__;\n\n        let url = '';\n\n        if (!publicPath || publicPath.indexOf('://') < 0) {\n          url += typeof window !=='undefined' ? window.location.protocol + '//' + window.location.host : 'https://1key.so';\n        }\n\n        if (publicPath) {\n          url += publicPath;\n        } else {\n          url += '/';\n        }\n\n        return url + relativeUrl;\n      }\nexport const packageInfo = { name: '@polkadot/api', path: (({ url: getAbsoluteUrl('ules/@polkadot/api/packageInfo.js') }) && ({ url: getAbsoluteUrl('ules/@polkadot/api/packageInfo.js') }).url) ? new URL(({ url: getAbsoluteUrl('ules/@polkadot/api/packageInfo.js') }).url).pathname.substring(0, new URL(({ url: getAbsoluteUrl('ules/@polkadot/api/packageInfo.js') }).url).pathname.lastIndexOf('/') + 1) : 'auto', type: 'esm', version: '11.3.1' };\n","import { u8aToU8a } from '@polkadot/util';\nexport function findCall(registry, callIndex) {\n    return registry.findMetaCall(u8aToU8a(callIndex));\n}\nexport function findError(registry, errorIndex) {\n    return registry.findMetaError(u8aToU8a(errorIndex));\n}\n","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { createErrorClass } from './createErrorClass';\nexport var EmptyError = createErrorClass(function (_super) { return function EmptyErrorImpl() {\n    _super(this);\n    this.name = 'EmptyError';\n    this.message = 'no elements in sequence';\n}; });\n//# sourceMappingURL=EmptyError.js.map","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","export var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind: kind,\n        value: value,\n        error: error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","import { EmptyError } from './util/EmptyError';\nimport { SafeSubscriber } from './Subscriber';\nexport function firstValueFrom(source, config) {\n    var hasConfig = typeof config === 'object';\n    return new Promise(function (resolve, reject) {\n        var subscriber = new SafeSubscriber({\n            next: function (value) {\n                resolve(value);\n                subscriber.unsubscribe();\n            },\n            error: reject,\n            complete: function () {\n                if (hasConfig) {\n                    resolve(config.defaultValue);\n                }\n                else {\n                    reject(new EmptyError());\n                }\n            },\n        });\n        source.subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=firstValueFrom.js.map","export var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map","import { isFunction } from \"./isFunction\";\nexport function isPromise(value) {\n    return isFunction(value === null || value === void 0 ? void 0 : value.then);\n}\n//# sourceMappingURL=isPromise.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\nexport function isInteropObservable(input) {\n    return isFunction(input[Symbol_observable]);\n}\n//# sourceMappingURL=isInteropObservable.js.map","import { isFunction } from './isFunction';\nexport function isAsyncIterable(obj) {\n    return Symbol.asyncIterator && isFunction(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);\n}\n//# sourceMappingURL=isAsyncIterable.js.map","export function createInvalidObservableTypeError(input) {\n    return new TypeError(\"You provided \" + (input !== null && typeof input === 'object' ? 'an invalid object' : \"'\" + input + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\n//# sourceMappingURL=throwUnobservableError.js.map","export function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = getSymbolIterator();\n//# sourceMappingURL=iterator.js.map","import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\nexport function isIterable(input) {\n    return isFunction(input === null || input === void 0 ? void 0 : input[Symbol_iterator]);\n}\n//# sourceMappingURL=isIterable.js.map","import { __asyncGenerator, __await, __generator } from \"tslib\";\nimport { isFunction } from './isFunction';\nexport function readableStreamLikeToAsyncGenerator(readableStream) {\n    return __asyncGenerator(this, arguments, function readableStreamLikeToAsyncGenerator_1() {\n        var reader, _a, value, done;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    reader = readableStream.getReader();\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, , 9, 10]);\n                    _b.label = 2;\n                case 2:\n                    if (!true) return [3, 8];\n                    return [4, __await(reader.read())];\n                case 3:\n                    _a = _b.sent(), value = _a.value, done = _a.done;\n                    if (!done) return [3, 5];\n                    return [4, __await(void 0)];\n                case 4: return [2, _b.sent()];\n                case 5: return [4, __await(value)];\n                case 6: return [4, _b.sent()];\n                case 7:\n                    _b.sent();\n                    return [3, 2];\n                case 8: return [3, 10];\n                case 9:\n                    reader.releaseLock();\n                    return [7];\n                case 10: return [2];\n            }\n        });\n    });\n}\nexport function isReadableStreamLike(obj) {\n    return isFunction(obj === null || obj === void 0 ? void 0 : obj.getReader);\n}\n//# sourceMappingURL=isReadableStreamLike.js.map","import { __asyncValues, __awaiter, __generator, __values } from \"tslib\";\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function innerFrom(input) {\n    if (input instanceof Observable) {\n        return input;\n    }\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return fromInteropObservable(input);\n        }\n        if (isArrayLike(input)) {\n            return fromArrayLike(input);\n        }\n        if (isPromise(input)) {\n            return fromPromise(input);\n        }\n        if (isAsyncIterable(input)) {\n            return fromAsyncIterable(input);\n        }\n        if (isIterable(input)) {\n            return fromIterable(input);\n        }\n        if (isReadableStreamLike(input)) {\n            return fromReadableStreamLike(input);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\nexport function fromInteropObservable(obj) {\n    return new Observable(function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (isFunction(obs.subscribe)) {\n            return obs.subscribe(subscriber);\n        }\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    });\n}\nexport function fromArrayLike(array) {\n    return new Observable(function (subscriber) {\n        for (var i = 0; i < array.length && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    });\n}\nexport function fromPromise(promise) {\n    return new Observable(function (subscriber) {\n        promise\n            .then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, reportUnhandledError);\n    });\n}\nexport function fromIterable(iterable) {\n    return new Observable(function (subscriber) {\n        var e_1, _a;\n        try {\n            for (var iterable_1 = __values(iterable), iterable_1_1 = iterable_1.next(); !iterable_1_1.done; iterable_1_1 = iterable_1.next()) {\n                var value = iterable_1_1.value;\n                subscriber.next(value);\n                if (subscriber.closed) {\n                    return;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) _a.call(iterable_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        subscriber.complete();\n    });\n}\nexport function fromAsyncIterable(asyncIterable) {\n    return new Observable(function (subscriber) {\n        process(asyncIterable, subscriber).catch(function (err) { return subscriber.error(err); });\n    });\n}\nexport function fromReadableStreamLike(readableStream) {\n    return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\nfunction process(asyncIterable, subscriber) {\n    var asyncIterable_1, asyncIterable_1_1;\n    var e_2, _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var value, e_2_1;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _b.trys.push([0, 5, 6, 11]);\n                    asyncIterable_1 = __asyncValues(asyncIterable);\n                    _b.label = 1;\n                case 1: return [4, asyncIterable_1.next()];\n                case 2:\n                    if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done)) return [3, 4];\n                    value = asyncIterable_1_1.value;\n                    subscriber.next(value);\n                    if (subscriber.closed) {\n                        return [2];\n                    }\n                    _b.label = 3;\n                case 3: return [3, 1];\n                case 4: return [3, 11];\n                case 5:\n                    e_2_1 = _b.sent();\n                    e_2 = { error: e_2_1 };\n                    return [3, 11];\n                case 6:\n                    _b.trys.push([6, , 9, 10]);\n                    if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return))) return [3, 8];\n                    return [4, _a.call(asyncIterable_1)];\n                case 7:\n                    _b.sent();\n                    _b.label = 8;\n                case 8: return [3, 10];\n                case 9:\n                    if (e_2) throw e_2.error;\n                    return [7];\n                case 10: return [7];\n                case 11:\n                    subscriber.complete();\n                    return [2];\n            }\n        });\n    });\n}\n//# sourceMappingURL=innerFrom.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function switchMap(project, resultSelector) {\n    return operate(function (source, subscriber) {\n        var innerSubscriber = null;\n        var index = 0;\n        var isComplete = false;\n        var checkComplete = function () { return isComplete && !innerSubscriber && subscriber.complete(); };\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            innerSubscriber === null || innerSubscriber === void 0 ? void 0 : innerSubscriber.unsubscribe();\n            var innerIndex = 0;\n            var outerIndex = index++;\n            innerFrom(project(value, outerIndex)).subscribe((innerSubscriber = createOperatorSubscriber(subscriber, function (innerValue) { return subscriber.next(resultSelector ? resultSelector(value, innerValue, outerIndex, innerIndex++) : innerValue); }, function () {\n                innerSubscriber = null;\n                checkComplete();\n            })));\n        }, function () {\n            isComplete = true;\n            checkComplete();\n        }));\n    });\n}\n//# sourceMappingURL=switchMap.js.map","import { isFunction } from './isFunction';\nimport { isScheduler } from './isScheduler';\nfunction last(arr) {\n    return arr[arr.length - 1];\n}\nexport function popResultSelector(args) {\n    return isFunction(last(args)) ? args.pop() : undefined;\n}\nexport function popScheduler(args) {\n    return isScheduler(last(args)) ? args.pop() : undefined;\n}\nexport function popNumber(args, defaultValue) {\n    return typeof last(args) === 'number' ? args.pop() : defaultValue;\n}\n//# sourceMappingURL=args.js.map","import { isFunction } from './isFunction';\nexport function isScheduler(value) {\n    return value && isFunction(value.schedule);\n}\n//# sourceMappingURL=isScheduler.js.map","export function executeSchedule(parentSubscription, scheduler, work, delay, repeat) {\n    if (delay === void 0) { delay = 0; }\n    if (repeat === void 0) { repeat = false; }\n    var scheduleSubscription = scheduler.schedule(function () {\n        work();\n        if (repeat) {\n            parentSubscription.add(this.schedule(null, delay));\n        }\n        else {\n            this.unsubscribe();\n        }\n    }, delay);\n    parentSubscription.add(scheduleSubscription);\n    if (!repeat) {\n        return scheduleSubscription;\n    }\n}\n//# sourceMappingURL=executeSchedule.js.map","import { executeSchedule } from '../util/executeSchedule';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function observeOn(scheduler, delay) {\n    if (delay === void 0) { delay = 0; }\n    return operate(function (source, subscriber) {\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return executeSchedule(subscriber, scheduler, function () { return subscriber.next(value); }, delay); }, function () { return executeSchedule(subscriber, scheduler, function () { return subscriber.complete(); }, delay); }, function (err) { return executeSchedule(subscriber, scheduler, function () { return subscriber.error(err); }, delay); }));\n    });\n}\n//# sourceMappingURL=observeOn.js.map","import { operate } from '../util/lift';\nexport function subscribeOn(scheduler, delay) {\n    if (delay === void 0) { delay = 0; }\n    return operate(function (source, subscriber) {\n        subscriber.add(scheduler.schedule(function () { return source.subscribe(subscriber); }, delay));\n    });\n}\n//# sourceMappingURL=subscribeOn.js.map","import { Observable } from '../Observable';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleAsyncIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable(function (subscriber) {\n        executeSchedule(subscriber, scheduler, function () {\n            var iterator = input[Symbol.asyncIterator]();\n            executeSchedule(subscriber, scheduler, function () {\n                iterator.next().then(function (result) {\n                    if (result.done) {\n                        subscriber.complete();\n                    }\n                    else {\n                        subscriber.next(result.value);\n                    }\n                });\n            }, 0, true);\n        });\n    });\n}\n//# sourceMappingURL=scheduleAsyncIterable.js.map","import { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isReadableStreamLike } from '../util/isReadableStreamLike';\nimport { scheduleReadableStreamLike } from './scheduleReadableStreamLike';\nexport function scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return scheduleObservable(input, scheduler);\n        }\n        if (isArrayLike(input)) {\n            return scheduleArray(input, scheduler);\n        }\n        if (isPromise(input)) {\n            return schedulePromise(input, scheduler);\n        }\n        if (isAsyncIterable(input)) {\n            return scheduleAsyncIterable(input, scheduler);\n        }\n        if (isIterable(input)) {\n            return scheduleIterable(input, scheduler);\n        }\n        if (isReadableStreamLike(input)) {\n            return scheduleReadableStreamLike(input, scheduler);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\n//# sourceMappingURL=scheduled.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function scheduleObservable(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=scheduleObservable.js.map","import { Observable } from '../Observable';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var i = 0;\n        return scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n            }\n            else {\n                subscriber.next(input[i++]);\n                if (!subscriber.closed) {\n                    this.schedule();\n                }\n            }\n        });\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function schedulePromise(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=schedulePromise.js.map","import { Observable } from '../Observable';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from '../util/isFunction';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleIterable(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var iterator;\n        executeSchedule(subscriber, scheduler, function () {\n            iterator = input[Symbol_iterator]();\n            executeSchedule(subscriber, scheduler, function () {\n                var _a;\n                var value;\n                var done;\n                try {\n                    (_a = iterator.next(), value = _a.value, done = _a.done);\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                }\n            }, 0, true);\n        });\n        return function () { return isFunction(iterator === null || iterator === void 0 ? void 0 : iterator.return) && iterator.return(); };\n    });\n}\n//# sourceMappingURL=scheduleIterable.js.map","import { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nexport function scheduleReadableStreamLike(input, scheduler) {\n    return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input), scheduler);\n}\n//# sourceMappingURL=scheduleReadableStreamLike.js.map","import { scheduled } from '../scheduled/scheduled';\nimport { innerFrom } from './innerFrom';\nexport function from(input, scheduler) {\n    return scheduler ? scheduled(input, scheduler) : innerFrom(input);\n}\n//# sourceMappingURL=from.js.map","import { popScheduler } from '../util/args';\nimport { from } from './from';\nexport function of() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = popScheduler(args);\n    return from(args, scheduler);\n}\n//# sourceMappingURL=of.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","import { createErrorClass } from './createErrorClass';\nexport var ObjectUnsubscribedError = createErrorClass(function (_super) {\n    return function ObjectUnsubscribedErrorImpl() {\n        _super(this);\n        this.name = 'ObjectUnsubscribedError';\n        this.message = 'object unsubscribed';\n    };\n});\n//# sourceMappingURL=ObjectUnsubscribedError.js.map","import { __extends, __values } from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\nvar Subject = (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.closed = false;\n        _this.currentObservers = null;\n        _this.observers = [];\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype._throwIfClosed = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n    };\n    Subject.prototype.next = function (value) {\n        var _this = this;\n        errorContext(function () {\n            var e_1, _a;\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                if (!_this.currentObservers) {\n                    _this.currentObservers = Array.from(_this.observers);\n                }\n                try {\n                    for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var observer = _c.value;\n                        observer.next(value);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        });\n    };\n    Subject.prototype.error = function (err) {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.hasError = _this.isStopped = true;\n                _this.thrownError = err;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().error(err);\n                }\n            }\n        });\n    };\n    Subject.prototype.complete = function () {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.isStopped = true;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().complete();\n                }\n            }\n        });\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = this.closed = true;\n        this.observers = this.currentObservers = null;\n    };\n    Object.defineProperty(Subject.prototype, \"observed\", {\n        get: function () {\n            var _a;\n            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Subject.prototype._trySubscribe = function (subscriber) {\n        this._throwIfClosed();\n        return _super.prototype._trySubscribe.call(this, subscriber);\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._checkFinalizedStatuses(subscriber);\n        return this._innerSubscribe(subscriber);\n    };\n    Subject.prototype._innerSubscribe = function (subscriber) {\n        var _this = this;\n        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;\n        if (hasError || isStopped) {\n            return EMPTY_SUBSCRIPTION;\n        }\n        this.currentObservers = null;\n        observers.push(subscriber);\n        return new Subscription(function () {\n            _this.currentObservers = null;\n            arrRemove(observers, subscriber);\n        });\n    };\n    Subject.prototype._checkFinalizedStatuses = function (subscriber) {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;\n        if (hasError) {\n            subscriber.error(thrownError);\n        }\n        else if (isStopped) {\n            subscriber.complete();\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var _a, _b;\n        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map","import { __extends } from \"tslib\";\nimport { Subject } from './Subject';\nvar BehaviorSubject = (function (_super) {\n    __extends(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        var _this = _super.call(this) || this;\n        _this._value = _value;\n        return _this;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        !subscription.closed && subscriber.next(this._value);\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, _value = _a._value;\n        if (hasError) {\n            throw thrownError;\n        }\n        this._throwIfClosed();\n        return _value;\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, (this._value = value));\n    };\n    return BehaviorSubject;\n}(Subject));\nexport { BehaviorSubject };\n//# sourceMappingURL=BehaviorSubject.js.map","var isArray = Array.isArray;\nvar getPrototypeOf = Object.getPrototypeOf, objectProto = Object.prototype, getKeys = Object.keys;\nexport function argsArgArrayOrObject(args) {\n    if (args.length === 1) {\n        var first_1 = args[0];\n        if (isArray(first_1)) {\n            return { args: first_1, keys: null };\n        }\n        if (isPOJO(first_1)) {\n            var keys = getKeys(first_1);\n            return {\n                args: keys.map(function (key) { return first_1[key]; }),\n                keys: keys,\n            };\n        }\n    }\n    return { args: args, keys: null };\n}\nfunction isPOJO(obj) {\n    return obj && typeof obj === 'object' && getPrototypeOf(obj) === objectProto;\n}\n//# sourceMappingURL=argsArgArrayOrObject.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { map } from \"../operators/map\";\nvar isArray = Array.isArray;\nfunction callOrApply(fn, args) {\n    return isArray(args) ? fn.apply(void 0, __spreadArray([], __read(args))) : fn(args);\n}\nexport function mapOneOrManyArgs(fn) {\n    return map(function (args) { return callOrApply(fn, args); });\n}\n//# sourceMappingURL=mapOneOrManyArgs.js.map","import { Observable } from '../Observable';\nimport { argsArgArrayOrObject } from '../util/argsArgArrayOrObject';\nimport { from } from './from';\nimport { identity } from '../util/identity';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\nimport { popResultSelector, popScheduler } from '../util/args';\nimport { createObject } from '../util/createObject';\nimport { createOperatorSubscriber } from '../operators/OperatorSubscriber';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function combineLatest() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = popScheduler(args);\n    var resultSelector = popResultSelector(args);\n    var _a = argsArgArrayOrObject(args), observables = _a.args, keys = _a.keys;\n    if (observables.length === 0) {\n        return from([], scheduler);\n    }\n    var result = new Observable(combineLatestInit(observables, scheduler, keys\n        ?\n            function (values) { return createObject(keys, values); }\n        :\n            identity));\n    return resultSelector ? result.pipe(mapOneOrManyArgs(resultSelector)) : result;\n}\nexport function combineLatestInit(observables, scheduler, valueTransform) {\n    if (valueTransform === void 0) { valueTransform = identity; }\n    return function (subscriber) {\n        maybeSchedule(scheduler, function () {\n            var length = observables.length;\n            var values = new Array(length);\n            var active = length;\n            var remainingFirstValues = length;\n            var _loop_1 = function (i) {\n                maybeSchedule(scheduler, function () {\n                    var source = from(observables[i], scheduler);\n                    var hasFirstValue = false;\n                    source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n                        values[i] = value;\n                        if (!hasFirstValue) {\n                            hasFirstValue = true;\n                            remainingFirstValues--;\n                        }\n                        if (!remainingFirstValues) {\n                            subscriber.next(valueTransform(values.slice()));\n                        }\n                    }, function () {\n                        if (!--active) {\n                            subscriber.complete();\n                        }\n                    }));\n                }, subscriber);\n            };\n            for (var i = 0; i < length; i++) {\n                _loop_1(i);\n            }\n        }, subscriber);\n    };\n}\nfunction maybeSchedule(scheduler, execute, subscription) {\n    if (scheduler) {\n        executeSchedule(subscription, scheduler, execute);\n    }\n    else {\n        execute();\n    }\n}\n//# sourceMappingURL=combineLatest.js.map","export function createObject(keys, values) {\n    return keys.reduce(function (result, key, i) { return ((result[key] = values[i]), result); }, {});\n}\n//# sourceMappingURL=createObject.js.map","import { isFunction } from '../util/isFunction';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { identity } from '../util/identity';\nexport function tap(observerOrNext, error, complete) {\n    var tapObserver = isFunction(observerOrNext) || error || complete\n        ?\n            { next: observerOrNext, error: error, complete: complete }\n        : observerOrNext;\n    return tapObserver\n        ? operate(function (source, subscriber) {\n            var _a;\n            (_a = tapObserver.subscribe) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n            var isUnsub = true;\n            source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n                var _a;\n                (_a = tapObserver.next) === null || _a === void 0 ? void 0 : _a.call(tapObserver, value);\n                subscriber.next(value);\n            }, function () {\n                var _a;\n                isUnsub = false;\n                (_a = tapObserver.complete) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n                subscriber.complete();\n            }, function (err) {\n                var _a;\n                isUnsub = false;\n                (_a = tapObserver.error) === null || _a === void 0 ? void 0 : _a.call(tapObserver, err);\n                subscriber.error(err);\n            }, function () {\n                var _a, _b;\n                if (isUnsub) {\n                    (_a = tapObserver.unsubscribe) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n                }\n                (_b = tapObserver.finalize) === null || _b === void 0 ? void 0 : _b.call(tapObserver);\n            }));\n        })\n        :\n            identity;\n}\n//# sourceMappingURL=tap.js.map","import { scanInternals } from './scanInternals';\nimport { operate } from '../util/lift';\nexport function reduce(accumulator, seed) {\n    return operate(scanInternals(accumulator, seed, arguments.length >= 2, false, true));\n}\n//# sourceMappingURL=reduce.js.map","import { createOperatorSubscriber } from './OperatorSubscriber';\nexport function scanInternals(accumulator, seed, hasSeed, emitOnNext, emitBeforeComplete) {\n    return function (source, subscriber) {\n        var hasState = hasSeed;\n        var state = seed;\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var i = index++;\n            state = hasState\n                ?\n                    accumulator(state, value, i)\n                :\n                    ((hasState = true), value);\n            emitOnNext && subscriber.next(state);\n        }, emitBeforeComplete &&\n            (function () {\n                hasState && subscriber.next(state);\n                subscriber.complete();\n            })));\n    };\n}\n//# sourceMappingURL=scanInternals.js.map","import { reduce } from './reduce';\nimport { operate } from '../util/lift';\nvar arrReducer = function (arr, value) { return (arr.push(value), arr); };\nexport function toArray() {\n    return operate(function (source, subscriber) {\n        reduce(arrReducer, [])(source).subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=toArray.js.map","import { lazyMethod, lazyMethods } from '@polkadot/util';\nexport function lazyDeriveSection(result, section, getKeys, creator) {\n    lazyMethod(result, section, () => lazyMethods({}, getKeys(section), (method) => creator(section, method)));\n}\n","import { innerFrom } from '../observable/innerFrom';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { operate } from '../util/lift';\nexport function catchError(selector) {\n    return operate(function (source, subscriber) {\n        var innerSub = null;\n        var syncUnsub = false;\n        var handledResult;\n        innerSub = source.subscribe(createOperatorSubscriber(subscriber, undefined, undefined, function (err) {\n            handledResult = innerFrom(selector(err, catchError(selector)(source)));\n            if (innerSub) {\n                innerSub.unsubscribe();\n                innerSub = null;\n                handledResult.subscribe(subscriber);\n            }\n            else {\n                syncUnsub = true;\n            }\n        }));\n        if (syncUnsub) {\n            innerSub.unsubscribe();\n            innerSub = null;\n            handledResult.subscribe(subscriber);\n        }\n    });\n}\n//# sourceMappingURL=catchError.js.map","import { identity } from '../util/identity';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function distinctUntilChanged(comparator, keySelector) {\n    if (keySelector === void 0) { keySelector = identity; }\n    comparator = comparator !== null && comparator !== void 0 ? comparator : defaultCompare;\n    return operate(function (source, subscriber) {\n        var previousKey;\n        var first = true;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var currentKey = keySelector(value);\n            if (first || !comparator(previousKey, currentKey)) {\n                first = false;\n                previousKey = currentKey;\n                subscriber.next(value);\n            }\n        }));\n    });\n}\nfunction defaultCompare(a, b) {\n    return a === b;\n}\n//# sourceMappingURL=distinctUntilChanged.js.map","export var dateTimestampProvider = {\n    now: function () {\n        return (dateTimestampProvider.delegate || Date).now();\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=dateTimestampProvider.js.map","import { __extends } from \"tslib\";\nimport { Subject } from './Subject';\nimport { dateTimestampProvider } from './scheduler/dateTimestampProvider';\nvar ReplaySubject = (function (_super) {\n    __extends(ReplaySubject, _super);\n    function ReplaySubject(_bufferSize, _windowTime, _timestampProvider) {\n        if (_bufferSize === void 0) { _bufferSize = Infinity; }\n        if (_windowTime === void 0) { _windowTime = Infinity; }\n        if (_timestampProvider === void 0) { _timestampProvider = dateTimestampProvider; }\n        var _this = _super.call(this) || this;\n        _this._bufferSize = _bufferSize;\n        _this._windowTime = _windowTime;\n        _this._timestampProvider = _timestampProvider;\n        _this._buffer = [];\n        _this._infiniteTimeWindow = true;\n        _this._infiniteTimeWindow = _windowTime === Infinity;\n        _this._bufferSize = Math.max(1, _bufferSize);\n        _this._windowTime = Math.max(1, _windowTime);\n        return _this;\n    }\n    ReplaySubject.prototype.next = function (value) {\n        var _a = this, isStopped = _a.isStopped, _buffer = _a._buffer, _infiniteTimeWindow = _a._infiniteTimeWindow, _timestampProvider = _a._timestampProvider, _windowTime = _a._windowTime;\n        if (!isStopped) {\n            _buffer.push(value);\n            !_infiniteTimeWindow && _buffer.push(_timestampProvider.now() + _windowTime);\n        }\n        this._trimBuffer();\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._trimBuffer();\n        var subscription = this._innerSubscribe(subscriber);\n        var _a = this, _infiniteTimeWindow = _a._infiniteTimeWindow, _buffer = _a._buffer;\n        var copy = _buffer.slice();\n        for (var i = 0; i < copy.length && !subscriber.closed; i += _infiniteTimeWindow ? 1 : 2) {\n            subscriber.next(copy[i]);\n        }\n        this._checkFinalizedStatuses(subscriber);\n        return subscription;\n    };\n    ReplaySubject.prototype._trimBuffer = function () {\n        var _a = this, _bufferSize = _a._bufferSize, _timestampProvider = _a._timestampProvider, _buffer = _a._buffer, _infiniteTimeWindow = _a._infiniteTimeWindow;\n        var adjustedBufferSize = (_infiniteTimeWindow ? 1 : 2) * _bufferSize;\n        _bufferSize < Infinity && adjustedBufferSize < _buffer.length && _buffer.splice(0, _buffer.length - adjustedBufferSize);\n        if (!_infiniteTimeWindow) {\n            var now = _timestampProvider.now();\n            var last = 0;\n            for (var i = 1; i < _buffer.length && _buffer[i] <= now; i += 2) {\n                last = i;\n            }\n            last && _buffer.splice(0, last + 1);\n        }\n    };\n    return ReplaySubject;\n}(Subject));\nexport { ReplaySubject };\n//# sourceMappingURL=ReplaySubject.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function refCount() {\n    return operate(function (source, subscriber) {\n        var connection = null;\n        source._refCount++;\n        var refCounter = createOperatorSubscriber(subscriber, undefined, undefined, undefined, function () {\n            if (!source || source._refCount <= 0 || 0 < --source._refCount) {\n                connection = null;\n                return;\n            }\n            var sharedConnection = source._connection;\n            var conn = connection;\n            connection = null;\n            if (sharedConnection && (!conn || sharedConnection === conn)) {\n                sharedConnection.unsubscribe();\n            }\n            subscriber.unsubscribe();\n        });\n        source.subscribe(refCounter);\n        if (!refCounter.closed) {\n            connection = source.connect();\n        }\n    });\n}\n//# sourceMappingURL=refCount.js.map","import { __extends } from \"tslib\";\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { refCount as higherOrderRefCount } from '../operators/refCount';\nimport { createOperatorSubscriber } from '../operators/OperatorSubscriber';\nimport { hasLift } from '../util/lift';\nvar ConnectableObservable = (function (_super) {\n    __extends(ConnectableObservable, _super);\n    function ConnectableObservable(source, subjectFactory) {\n        var _this = _super.call(this) || this;\n        _this.source = source;\n        _this.subjectFactory = subjectFactory;\n        _this._subject = null;\n        _this._refCount = 0;\n        _this._connection = null;\n        if (hasLift(source)) {\n            _this.lift = source.lift;\n        }\n        return _this;\n    }\n    ConnectableObservable.prototype._subscribe = function (subscriber) {\n        return this.getSubject().subscribe(subscriber);\n    };\n    ConnectableObservable.prototype.getSubject = function () {\n        var subject = this._subject;\n        if (!subject || subject.isStopped) {\n            this._subject = this.subjectFactory();\n        }\n        return this._subject;\n    };\n    ConnectableObservable.prototype._teardown = function () {\n        this._refCount = 0;\n        var _connection = this._connection;\n        this._subject = this._connection = null;\n        _connection === null || _connection === void 0 ? void 0 : _connection.unsubscribe();\n    };\n    ConnectableObservable.prototype.connect = function () {\n        var _this = this;\n        var connection = this._connection;\n        if (!connection) {\n            connection = this._connection = new Subscription();\n            var subject_1 = this.getSubject();\n            connection.add(this.source.subscribe(createOperatorSubscriber(subject_1, undefined, function () {\n                _this._teardown();\n                subject_1.complete();\n            }, function (err) {\n                _this._teardown();\n                subject_1.error(err);\n            }, function () { return _this._teardown(); })));\n            if (connection.closed) {\n                this._connection = null;\n                connection = Subscription.EMPTY;\n            }\n        }\n        return connection;\n    };\n    ConnectableObservable.prototype.refCount = function () {\n        return higherOrderRefCount()(this);\n    };\n    return ConnectableObservable;\n}(Observable));\nexport { ConnectableObservable };\n//# sourceMappingURL=ConnectableObservable.js.map","import { Subject } from '../Subject';\nimport { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { fromSubscribable } from '../observable/fromSubscribable';\nvar DEFAULT_CONFIG = {\n    connector: function () { return new Subject(); },\n};\nexport function connect(selector, config) {\n    if (config === void 0) { config = DEFAULT_CONFIG; }\n    var connector = config.connector;\n    return operate(function (source, subscriber) {\n        var subject = connector();\n        innerFrom(selector(fromSubscribable(subject))).subscribe(subscriber);\n        subscriber.add(source.subscribe(subject));\n    });\n}\n//# sourceMappingURL=connect.js.map","import { Observable } from '../Observable';\nexport function fromSubscribable(subscribable) {\n    return new Observable(function (subscriber) { return subscribable.subscribe(subscriber); });\n}\n//# sourceMappingURL=fromSubscribable.js.map","import { ReplaySubject } from '../ReplaySubject';\nimport { multicast } from './multicast';\nimport { isFunction } from '../util/isFunction';\nexport function publishReplay(bufferSize, windowTime, selectorOrScheduler, timestampProvider) {\n    if (selectorOrScheduler && !isFunction(selectorOrScheduler)) {\n        timestampProvider = selectorOrScheduler;\n    }\n    var selector = isFunction(selectorOrScheduler) ? selectorOrScheduler : undefined;\n    return function (source) { return multicast(new ReplaySubject(bufferSize, windowTime, timestampProvider), selector)(source); };\n}\n//# sourceMappingURL=publishReplay.js.map","import { ConnectableObservable } from '../observable/ConnectableObservable';\nimport { isFunction } from '../util/isFunction';\nimport { connect } from './connect';\nexport function multicast(subjectOrSubjectFactory, selector) {\n    var subjectFactory = isFunction(subjectOrSubjectFactory) ? subjectOrSubjectFactory : function () { return subjectOrSubjectFactory; };\n    if (isFunction(selector)) {\n        return connect(selector, {\n            connector: subjectFactory,\n        });\n    }\n    return function (source) { return new ConnectableObservable(source, subjectFactory); };\n}\n//# sourceMappingURL=multicast.js.map","var nextHandle = 1;\nvar resolved;\nvar activeHandles = {};\nfunction findAndClearHandle(handle) {\n    if (handle in activeHandles) {\n        delete activeHandles[handle];\n        return true;\n    }\n    return false;\n}\nexport var Immediate = {\n    setImmediate: function (cb) {\n        var handle = nextHandle++;\n        activeHandles[handle] = true;\n        if (!resolved) {\n            resolved = Promise.resolve();\n        }\n        resolved.then(function () { return findAndClearHandle(handle) && cb(); });\n        return handle;\n    },\n    clearImmediate: function (handle) {\n        findAndClearHandle(handle);\n    },\n};\nexport var TestTools = {\n    pending: function () {\n        return Object.keys(activeHandles).length;\n    }\n};\n//# sourceMappingURL=Immediate.js.map","import { __extends } from \"tslib\";\nimport { Subscription } from '../Subscription';\nvar Action = (function (_super) {\n    __extends(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        return this;\n    };\n    return Action;\n}(Subscription));\nexport { Action };\n//# sourceMappingURL=Action.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var intervalProvider = {\n    setInterval: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = intervalProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setInterval) {\n            return delegate.setInterval.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setInterval.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearInterval: function (handle) {\n        var delegate = intervalProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearInterval) || clearInterval)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=intervalProvider.js.map","import { __extends } from \"tslib\";\nimport { Action } from './Action';\nimport { intervalProvider } from './intervalProvider';\nimport { arrRemove } from '../util/arrRemove';\nvar AsyncAction = (function (_super) {\n    __extends(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        var _a;\n        if (delay === void 0) { delay = 0; }\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = (_a = this.id) !== null && _a !== void 0 ? _a : this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, _id, delay) {\n        if (delay === void 0) { delay = 0; }\n        return intervalProvider.setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (_scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (delay != null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        if (id != null) {\n            intervalProvider.clearInterval(id);\n        }\n        return undefined;\n    };\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, _delay) {\n        var errored = false;\n        var errorValue;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = e ? e : new Error('Scheduled action threw falsy error');\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    AsyncAction.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            var _a = this, id = _a.id, scheduler = _a.scheduler;\n            var actions = scheduler.actions;\n            this.work = this.state = this.scheduler = null;\n            this.pending = false;\n            arrRemove(actions, this);\n            if (id != null) {\n                this.id = this.recycleAsyncId(scheduler, id, null);\n            }\n            this.delay = null;\n            _super.prototype.unsubscribe.call(this);\n        }\n    };\n    return AsyncAction;\n}(Action));\nexport { AsyncAction };\n//# sourceMappingURL=AsyncAction.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { Immediate } from '../util/Immediate';\nvar setImmediate = Immediate.setImmediate, clearImmediate = Immediate.clearImmediate;\nexport var immediateProvider = {\n    setImmediate: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var delegate = immediateProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.setImmediate) || setImmediate).apply(void 0, __spreadArray([], __read(args)));\n    },\n    clearImmediate: function (handle) {\n        var delegate = immediateProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearImmediate) || clearImmediate)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=immediateProvider.js.map","import { __extends } from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nimport { immediateProvider } from './immediateProvider';\nvar AsapAction = (function (_super) {\n    __extends(AsapAction, _super);\n    function AsapAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    AsapAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (delay !== null && delay > 0) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        scheduler.actions.push(this);\n        return scheduler._scheduled || (scheduler._scheduled = immediateProvider.setImmediate(scheduler.flush.bind(scheduler, undefined)));\n    };\n    AsapAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        var _a;\n        if (delay === void 0) { delay = 0; }\n        if (delay != null ? delay > 0 : this.delay > 0) {\n            return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);\n        }\n        var actions = scheduler.actions;\n        if (id != null && ((_a = actions[actions.length - 1]) === null || _a === void 0 ? void 0 : _a.id) !== id) {\n            immediateProvider.clearImmediate(id);\n            if (scheduler._scheduled === id) {\n                scheduler._scheduled = undefined;\n            }\n        }\n        return undefined;\n    };\n    return AsapAction;\n}(AsyncAction));\nexport { AsapAction };\n//# sourceMappingURL=AsapAction.js.map","import { dateTimestampProvider } from './scheduler/dateTimestampProvider';\nvar Scheduler = (function () {\n    function Scheduler(schedulerActionCtor, now) {\n        if (now === void 0) { now = Scheduler.now; }\n        this.schedulerActionCtor = schedulerActionCtor;\n        this.now = now;\n    }\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) { delay = 0; }\n        return new this.schedulerActionCtor(this, work).schedule(state, delay);\n    };\n    Scheduler.now = dateTimestampProvider.now;\n    return Scheduler;\n}());\nexport { Scheduler };\n//# sourceMappingURL=Scheduler.js.map","import { AsapAction } from './AsapAction';\nimport { AsapScheduler } from './AsapScheduler';\nexport var asapScheduler = new AsapScheduler(AsapAction);\nexport var asap = asapScheduler;\n//# sourceMappingURL=asap.js.map","import { __extends } from \"tslib\";\nimport { AsyncScheduler } from './AsyncScheduler';\nvar AsapScheduler = (function (_super) {\n    __extends(AsapScheduler, _super);\n    function AsapScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AsapScheduler.prototype.flush = function (action) {\n        this._active = true;\n        var flushId = this._scheduled;\n        this._scheduled = undefined;\n        var actions = this.actions;\n        var error;\n        action = action || actions.shift();\n        do {\n            if ((error = action.execute(action.state, action.delay))) {\n                break;\n            }\n        } while ((action = actions[0]) && action.id === flushId && actions.shift());\n        this._active = false;\n        if (error) {\n            while ((action = actions[0]) && action.id === flushId && actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsapScheduler;\n}(AsyncScheduler));\nexport { AsapScheduler };\n//# sourceMappingURL=AsapScheduler.js.map","import { __extends } from \"tslib\";\nimport { Scheduler } from '../Scheduler';\nvar AsyncScheduler = (function (_super) {\n    __extends(AsyncScheduler, _super);\n    function AsyncScheduler(SchedulerAction, now) {\n        if (now === void 0) { now = Scheduler.now; }\n        var _this = _super.call(this, SchedulerAction, now) || this;\n        _this.actions = [];\n        _this._active = false;\n        return _this;\n    }\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this._active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this._active = true;\n        do {\n            if ((error = action.execute(action.state, action.delay))) {\n                break;\n            }\n        } while ((action = actions.shift()));\n        this._active = false;\n        if (error) {\n            while ((action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\nexport { AsyncScheduler };\n//# sourceMappingURL=AsyncScheduler.js.map","import { asapScheduler, Observable, Subscription } from 'rxjs';\n/** @internal */\nexport function refCountDelay(delay = 1750) {\n    return (source) => {\n        // state: 0 = disconnected, 1 = disconnecting, 2 = connecting, 3 = connected\n        let [state, refCount, connection, scheduler] = [0, 0, Subscription.EMPTY, Subscription.EMPTY];\n        return new Observable((ob) => {\n            source.subscribe(ob);\n            if (refCount++ === 0) {\n                if (state === 1) {\n                    scheduler.unsubscribe();\n                }\n                else {\n                    // eslint-disable-next-line deprecation/deprecation\n                    connection = source.connect();\n                }\n                state = 3;\n            }\n            return () => {\n                if (--refCount === 0) {\n                    if (state === 2) {\n                        state = 0;\n                        scheduler.unsubscribe();\n                    }\n                    else {\n                        // state === 3\n                        state = 1;\n                        scheduler = asapScheduler.schedule(() => {\n                            state = 0;\n                            connection.unsubscribe();\n                        }, delay);\n                    }\n                }\n            };\n        });\n    };\n}\n","import { catchError, distinctUntilChanged, publishReplay, refCount, tap } from 'rxjs';\nimport { stringify } from '@polkadot/util';\nimport { refCountDelay } from './refCountDelay.js';\nfunction CMP(a, b) {\n    return stringify({ t: a }) === stringify({ t: b });\n}\nfunction ERR(error) {\n    throw error;\n}\nfunction NOOP() {\n    // empty\n}\n/**\n * Shorthand for distinctUntilChanged(), publishReplay(1) and refCount().\n *\n * @ignore\n * @internal\n */\nexport function drr({ delay, skipChange = false, skipTimeout = false } = {}) {\n    return (source$) => source$.pipe(catchError(ERR), skipChange\n        ? tap(NOOP)\n        : distinctUntilChanged(CMP), \n    // eslint-disable-next-line deprecation/deprecation\n    publishReplay(1), skipTimeout\n        // eslint-disable-next-line deprecation/deprecation\n        ? refCount()\n        : refCountDelay(delay));\n}\n","import { Observable } from 'rxjs';\nimport { memoize } from '@polkadot/util';\nimport { drr } from './drr.js';\n/** @internal */\nexport function memo(instanceId, inner) {\n    const options = { getInstanceId: () => instanceId };\n    const cached = memoize((...params) => new Observable((observer) => {\n        const subscription = inner(...params).subscribe(observer);\n        return () => {\n            cached.unmemoize(...params);\n            subscription.unsubscribe();\n        };\n    }).pipe(drr()), options);\n    return cached;\n}\n","import { map, of } from 'rxjs';\nimport { assertReturn, isU8a } from '@polkadot/util';\nimport { decodeAddress } from '@polkadot/util-crypto';\nimport { memo } from '../util/index.js';\n/**\n * @name accountId\n * @param {(Address | AccountId | AccountIndex | string | null)} address - An accounts address in various formats.\n * @description  An [[AccountId]]\n */\nexport function accountId(instanceId, api) {\n    return memo(instanceId, (address) => {\n        const decoded = isU8a(address)\n            ? address\n            : decodeAddress((address || '').toString());\n        if (decoded.length > 8) {\n            return of(api.registry.createType('AccountId', decoded));\n        }\n        const accountIndex = api.registry.createType('AccountIndex', decoded);\n        return api.derive.accounts.indexToId(accountIndex.toString()).pipe(map((a) => assertReturn(a, 'Unable to retrieve accountId')));\n    });\n}\n","import { map, of } from 'rxjs';\nimport { isFunction } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nfunction parseFlags(address, [electionsMembers, councilMembers, technicalCommitteeMembers, societyMembers, sudoKey]) {\n    const addrStr = address?.toString();\n    const isIncluded = (id) => id.toString() === addrStr;\n    return {\n        isCouncil: (electionsMembers?.map((r) => Array.isArray(r) ? r[0] : r.who) || councilMembers || []).some(isIncluded),\n        isSociety: (societyMembers || []).some(isIncluded),\n        isSudo: sudoKey?.toString() === addrStr,\n        isTechCommittee: (technicalCommitteeMembers || []).some(isIncluded)\n    };\n}\nexport function _flags(instanceId, api) {\n    return memo(instanceId, () => {\n        const results = [undefined, [], [], [], undefined];\n        const calls = [\n            (api.query.elections || api.query['phragmenElection'] || api.query['electionsPhragmen'])?.members,\n            api.query.council?.members,\n            api.query.technicalCommittee?.members,\n            api.query.society?.members,\n            api.query.sudo?.key\n        ];\n        const filtered = calls.filter((c) => c);\n        if (!filtered.length) {\n            return of(results);\n        }\n        return api.queryMulti(filtered).pipe(map((values) => {\n            let resultIndex = -1;\n            for (let i = 0, count = calls.length; i < count; i++) {\n                if (isFunction(calls[i])) {\n                    results[i] = values[++resultIndex];\n                }\n            }\n            return results;\n        }));\n    });\n}\n/**\n * @name info\n * @description Returns account membership flags\n */\nexport function flags(instanceId, api) {\n    return memo(instanceId, (address) => api.derive.accounts._flags().pipe(map((r) => parseFlags(address, r))));\n}\n","import { map, of } from 'rxjs';\nimport { isU8a } from '@polkadot/util';\nimport { decodeAddress } from '@polkadot/util-crypto';\nimport { memo } from '../util/index.js';\n/**\n * @name idAndIndex\n * @param {(Address | AccountId | AccountIndex | Uint8Array | string | null)} address - An accounts address in various formats.\n * @description  An array containing the [[AccountId]] and [[AccountIndex]] as optional values.\n * @example\n * <BR>\n *\n * ```javascript\n * api.derive.accounts.idAndIndex('F7Hs', ([id, ix]) => {\n *   console.log(`AccountId #${id} with corresponding AccountIndex ${ix}`);\n * });\n * ```\n */\nexport function idAndIndex(instanceId, api) {\n    return memo(instanceId, (address) => {\n        try {\n            // yes, this can fail, don't care too much, catch will catch it\n            const decoded = isU8a(address)\n                ? address\n                : decodeAddress((address || '').toString());\n            if (decoded.length > 8) {\n                const accountId = api.registry.createType('AccountId', decoded);\n                return api.derive.accounts.idToIndex(accountId).pipe(map((accountIndex) => [accountId, accountIndex]));\n            }\n            const accountIndex = api.registry.createType('AccountIndex', decoded);\n            return api.derive.accounts.indexToId(accountIndex.toString()).pipe(map((accountId) => [accountId, accountIndex]));\n        }\n        catch {\n            return of([undefined, undefined]);\n        }\n    });\n}\n","import { map } from 'rxjs';\nimport { memo } from '@polkadot/rpc-core';\nexport function firstObservable(obs) {\n    return obs.pipe(map(([a]) => a));\n}\nexport function firstMemo(fn) {\n    return (instanceId, api) => memo(instanceId, (...args) => firstObservable(fn(api, ...args)));\n}\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { isHex, u8aToString } from '@polkadot/util';\nimport { firstMemo, memo } from '../util/index.js';\nconst UNDEF_HEX = { toHex: () => undefined };\nfunction dataAsString(data) {\n    if (!data) {\n        return data;\n    }\n    return data.isRaw\n        ? u8aToString(data.asRaw.toU8a(true))\n        : data.isNone\n            ? undefined\n            : data.toHex();\n}\nfunction extractOther(additional) {\n    return additional.reduce((other, [_key, _value]) => {\n        const key = dataAsString(_key);\n        const value = dataAsString(_value);\n        if (key && value) {\n            other[key] = value;\n        }\n        return other;\n    }, {});\n}\nfunction identityCompat(identityOfOpt) {\n    const identity = identityOfOpt.unwrap();\n    return Array.isArray(identity)\n        ? identity[0]\n        : identity;\n}\nfunction extractIdentity(identityOfOpt, superOf) {\n    if (!identityOfOpt?.isSome) {\n        return { judgements: [] };\n    }\n    const { info, judgements } = identityCompat(identityOfOpt);\n    const topDisplay = dataAsString(info.display);\n    return {\n        discord: dataAsString(info.discord),\n        display: (superOf && dataAsString(superOf[1])) || topDisplay,\n        displayParent: superOf && topDisplay,\n        email: dataAsString(info.email),\n        github: dataAsString(info.github),\n        image: dataAsString(info.image),\n        judgements,\n        legal: dataAsString(info.legal),\n        matrix: dataAsString(info.matrix),\n        other: info.additional ? extractOther(info.additional) : {},\n        parent: superOf?.[0],\n        pgp: info.pgpFingerprint.unwrapOr(UNDEF_HEX).toHex(),\n        riot: dataAsString(info.riot),\n        twitter: dataAsString(info.twitter),\n        web: dataAsString(info.web)\n    };\n}\nfunction getParent(api, identityOfOpt, superOfOpt) {\n    if (identityOfOpt?.isSome) {\n        // this identity has something set\n        return of([identityOfOpt, undefined]);\n    }\n    else if (superOfOpt?.isSome) {\n        const superOf = superOfOpt.unwrap();\n        return combineLatest([\n            api.derive.accounts._identity(superOf[0]).pipe(map(([info]) => info)),\n            of(superOf)\n        ]);\n    }\n    // nothing of value returned\n    return of([undefined, undefined]);\n}\nexport function _identity(instanceId, api) {\n    return memo(instanceId, (accountId) => accountId && api.query.identity?.identityOf\n        ? combineLatest([\n            api.query.identity.identityOf(accountId),\n            api.query.identity.superOf(accountId)\n        ])\n        : of([undefined, undefined]));\n}\n/**\n * @name identity\n * @description Returns identity info for an account\n */\nexport function identity(instanceId, api) {\n    return memo(instanceId, (accountId) => api.derive.accounts._identity(accountId).pipe(switchMap(([identityOfOpt, superOfOpt]) => getParent(api, identityOfOpt, superOfOpt)), map(([identityOfOpt, superOf]) => extractIdentity(identityOfOpt, superOf))));\n}\nexport const hasIdentity = /*#__PURE__*/ firstMemo((api, accountId) => api.derive.accounts.hasIdentityMulti([accountId]));\nexport function hasIdentityMulti(instanceId, api) {\n    return memo(instanceId, (accountIds) => api.query.identity?.identityOf\n        ? combineLatest([\n            api.query.identity.identityOf.multi(accountIds),\n            api.query.identity.superOf.multi(accountIds)\n        ]).pipe(map(([identities, supers]) => identities.map((identityOfOpt, index) => {\n            const superOfOpt = supers[index];\n            const parentId = superOfOpt && superOfOpt.isSome\n                ? superOfOpt.unwrap()[0].toString()\n                : undefined;\n            let display;\n            if (identityOfOpt && identityOfOpt.isSome) {\n                const value = dataAsString(identityCompat(identityOfOpt).info.display);\n                if (value && !isHex(value)) {\n                    display = value;\n                }\n            }\n            return { display, hasIdentity: !!(display || parentId), parentId };\n        })))\n        : of(accountIds.map(() => ({ hasIdentity: false }))));\n}\n","import { map } from 'rxjs';\nimport { memo } from '../util/index.js';\n/**\n * @name idToIndex\n * @param {( AccountId | string )} accountId - An accounts Id in different formats.\n * @returns Returns the corresponding AccountIndex.\n * @example\n * <BR>\n *\n * ```javascript\n * const ALICE = '5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY';\n * api.derive.accounts.idToIndex(ALICE, (accountIndex) => {\n *   console.log(`The AccountIndex of ${ALICE} is ${accountIndex}`);\n * });\n * ```\n */\nexport function idToIndex(instanceId, api) {\n    return memo(instanceId, (accountId) => api.derive.accounts.indexes().pipe(map((indexes) => indexes[accountId.toString()])));\n}\n","import { map } from './map';\nimport { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { mergeInternals } from './mergeInternals';\nimport { isFunction } from '../util/isFunction';\nexport function mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) { concurrent = Infinity; }\n    if (isFunction(resultSelector)) {\n        return mergeMap(function (a, i) { return map(function (b, ii) { return resultSelector(a, b, i, ii); })(innerFrom(project(a, i))); }, concurrent);\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return operate(function (source, subscriber) { return mergeInternals(source, subscriber, project, concurrent); });\n}\n//# sourceMappingURL=mergeMap.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { executeSchedule } from '../util/executeSchedule';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function mergeInternals(source, subscriber, project, concurrent, onBeforeNext, expand, innerSubScheduler, additionalFinalizer) {\n    var buffer = [];\n    var active = 0;\n    var index = 0;\n    var isComplete = false;\n    var checkComplete = function () {\n        if (isComplete && !buffer.length && !active) {\n            subscriber.complete();\n        }\n    };\n    var outerNext = function (value) { return (active < concurrent ? doInnerSub(value) : buffer.push(value)); };\n    var doInnerSub = function (value) {\n        expand && subscriber.next(value);\n        active++;\n        var innerComplete = false;\n        innerFrom(project(value, index++)).subscribe(createOperatorSubscriber(subscriber, function (innerValue) {\n            onBeforeNext === null || onBeforeNext === void 0 ? void 0 : onBeforeNext(innerValue);\n            if (expand) {\n                outerNext(innerValue);\n            }\n            else {\n                subscriber.next(innerValue);\n            }\n        }, function () {\n            innerComplete = true;\n        }, undefined, function () {\n            if (innerComplete) {\n                try {\n                    active--;\n                    var _loop_1 = function () {\n                        var bufferedValue = buffer.shift();\n                        if (innerSubScheduler) {\n                            executeSchedule(subscriber, innerSubScheduler, function () { return doInnerSub(bufferedValue); });\n                        }\n                        else {\n                            doInnerSub(bufferedValue);\n                        }\n                    };\n                    while (buffer.length && active < concurrent) {\n                        _loop_1();\n                    }\n                    checkComplete();\n                }\n                catch (err) {\n                    subscriber.error(err);\n                }\n            }\n        }));\n    };\n    source.subscribe(createOperatorSubscriber(subscriber, outerNext, function () {\n        isComplete = true;\n        checkComplete();\n    }));\n    return function () {\n        additionalFinalizer === null || additionalFinalizer === void 0 ? void 0 : additionalFinalizer();\n    };\n}\n//# sourceMappingURL=mergeInternals.js.map","import { mergeAll } from './mergeAll';\nexport function concatAll() {\n    return mergeAll(1);\n}\n//# sourceMappingURL=concatAll.js.map","import { mergeMap } from './mergeMap';\nimport { identity } from '../util/identity';\nexport function mergeAll(concurrent) {\n    if (concurrent === void 0) { concurrent = Infinity; }\n    return mergeMap(identity, concurrent);\n}\n//# sourceMappingURL=mergeAll.js.map","import { concatAll } from '../operators/concatAll';\nimport { popScheduler } from '../util/args';\nimport { from } from './from';\nexport function concat() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    return concatAll()(from(args, popScheduler(args)));\n}\n//# sourceMappingURL=concat.js.map","import { concat } from '../observable/concat';\nimport { popScheduler } from '../util/args';\nimport { operate } from '../util/lift';\nexport function startWith() {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    var scheduler = popScheduler(values);\n    return operate(function (source, subscriber) {\n        (scheduler ? concat(values, source, scheduler) : concat(values, source)).subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=startWith.js.map","import { map, of, startWith } from 'rxjs';\nimport { memo } from '../util/index.js';\nlet indicesCache = null;\nfunction queryAccounts(api) {\n    return api.query.indices.accounts.entries().pipe(map((entries) => entries.reduce((indexes, [key, idOpt]) => {\n        if (idOpt.isSome) {\n            indexes[idOpt.unwrap()[0].toString()] = api.registry.createType('AccountIndex', key.args[0]);\n        }\n        return indexes;\n    }, {})));\n}\n/**\n * @name indexes\n * @returns Returns all the indexes on the system.\n * @description This is an unwieldly query since it loops through\n * all of the enumsets and returns all of the values found. This could be up to 32k depending\n * on the number of active accounts in the system\n * @example\n * <BR>\n *\n * ```javascript\n * api.derive.accounts.indexes((indexes) => {\n *   console.log('All existing AccountIndexes', indexes);\n * });\n * ```\n */\nexport function indexes(instanceId, api) {\n    return memo(instanceId, () => indicesCache\n        ? of(indicesCache)\n        : (api.query.indices\n            ? queryAccounts(api).pipe(startWith({}))\n            : of({})).pipe(map((indices) => {\n            indicesCache = indices;\n            return indices;\n        })));\n}\n","import { map, of } from 'rxjs';\nimport { memo } from '../util/index.js';\n/**\n * @name indexToId\n * @param {( AccountIndex | string )} accountIndex - An accounts index in different formats.\n * @returns Returns the corresponding AccountId.\n * @example\n * <BR>\n *\n * ```javascript\n * api.derive.accounts.indexToId('F7Hs', (accountId) => {\n *   console.log(`The AccountId of F7Hs is ${accountId}`);\n * });\n * ```\n */\nexport function indexToId(instanceId, api) {\n    return memo(instanceId, (accountIndex) => api.query.indices\n        ? api.query.indices.accounts(accountIndex).pipe(map((optResult) => optResult.unwrapOr([])[0]))\n        : of(undefined));\n}\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { u8aToString } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nfunction retrieveNick(api, accountId) {\n    return (accountId && api.query['nicks']?.['nameOf']\n        ? api.query['nicks']['nameOf'](accountId)\n        : of(undefined)).pipe(map((nameOf) => nameOf?.isSome\n        ? u8aToString(nameOf.unwrap()[0]).substring(0, api.consts['nicks']['maxLength'].toNumber())\n        : undefined));\n}\n/**\n * @name info\n * @description Returns aux. info with regards to an account, current that includes the accountId, accountIndex and nickname\n */\nexport function info(instanceId, api) {\n    return memo(instanceId, (address) => api.derive.accounts.idAndIndex(address).pipe(switchMap(([accountId, accountIndex]) => combineLatest([\n        of({ accountId, accountIndex }),\n        api.derive.accounts.identity(accountId),\n        retrieveNick(api, accountId)\n    ])), map(([{ accountId, accountIndex }, identity, nickname]) => ({\n        accountId, accountIndex, identity, nickname\n    }))));\n}\n","import { of } from 'rxjs';\nimport { isFunction } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nexport function getInstance(api, section) {\n    const instances = api.registry.getModuleInstances(api.runtimeVersion.specName, section);\n    const name = instances?.length\n        ? instances[0]\n        : section;\n    return api.query[name];\n}\nexport function withSection(section, fn) {\n    return (instanceId, api) => memo(instanceId, fn(getInstance(api, section), api, instanceId));\n}\nexport function callMethod(method, empty) {\n    return (section) => withSection(section, (query) => () => isFunction(query?.[method])\n        ? query[method]()\n        : of(empty));\n}\n","import { callMethod } from './helpers.js';\nexport const members = /*#__PURE__*/ callMethod('members', []);\n","import { catchError, combineLatest, map, of, switchMap } from 'rxjs';\nimport { isFunction } from '@polkadot/util';\nimport { firstObservable } from '../util/index.js';\nimport { callMethod, withSection } from './helpers.js';\nfunction parse(api, [hashes, proposals, votes]) {\n    return proposals.map((o, index) => ({\n        hash: api.registry.createType('Hash', hashes[index]),\n        proposal: o && o.isSome\n            ? o.unwrap()\n            : null,\n        votes: votes[index].unwrapOr(null)\n    }));\n}\nfunction _proposalsFrom(api, query, hashes) {\n    return (isFunction(query?.proposals) && hashes.length\n        ? combineLatest([\n            of(hashes),\n            // this should simply be api.query[section].proposalOf.multi<Option<Proposal>>(hashes),\n            // however we have had cases on Edgeware where the indices have moved around after an\n            // upgrade, which results in invalid on-chain data\n            query.proposalOf.multi(hashes).pipe(catchError(() => of(hashes.map(() => null)))),\n            query.voting.multi(hashes)\n        ])\n        : of([[], [], []])).pipe(map((r) => parse(api, r)));\n}\nexport function hasProposals(section) {\n    return withSection(section, (query) => () => of(isFunction(query?.proposals)));\n}\nexport function proposals(section) {\n    return withSection(section, (query, api) => () => api.derive[section].proposalHashes().pipe(switchMap((all) => _proposalsFrom(api, query, all))));\n}\nexport function proposal(section) {\n    return withSection(section, (query, api) => (hash) => isFunction(query?.proposals)\n        ? firstObservable(_proposalsFrom(api, query, [hash]))\n        : of(null));\n}\nexport const proposalCount = /*#__PURE__*/ callMethod('proposalCount', null);\nexport const proposalHashes = /*#__PURE__*/ callMethod('proposals', []);\n","import { map, of } from 'rxjs';\nimport { isFunction } from '@polkadot/util';\nimport { withSection } from './helpers.js';\nexport function prime(section) {\n    return withSection(section, (query) => () => isFunction(query?.prime)\n        ? query.prime().pipe(map((o) => o.unwrapOr(null)))\n        : of(null));\n}\n","import { hasProposals as collectiveHasProposals, members as collectiveMembers, prime as collectivePrime, proposal as collectiveProposal, proposalCount as collectiveProposalCount, proposalHashes as collectiveProposalHashes, proposals as collectiveProposals } from '../collective/index.js';\nexport const members = /*#__PURE__*/ collectiveMembers('allianceMotion');\nexport const hasProposals = /*#__PURE__*/ collectiveHasProposals('allianceMotion');\nexport const proposal = /*#__PURE__*/ collectiveProposal('allianceMotion');\nexport const proposalCount = /*#__PURE__*/ collectiveProposalCount('allianceMotion');\nexport const proposalHashes = /*#__PURE__*/ collectiveProposalHashes('allianceMotion');\nexport const proposals = /*#__PURE__*/ collectiveProposals('allianceMotion');\nexport const prime = /*#__PURE__*/ collectivePrime('allianceMotion');\n","export function getQueryInterface(api) {\n    return (\n    // latest substrate & polkadot\n    api.query.voterList ||\n        // previous substrate\n        api.query['voterBagsList'] ||\n        api.query['bagsList']);\n}\n","import { map, of, switchMap } from 'rxjs';\nimport { BN_ZERO, bnToBn, objectSpread } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nimport { getQueryInterface } from './util.js';\nfunction orderBags(ids, bags) {\n    const sorted = ids\n        .map((id, index) => ({\n        bag: bags[index].unwrapOr(null),\n        id,\n        key: id.toString()\n    }))\n        .sort((a, b) => b.id.cmp(a.id));\n    const max = sorted.length - 1;\n    return sorted.map((entry, index) => objectSpread(entry, {\n        bagLower: index === max\n            ? BN_ZERO\n            : sorted[index + 1].id,\n        bagUpper: entry.id,\n        index\n    }));\n}\nexport function _getIds(instanceId, api) {\n    const query = getQueryInterface(api);\n    return memo(instanceId, (_ids) => {\n        const ids = _ids.map((id) => bnToBn(id));\n        return ids.length\n            ? query.listBags.multi(ids).pipe(map((bags) => orderBags(ids, bags)))\n            : of([]);\n    });\n}\nexport function all(instanceId, api) {\n    const query = getQueryInterface(api);\n    return memo(instanceId, () => query.listBags.keys().pipe(switchMap((keys) => api.derive.bagsList._getIds(keys.map(({ args: [id] }) => id))), map((list) => list.filter(({ bag }) => bag))));\n}\nexport function get(instanceId, api) {\n    return memo(instanceId, (id) => api.derive.bagsList._getIds([bnToBn(id)]).pipe(map((bags) => bags[0])));\n}\n","import { map, switchMap } from 'rxjs';\nimport { objectSpread } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nexport function expand(instanceId, api) {\n    return memo(instanceId, (bag) => api.derive.bagsList.listNodes(bag.bag).pipe(map((nodes) => objectSpread({ nodes }, bag))));\n}\nexport function getExpanded(instanceId, api) {\n    return memo(instanceId, (id) => api.derive.bagsList.get(id).pipe(switchMap((bag) => api.derive.bagsList.expand(bag))));\n}\n","import { BehaviorSubject, map, of, switchMap, tap, toArray } from 'rxjs';\nimport { nextTick } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nimport { getQueryInterface } from './util.js';\nfunction traverseLinks(api, head) {\n    const subject = new BehaviorSubject(head);\n    const query = getQueryInterface(api);\n    return subject.pipe(switchMap((account) => query.listNodes(account)), tap((node) => {\n        nextTick(() => {\n            node.isSome && node.value.next.isSome\n                ? subject.next(node.unwrap().next.unwrap())\n                : subject.complete();\n        });\n    }), toArray(), // toArray since we want to startSubject to be completed\n    map((all) => all.map((o) => o.unwrap())));\n}\nexport function listNodes(instanceId, api) {\n    return memo(instanceId, (bag) => bag && bag.head.isSome\n        ? traverseLinks(api, bag.head.unwrap())\n        : of([]));\n}\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { BN, BN_ZERO, bnMax, bnMin, isFunction, objectSpread } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nconst VESTING_ID = '0x76657374696e6720';\nfunction calcLocked(api, bestNumber, locks) {\n    let lockedBalance = api.registry.createType('Balance');\n    let lockedBreakdown = [];\n    let vestingLocked = api.registry.createType('Balance');\n    let allLocked = false;\n    if (Array.isArray(locks)) {\n        // only get the locks that are valid until passed the current block\n        lockedBreakdown = locks.filter(({ until }) => !until || (bestNumber && until.gt(bestNumber)));\n        allLocked = lockedBreakdown.some(({ amount }) => amount && amount.isMax());\n        vestingLocked = api.registry.createType('Balance', lockedBreakdown.filter(({ id }) => id.eq(VESTING_ID)).reduce((result, { amount }) => result.iadd(amount), new BN(0)));\n        // get the maximum of the locks according to https://github.com/paritytech/substrate/blob/master/srml/balances/src/lib.rs#L699\n        const notAll = lockedBreakdown.filter(({ amount }) => amount && !amount.isMax());\n        if (notAll.length) {\n            lockedBalance = api.registry.createType('Balance', bnMax(...notAll.map(({ amount }) => amount)));\n        }\n    }\n    return { allLocked, lockedBalance, lockedBreakdown, vestingLocked };\n}\nfunction calcShared(api, bestNumber, data, locks) {\n    const { allLocked, lockedBalance, lockedBreakdown, vestingLocked } = calcLocked(api, bestNumber, locks);\n    return objectSpread({}, data, {\n        availableBalance: api.registry.createType('Balance', allLocked ? 0 : bnMax(new BN(0), data?.freeBalance ? data.freeBalance.sub(lockedBalance) : new BN(0))),\n        lockedBalance,\n        lockedBreakdown,\n        vestingLocked\n    });\n}\nfunction calcVesting(bestNumber, shared, _vesting) {\n    // Calculate the vesting balances,\n    //  - offset = balance locked at startingBlock\n    //  - perBlock is the unlock amount\n    const vesting = _vesting || [];\n    const isVesting = !shared.vestingLocked.isZero();\n    const vestedBalances = vesting.map(({ locked, perBlock, startingBlock }) => bestNumber.gt(startingBlock)\n        ? bnMin(locked, perBlock.mul(bestNumber.sub(startingBlock)))\n        : BN_ZERO);\n    const vestedBalance = vestedBalances.reduce((all, value) => all.iadd(value), new BN(0));\n    const vestingTotal = vesting.reduce((all, { locked }) => all.iadd(locked), new BN(0));\n    return {\n        isVesting,\n        vestedBalance,\n        vestedClaimable: isVesting\n            ? shared.vestingLocked.sub(vestingTotal.sub(vestedBalance))\n            : BN_ZERO,\n        vesting: vesting\n            .map(({ locked, perBlock, startingBlock }, index) => ({\n            endBlock: locked.div(perBlock).iadd(startingBlock),\n            locked,\n            perBlock,\n            startingBlock,\n            vested: vestedBalances[index]\n        }))\n            .filter(({ locked }) => !locked.isZero()),\n        vestingTotal\n    };\n}\nfunction calcBalances(api, result) {\n    const [data, [vesting, allLocks, namedReserves], bestNumber] = result;\n    const shared = calcShared(api, bestNumber, data, allLocks[0]);\n    return objectSpread(shared, calcVesting(bestNumber, shared, vesting), {\n        accountId: data.accountId,\n        accountNonce: data.accountNonce,\n        additional: allLocks\n            .slice(1)\n            .map((l, index) => calcShared(api, bestNumber, data.additional[index], l)),\n        namedReserves\n    });\n}\nfunction queryOld(api, accountId) {\n    return combineLatest([\n        api.query.balances.locks(accountId),\n        api.query.balances['vesting'](accountId)\n    ]).pipe(map(([locks, optVesting]) => {\n        let vestingNew = null;\n        if (optVesting.isSome) {\n            const { offset: locked, perBlock, startingBlock } = optVesting.unwrap();\n            vestingNew = api.registry.createType('VestingInfo', { locked, perBlock, startingBlock });\n        }\n        return [\n            vestingNew\n                ? [vestingNew]\n                : null,\n            [locks],\n            []\n        ];\n    }));\n}\nconst isNonNullable = (nullable) => !!nullable;\nfunction createCalls(calls) {\n    return [\n        calls.map((c) => !c),\n        calls.filter(isNonNullable)\n    ];\n}\nfunction queryCurrent(api, accountId, balanceInstances = ['balances']) {\n    const [lockEmpty, lockQueries] = createCalls(balanceInstances.map((m) => api.derive[m]?.customLocks || api.query[m]?.locks));\n    const [reserveEmpty, reserveQueries] = createCalls(balanceInstances.map((m) => api.query[m]?.reserves));\n    return combineLatest([\n        api.query.vesting?.vesting\n            ? api.query.vesting.vesting(accountId)\n            : of(api.registry.createType('Option<VestingInfo>')),\n        lockQueries.length\n            ? combineLatest(lockQueries.map((c) => c(accountId)))\n            : of([]),\n        reserveQueries.length\n            ? combineLatest(reserveQueries.map((c) => c(accountId)))\n            : of([])\n    ]).pipe(map(([opt, locks, reserves]) => {\n        let offsetLock = -1;\n        let offsetReserve = -1;\n        const vesting = opt.unwrapOr(null);\n        return [\n            vesting\n                ? Array.isArray(vesting)\n                    ? vesting\n                    : [vesting]\n                : null,\n            lockEmpty.map((e) => e ? api.registry.createType('Vec<BalanceLock>') : locks[++offsetLock]),\n            reserveEmpty.map((e) => e ? api.registry.createType('Vec<PalletBalancesReserveData>') : reserves[++offsetReserve])\n        ];\n    }));\n}\n/**\n * @name all\n * @param {( AccountIndex | AccountId | Address | string )} address - An accounts Id in different formats.\n * @returns An object containing the results of various balance queries\n * @example\n * <BR>\n *\n * ```javascript\n * const ALICE = 'F7Hs';\n *\n * api.derive.balances.all(ALICE, ({ accountId, lockedBalance }) => {\n *   console.log(`The account ${accountId} has a locked balance ${lockedBalance} units.`);\n * });\n * ```\n */\nexport function all(instanceId, api) {\n    const balanceInstances = api.registry.getModuleInstances(api.runtimeVersion.specName, 'balances');\n    return memo(instanceId, (address) => combineLatest([\n        api.derive.balances.account(address),\n        isFunction(api.query.system?.account) || isFunction(api.query.balances?.account)\n            ? queryCurrent(api, address, balanceInstances)\n            : queryOld(api, address)\n    ]).pipe(switchMap(([account, locks]) => combineLatest([\n        of(account),\n        of(locks),\n        api.derive.chain.bestNumber()\n    ])), map((result) => calcBalances(api, result))));\n}\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { isFunction, objectSpread } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nfunction zeroBalance(api) {\n    return api.registry.createType('Balance');\n}\nfunction getBalance(api, [freeBalance, reservedBalance, frozenFee, frozenMisc]) {\n    const votingBalance = api.registry.createType('Balance', freeBalance.toBn());\n    return {\n        freeBalance,\n        frozenFee,\n        frozenMisc,\n        reservedBalance,\n        votingBalance\n    };\n}\nfunction calcBalances(api, [accountId, [accountNonce, [primary, ...additional]]]) {\n    return objectSpread({\n        accountId,\n        accountNonce,\n        additional: additional.map((b) => getBalance(api, b))\n    }, getBalance(api, primary));\n}\nfunction queryBalancesFree(api, accountId) {\n    return combineLatest([\n        api.query.balances['freeBalance'](accountId),\n        api.query.balances['reservedBalance'](accountId),\n        api.query.system['accountNonce'](accountId)\n    ]).pipe(map(([freeBalance, reservedBalance, accountNonce]) => [\n        accountNonce,\n        [[freeBalance, reservedBalance, zeroBalance(api), zeroBalance(api)]]\n    ]));\n}\nfunction queryNonceOnly(api, accountId) {\n    const fill = (nonce) => [\n        nonce,\n        [[zeroBalance(api), zeroBalance(api), zeroBalance(api), zeroBalance(api)]]\n    ];\n    return isFunction(api.query.system.account)\n        ? api.query.system.account(accountId).pipe(map(({ nonce }) => fill(nonce)))\n        : isFunction(api.query.system['accountNonce'])\n            ? api.query.system['accountNonce'](accountId).pipe(map((nonce) => fill(nonce)))\n            : of(fill(api.registry.createType('Index')));\n}\nfunction queryBalancesAccount(api, accountId, modules = ['balances']) {\n    const balances = modules\n        .map((m) => api.derive[m]?.customAccount || api.query[m]?.account)\n        .filter((q) => isFunction(q));\n    const extract = (nonce, data) => [\n        nonce,\n        data.map(({ feeFrozen, free, miscFrozen, reserved }) => [free, reserved, feeFrozen, miscFrozen])\n    ];\n    // NOTE this is for the first case where we do have instances specified\n    return balances.length\n        ? isFunction(api.query.system.account)\n            ? combineLatest([\n                api.query.system.account(accountId),\n                ...balances.map((c) => c(accountId))\n            ]).pipe(map(([{ nonce }, ...balances]) => extract(nonce, balances)))\n            : combineLatest([\n                api.query.system['accountNonce'](accountId),\n                ...balances.map((c) => c(accountId))\n            ]).pipe(map(([nonce, ...balances]) => extract(nonce, balances)))\n        : queryNonceOnly(api, accountId);\n}\nfunction querySystemAccount(api, accountId) {\n    // AccountInfo is current, support old, eg. Edgeware\n    return api.query.system.account(accountId).pipe(map((infoOrTuple) => {\n        const data = infoOrTuple.nonce\n            ? infoOrTuple.data\n            : infoOrTuple[1];\n        const nonce = infoOrTuple.nonce || infoOrTuple[0];\n        if (!data || data.isEmpty) {\n            return [\n                nonce,\n                [[zeroBalance(api), zeroBalance(api), zeroBalance(api), zeroBalance(api)]]\n            ];\n        }\n        const { feeFrozen, free, miscFrozen, reserved } = data;\n        return [\n            nonce,\n            [[free, reserved, feeFrozen, miscFrozen]]\n        ];\n    }));\n}\n/**\n * @name account\n * @param {( AccountIndex | AccountId | Address | string )} address - An accounts Id in different formats.\n * @returns An object containing the results of various balance queries\n * @example\n * <BR>\n *\n * ```javascript\n * const ALICE = 'F7Hs';\n *\n * api.derive.balances.all(ALICE, ({ accountId, lockedBalance }) => {\n *   console.log(`The account ${accountId} has a locked balance ${lockedBalance} units.`);\n * });\n * ```\n */\nexport function account(instanceId, api) {\n    const balanceInstances = api.registry.getModuleInstances(api.runtimeVersion.specName, 'balances');\n    const nonDefaultBalances = balanceInstances && balanceInstances[0] !== 'balances';\n    return memo(instanceId, (address) => api.derive.accounts.accountId(address).pipe(switchMap((accountId) => (accountId\n        ? combineLatest([\n            of(accountId),\n            nonDefaultBalances\n                ? queryBalancesAccount(api, accountId, balanceInstances)\n                : isFunction(api.query.system?.account)\n                    ? querySystemAccount(api, accountId)\n                    : isFunction(api.query.balances?.account)\n                        ? queryBalancesAccount(api, accountId)\n                        : isFunction(api.query.balances?.['freeBalance'])\n                            ? queryBalancesFree(api, accountId)\n                            : queryNonceOnly(api, accountId)\n        ])\n        : of([api.registry.createType('AccountId'), [\n                api.registry.createType('Index'),\n                [[zeroBalance(api), zeroBalance(api), zeroBalance(api), zeroBalance(api)]]\n            ]]))), map((result) => calcBalances(api, result))));\n}\n","import { combineLatest, of } from 'rxjs';\nimport { memo } from '../util/index.js';\nexport function votingBalances(instanceId, api) {\n    return memo(instanceId, (addresses) => !addresses?.length\n        ? of([])\n        : combineLatest(addresses.map((accountId) => api.derive.balances.account(accountId))));\n}\n","import { all } from './all.js';\nexport * from './account.js';\nexport * from './votingBalances.js';\nconst votingBalance = all;\nexport { all, votingBalance };\n","export function filterBountiesProposals(api, allProposals) {\n    const bountyTxBase = api.tx.bounties ? api.tx.bounties : api.tx.treasury;\n    const bountyProposalCalls = [bountyTxBase.approveBounty, bountyTxBase.closeBounty, bountyTxBase.proposeCurator, bountyTxBase.unassignCurator];\n    return allProposals.filter((proposal) => bountyProposalCalls.find((bountyCall) => proposal.proposal && bountyCall.is(proposal.proposal)));\n}\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\nimport { filterBountiesProposals } from './helpers/filterBountyProposals.js';\nfunction parseResult([maybeBounties, maybeDescriptions, ids, bountyProposals]) {\n    const bounties = [];\n    maybeBounties.forEach((bounty, index) => {\n        if (bounty.isSome) {\n            bounties.push({\n                bounty: bounty.unwrap(),\n                description: maybeDescriptions[index].unwrapOrDefault().toUtf8(),\n                index: ids[index],\n                proposals: bountyProposals.filter((bountyProposal) => bountyProposal.proposal && ids[index].eq(bountyProposal.proposal.args[0]))\n            });\n        }\n    });\n    return bounties;\n}\nexport function bounties(instanceId, api) {\n    const bountyBase = api.query.bounties || api.query.treasury;\n    return memo(instanceId, () => bountyBase.bounties\n        ? combineLatest([\n            bountyBase.bountyCount(),\n            api.query.council\n                ? api.query.council.proposalCount()\n                : of(0)\n        ]).pipe(switchMap(() => combineLatest([\n            bountyBase.bounties.keys(),\n            api.derive.council\n                ? api.derive.council.proposals()\n                : of([])\n        ])), switchMap(([keys, proposals]) => {\n            const ids = keys.map(({ args: [id] }) => id);\n            return combineLatest([\n                bountyBase.bounties.multi(ids),\n                bountyBase.bountyDescriptions.multi(ids),\n                of(ids),\n                of(filterBountiesProposals(api, proposals))\n            ]);\n        }), map(parseResult))\n        : of(parseResult([[], [], [], []])));\n}\n","import { isCompact } from '@polkadot/util';\nexport function unwrapBlockNumber(hdr) {\n    return isCompact(hdr.number)\n        ? hdr.number.unwrap()\n        : hdr.number;\n}\n","import { combineLatest, map, mergeMap, of, switchMap } from 'rxjs';\nimport { memo, unwrapBlockNumber } from '../util/index.js';\nexport function createBlockNumberDerive(fn) {\n    return (instanceId, api) => memo(instanceId, () => fn(api).pipe(map(unwrapBlockNumber)));\n}\n/** @internal */\nfunction getAuthorDetailsWithAt(header, queryAt) {\n    const validators = queryAt.session?.validators\n        ? queryAt.session.validators()\n        : of(null);\n    // nimbus consensus stores the session key of the block author in header logs\n    const { logs: [log] } = header.digest;\n    const loggedAuthor = (log && ((log.isConsensus && log.asConsensus[0].isNimbus && log.asConsensus[1]) ||\n        (log.isPreRuntime && log.asPreRuntime[0].isNimbus && log.asPreRuntime[1])));\n    if (loggedAuthor) {\n        // use the author mapping pallet, if available (ie: moonbeam, moonriver), to map session (nimbus) key to author (collator/validator) key\n        if (queryAt['authorMapping']?.['mappingWithDeposit']) {\n            return combineLatest([\n                of(header),\n                validators,\n                queryAt['authorMapping']['mappingWithDeposit'](loggedAuthor).pipe(map((o) => o.unwrapOr({ account: null }).account))\n            ]);\n        }\n        // fall back to session and parachain staking pallets, if available (ie: manta, calamari), to map session (nimbus) key to author (collator) key\n        if (queryAt['parachainStaking']?.['selectedCandidates'] && queryAt.session?.nextKeys) {\n            const loggedHex = loggedAuthor.toHex();\n            return combineLatest([\n                of(header),\n                validators,\n                queryAt['parachainStaking']['selectedCandidates']().pipe(mergeMap((selectedCandidates) => combineLatest([\n                    of(selectedCandidates),\n                    queryAt.session.nextKeys.multi(selectedCandidates).pipe(map((nextKeys) => nextKeys.findIndex((o) => o.unwrapOrDefault().nimbus.toHex() === loggedHex)))\n                ])), map(([selectedCandidates, index]) => index === -1\n                    ? null\n                    : selectedCandidates[index]))\n            ]);\n        }\n    }\n    // normal operation, non-mapping\n    return combineLatest([\n        of(header),\n        validators,\n        of(null)\n    ]);\n}\nexport function getAuthorDetails(api, header, blockHash) {\n    // For on-chain state, we need to retrieve it as per the start\n    // of the block being constructed, i.e. session validators would\n    // be at the point of the block construction, not when all operations\n    // has been supplied.\n    //\n    // However for the first block (no parentHash available), we would\n    // just use the as-is\n    return api.queryAt(header.parentHash.isEmpty\n        ? blockHash || header.hash\n        : header.parentHash).pipe(switchMap((queryAt) => getAuthorDetailsWithAt(header, queryAt)));\n}\n","import { createBlockNumberDerive } from './util.js';\n/**\n * @name bestNumber\n * @returns The latest block number.\n * @example\n * <BR>\n *\n * ```javascript\n * api.derive.chain.bestNumber((blockNumber) => {\n *   console.log(`the current best block is #${blockNumber}`);\n * });\n * ```\n */\nexport const bestNumber = /*#__PURE__*/ createBlockNumberDerive((api) => api.rpc.chain.subscribeNewHeads());\n","import { createBlockNumberDerive } from './util.js';\n/**\n * @name bestNumberFinalized\n * @returns A BlockNumber\n * @description Get the latest finalized block number.\n * @example\n * <BR>\n *\n * ```javascript\n * api.derive.chain.bestNumberFinalized((blockNumber) => {\n *   console.log(`the current finalized block is #${blockNumber}`);\n * });\n * ```\n */\nexport const bestNumberFinalized = /*#__PURE__*/ createBlockNumberDerive((api) => api.rpc.chain.subscribeFinalizedHeads());\n","import { combineLatest, map } from 'rxjs';\nimport { memo } from '../util/index.js';\n/**\n * @name bestNumberLag\n * @returns A number of blocks\n * @description Calculates the lag between finalized head and best head\n * @example\n * <BR>\n *\n * ```javascript\n * api.derive.chain.bestNumberLag((lag) => {\n *   console.log(`finalized is ${lag} blocks behind head`);\n * });\n * ```\n */\nexport function bestNumberLag(instanceId, api) {\n    return memo(instanceId, () => combineLatest([\n        api.derive.chain.bestNumber(),\n        api.derive.chain.bestNumberFinalized()\n    ]).pipe(map(([bestNumber, bestNumberFinalized]) => api.registry.createType('BlockNumber', bestNumber.sub(bestNumberFinalized)))));\n}\n","export function extractAuthor(digest, sessionValidators) {\n    const [citem] = digest.logs.filter((e) => e.isConsensus);\n    const [pitem] = digest.logs.filter((e) => e.isPreRuntime);\n    const [sitem] = digest.logs.filter((e) => e.isSeal);\n    let accountId;\n    try {\n        // This is critical to be first for BABE (before Consensus)\n        // If not first, we end up dropping the author at session-end\n        if (pitem) {\n            const [engine, data] = pitem.asPreRuntime;\n            accountId = engine.extractAuthor(data, sessionValidators);\n        }\n        if (!accountId && citem) {\n            const [engine, data] = citem.asConsensus;\n            accountId = engine.extractAuthor(data, sessionValidators);\n        }\n        // SEAL, still used in e.g. Kulupu for pow\n        if (!accountId && sitem) {\n            const [engine, data] = sitem.asSeal;\n            accountId = engine.extractAuthor(data, sessionValidators);\n        }\n    }\n    catch {\n        // ignore\n    }\n    return accountId;\n}\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { createSignedBlockExtended } from '../type/index.js';\nimport { memo } from '../util/index.js';\nimport { getAuthorDetails } from './util.js';\n/**\n * @name getBlock\n * @param {( Uint8Array | string )} hash - A block hash as U8 array or string.\n * @description Get a specific block (e.g. rpc.chain.getBlock) and extend it with the author\n * @example\n * <BR>\n *\n * ```javascript\n * const { author, block } = await api.derive.chain.getBlock('0x123...456');\n *\n * console.log(`block #${block.header.number} was authored by ${author}`);\n * ```\n */\nexport function getBlock(instanceId, api) {\n    return memo(instanceId, (blockHash) => combineLatest([\n        api.rpc.chain.getBlock(blockHash),\n        api.queryAt(blockHash)\n    ]).pipe(switchMap(([signedBlock, queryAt]) => combineLatest([\n        of(signedBlock),\n        queryAt.system.events(),\n        getAuthorDetails(api, signedBlock.block.header, blockHash)\n    ])), map(([signedBlock, events, [, validators, author]]) => createSignedBlockExtended(events.registry, signedBlock, events, validators, author))));\n}\n","import { extractAuthor } from './util.js';\nfunction mapExtrinsics(extrinsics, records) {\n    return extrinsics.map((extrinsic, index) => {\n        let dispatchError;\n        let dispatchInfo;\n        const events = records\n            .filter(({ phase }) => phase.isApplyExtrinsic && phase.asApplyExtrinsic.eq(index))\n            .map(({ event }) => {\n            if (event.section === 'system') {\n                if (event.method === 'ExtrinsicSuccess') {\n                    dispatchInfo = event.data[0];\n                }\n                else if (event.method === 'ExtrinsicFailed') {\n                    dispatchError = event.data[0];\n                    dispatchInfo = event.data[1];\n                }\n            }\n            return event;\n        });\n        return { dispatchError, dispatchInfo, events, extrinsic };\n    });\n}\nexport function createSignedBlockExtended(registry, block, events, validators, author) {\n    // an instance of the base extrinsic for us to extend\n    const SignedBlockBase = registry.createClass('SignedBlock');\n    class Implementation extends SignedBlockBase {\n        __internal__author;\n        __internal__events;\n        __internal__extrinsics;\n        constructor(registry, block, events, validators, author) {\n            super(registry, block);\n            this.__internal__author = author || extractAuthor(this.block.header.digest, validators || []);\n            this.__internal__events = events || [];\n            this.__internal__extrinsics = mapExtrinsics(this.block.extrinsics, this.__internal__events);\n            this.createdAtHash = block?.createdAtHash;\n        }\n        /**\n         * @description Convenience method, returns the author for the block\n         */\n        get author() {\n            return this.__internal__author;\n        }\n        /**\n         * @description Convenience method, returns the events associated with the block\n         */\n        get events() {\n            return this.__internal__events;\n        }\n        /**\n         * @description Returns the extrinsics and their events, mapped\n         */\n        get extrinsics() {\n            return this.__internal__extrinsics;\n        }\n    }\n    return new Implementation(registry, block, events, validators, author);\n}\n","import { switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\nexport function getBlockByNumber(instanceId, api) {\n    return memo(instanceId, (blockNumber) => api.rpc.chain.getBlockHash(blockNumber).pipe(switchMap((h) => api.derive.chain.getBlock(h))));\n}\n","import { extractAuthor } from './util.js';\nexport function createHeaderExtended(registry, header, validators, author) {\n    // an instance of the base extrinsic for us to extend\n    const HeaderBase = registry.createClass('Header');\n    class Implementation extends HeaderBase {\n        __internal__author;\n        constructor(registry, header, validators, author) {\n            super(registry, header);\n            this.__internal__author = author || extractAuthor(this.digest, validators || []);\n            this.createdAtHash = header?.createdAtHash;\n        }\n        /**\n         * @description Convenience method, returns the author for the block\n         */\n        get author() {\n            return this.__internal__author;\n        }\n    }\n    return new Implementation(registry, header, validators, author);\n}\n","import { map, switchMap } from 'rxjs';\nimport { createHeaderExtended } from '../type/index.js';\nimport { memo } from '../util/index.js';\nimport { getAuthorDetails } from './util.js';\n/**\n * @name getHeader\n * @param {( Uint8Array | string )} hash - A block hash as U8 array or string.\n * @returns An array containing the block header and the block author\n * @description Get a specific block header and extend it with the author\n * @example\n * <BR>\n *\n * ```javascript\n * const { author, number } = await api.derive.chain.getHeader('0x123...456');\n *\n * console.log(`block #${number} was authored by ${author}`);\n * ```\n */\nexport function getHeader(instanceId, api) {\n    return memo(instanceId, (blockHash) => api.rpc.chain.getHeader(blockHash).pipe(switchMap((header) => getAuthorDetails(api, header, blockHash)), map(([header, validators, author]) => createHeaderExtended((validators || header).registry, header, validators, author))));\n}\n","import { switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\n/**\n * @name subscribeFinalizedBlocks\n * @returns The finalized block & events for that block\n */\nexport function subscribeFinalizedBlocks(instanceId, api) {\n    return memo(instanceId, () => api.derive.chain.subscribeFinalizedHeads().pipe(switchMap((header) => api.derive.chain.getBlock(header.createdAtHash || header.hash))));\n}\n","import { from, of, switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\n/**\n * Returns a header range from startHash to to (not including) endHash, i.e. lastBlock.parentHash === endHash\n */\nexport function _getHeaderRange(instanceId, api) {\n    return memo(instanceId, (startHash, endHash, prev = []) => api.rpc.chain.getHeader(startHash).pipe(switchMap((header) => header.parentHash.eq(endHash)\n        ? of([header, ...prev])\n        : api.derive.chain._getHeaderRange(header.parentHash, endHash, [header, ...prev]))));\n}\n/**\n * @name subscribeFinalizedHeads\n * @description An observable of the finalized block headers. Unlike the base\n * chain.subscribeFinalizedHeads this does not skip any headers. Since finalization\n * may skip specific blocks (finalization happens in terms of chains), this version\n * of the derive tracks missing headers (since last  retrieved) and provides them\n * to the caller\n */\nexport function subscribeFinalizedHeads(instanceId, api) {\n    return memo(instanceId, () => {\n        let prevHash = null;\n        return api.rpc.chain.subscribeFinalizedHeads().pipe(switchMap((header) => {\n            const endHash = prevHash;\n            const startHash = header.parentHash;\n            prevHash = header.createdAtHash = header.hash;\n            return endHash === null || startHash.eq(endHash)\n                ? of(header)\n                : api.derive.chain._getHeaderRange(startHash, endHash, [header]).pipe(switchMap((headers) => from(headers)));\n        }));\n    });\n}\n","import { switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\n/**\n * @name subscribeNewBlocks\n * @returns The latest block & events for that block\n */\nexport function subscribeNewBlocks(instanceId, api) {\n    return memo(instanceId, () => api.derive.chain.subscribeNewHeads().pipe(switchMap((header) => api.derive.chain.getBlock(header.createdAtHash || header.hash))));\n}\n","import { map, switchMap } from 'rxjs';\nimport { createHeaderExtended } from '../type/index.js';\nimport { memo } from '../util/index.js';\nimport { getAuthorDetails } from './util.js';\n/**\n * @name subscribeNewHeads\n * @returns A header with the current header (including extracted author)\n * @description An observable of the current block header and it's author\n * @example\n * <BR>\n *\n * ```javascript\n * api.derive.chain.subscribeNewHeads((header) => {\n *   console.log(`block #${header.number} was authored by ${header.author}`);\n * });\n * ```\n */\nexport function subscribeNewHeads(instanceId, api) {\n    return memo(instanceId, () => api.rpc.chain.subscribeNewHeads().pipe(switchMap((header) => getAuthorDetails(api, header)), map(([header, validators, author]) => {\n        header.createdAtHash = header.hash;\n        return createHeaderExtended(header.registry, header, validators, author);\n    })));\n}\n","import { map, of } from 'rxjs';\nimport { memo } from '../util/index.js';\nfunction queryConstants(api) {\n    return of([\n        // deprecated\n        api.consts.contracts['callBaseFee'] || api.registry.createType('Balance'),\n        api.consts.contracts['contractFee'] || api.registry.createType('Balance'),\n        api.consts.contracts['creationFee'] || api.registry.createType('Balance'),\n        api.consts.contracts['transactionBaseFee'] || api.registry.createType('Balance'),\n        api.consts.contracts['transactionByteFee'] || api.registry.createType('Balance'),\n        api.consts.contracts['transferFee'] || api.registry.createType('Balance'),\n        // current\n        api.consts.contracts['rentByteFee'] || api.registry.createType('Balance'),\n        api.consts.contracts['rentDepositOffset'] || api.registry.createType('Balance'),\n        api.consts.contracts['surchargeReward'] || api.registry.createType('Balance'),\n        api.consts.contracts['tombstoneDeposit'] || api.registry.createType('Balance')\n    ]);\n}\n/**\n * @name fees\n * @returns An object containing the combined results of the queries for\n * all relevant contract fees as declared in the substrate chain spec.\n * @example\n * <BR>\n *\n * ```javascript\n * api.derive.contracts.fees(([creationFee, transferFee]) => {\n *   console.log(`The fee for creating a new contract on this chain is ${creationFee} units. The fee required to call this contract is ${transferFee} units.`);\n * });\n * ```\n */\nexport function fees(instanceId, api) {\n    return memo(instanceId, () => {\n        return queryConstants(api).pipe(map(([callBaseFee, contractFee, creationFee, transactionBaseFee, transactionByteFee, transferFee, rentByteFee, rentDepositOffset, surchargeReward, tombstoneDeposit]) => ({\n            callBaseFee,\n            contractFee,\n            creationFee,\n            rentByteFee,\n            rentDepositOffset,\n            surchargeReward,\n            tombstoneDeposit,\n            transactionBaseFee,\n            transactionByteFee,\n            transferFee\n        })));\n    });\n}\n","import { combineLatest, map, of } from 'rxjs';\nimport { memo } from '../util/index.js';\nfunction isVoter(value) {\n    return !Array.isArray(value);\n}\nfunction retrieveStakeOf(elections) {\n    return elections['stakeOf'].entries().pipe(map((entries) => entries.map(([{ args: [accountId] }, stake]) => [accountId, stake])));\n}\nfunction retrieveVoteOf(elections) {\n    return elections['votesOf'].entries().pipe(map((entries) => entries.map(([{ args: [accountId] }, votes]) => [accountId, votes])));\n}\nfunction retrievePrev(api, elections) {\n    return combineLatest([\n        retrieveStakeOf(elections),\n        retrieveVoteOf(elections)\n    ]).pipe(map(([stakes, votes]) => {\n        const result = [];\n        votes.forEach(([voter, votes]) => {\n            result.push([voter, { stake: api.registry.createType('Balance'), votes }]);\n        });\n        stakes.forEach(([staker, stake]) => {\n            const entry = result.find(([voter]) => voter.eq(staker));\n            if (entry) {\n                entry[1].stake = stake;\n            }\n            else {\n                result.push([staker, { stake, votes: [] }]);\n            }\n        });\n        return result;\n    }));\n}\nfunction retrieveCurrent(elections) {\n    return elections.voting.entries().pipe(map((entries) => entries.map(([{ args: [accountId] }, value]) => [\n        accountId,\n        isVoter(value)\n            ? { stake: value.stake, votes: value.votes }\n            : { stake: value[0], votes: value[1] }\n    ])));\n}\nexport function votes(instanceId, api) {\n    const elections = api.query.elections || api.query['phragmenElection'] || api.query['electionsPhragmen'];\n    return memo(instanceId, () => elections\n        ? elections['stakeOf']\n            ? retrievePrev(api, elections)\n            : retrieveCurrent(elections)\n        : of([]));\n}\n","import { map } from 'rxjs';\nimport { memo } from '../util/index.js';\nexport function votesOf(instanceId, api) {\n    return memo(instanceId, (accountId) => api.derive.council.votes().pipe(map((votes) => (votes.find(([from]) => from.eq(accountId)) ||\n        [null, { stake: api.registry.createType('Balance'), votes: [] }])[1])));\n}\n","import { hasProposals as collectiveHasProposals, members as collectiveMembers, prime as collectivePrime, proposal as collectiveProposal, proposalCount as collectiveProposalCount, proposalHashes as collectiveProposalHashes, proposals as collectiveProposals } from '../collective/index.js';\nexport * from './votes.js';\nexport * from './votesOf.js';\nexport const members = /*#__PURE__*/ collectiveMembers('council');\nexport const hasProposals = /*#__PURE__*/ collectiveHasProposals('council');\nexport const proposal = /*#__PURE__*/ collectiveProposal('council');\nexport const proposalCount = /*#__PURE__*/ collectiveProposalCount('council');\nexport const proposalHashes = /*#__PURE__*/ collectiveProposalHashes('council');\nexport const proposals = /*#__PURE__*/ collectiveProposals('council');\nexport const prime = /*#__PURE__*/ collectivePrime('council');\n","import { map } from 'rxjs';\nimport { u8aConcat, u8aToHex } from '@polkadot/util';\nimport { blake2AsU8a } from '@polkadot/util-crypto';\nimport { memo } from '../util/index.js';\nfunction createChildKey(info) {\n    return u8aToHex(u8aConcat(':child_storage:default:', blake2AsU8a(u8aConcat('crowdloan', (info.fundIndex || info.trieIndex).toU8a()))));\n}\nexport function childKey(instanceId, api) {\n    return memo(instanceId, (paraId) => api.query['crowdloan']['funds'](paraId).pipe(map((optInfo) => optInfo.isSome\n        ? createChildKey(optInfo.unwrap())\n        : null)));\n}\n","import { Observable } from '../Observable';\nexport var EMPTY = new Observable(function (subscriber) { return subscriber.complete(); });\nexport function empty(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\nfunction emptyScheduled(scheduler) {\n    return new Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n//# sourceMappingURL=empty.js.map","export function extractContributed(paraId, events) {\n    const added = [];\n    const removed = [];\n    return events\n        .filter(({ event: { data: [, eventParaId], method, section } }) => section === 'crowdloan' &&\n        ['Contributed', 'Withdrew'].includes(method) &&\n        eventParaId.eq(paraId))\n        .reduce((result, { event: { data: [accountId], method } }) => {\n        if (method === 'Contributed') {\n            result.added.push(accountId.toHex());\n        }\n        else {\n            result.removed.push(accountId.toHex());\n        }\n        return result;\n    }, { added, blockHash: events.createdAtHash?.toHex() || '-', removed });\n}\n","import { BehaviorSubject, combineLatest, EMPTY, map, of, startWith, switchMap, tap, toArray } from 'rxjs';\nimport { arrayFlatten, isFunction, nextTick } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nimport { extractContributed } from './util.js';\nconst PAGE_SIZE_K = 1000; // limit aligned with the 1k on the node (trie lookups are heavy)\nfunction _getUpdates(api, paraId) {\n    let added = [];\n    let removed = [];\n    return api.query.system.events().pipe(switchMap((events) => {\n        const changes = extractContributed(paraId, events);\n        if (changes.added.length || changes.removed.length) {\n            added = added.concat(...changes.added);\n            removed = removed.concat(...changes.removed);\n            return of({ added, addedDelta: changes.added, blockHash: events.createdAtHash?.toHex() || '-', removed, removedDelta: changes.removed });\n        }\n        return EMPTY;\n    }), startWith({ added, addedDelta: [], blockHash: '-', removed, removedDelta: [] }));\n}\nfunction _eventTriggerAll(api, paraId) {\n    return api.query.system.events().pipe(switchMap((events) => {\n        const items = events.filter(({ event: { data: [eventParaId], method, section } }) => section === 'crowdloan' &&\n            ['AllRefunded', 'Dissolved', 'PartiallyRefunded'].includes(method) &&\n            eventParaId.eq(paraId));\n        return items.length\n            ? of(events.createdAtHash?.toHex() || '-')\n            : EMPTY;\n    }), startWith('-'));\n}\nfunction _getKeysPaged(api, childKey) {\n    const subject = new BehaviorSubject(undefined);\n    return subject.pipe(switchMap((startKey) => api.rpc.childstate.getKeysPaged(childKey, '0x', PAGE_SIZE_K, startKey)), tap((keys) => {\n        nextTick(() => {\n            keys.length === PAGE_SIZE_K\n                ? subject.next(keys[PAGE_SIZE_K - 1].toHex())\n                : subject.complete();\n        });\n    }), toArray(), // toArray since we want to startSubject to be completed\n    map((keyArr) => arrayFlatten(keyArr)));\n}\nfunction _getAll(api, paraId, childKey) {\n    return _eventTriggerAll(api, paraId).pipe(switchMap(() => isFunction(api.rpc.childstate.getKeysPaged)\n        ? _getKeysPaged(api, childKey)\n        : api.rpc.childstate.getKeys(childKey, '0x')), map((keys) => keys.map((k) => k.toHex())));\n}\nfunction _contributions(api, paraId, childKey) {\n    return combineLatest([\n        _getAll(api, paraId, childKey),\n        _getUpdates(api, paraId)\n    ]).pipe(map(([keys, { added, blockHash, removed }]) => {\n        const contributorsMap = {};\n        keys.forEach((k) => {\n            contributorsMap[k] = true;\n        });\n        added.forEach((k) => {\n            contributorsMap[k] = true;\n        });\n        removed.forEach((k) => {\n            delete contributorsMap[k];\n        });\n        return {\n            blockHash,\n            contributorsHex: Object.keys(contributorsMap)\n        };\n    }));\n}\nexport function contributions(instanceId, api) {\n    return memo(instanceId, (paraId) => api.derive.crowdloan.childKey(paraId).pipe(switchMap((childKey) => childKey\n        ? _contributions(api, paraId, childKey)\n        : of({ blockHash: '-', contributorsHex: [] }))));\n}\n","import { combineLatest, EMPTY, map, of, startWith, switchMap } from 'rxjs';\nimport { objectSpread } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nimport { extractContributed } from './util.js';\nfunction _getValues(api, childKey, keys) {\n    // We actually would love to use multi-keys https://github.com/paritytech/substrate/issues/9203\n    return combineLatest(keys.map((k) => api.rpc.childstate.getStorage(childKey, k))).pipe(map((values) => values\n        .map((v) => api.registry.createType('Option<StorageData>', v))\n        .map((o) => o.isSome\n        ? api.registry.createType('Balance', o.unwrap())\n        : api.registry.createType('Balance'))\n        .reduce((all, b, index) => objectSpread(all, { [keys[index]]: b }), {})));\n}\nfunction _watchOwnChanges(api, paraId, childkey, keys) {\n    return api.query.system.events().pipe(switchMap((events) => {\n        const changes = extractContributed(paraId, events);\n        const filtered = keys.filter((k) => changes.added.includes(k) ||\n            changes.removed.includes(k));\n        return filtered.length\n            ? _getValues(api, childkey, filtered)\n            : EMPTY;\n    }), startWith({}));\n}\nfunction _contributions(api, paraId, childKey, keys) {\n    return combineLatest([\n        _getValues(api, childKey, keys),\n        _watchOwnChanges(api, paraId, childKey, keys)\n    ]).pipe(map(([all, latest]) => objectSpread({}, all, latest)));\n}\nexport function ownContributions(instanceId, api) {\n    return memo(instanceId, (paraId, keys) => api.derive.crowdloan.childKey(paraId).pipe(switchMap((childKey) => childKey && keys.length\n        ? _contributions(api, paraId, childKey, keys)\n        : of({}))));\n}\n","import { BN, bnSqrt, isHex, isString, isU8a, objectSpread, stringToHex, u8aToHex } from '@polkadot/util';\nfunction isOldInfo(info) {\n    return !!info.proposalHash;\n}\nfunction isCurrentStatus(status) {\n    return !!status.tally;\n}\nexport function compareRationals(n1, d1, n2, d2) {\n    while (true) {\n        const q1 = n1.div(d1);\n        const q2 = n2.div(d2);\n        if (q1.lt(q2)) {\n            return true;\n        }\n        else if (q2.lt(q1)) {\n            return false;\n        }\n        const r1 = n1.mod(d1);\n        const r2 = n2.mod(d2);\n        if (r2.isZero()) {\n            return false;\n        }\n        else if (r1.isZero()) {\n            return true;\n        }\n        n1 = d2;\n        n2 = d1;\n        d1 = r2;\n        d2 = r1;\n    }\n}\nfunction calcPassingOther(threshold, sqrtElectorate, { votedAye, votedNay, votedTotal }) {\n    const sqrtVoters = bnSqrt(votedTotal);\n    return sqrtVoters.isZero()\n        ? false\n        : threshold.isSuperMajorityApprove\n            ? compareRationals(votedNay, sqrtVoters, votedAye, sqrtElectorate)\n            : compareRationals(votedNay, sqrtElectorate, votedAye, sqrtVoters);\n}\nexport function calcPassing(threshold, sqrtElectorate, state) {\n    return threshold.isSimpleMajority\n        ? state.votedAye.gt(state.votedNay)\n        : calcPassingOther(threshold, sqrtElectorate, state);\n}\nfunction calcVotesPrev(votesFor) {\n    return votesFor.reduce((state, derived) => {\n        const { balance, vote } = derived;\n        const isDefault = vote.conviction.index === 0;\n        const counted = balance\n            .muln(isDefault ? 1 : vote.conviction.index)\n            .divn(isDefault ? 10 : 1);\n        if (vote.isAye) {\n            state.allAye.push(derived);\n            state.voteCountAye++;\n            state.votedAye.iadd(counted);\n        }\n        else {\n            state.allNay.push(derived);\n            state.voteCountNay++;\n            state.votedNay.iadd(counted);\n        }\n        state.voteCount++;\n        state.votedTotal.iadd(counted);\n        return state;\n    }, { allAye: [], allNay: [], voteCount: 0, voteCountAye: 0, voteCountNay: 0, votedAye: new BN(0), votedNay: new BN(0), votedTotal: new BN(0) });\n}\nfunction calcVotesCurrent(tally, votes) {\n    const allAye = [];\n    const allNay = [];\n    votes.forEach((derived) => {\n        if (derived.vote.isAye) {\n            allAye.push(derived);\n        }\n        else {\n            allNay.push(derived);\n        }\n    });\n    return {\n        allAye,\n        allNay,\n        voteCount: allAye.length + allNay.length,\n        voteCountAye: allAye.length,\n        voteCountNay: allNay.length,\n        votedAye: tally.ayes,\n        votedNay: tally.nays,\n        votedTotal: tally.turnout\n    };\n}\nexport function calcVotes(sqrtElectorate, referendum, votes) {\n    const state = isCurrentStatus(referendum.status)\n        ? calcVotesCurrent(referendum.status.tally, votes)\n        : calcVotesPrev(votes);\n    return objectSpread({}, state, {\n        isPassing: calcPassing(referendum.status.threshold, sqrtElectorate, state),\n        votes\n    });\n}\nexport function getStatus(info) {\n    if (info.isNone) {\n        return null;\n    }\n    const unwrapped = info.unwrap();\n    return isOldInfo(unwrapped)\n        ? unwrapped\n        : unwrapped.isOngoing\n            ? unwrapped.asOngoing\n            // done, we don't include it here... only currently active\n            : null;\n}\nexport function getImageHashBounded(hash) {\n    return hash.isLegacy\n        ? hash.asLegacy.hash_.toHex()\n        : hash.isLookup\n            ? hash.asLookup.hash_.toHex()\n            // for inline, use the actual Bytes hash\n            : hash.isInline\n                ? hash.asInline.hash.toHex()\n                : isString(hash)\n                    ? isHex(hash)\n                        ? hash\n                        : stringToHex(hash)\n                    : isU8a(hash)\n                        ? u8aToHex(hash)\n                        : hash.toHex();\n}\nexport function getImageHash(status) {\n    return getImageHashBounded(status.proposal ||\n        status.proposalHash);\n}\n","import { catchError, combineLatest, map, of, switchMap } from 'rxjs';\nimport { Enum } from '@polkadot/types';\nimport { isFunction, objectSpread, stringToHex } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nimport { getImageHashBounded } from './util.js';\nconst DEMOCRACY_ID = stringToHex('democrac');\nfunction isMaybeHashedOrBounded(call) {\n    // check for enum\n    return call instanceof Enum;\n}\nfunction isBounded(call) {\n    // check for type\n    return call.isInline || call.isLegacy || call.isLookup;\n}\nfunction queryQueue(api) {\n    return api.query.democracy['dispatchQueue']().pipe(switchMap((dispatches) => combineLatest([\n        of(dispatches),\n        api.derive.democracy.preimages(dispatches.map(([, hash]) => hash))\n    ])), map(([dispatches, images]) => dispatches.map(([at, imageHash, index], dispatchIndex) => ({\n        at,\n        image: images[dispatchIndex],\n        imageHash: getImageHashBounded(imageHash),\n        index\n    }))));\n}\nfunction schedulerEntries(api) {\n    // We don't get entries, but rather we get the keys (triggered via finished referendums) and\n    // the subscribe to those keys - this means we pickup when the schedulers actually executes\n    // at a block, the entry for that block will become empty\n    return api.derive.democracy.referendumsFinished().pipe(switchMap(() => api.query.scheduler.agenda.keys()), switchMap((keys) => {\n        const blockNumbers = keys.map(({ args: [blockNumber] }) => blockNumber);\n        return blockNumbers.length\n            ? combineLatest([\n                of(blockNumbers),\n                // this should simply be api.query.scheduler.agenda.multi,\n                // however we have had cases on Darwinia where the indices have moved around after an\n                // upgrade, which results in invalid on-chain data\n                api.query.scheduler.agenda.multi(blockNumbers).pipe(catchError(() => of(blockNumbers.map(() => []))))\n            ])\n            : of([[], []]);\n    }));\n}\nfunction queryScheduler(api) {\n    return schedulerEntries(api).pipe(switchMap(([blockNumbers, agendas]) => {\n        const result = [];\n        blockNumbers.forEach((at, index) => {\n            (agendas[index] || []).filter((o) => o.isSome).forEach((o) => {\n                const scheduled = o.unwrap();\n                if (scheduled.maybeId.isSome) {\n                    const id = scheduled.maybeId.unwrap().toHex();\n                    if (id.startsWith(DEMOCRACY_ID)) {\n                        const imageHash = isMaybeHashedOrBounded(scheduled.call)\n                            ? isBounded(scheduled.call)\n                                ? getImageHashBounded(scheduled.call)\n                                : scheduled.call.isHash\n                                    ? scheduled.call.asHash.toHex()\n                                    : scheduled.call.asValue.args[0].toHex()\n                            : scheduled.call.args[0].toHex();\n                        result.push({ at, imageHash, index: api.registry.createType('(u64, ReferendumIndex)', id)[1] });\n                    }\n                }\n            });\n        });\n        return combineLatest([\n            of(result),\n            result.length\n                ? api.derive.democracy.preimages(result.map(({ imageHash }) => imageHash))\n                : of([])\n        ]);\n    }), map(([infos, images]) => infos.map((info, index) => objectSpread({ image: images[index] }, info))));\n}\nexport function dispatchQueue(instanceId, api) {\n    return memo(instanceId, () => isFunction(api.query.scheduler?.agenda)\n        ? queryScheduler(api)\n        : api.query.democracy['dispatchQueue']\n            ? queryQueue(api)\n            : of([]));\n}\n","import { map, of, switchMap } from 'rxjs';\nimport { BN_ZERO, isUndefined } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nconst LOCKUPS = [0, 1, 2, 4, 8, 16, 32];\nfunction parseEnd(api, vote, { approved, end }) {\n    return [\n        end,\n        (approved.isTrue && vote.isAye) || (approved.isFalse && vote.isNay)\n            ? end.add((api.consts.democracy.voteLockingPeriod ||\n                api.consts.democracy.enactmentPeriod).muln(LOCKUPS[vote.conviction.index]))\n            : BN_ZERO\n    ];\n}\nfunction parseLock(api, [referendumId, accountVote], referendum) {\n    const { balance, vote } = accountVote.asStandard;\n    const [referendumEnd, unlockAt] = referendum.isFinished\n        ? parseEnd(api, vote, referendum.asFinished)\n        : [BN_ZERO, BN_ZERO];\n    return { balance, isDelegated: false, isFinished: referendum.isFinished, referendumEnd, referendumId, unlockAt, vote };\n}\nfunction delegateLocks(api, { balance, conviction, target }) {\n    return api.derive.democracy.locks(target).pipe(map((available) => available.map(({ isFinished, referendumEnd, referendumId, unlockAt, vote }) => ({\n        balance,\n        isDelegated: true,\n        isFinished,\n        referendumEnd,\n        referendumId,\n        unlockAt: unlockAt.isZero()\n            ? unlockAt\n            : referendumEnd.add((api.consts.democracy.voteLockingPeriod ||\n                api.consts.democracy.enactmentPeriod).muln(LOCKUPS[conviction.index])),\n        vote: api.registry.createType('Vote', { aye: vote.isAye, conviction })\n    }))));\n}\nfunction directLocks(api, { votes }) {\n    if (!votes.length) {\n        return of([]);\n    }\n    return api.query.democracy.referendumInfoOf.multi(votes.map(([referendumId]) => referendumId)).pipe(map((referendums) => votes\n        .map((vote, index) => [vote, referendums[index].unwrapOr(null)])\n        .filter((item) => !!item[1] && isUndefined(item[1].end) && item[0][1].isStandard)\n        .map(([directVote, referendum]) => parseLock(api, directVote, referendum))));\n}\nexport function locks(instanceId, api) {\n    return memo(instanceId, (accountId) => api.query.democracy.votingOf\n        ? api.query.democracy.votingOf(accountId).pipe(switchMap((voting) => voting.isDirect\n            ? directLocks(api, voting.asDirect)\n            : voting.isDelegating\n                ? delegateLocks(api, voting.asDelegating)\n                : of([])))\n        : of([]));\n}\n","import { map, of, switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\nimport { getImageHashBounded } from './util.js';\nfunction withImage(api, nextOpt) {\n    if (nextOpt.isNone) {\n        return of(null);\n    }\n    const [hash, threshold] = nextOpt.unwrap();\n    return api.derive.democracy.preimage(hash).pipe(map((image) => ({\n        image,\n        imageHash: getImageHashBounded(hash),\n        threshold\n    })));\n}\nexport function nextExternal(instanceId, api) {\n    return memo(instanceId, () => api.query.democracy?.nextExternal\n        ? api.query.democracy.nextExternal().pipe(switchMap((nextOpt) => withImage(api, nextOpt)))\n        : of(null));\n}\n","import { map, of, switchMap } from 'rxjs';\nimport { BN_ZERO, isFunction } from '@polkadot/util';\nimport { firstMemo, memo } from '../util/index.js';\nimport { getImageHashBounded } from './util.js';\nfunction getUnrequestedTicket(status) {\n    return status.ticket || status.deposit;\n}\nfunction getRequestedTicket(status) {\n    return (status.maybeTicket || status.deposit).unwrapOrDefault();\n}\nfunction isDemocracyPreimage(api, imageOpt) {\n    return !!imageOpt && !api.query.democracy['dispatchQueue'];\n}\nfunction constructProposal(api, [bytes, proposer, balance, at]) {\n    let proposal;\n    try {\n        proposal = api.registry.createType('Call', bytes.toU8a(true));\n    }\n    catch (error) {\n        console.error(error);\n    }\n    return { at, balance, proposal, proposer };\n}\nfunction parseDemocracy(api, imageOpt) {\n    if (imageOpt.isNone) {\n        return;\n    }\n    if (isDemocracyPreimage(api, imageOpt)) {\n        const status = imageOpt.unwrap();\n        if (status.isMissing) {\n            return;\n        }\n        const { data, deposit, provider, since } = status.asAvailable;\n        return constructProposal(api, [data, provider, deposit, since]);\n    }\n    return constructProposal(api, imageOpt.unwrap());\n}\nfunction parseImage(api, [proposalHash, status, bytes]) {\n    if (!status) {\n        return undefined;\n    }\n    const [proposer, balance] = status.isUnrequested\n        ? getUnrequestedTicket(status.asUnrequested)\n        : getRequestedTicket(status.asRequested);\n    let proposal;\n    if (bytes) {\n        try {\n            proposal = api.registry.createType('Call', bytes.toU8a(true));\n        }\n        catch (error) {\n            console.error(error);\n        }\n    }\n    return { at: BN_ZERO, balance, proposal, proposalHash, proposer };\n}\nfunction getDemocracyImages(api, bounded) {\n    const hashes = bounded.map((b) => getImageHashBounded(b));\n    return api.query.democracy['preimages'].multi(hashes).pipe(map((images) => images.map((imageOpt) => parseDemocracy(api, imageOpt))));\n}\nfunction getImages(api, bounded) {\n    const hashes = bounded.map((b) => getImageHashBounded(b));\n    const bytesType = api.registry.lookup.getTypeDef(api.query.preimage.preimageFor.creator.meta.type.asMap.key).type;\n    return api.query.preimage.statusFor.multi(hashes).pipe(switchMap((optStatus) => {\n        const statuses = optStatus.map((o) => o.unwrapOr(null));\n        const keys = statuses\n            .map((s, i) => s\n            ? bytesType === 'H256'\n                // first generation\n                ? hashes[i]\n                // current generation (H256,u32)\n                : s.isRequested\n                    ? [hashes[i], s.asRequested.len.unwrapOr(0)]\n                    : [hashes[i], s.asUnrequested.len]\n            : null)\n            .filter((p) => !!p);\n        return api.query.preimage.preimageFor.multi(keys).pipe(map((optBytes) => {\n            let ptr = -1;\n            return statuses\n                .map((s, i) => s\n                ? [hashes[i], s, optBytes[++ptr].unwrapOr(null)]\n                : [hashes[i], null, null])\n                .map((v) => parseImage(api, v));\n        }));\n    }));\n}\nexport function preimages(instanceId, api) {\n    return memo(instanceId, (hashes) => hashes.length\n        ? isFunction(api.query.democracy['preimages'])\n            ? getDemocracyImages(api, hashes)\n            : isFunction(api.query.preimage.preimageFor)\n                ? getImages(api, hashes)\n                : of([])\n        : of([]));\n}\nexport const preimage = /*#__PURE__*/ firstMemo((api, hash) => api.derive.democracy.preimages([hash]));\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { isFunction, objectSpread } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nimport { getImageHashBounded } from './util.js';\nfunction isNewDepositors(depositors) {\n    // Detect balance...\n    return isFunction(depositors[1].mul);\n}\nfunction parse([proposals, images, optDepositors]) {\n    return proposals\n        .filter(([, , proposer], index) => !!(optDepositors[index]?.isSome) && !proposer.isEmpty)\n        .map(([index, hash, proposer], proposalIndex) => {\n        const depositors = optDepositors[proposalIndex].unwrap();\n        return objectSpread({\n            image: images[proposalIndex],\n            imageHash: getImageHashBounded(hash),\n            index,\n            proposer\n        }, isNewDepositors(depositors)\n            ? { balance: depositors[1], seconds: depositors[0] }\n            : { balance: depositors[0], seconds: depositors[1] });\n    });\n}\nexport function proposals(instanceId, api) {\n    return memo(instanceId, () => isFunction(api.query.democracy?.publicProps)\n        ? api.query.democracy.publicProps().pipe(switchMap((proposals) => proposals.length\n            ? combineLatest([\n                of(proposals),\n                api.derive.democracy.preimages(proposals.map(([, hash]) => hash)),\n                api.query.democracy.depositOf.multi(proposals.map(([index]) => index))\n            ])\n            : of([[], [], []])), map(parse))\n        : of([]));\n}\n","import { map, of } from 'rxjs';\nimport { memo } from '../util/index.js';\nexport function referendumIds(instanceId, api) {\n    return memo(instanceId, () => api.query.democracy?.lowestUnbaked\n        ? api.queryMulti([\n            api.query.democracy.lowestUnbaked,\n            api.query.democracy.referendumCount\n        ]).pipe(map(([first, total]) => total.gt(first)\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            ? [...Array(total.sub(first).toNumber())].map((_, i) => first.addn(i))\n            : []))\n        : of([]));\n}\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { objectSpread } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nexport function referendums(instanceId, api) {\n    return memo(instanceId, () => api.derive.democracy.referendumsActive().pipe(switchMap((referendums) => referendums.length\n        ? combineLatest([\n            of(referendums),\n            api.derive.democracy._referendumsVotes(referendums)\n        ])\n        : of([[], []])), map(([referendums, votes]) => referendums.map((referendum, index) => objectSpread({}, referendum, votes[index])))));\n}\n","import { of, switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\nexport function referendumsActive(instanceId, api) {\n    return memo(instanceId, () => api.derive.democracy.referendumIds().pipe(switchMap((ids) => ids.length\n        ? api.derive.democracy.referendumsInfo(ids)\n        : of([]))));\n}\n","import { map, switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\nexport function referendumsFinished(instanceId, api) {\n    return memo(instanceId, () => api.derive.democracy.referendumIds().pipe(switchMap((ids) => api.query.democracy.referendumInfoOf.multi(ids)), map((infos) => infos\n        .map((o) => o.unwrapOr(null))\n        .filter((info) => !!info && info.isFinished)\n        .map((info) => info.asFinished))));\n}\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { isFunction, objectSpread } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nimport { calcVotes, getImageHash, getStatus } from './util.js';\nfunction votesPrev(api, referendumId) {\n    return api.query.democracy['votersFor'](referendumId).pipe(switchMap((votersFor) => combineLatest([\n        of(votersFor),\n        votersFor.length\n            ? api.query.democracy['voteOf'].multi(votersFor.map((accountId) => [referendumId, accountId]))\n            : of([]),\n        api.derive.balances.votingBalances(votersFor)\n    ])), map(([votersFor, votes, balances]) => votersFor.map((accountId, index) => ({\n        accountId,\n        balance: balances[index].votingBalance || api.registry.createType('Balance'),\n        isDelegating: false,\n        vote: votes[index] || api.registry.createType('Vote')\n    }))));\n}\nfunction extractVotes(mapped, referendumId) {\n    return mapped\n        .filter(([, voting]) => voting.isDirect)\n        .map(([accountId, voting]) => [\n        accountId,\n        voting.asDirect.votes.filter(([idx]) => idx.eq(referendumId))\n    ])\n        .filter(([, directVotes]) => !!directVotes.length)\n        .reduce((result, [accountId, votes]) => \n    // FIXME We are ignoring split votes\n    votes.reduce((result, [, vote]) => {\n        if (vote.isStandard) {\n            result.push(objectSpread({\n                accountId,\n                isDelegating: false\n            }, vote.asStandard));\n        }\n        return result;\n    }, result), []);\n}\nfunction votesCurr(api, referendumId) {\n    return api.query.democracy.votingOf.entries().pipe(map((allVoting) => {\n        const mapped = allVoting.map(([{ args: [accountId] }, voting]) => [accountId, voting]);\n        const votes = extractVotes(mapped, referendumId);\n        const delegations = mapped\n            .filter(([, voting]) => voting.isDelegating)\n            .map(([accountId, voting]) => [accountId, voting.asDelegating]);\n        // add delegations\n        delegations.forEach(([accountId, { balance, conviction, target }]) => {\n            // Are we delegating to a delegator\n            const toDelegator = delegations.find(([accountId]) => accountId.eq(target));\n            const to = votes.find(({ accountId }) => accountId.eq(toDelegator ? toDelegator[0] : target));\n            // this delegation has a target\n            if (to) {\n                votes.push({\n                    accountId,\n                    balance,\n                    isDelegating: true,\n                    vote: api.registry.createType('Vote', { aye: to.vote.isAye, conviction })\n                });\n            }\n        });\n        return votes;\n    }));\n}\nexport function _referendumVotes(instanceId, api) {\n    return memo(instanceId, (referendum) => combineLatest([\n        api.derive.democracy.sqrtElectorate(),\n        isFunction(api.query.democracy.votingOf)\n            ? votesCurr(api, referendum.index)\n            : votesPrev(api, referendum.index)\n    ]).pipe(map(([sqrtElectorate, votes]) => calcVotes(sqrtElectorate, referendum, votes))));\n}\nexport function _referendumsVotes(instanceId, api) {\n    return memo(instanceId, (referendums) => referendums.length\n        ? combineLatest(referendums.map((referendum) => api.derive.democracy._referendumVotes(referendum)))\n        : of([]));\n}\nexport function _referendumInfo(instanceId, api) {\n    return memo(instanceId, (index, info) => {\n        const status = getStatus(info);\n        return status\n            ? api.derive.democracy.preimage(status.proposal ||\n                status.proposalHash).pipe(map((image) => ({\n                image,\n                imageHash: getImageHash(status),\n                index: api.registry.createType('ReferendumIndex', index),\n                status\n            })))\n            : of(null);\n    });\n}\nexport function referendumsInfo(instanceId, api) {\n    return memo(instanceId, (ids) => ids.length\n        ? api.query.democracy.referendumInfoOf.multi(ids).pipe(switchMap((infos) => combineLatest(ids.map((id, index) => api.derive.democracy._referendumInfo(id, infos[index])))), map((infos) => infos.filter((r) => !!r)))\n        : of([]));\n}\n","import { map } from 'rxjs';\nimport { bnSqrt } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nexport function sqrtElectorate(instanceId, api) {\n    return memo(instanceId, () => api.query.balances.totalIssuance().pipe(map(bnSqrt)));\n}\n","import { combineLatest, map, of } from 'rxjs';\nimport { objectSpread } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nfunction isSeatHolder(value) {\n    return !Array.isArray(value);\n}\nfunction isCandidateTuple(value) {\n    return Array.isArray(value);\n}\nfunction getAccountTuple(value) {\n    return isSeatHolder(value)\n        ? [value.who, value.stake]\n        : value;\n}\nfunction getCandidate(value) {\n    return isCandidateTuple(value)\n        ? value[0]\n        : value;\n}\nfunction sortAccounts([, balanceA], [, balanceB]) {\n    return balanceB.cmp(balanceA);\n}\nfunction getConstants(api, elections) {\n    return elections\n        ? {\n            candidacyBond: api.consts[elections].candidacyBond,\n            desiredRunnersUp: api.consts[elections].desiredRunnersUp,\n            desiredSeats: api.consts[elections].desiredMembers,\n            termDuration: api.consts[elections].termDuration,\n            votingBond: api.consts[elections]['votingBond'],\n            votingBondBase: api.consts[elections].votingBondBase,\n            votingBondFactor: api.consts[elections].votingBondFactor\n        }\n        : {};\n}\nfunction getModules(api) {\n    const [council] = api.registry.getModuleInstances(api.runtimeVersion.specName, 'council') || ['council'];\n    const elections = api.query['phragmenElection']\n        ? 'phragmenElection'\n        : api.query['electionsPhragmen']\n            ? 'electionsPhragmen'\n            : api.query.elections\n                ? 'elections'\n                : null;\n    // In some cases council here can refer to `generalCouncil` depending on what the chain specific override is.\n    // Therefore, we check to see if it exists in the query field. If it does not we default to `council`.\n    const resolvedCouncil = api.query[council] ? council : 'council';\n    return [resolvedCouncil, elections];\n}\nfunction queryAll(api, council, elections) {\n    return api.queryMulti([\n        api.query[council].members,\n        api.query[elections].candidates,\n        api.query[elections].members,\n        api.query[elections].runnersUp\n    ]);\n}\nfunction queryCouncil(api, council) {\n    return combineLatest([\n        api.query[council].members(),\n        of([]),\n        of([]),\n        of([])\n    ]);\n}\n/**\n * @name info\n * @returns An object containing the combined results of the storage queries for\n * all relevant election module properties.\n * @example\n * <BR>\n *\n * ```javascript\n * api.derive.elections.info(({ members, candidates }) => {\n *   console.log(`There are currently ${members.length} council members and ${candidates.length} prospective council candidates.`);\n * });\n * ```\n */\nexport function info(instanceId, api) {\n    return memo(instanceId, () => {\n        const [council, elections] = getModules(api);\n        return (elections\n            ? queryAll(api, council, elections)\n            : queryCouncil(api, council)).pipe(map(([councilMembers, candidates, members, runnersUp]) => objectSpread({}, getConstants(api, elections), {\n            candidateCount: api.registry.createType('u32', candidates.length),\n            candidates: candidates.map(getCandidate),\n            members: members.length\n                ? members.map(getAccountTuple).sort(sortAccounts)\n                : councilMembers.map((a) => [a, api.registry.createType('Balance')]),\n            runnersUp: runnersUp.map(getAccountTuple).sort(sortAccounts)\n        })));\n    });\n}\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { BN_ZERO } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nfunction mapResult([result, validators, heartbeats, numBlocks]) {\n    validators.forEach((validator, index) => {\n        const validatorId = validator.toString();\n        const blockCount = numBlocks[index];\n        const hasMessage = !heartbeats[index].isEmpty;\n        const prev = result[validatorId];\n        if (!prev || prev.hasMessage !== hasMessage || !prev.blockCount.eq(blockCount)) {\n            result[validatorId] = {\n                blockCount,\n                hasMessage,\n                isOnline: hasMessage || blockCount.gt(BN_ZERO)\n            };\n        }\n    });\n    return result;\n}\n/**\n * @description Return a boolean array indicating whether the passed accounts had received heartbeats in the current session\n */\nexport function receivedHeartbeats(instanceId, api) {\n    return memo(instanceId, () => api.query.imOnline?.receivedHeartbeats\n        ? api.derive.staking.overview().pipe(switchMap(({ currentIndex, validators }) => combineLatest([\n            of({}),\n            of(validators),\n            api.query.imOnline.receivedHeartbeats.multi(validators.map((_address, index) => [currentIndex, index])),\n            api.query.imOnline.authoredBlocks.multi(validators.map((address) => [currentIndex, address]))\n        ])), map(mapResult))\n        : of({}));\n}\n","import { hasProposals as collectiveHasProposals, members as collectiveMembers, prime as collectivePrime, proposal as collectiveProposal, proposalCount as collectiveProposalCount, proposalHashes as collectiveProposalHashes, proposals as collectiveProposals } from '../collective/index.js';\nexport const members = /*#__PURE__*/ collectiveMembers('membership');\nexport const hasProposals = /*#__PURE__*/ collectiveHasProposals('membership');\nexport const proposal = /*#__PURE__*/ collectiveProposal('membership');\nexport const proposalCount = /*#__PURE__*/ collectiveProposalCount('membership');\nexport const proposalHashes = /*#__PURE__*/ collectiveProposalHashes('membership');\nexport const proposals = /*#__PURE__*/ collectiveProposals('membership');\nexport const prime = /*#__PURE__*/ collectivePrime('membership');\n","export function didUpdateToBool(didUpdate, id) {\n    return didUpdate.isSome\n        ? didUpdate.unwrap().some((paraId) => paraId.eq(id))\n        : false;\n}\n","import { map, of } from 'rxjs';\nimport { objectSpread } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nimport { didUpdateToBool } from './util.js';\nfunction parseActive(id, active) {\n    const found = active.find(([paraId]) => paraId === id);\n    if (found && found[1].isSome) {\n        const [collatorId, retriable] = found[1].unwrap();\n        return objectSpread({ collatorId }, retriable.isWithRetries\n            ? {\n                isRetriable: true,\n                retries: retriable.asWithRetries.toNumber()\n            }\n            : {\n                isRetriable: false,\n                retries: 0\n            });\n    }\n    return null;\n}\nfunction parseCollators(id, collatorQueue) {\n    return collatorQueue.map((queue) => {\n        const found = queue.find(([paraId]) => paraId === id);\n        return found ? found[1] : null;\n    });\n}\nfunction parse(id, [active, retryQueue, selectedThreads, didUpdate, info, pendingSwap, heads, relayDispatchQueue]) {\n    if (info.isNone) {\n        return null;\n    }\n    return {\n        active: parseActive(id, active),\n        didUpdate: didUpdateToBool(didUpdate, id),\n        heads,\n        id,\n        info: objectSpread({ id }, info.unwrap()),\n        pendingSwapId: pendingSwap.unwrapOr(null),\n        relayDispatchQueue,\n        retryCollators: parseCollators(id, retryQueue),\n        selectedCollators: parseCollators(id, selectedThreads)\n    };\n}\nexport function info(instanceId, api) {\n    return memo(instanceId, (id) => api.query['registrar'] && api.query['parachains']\n        ? api.queryMulti([\n            api.query['registrar']['active'],\n            api.query['registrar']['retryQueue'],\n            api.query['registrar']['selectedThreads'],\n            api.query['parachains']['didUpdate'],\n            [api.query['registrar']['paras'], id],\n            [api.query['registrar']['pendingSwap'], id],\n            [api.query['parachains']['heads'], id],\n            [api.query['parachains']['relayDispatchQueue'], id]\n        ])\n            .pipe(map((result) => parse(api.registry.createType('ParaId', id), result)))\n        : of(null));\n}\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { objectSpread } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nimport { didUpdateToBool } from './util.js';\nfunction parse([ids, didUpdate, relayDispatchQueueSizes, infos, pendingSwaps]) {\n    return ids.map((id, index) => ({\n        didUpdate: didUpdateToBool(didUpdate, id),\n        id,\n        info: objectSpread({ id }, infos[index].unwrapOr(null)),\n        pendingSwapId: pendingSwaps[index].unwrapOr(null),\n        relayDispatchQueueSize: relayDispatchQueueSizes[index][0].toNumber()\n    }));\n}\nexport function overview(instanceId, api) {\n    return memo(instanceId, () => api.query['registrar']?.['parachains'] && api.query['parachains']\n        ? api.query['registrar']['parachains']().pipe(switchMap((paraIds) => combineLatest([\n            of(paraIds),\n            api.query['parachains']['didUpdate'](),\n            api.query['parachains']['relayDispatchQueueSize'].multi(paraIds),\n            api.query['registrar']['paras'].multi(paraIds),\n            api.query['registrar']['pendingSwap'].multi(paraIds)\n        ])), map(parse))\n        : of([]));\n}\n","import { map, of } from 'rxjs';\nimport { memo } from '../util/index.js';\nfunction parse([currentIndex, activeEra, activeEraStart, currentEra, validatorCount]) {\n    return {\n        activeEra,\n        activeEraStart,\n        currentEra,\n        currentIndex,\n        validatorCount\n    };\n}\nfunction queryStaking(api) {\n    return api.queryMulti([\n        api.query.session.currentIndex,\n        api.query.staking.activeEra,\n        api.query.staking.currentEra,\n        api.query.staking.validatorCount\n    ]).pipe(map(([currentIndex, activeOpt, currentEra, validatorCount]) => {\n        const { index, start } = activeOpt.unwrapOrDefault();\n        return parse([\n            currentIndex,\n            index,\n            start,\n            currentEra.unwrapOrDefault(),\n            validatorCount\n        ]);\n    }));\n}\nfunction querySession(api) {\n    return api.query.session.currentIndex().pipe(map((currentIndex) => parse([\n        currentIndex,\n        api.registry.createType('EraIndex'),\n        api.registry.createType('Option<Moment>'),\n        api.registry.createType('EraIndex'),\n        api.registry.createType('u32')\n    ])));\n}\nfunction empty(api) {\n    return of(parse([\n        api.registry.createType('SessionIndex', 1),\n        api.registry.createType('EraIndex'),\n        api.registry.createType('Option<Moment>'),\n        api.registry.createType('EraIndex'),\n        api.registry.createType('u32')\n    ]));\n}\nexport function indexes(instanceId, api) {\n    return memo(instanceId, () => api.query.session\n        ? api.query.staking\n            ? queryStaking(api)\n            : querySession(api)\n        : empty(api));\n}\n","import { map } from 'rxjs';\nimport { objectSpread } from '@polkadot/util';\nimport { memo } from '../util/index.js';\n/**\n * @description Retrieves all the session and era query and calculates specific values on it as the length of the session and eras\n */\nexport function info(instanceId, api) {\n    return memo(instanceId, () => api.derive.session.indexes().pipe(map((indexes) => {\n        const sessionLength = api.consts?.babe?.epochDuration || api.registry.createType('u64', 1);\n        const sessionsPerEra = api.consts?.staking?.sessionsPerEra || api.registry.createType('SessionIndex', 1);\n        return objectSpread({\n            eraLength: api.registry.createType('BlockNumber', sessionsPerEra.mul(sessionLength)),\n            isEpoch: !!api.query.babe,\n            sessionLength,\n            sessionsPerEra\n        }, indexes);\n    })));\n}\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { objectSpread } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nfunction withProgressField(field) {\n    return (instanceId, api) => memo(instanceId, () => api.derive.session.progress().pipe(map((info) => info[field])));\n}\nfunction createDerive(api, info, [currentSlot, epochIndex, epochOrGenesisStartSlot, activeEraStartSessionIndex]) {\n    const epochStartSlot = epochIndex.mul(info.sessionLength).iadd(epochOrGenesisStartSlot);\n    const sessionProgress = currentSlot.sub(epochStartSlot);\n    const eraProgress = info.currentIndex.sub(activeEraStartSessionIndex).imul(info.sessionLength).iadd(sessionProgress);\n    return objectSpread({\n        eraProgress: api.registry.createType('BlockNumber', eraProgress),\n        sessionProgress: api.registry.createType('BlockNumber', sessionProgress)\n    }, info);\n}\nfunction queryAura(api) {\n    return api.derive.session.info().pipe(map((info) => objectSpread({\n        eraProgress: api.registry.createType('BlockNumber'),\n        sessionProgress: api.registry.createType('BlockNumber')\n    }, info)));\n}\nfunction queryBabe(api) {\n    return api.derive.session.info().pipe(switchMap((info) => combineLatest([\n        of(info),\n        // we may have no staking, but have babe (permissioned)\n        api.query.staking?.erasStartSessionIndex\n            ? api.queryMulti([\n                api.query.babe.currentSlot,\n                api.query.babe.epochIndex,\n                api.query.babe.genesisSlot,\n                [api.query.staking.erasStartSessionIndex, info.activeEra]\n            ])\n            : api.queryMulti([\n                api.query.babe.currentSlot,\n                api.query.babe.epochIndex,\n                api.query.babe.genesisSlot\n            ])\n    ])), map(([info, [currentSlot, epochIndex, genesisSlot, optStartIndex]]) => [\n        info, [currentSlot, epochIndex, genesisSlot, optStartIndex && optStartIndex.isSome ? optStartIndex.unwrap() : api.registry.createType('SessionIndex', 1)]\n    ]));\n}\n/**\n * @description Retrieves all the session and era query and calculates specific values on it as the length of the session and eras\n */\nexport function progress(instanceId, api) {\n    return memo(instanceId, () => api.query.babe\n        ? queryBabe(api).pipe(map(([info, slots]) => createDerive(api, info, slots)))\n        : queryAura(api));\n}\nexport const eraLength = /*#__PURE__*/ withProgressField('eraLength');\nexport const eraProgress = /*#__PURE__*/ withProgressField('eraProgress');\nexport const sessionProgress = /*#__PURE__*/ withProgressField('sessionProgress');\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\nfunction getPrev(api) {\n    return api.query.society.candidates().pipe(switchMap((candidates) => combineLatest([\n        of(candidates),\n        api.query.society['suspendedCandidates'].multi(candidates.map(({ who }) => who))\n    ])), map(([candidates, suspended]) => candidates.map(({ kind, value, who }, index) => ({\n        accountId: who,\n        isSuspended: suspended[index].isSome,\n        kind,\n        value\n    }))));\n}\nfunction getCurr(api) {\n    return api.query.society.candidates.entries().pipe(map((entries) => entries\n        .filter(([, opt]) => opt.isSome)\n        .map(([{ args: [accountId] }, opt]) => [accountId, opt.unwrap()])\n        // FIXME We are missing the new fields from the candidate record\n        .map(([accountId, { bid, kind }]) => ({\n        accountId,\n        isSuspended: false,\n        kind,\n        value: bid\n    }))));\n}\n/**\n * @description Get the candidate info for a society\n */\nexport function candidates(instanceId, api) {\n    return memo(instanceId, () => api.query.society['suspendedCandidates'] && api.query.society.candidates.creator.meta.type.isPlain\n        ? getPrev(api)\n        : getCurr(api));\n}\n","import { combineLatest, map, of } from 'rxjs';\nimport { memo } from '../util/index.js';\n/**\n * @description Get the overall info for a society\n */\nexport function info(instanceId, api) {\n    return memo(instanceId, () => combineLatest([\n        api.query.society.bids(),\n        api.query.society['defender']\n            ? api.query.society['defender']()\n            : of(undefined),\n        api.query.society.founder(),\n        api.query.society.head(),\n        api.query.society['maxMembers']\n            ? api.query.society['maxMembers']()\n            : of(undefined),\n        api.query.society.pot()\n    ]).pipe(map(([bids, defender, founder, head, maxMembers, pot]) => ({\n        bids,\n        defender: defender?.unwrapOr(undefined),\n        founder: founder.unwrapOr(undefined),\n        hasDefender: (defender?.isSome && head.isSome && !head.eq(defender)) || false,\n        head: head.unwrapOr(undefined),\n        maxMembers,\n        pot\n    }))));\n}\n","import { map } from 'rxjs';\nimport { memo } from '../util/index.js';\n/**\n * @description Get the member info for a society\n */\nexport function member(instanceId, api) {\n    return memo(instanceId, (accountId) => api.derive.society._members([accountId]).pipe(map(([result]) => result)));\n}\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\nfunction _membersPrev(api, accountIds) {\n    return combineLatest([\n        of(accountIds),\n        api.query.society.payouts.multi(accountIds),\n        api.query.society['strikes'].multi(accountIds),\n        api.query.society.defenderVotes.multi(accountIds),\n        api.query.society.suspendedMembers.multi(accountIds),\n        api.query.society['vouching'].multi(accountIds)\n    ]).pipe(map(([accountIds, payouts, strikes, defenderVotes, suspended, vouching]) => accountIds.map((accountId, index) => ({\n        accountId,\n        isDefenderVoter: defenderVotes[index].isSome,\n        isSuspended: suspended[index].isTrue,\n        payouts: payouts[index],\n        strikes: strikes[index],\n        vote: defenderVotes[index].unwrapOr(undefined),\n        vouching: vouching[index].unwrapOr(undefined)\n    }))));\n}\nfunction _membersCurr(api, accountIds) {\n    return combineLatest([\n        of(accountIds),\n        api.query.society.members.multi(accountIds),\n        api.query.society.payouts.multi(accountIds),\n        api.query.society.challengeRoundCount().pipe(switchMap((round) => api.query.society.defenderVotes.multi(accountIds.map((accountId) => [round, accountId])))),\n        api.query.society.suspendedMembers.multi(accountIds)\n    ]).pipe(map(([accountIds, members, payouts, defenderVotes, suspendedMembers]) => accountIds\n        .map((accountId, index) => members[index].isSome\n        ? {\n            accountId,\n            isDefenderVoter: defenderVotes[index].isSome,\n            isSuspended: suspendedMembers[index].isSome,\n            member: members[index].unwrap(),\n            payouts: payouts[index].payouts\n        }\n        : null)\n        .filter((m) => !!m)\n        .map(({ accountId, isDefenderVoter, isSuspended, member, payouts }) => ({\n        accountId,\n        isDefenderVoter,\n        isSuspended,\n        payouts,\n        strikes: member.strikes,\n        vouching: member.vouching.unwrapOr(undefined)\n    }))));\n}\nexport function _members(instanceId, api) {\n    return memo(instanceId, (accountIds) => api.query.society.members.creator.meta.type.isMap\n        ? _membersCurr(api, accountIds)\n        : _membersPrev(api, accountIds));\n}\n/**\n * @description Get the member info for a society\n */\nexport function members(instanceId, api) {\n    return memo(instanceId, () => api.query.society.members.creator.meta.type.isMap\n        ? api.query.society.members.keys().pipe(switchMap((keys) => api.derive.society._members(keys.map(({ args: [accountId] }) => accountId))))\n        : api.query.society.members().pipe(switchMap((members) => api.derive.society._members(members))));\n}\n","import { combineLatest, map, switchMap } from 'rxjs';\nimport { BN, BN_ZERO, objectSpread } from '@polkadot/util';\nimport { firstMemo, memo } from '../util/index.js';\nconst QUERY_OPTS = {\n    withDestination: true,\n    withLedger: true,\n    withNominations: true,\n    withPrefs: true\n};\nfunction groupByEra(list) {\n    return list.reduce((map, { era, value }) => {\n        const key = era.toString();\n        map[key] = (map[key] || BN_ZERO).add(value.unwrap());\n        return map;\n    }, {});\n}\nfunction calculateUnlocking(api, stakingLedger, sessionInfo) {\n    const results = Object\n        .entries(groupByEra((stakingLedger?.unlocking || []).filter(({ era }) => era.unwrap().gt(sessionInfo.activeEra))))\n        .map(([eraString, value]) => ({\n        remainingEras: new BN(eraString).isub(sessionInfo.activeEra),\n        value: api.registry.createType('Balance', value)\n    }));\n    return results.length\n        ? results\n        : undefined;\n}\nfunction redeemableSum(api, stakingLedger, sessionInfo) {\n    return api.registry.createType('Balance', (stakingLedger?.unlocking || []).reduce((total, { era, value }) => {\n        // aligns with https://github.com/paritytech/substrate/blob/fdfdc73f9e64dc47934b72eb9af3e1989e4ba699/frame/staking/src/pallet/mod.rs#L973-L975\n        // (ensure currentEra >= era passed, as per https://github.com/paritytech/substrate/blob/fdfdc73f9e64dc47934b72eb9af3e1989e4ba699/frame/staking/src/lib.rs#L477-L494)\n        // NOTE: Previously we used activeEra >= era, which is incorrect for the last session\n        return era.unwrap().gt(sessionInfo.currentEra)\n            ? total\n            : total.iadd(value.unwrap());\n    }, new BN(0)));\n}\nfunction parseResult(api, sessionInfo, keys, query) {\n    return objectSpread({}, keys, query, {\n        redeemable: redeemableSum(api, query.stakingLedger, sessionInfo),\n        unlocking: calculateUnlocking(api, query.stakingLedger, sessionInfo)\n    });\n}\n/**\n * @description From a list of stashes, fill in all the relevant staking details\n */\nexport function accounts(instanceId, api) {\n    return memo(instanceId, (accountIds, opts = QUERY_OPTS) => api.derive.session.info().pipe(switchMap((sessionInfo) => combineLatest([\n        api.derive.staking.keysMulti(accountIds),\n        api.derive.staking.queryMulti(accountIds, opts)\n    ]).pipe(map(([keys, queries]) => queries.map((q, index) => parseResult(api, sessionInfo, keys[index], q)))))));\n}\n/**\n * @description From a stash, retrieve the controllerId and fill in all the relevant staking details\n */\nexport const account = /*#__PURE__*/ firstMemo((api, accountId, opts) => api.derive.staking.accounts([accountId], opts));\n","import { switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\n/**\n * @description Retrieve the staking overview, including elected and points earned\n */\nexport function currentPoints(instanceId, api) {\n    return memo(instanceId, () => api.derive.session.indexes().pipe(switchMap(({ activeEra }) => api.query.staking.erasRewardPoints(activeEra))));\n}\n","import { map, switchMap } from 'rxjs';\nimport { arrayFlatten } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nconst DEFAULT_FLAGS = { withController: true, withExposure: true, withPrefs: true };\nfunction combineAccounts(nextElected, validators) {\n    return arrayFlatten([nextElected, validators.filter((v) => !nextElected.find((n) => n.eq(v)))]);\n}\nexport function electedInfo(instanceId, api) {\n    return memo(instanceId, (flags = DEFAULT_FLAGS, page = 0) => api.derive.staking.validators().pipe(switchMap(({ nextElected, validators }) => api.derive.staking.queryMulti(combineAccounts(nextElected, validators), flags, page).pipe(map((info) => ({\n        info,\n        nextElected,\n        validators\n    }))))));\n}\n","const mapCache = new Map();\nexport const deriveMapCache = {\n    del: (key) => {\n        mapCache.delete(key);\n    },\n    forEach: (cb) => {\n        for (const [k, v] of mapCache.entries()) {\n            cb(k, v);\n        }\n    },\n    get: (key) => {\n        return mapCache.get(key);\n    },\n    set: (key, value) => {\n        mapCache.set(key, value);\n    }\n};\nexport const deriveNoopCache = {\n    del: () => undefined,\n    forEach: () => undefined,\n    get: () => undefined,\n    set: (_, value) => value\n};\n","import { deriveNoopCache } from './cacheImpl.js';\nconst CHACHE_EXPIRY = 7 * (24 * 60) * (60 * 1000);\nlet deriveCache;\nfunction wrapCache(keyStart, cache) {\n    return {\n        del: (partial) => cache.del(`${keyStart}${partial}`),\n        forEach: cache.forEach,\n        get: (partial) => {\n            const key = `${keyStart}${partial}`;\n            const cached = cache.get(key);\n            if (cached) {\n                cached.x = Date.now();\n                cache.set(key, cached);\n                return cached.v;\n            }\n            return undefined;\n        },\n        set: (partial, v) => {\n            cache.set(`${keyStart}${partial}`, { v, x: Date.now() });\n        }\n    };\n}\nfunction clearCache(cache) {\n    // clear all expired values\n    const now = Date.now();\n    const all = [];\n    cache.forEach((key, { x }) => {\n        ((now - x) > CHACHE_EXPIRY) && all.push(key);\n    });\n    // don't do delete inside loop, just in-case\n    all.forEach((key) => cache.del(key));\n}\nexport function setDeriveCache(prefix = '', cache) {\n    deriveCache = cache\n        ? wrapCache(`derive:${prefix}:`, cache)\n        : deriveNoopCache;\n    if (cache) {\n        clearCache(cache);\n    }\n}\nsetDeriveCache();\nexport { deriveCache };\n","import { deriveCache } from '../util/index.js';\nexport function getEraCache(CACHE_KEY, era, withActive) {\n    const cacheKey = `${CACHE_KEY}-${era.toString()}`;\n    return [\n        cacheKey,\n        withActive\n            ? undefined\n            : deriveCache.get(cacheKey)\n    ];\n}\nexport function getEraMultiCache(CACHE_KEY, eras, withActive) {\n    const cached = withActive\n        ? []\n        : eras\n            .map((e) => deriveCache.get(`${CACHE_KEY}-${e.toString()}`))\n            .filter((v) => !!v);\n    return cached;\n}\nexport function setEraCache(cacheKey, withActive, value) {\n    !withActive && deriveCache.set(cacheKey, value);\n    return value;\n}\nexport function setEraMultiCache(CACHE_KEY, withActive, values) {\n    !withActive && values.forEach((v) => deriveCache.set(`${CACHE_KEY}-${v.era.toString()}`, v));\n    return values;\n}\nexport function filterCachedEras(eras, cached, query) {\n    return eras\n        .map((e) => cached.find(({ era }) => e.eq(era)) ||\n        query.find(({ era }) => e.eq(era)))\n        .filter((e) => !!e);\n}\n","import { BehaviorSubject, combineLatest, map, of, switchMap, tap, toArray } from 'rxjs';\nimport { arrayChunk, arrayFlatten, nextTick } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nconst ERA_CHUNK_SIZE = 14;\nfunction chunkEras(eras, fn) {\n    const chunked = arrayChunk(eras, ERA_CHUNK_SIZE);\n    let index = 0;\n    const subject = new BehaviorSubject(chunked[index]);\n    return subject.pipe(switchMap(fn), tap(() => {\n        nextTick(() => {\n            index++;\n            index === chunked.length\n                ? subject.complete()\n                : subject.next(chunked[index]);\n        });\n    }), toArray(), map(arrayFlatten));\n}\nexport function filterEras(eras, list) {\n    return eras.filter((e) => !list.some(({ era }) => e.eq(era)));\n}\nexport function erasHistoricApply(fn) {\n    return (instanceId, api) => \n    // Cannot quite get the typing right, but it is right in the code\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    memo(instanceId, (withActive = false) => api.derive.staking.erasHistoric(withActive).pipe(switchMap((e) => api.derive.staking[fn](e, withActive))));\n}\nexport function erasHistoricApplyAccount(fn) {\n    return (instanceId, api) => \n    // Cannot quite get the typing right, but it is right in the code\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    memo(instanceId, (accountId, withActive = false, page) => api.derive.staking.erasHistoric(withActive).pipe(switchMap((e) => api.derive.staking[fn](accountId, e, withActive, page || 0))));\n}\nexport function singleEra(fn) {\n    return (instanceId, api) => \n    // Cannot quite get the typing right, but it is right in the code\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    memo(instanceId, (era) => api.derive.staking[fn](era, true));\n}\nexport function combineEras(fn) {\n    return (instanceId, api) => \n    // Cannot quite get the typing right, but it is right in the code\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    memo(instanceId, (eras, withActive) => !eras.length\n        ? of([])\n        : chunkEras(eras, (eras) => combineLatest(eras.map((e) => api.derive.staking[fn](e, withActive)))));\n}\n","import { map, of } from 'rxjs';\nimport { memo } from '../util/index.js';\nimport { getEraCache, setEraCache } from './cache.js';\nimport { combineEras, erasHistoricApply, singleEra } from './util.js';\nconst CACHE_KEY = 'eraExposure';\nfunction mapStakersClipped(era, stakers) {\n    const nominators = {};\n    const validators = {};\n    stakers.forEach(([key, exposure]) => {\n        const validatorId = key.args[1].toString();\n        validators[validatorId] = exposure;\n        exposure.others.forEach(({ who }, validatorIndex) => {\n            const nominatorId = who.toString();\n            nominators[nominatorId] = nominators[nominatorId] || [];\n            nominators[nominatorId].push({ validatorId, validatorIndex });\n        });\n    });\n    return { era, nominators, validators };\n}\nfunction mapStakersPaged(era, stakers) {\n    const nominators = {};\n    const validators = {};\n    stakers.forEach(([key, exposureOpt]) => {\n        if (exposureOpt.isSome) {\n            const validatorId = key.args[1].toString();\n            const exposure = exposureOpt.unwrap();\n            validators[validatorId] = exposure;\n            exposure.others.forEach(({ who }, validatorIndex) => {\n                const nominatorId = who.toString();\n                nominators[nominatorId] = nominators[nominatorId] || [];\n                nominators[nominatorId].push({ validatorId, validatorIndex });\n            });\n        }\n    });\n    return { era, nominators, validators };\n}\n/**\n * erasStakersClipped will be deprecated and replaced with erasStakersPaged. Therefore support is given for both\n * storage queries until erasStakersClipped has been completely out of use.\n */\nexport function _eraExposure(instanceId, api) {\n    return memo(instanceId, (era, withActive = false) => {\n        const [cacheKey, cached] = getEraCache(CACHE_KEY, era, withActive);\n        return cached\n            ? of(cached)\n            : api.query.staking.erasStakersPaged\n                ? api.query.staking.erasStakersPaged.entries(era).pipe(map((r) => setEraCache(cacheKey, withActive, mapStakersPaged(era, r))))\n                : api.query.staking.erasStakersClipped.entries(era).pipe(map((r) => setEraCache(cacheKey, withActive, mapStakersClipped(era, r))));\n    });\n}\nexport const eraExposure = /*#__PURE__*/ singleEra('_eraExposure');\nexport const _erasExposure = /*#__PURE__*/ combineEras('_eraExposure');\nexport const erasExposure = /*#__PURE__*/ erasHistoricApply('_erasExposure');\n","import { combineLatest, map, of } from 'rxjs';\nimport { BN_ONE, BN_ZERO } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nexport function erasHistoric(instanceId, api) {\n    return memo(instanceId, (withActive) => combineLatest([\n        api.query.staking.activeEra(),\n        api.consts.staking.historyDepth\n            ? of(api.consts.staking.historyDepth)\n            : api.query.staking['historyDepth']()\n    ]).pipe(map(([activeEraOpt, historyDepth]) => {\n        const result = [];\n        const max = historyDepth.toNumber();\n        const activeEra = activeEraOpt.unwrapOrDefault().index;\n        let lastEra = activeEra;\n        while (lastEra.gte(BN_ZERO) && (result.length < max)) {\n            if ((lastEra !== activeEra) || (withActive === true)) {\n                result.push(api.registry.createType('EraIndex', lastEra));\n            }\n            lastEra = lastEra.sub(BN_ONE);\n        }\n        // go from oldest to newest\n        return result.reverse();\n    })));\n}\n","import { map, of } from 'rxjs';\nimport { BN_ZERO } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nimport { filterCachedEras, getEraMultiCache, setEraMultiCache } from './cache.js';\nimport { erasHistoricApply, filterEras } from './util.js';\nconst CACHE_KEY = 'eraPoints';\nfunction mapValidators({ individual }) {\n    return [...individual.entries()]\n        .filter(([, points]) => points.gt(BN_ZERO))\n        .reduce((result, [validatorId, points]) => {\n        result[validatorId.toString()] = points;\n        return result;\n    }, {});\n}\nfunction mapPoints(eras, points) {\n    return eras.map((era, index) => ({\n        era,\n        eraPoints: points[index].total,\n        validators: mapValidators(points[index])\n    }));\n}\nexport function _erasPoints(instanceId, api) {\n    return memo(instanceId, (eras, withActive) => {\n        if (!eras.length) {\n            return of([]);\n        }\n        const cached = getEraMultiCache(CACHE_KEY, eras, withActive);\n        const remaining = filterEras(eras, cached);\n        return !remaining.length\n            ? of(cached)\n            : api.query.staking.erasRewardPoints.multi(remaining).pipe(map((p) => filterCachedEras(eras, cached, setEraMultiCache(CACHE_KEY, withActive, mapPoints(remaining, p)))));\n    });\n}\nexport const erasPoints = /*#__PURE__*/ erasHistoricApply('_erasPoints');\n","import { map, of } from 'rxjs';\nimport { memo } from '../util/index.js';\nimport { getEraCache, setEraCache } from './cache.js';\nimport { combineEras, erasHistoricApply, singleEra } from './util.js';\nconst CACHE_KEY = 'eraPrefs';\nfunction mapPrefs(era, all) {\n    const validators = {};\n    all.forEach(([key, prefs]) => {\n        validators[key.args[1].toString()] = prefs;\n    });\n    return { era, validators };\n}\nexport function _eraPrefs(instanceId, api) {\n    return memo(instanceId, (era, withActive) => {\n        const [cacheKey, cached] = getEraCache(CACHE_KEY, era, withActive);\n        return cached\n            ? of(cached)\n            : api.query.staking.erasValidatorPrefs.entries(era).pipe(map((r) => setEraCache(cacheKey, withActive, mapPrefs(era, r))));\n    });\n}\nexport const eraPrefs = /*#__PURE__*/ singleEra('_eraPrefs');\nexport const _erasPrefs = /*#__PURE__*/ combineEras('_eraPrefs');\nexport const erasPrefs = /*#__PURE__*/ erasHistoricApply('_erasPrefs');\n","import { map, of } from 'rxjs';\nimport { memo } from '../util/index.js';\nimport { filterCachedEras, getEraMultiCache, setEraMultiCache } from './cache.js';\nimport { erasHistoricApply, filterEras } from './util.js';\nconst CACHE_KEY = 'eraRewards';\nfunction mapRewards(eras, optRewards) {\n    return eras.map((era, index) => ({\n        era,\n        eraReward: optRewards[index].unwrapOrDefault()\n    }));\n}\nexport function _erasRewards(instanceId, api) {\n    return memo(instanceId, (eras, withActive) => {\n        if (!eras.length) {\n            return of([]);\n        }\n        const cached = getEraMultiCache(CACHE_KEY, eras, withActive);\n        const remaining = filterEras(eras, cached);\n        if (!remaining.length) {\n            return of(cached);\n        }\n        return api.query.staking.erasValidatorReward.multi(remaining).pipe(map((r) => filterCachedEras(eras, cached, setEraMultiCache(CACHE_KEY, withActive, mapRewards(remaining, r)))));\n    });\n}\nexport const erasRewards = /*#__PURE__*/ erasHistoricApply('_erasRewards');\n","import { combineLatest, map, of } from 'rxjs';\nimport { memo } from '../util/index.js';\nimport { getEraCache, setEraCache } from './cache.js';\nimport { combineEras, erasHistoricApply, singleEra } from './util.js';\nconst CACHE_KEY = 'eraSlashes';\nfunction mapSlashes(era, noms, vals) {\n    const nominators = {};\n    const validators = {};\n    noms.forEach(([key, optBalance]) => {\n        nominators[key.args[1].toString()] = optBalance.unwrap();\n    });\n    vals.forEach(([key, optRes]) => {\n        validators[key.args[1].toString()] = optRes.unwrapOrDefault()[1];\n    });\n    return { era, nominators, validators };\n}\nexport function _eraSlashes(instanceId, api) {\n    return memo(instanceId, (era, withActive) => {\n        const [cacheKey, cached] = getEraCache(CACHE_KEY, era, withActive);\n        return cached\n            ? of(cached)\n            : combineLatest([\n                api.query.staking.nominatorSlashInEra.entries(era),\n                api.query.staking.validatorSlashInEra.entries(era)\n            ]).pipe(map(([n, v]) => setEraCache(cacheKey, withActive, mapSlashes(era, n, v))));\n    });\n}\nexport const eraSlashes = /*#__PURE__*/ singleEra('_eraSlashes');\nexport const _erasSlashes = /*#__PURE__*/ combineEras('_eraSlashes');\nexport const erasSlashes = /*#__PURE__*/ erasHistoricApply('_erasSlashes');\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { firstMemo, memo } from '../util/index.js';\nfunction extractsIds(stashId, queuedKeys, nextKeys) {\n    const sessionIds = (queuedKeys.find(([currentId]) => currentId.eq(stashId)) || [undefined, []])[1];\n    const nextSessionIds = nextKeys.unwrapOr([]);\n    return {\n        nextSessionIds: Array.isArray(nextSessionIds)\n            ? nextSessionIds\n            : [...nextSessionIds.values()],\n        sessionIds: Array.isArray(sessionIds)\n            ? sessionIds\n            : [...sessionIds.values()]\n    };\n}\nexport const keys = /*#__PURE__*/ firstMemo((api, stashId) => api.derive.staking.keysMulti([stashId]));\nexport function keysMulti(instanceId, api) {\n    return memo(instanceId, (stashIds) => stashIds.length\n        ? api.query.session.queuedKeys().pipe(switchMap((queuedKeys) => combineLatest([\n            of(queuedKeys),\n            api.consts['session']?.['dedupKeyPrefix']\n                ? api.query.session.nextKeys.multi(stashIds.map((s) => [api.consts['session']['dedupKeyPrefix'], s]))\n                : combineLatest(stashIds.map((s) => api.query.session.nextKeys(s)))\n        ])), map(([queuedKeys, nextKeys]) => stashIds.map((stashId, index) => extractsIds(stashId, queuedKeys, nextKeys[index]))))\n        : of([]));\n}\n","import { combineLatest, map } from 'rxjs';\nimport { objectSpread } from '@polkadot/util';\nimport { memo } from '../util/index.js';\n/**\n * @description Retrieve the staking overview, including elected and points earned\n */\nexport function overview(instanceId, api) {\n    return memo(instanceId, () => combineLatest([\n        api.derive.session.indexes(),\n        api.derive.staking.validators()\n    ]).pipe(map(([indexes, { nextElected, validators }]) => objectSpread({}, indexes, {\n        nextElected,\n        validators\n    }))));\n}\n","import { combineLatest, map, of } from 'rxjs';\nimport { firstMemo, memo } from '../util/index.js';\nimport { erasHistoricApplyAccount } from './util.js';\nexport function _ownExposures(instanceId, api) {\n    return memo(instanceId, (accountId, eras, _withActive, page) => {\n        const emptyStakingExposure = api.registry.createType('Exposure');\n        // The reason we don't explicitly make the actual types is for compatibility. If the chain doesn't have the noted type it will fail\n        // on construction. Therefore we just make an empty option.\n        const emptyOptionPage = api.registry.createType('Option<Null>');\n        const emptyOptionMeta = api.registry.createType('Option<Null>');\n        return eras.length\n            ? combineLatest([\n                // Backwards and forward compat for historical integrity when using `erasHistoricApplyAccount`\n                api.query.staking.erasStakersClipped\n                    ? combineLatest(eras.map((e) => api.query.staking.erasStakersClipped(e, accountId)))\n                    : of(eras.map((_) => emptyStakingExposure)),\n                api.query.staking.erasStakers\n                    ? combineLatest(eras.map((e) => api.query.staking.erasStakers(e, accountId)))\n                    : of(eras.map((_) => emptyStakingExposure)),\n                api.query.staking.erasStakersPaged\n                    ? combineLatest(eras.map((e) => api.query.staking.erasStakersPaged(e, accountId, page)))\n                    : of(eras.map((_) => emptyOptionPage)),\n                api.query.staking.erasStakersOverview\n                    ? combineLatest(eras.map((e) => api.query.staking.erasStakersOverview(e, accountId)))\n                    : of(eras.map((_) => emptyOptionMeta))\n            ]).pipe(map(([clp, exp, paged, expMeta]) => eras.map((era, index) => ({ clipped: clp[index], era, exposure: exp[index], exposureMeta: expMeta[index], exposurePaged: paged[index] }))))\n            : of([]);\n    });\n}\nexport const ownExposure = /*#__PURE__*/ firstMemo((api, accountId, era, page) => api.derive.staking._ownExposures(accountId, [era], true, page || 0));\nexport const ownExposures = /*#__PURE__*/ erasHistoricApplyAccount('_ownExposures');\n","import { combineLatest, map, of } from 'rxjs';\nimport { firstMemo, memo } from '../util/index.js';\nimport { erasHistoricApplyAccount } from './util.js';\nexport function _ownSlashes(instanceId, api) {\n    return memo(instanceId, (accountId, eras, _withActive) => eras.length\n        ? combineLatest([\n            combineLatest(eras.map((e) => api.query.staking.validatorSlashInEra(e, accountId))),\n            combineLatest(eras.map((e) => api.query.staking.nominatorSlashInEra(e, accountId)))\n        ]).pipe(map(([vals, noms]) => eras.map((era, index) => ({\n            era,\n            total: vals[index].isSome\n                ? vals[index].unwrap()[1]\n                : noms[index].unwrapOrDefault()\n        }))))\n        : of([]));\n}\nexport const ownSlash = /*#__PURE__*/ firstMemo((api, accountId, era) => api.derive.staking._ownSlashes(accountId, [era], true));\nexport const ownSlashes = /*#__PURE__*/ erasHistoricApplyAccount('_ownSlashes');\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { firstMemo, memo } from '../util/index.js';\nfunction rewardDestinationCompat(rewardDestination) {\n    // We ensure the type is an Option by checking if isSome is a boolean. When isSome doesn't exist it will always return undefined.\n    return typeof rewardDestination.isSome === 'boolean'\n        ? rewardDestination.unwrapOr(null)\n        : rewardDestination;\n}\nfunction filterClaimedRewards(api, cl) {\n    return api.registry.createType('Vec<u32>', cl.filter((c) => c !== -1));\n}\nfunction filterRewards(stashIds, eras, claimedRewards, stakersOverview) {\n    const claimedData = {};\n    const overviewData = {};\n    const ids = stashIds.map((i) => i.toString());\n    claimedRewards.forEach(([keys, rewards]) => {\n        const id = keys.args[1].toString();\n        const era = keys.args[0].toNumber();\n        if (ids.includes(id)) {\n            if (claimedData[id]) {\n                claimedData[id].set(era, rewards.toArray());\n            }\n            else {\n                claimedData[id] = new Map();\n                claimedData[id].set(era, rewards.toArray());\n            }\n        }\n    });\n    stakersOverview.forEach(([keys, overview]) => {\n        const id = keys.args[1].toString();\n        const era = keys.args[0].toNumber();\n        if (ids.includes(id) && overview.isSome) {\n            if (overviewData[id]) {\n                overviewData[id].set(era, overview.unwrap().pageCount);\n            }\n            else {\n                overviewData[id] = new Map();\n                overviewData[id].set(era, overview.unwrap().pageCount);\n            }\n        }\n    });\n    return stashIds.map((id) => {\n        const rewardsPerEra = claimedData[id.toString()];\n        const overviewPerEra = overviewData[id.toString()];\n        return eras.map((era) => {\n            if (rewardsPerEra && rewardsPerEra.has(era) && overviewPerEra && overviewPerEra.has(era)) {\n                const rewards = rewardsPerEra.get(era);\n                const pageCount = overviewPerEra.get(era);\n                return rewards.length === pageCount.toNumber()\n                    ? era\n                    : -1;\n            }\n            return -1;\n        });\n    });\n}\nfunction parseDetails(api, stashId, controllerIdOpt, nominatorsOpt, rewardDestinationOpts, validatorPrefs, exposure, stakingLedgerOpt, exposureMeta, claimedRewards, exposureEraStakers) {\n    return {\n        accountId: stashId,\n        claimedRewardsEras: filterClaimedRewards(api, claimedRewards),\n        controllerId: controllerIdOpt?.unwrapOr(null) || null,\n        exposureEraStakers,\n        exposureMeta,\n        exposurePaged: exposure,\n        nominators: nominatorsOpt.isSome\n            ? nominatorsOpt.unwrap().targets\n            : [],\n        rewardDestination: rewardDestinationCompat(rewardDestinationOpts),\n        stakingLedger: stakingLedgerOpt.unwrapOrDefault(),\n        stashId,\n        validatorPrefs\n    };\n}\nfunction getLedgers(api, optIds, { withLedger = false }) {\n    const ids = optIds\n        .filter((o) => withLedger && !!o && o.isSome)\n        .map((o) => o.unwrap());\n    const emptyLed = api.registry.createType('Option<StakingLedger>');\n    return (ids.length\n        ? combineLatest(ids.map((s) => api.query.staking.ledger(s)))\n        : of([])).pipe(map((optLedgers) => {\n        let offset = -1;\n        return optIds.map((o) => o && o.isSome\n            ? optLedgers[++offset] || emptyLed\n            : emptyLed);\n    }));\n}\nfunction getStashInfo(api, stashIds, activeEra, { withClaimedRewardsEras, withController, withDestination, withExposure, withExposureErasStakersLegacy, withExposureMeta, withLedger, withNominations, withPrefs }, page) {\n    const emptyNoms = api.registry.createType('Option<Nominations>');\n    const emptyRewa = api.registry.createType('RewardDestination');\n    const emptyExpoEraStakers = api.registry.createType('Exposure');\n    const emptyPrefs = api.registry.createType('ValidatorPrefs');\n    // The reason we don't explicitly make the actual types is for compatibility. If the chain doesn't have the noted type it will fail\n    // on construction. Therefore we just make an empty option.\n    const emptyExpo = api.registry.createType('Option<Null>');\n    const emptyExpoMeta = api.registry.createType('Option<Null>');\n    const emptyClaimedRewards = [-1];\n    const depth = Number(api.consts.staking.historyDepth.toNumber());\n    const eras = new Array(depth).fill(0).map((_, idx) => {\n        if (idx === 0) {\n            return activeEra.toNumber() - 1;\n        }\n        return activeEra.toNumber() - idx - 1;\n    });\n    return combineLatest([\n        withController || withLedger\n            ? combineLatest(stashIds.map((s) => api.query.staking.bonded(s)))\n            : of(stashIds.map(() => null)),\n        withNominations\n            ? combineLatest(stashIds.map((s) => api.query.staking.nominators(s)))\n            : of(stashIds.map(() => emptyNoms)),\n        withDestination\n            ? combineLatest(stashIds.map((s) => api.query.staking.payee(s)))\n            : of(stashIds.map(() => emptyRewa)),\n        withPrefs\n            ? combineLatest(stashIds.map((s) => api.query.staking.validators(s)))\n            : of(stashIds.map(() => emptyPrefs)),\n        withExposure && api.query.staking.erasStakersPaged\n            ? combineLatest(stashIds.map((s) => api.query.staking.erasStakersPaged(activeEra, s, page)))\n            : of(stashIds.map(() => emptyExpo)),\n        withExposureMeta && api.query.staking.erasStakersOverview\n            ? combineLatest(stashIds.map((s) => api.query.staking.erasStakersOverview(activeEra, s)))\n            : of(stashIds.map(() => emptyExpoMeta)),\n        withClaimedRewardsEras && api.query.staking.claimedRewards\n            ? combineLatest([\n                api.query.staking.claimedRewards.entries(),\n                api.query.staking.erasStakersOverview.entries()\n            ]).pipe(map(([rewardsStorageVec, overviewStorageVec]) => filterRewards(stashIds, eras, rewardsStorageVec, overviewStorageVec)))\n            : of(stashIds.map(() => emptyClaimedRewards)),\n        withExposureErasStakersLegacy && api.query.staking.erasStakers\n            ? combineLatest(stashIds.map((s) => api.query.staking.erasStakers(activeEra, s)))\n            : of(stashIds.map(() => emptyExpoEraStakers))\n    ]);\n}\nfunction getBatch(api, activeEra, stashIds, flags, page) {\n    return getStashInfo(api, stashIds, activeEra, flags, page).pipe(switchMap(([controllerIdOpt, nominatorsOpt, rewardDestination, validatorPrefs, exposure, exposureMeta, claimedRewardsEras, exposureEraStakers]) => getLedgers(api, controllerIdOpt, flags).pipe(map((stakingLedgerOpts) => stashIds.map((stashId, index) => parseDetails(api, stashId, controllerIdOpt[index], nominatorsOpt[index], rewardDestination[index], validatorPrefs[index], exposure[index], stakingLedgerOpts[index], exposureMeta[index], claimedRewardsEras[index], exposureEraStakers[index]))))));\n}\n/**\n * @description From a stash, retrieve the controllerId and all relevant details\n */\nexport const query = /*#__PURE__*/ firstMemo((api, accountId, flags, page) => api.derive.staking.queryMulti([accountId], flags, page));\nexport function queryMulti(instanceId, api) {\n    return memo(instanceId, (accountIds, flags, page) => api.derive.session.indexes().pipe(switchMap(({ activeEra }) => {\n        const stashIds = accountIds.map((a) => api.registry.createType('AccountId', a));\n        const p = page || 0;\n        return stashIds.length\n            ? getBatch(api, activeEra, stashIds, flags, p)\n            : of([]);\n    })));\n}\n","import { map, switchMap } from 'rxjs';\nimport { firstMemo, memo } from '../util/index.js';\nexport function _stakerExposures(instanceId, api) {\n    return memo(instanceId, (accountIds, eras, withActive = false) => {\n        const stakerIds = accountIds.map((a) => api.registry.createType('AccountId', a).toString());\n        return api.derive.staking._erasExposure(eras, withActive).pipe(map((exposures) => stakerIds.map((stakerId) => exposures.map(({ era, nominators: allNominators, validators: allValidators }) => {\n            const isValidator = !!allValidators[stakerId];\n            const validators = {};\n            const nominating = allNominators[stakerId] || [];\n            if (isValidator) {\n                validators[stakerId] = allValidators[stakerId];\n            }\n            else if (nominating) {\n                nominating.forEach(({ validatorId }) => {\n                    validators[validatorId] = allValidators[validatorId];\n                });\n            }\n            return { era, isEmpty: !Object.keys(validators).length, isValidator, nominating, validators };\n        }))));\n    });\n}\nexport function stakerExposures(instanceId, api) {\n    return memo(instanceId, (accountIds, withActive = false) => api.derive.staking.erasHistoric(withActive).pipe(switchMap((eras) => api.derive.staking._stakerExposures(accountIds, eras, withActive))));\n}\nexport const stakerExposure = /*#__PURE__*/ firstMemo((api, accountId, withActive) => api.derive.staking.stakerExposures([accountId], withActive));\n","import { map } from 'rxjs';\nimport { memo } from '../util/index.js';\nimport { erasHistoricApplyAccount } from './util.js';\nexport function _stakerPoints(instanceId, api) {\n    return memo(instanceId, (accountId, eras, withActive) => {\n        const stakerId = api.registry.createType('AccountId', accountId).toString();\n        return api.derive.staking._erasPoints(eras, withActive).pipe(map((points) => points.map(({ era, eraPoints, validators }) => ({\n            era,\n            eraPoints,\n            points: validators[stakerId] || api.registry.createType('RewardPoint')\n        }))));\n    });\n}\nexport const stakerPoints = /*#__PURE__*/ erasHistoricApplyAccount('_stakerPoints');\n","import { map } from 'rxjs';\nimport { memo } from '../util/index.js';\nimport { erasHistoricApplyAccount } from './util.js';\nexport function _stakerPrefs(instanceId, api) {\n    return memo(instanceId, (accountId, eras, _withActive) => api.query.staking.erasValidatorPrefs.multi(eras.map((e) => [e, accountId])).pipe(map((all) => all.map((validatorPrefs, index) => ({\n        era: eras[index],\n        validatorPrefs\n    })))));\n}\nexport const stakerPrefs = /*#__PURE__*/ erasHistoricApplyAccount('_stakerPrefs');\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { BN_BILLION, BN_ZERO, objectSpread } from '@polkadot/util';\nimport { firstMemo, memo } from '../util/index.js';\nfunction extractCompatRewards(claimedRewardsEras, ledger) {\n    const l = ledger\n        ? (ledger.legacyClaimedRewards ||\n            ledger.claimedRewards).toArray()\n        : [];\n    return claimedRewardsEras.toArray().concat(l);\n}\nfunction parseRewards(api, stashId, [erasPoints, erasPrefs, erasRewards], exposures) {\n    return exposures.map(({ era, isEmpty, isValidator, nominating, validators: eraValidators }) => {\n        const { eraPoints, validators: allValPoints } = erasPoints.find((p) => p.era.eq(era)) || { eraPoints: BN_ZERO, validators: {} };\n        const { eraReward } = erasRewards.find((r) => r.era.eq(era)) || { eraReward: api.registry.createType('Balance') };\n        const { validators: allValPrefs } = erasPrefs.find((p) => p.era.eq(era)) || { validators: {} };\n        const validators = {};\n        const stakerId = stashId.toString();\n        Object.entries(eraValidators).forEach(([validatorId, exposure]) => {\n            const valPoints = allValPoints[validatorId] || BN_ZERO;\n            const valComm = allValPrefs[validatorId]?.commission.unwrap() || BN_ZERO;\n            const expTotal = exposure.total\n                ? exposure.total?.unwrap()\n                : exposure.pageTotal\n                    ? exposure.pageTotal?.unwrap()\n                    : BN_ZERO;\n            let avail = BN_ZERO;\n            let value;\n            if (!(expTotal.isZero() || valPoints.isZero() || eraPoints.isZero())) {\n                avail = eraReward.mul(valPoints).div(eraPoints);\n                const valCut = valComm.mul(avail).div(BN_BILLION);\n                let staked;\n                if (validatorId === stakerId) {\n                    if (exposure.own) {\n                        staked = exposure.own.unwrap();\n                    }\n                    else {\n                        const expAccount = exposure.others.find(({ who }) => who.eq(validatorId));\n                        staked = expAccount\n                            ? expAccount.value.unwrap()\n                            : BN_ZERO;\n                    }\n                }\n                else {\n                    const stakerExp = exposure.others.find(({ who }) => who.eq(stakerId));\n                    staked = stakerExp\n                        ? stakerExp.value.unwrap()\n                        : BN_ZERO;\n                }\n                value = avail.sub(valCut).imul(staked).div(expTotal).iadd(validatorId === stakerId ? valCut : BN_ZERO);\n            }\n            validators[validatorId] = {\n                total: api.registry.createType('Balance', avail),\n                value: api.registry.createType('Balance', value)\n            };\n        });\n        return {\n            era,\n            eraReward,\n            isEmpty,\n            isValidator,\n            nominating,\n            validators\n        };\n    });\n}\nfunction allUniqValidators(rewards) {\n    return rewards.reduce(([all, perStash], rewards) => {\n        const uniq = [];\n        perStash.push(uniq);\n        rewards.forEach(({ validators }) => Object.keys(validators).forEach((validatorId) => {\n            if (!uniq.includes(validatorId)) {\n                uniq.push(validatorId);\n                if (!all.includes(validatorId)) {\n                    all.push(validatorId);\n                }\n            }\n        }));\n        return [all, perStash];\n    }, [[], []]);\n}\nfunction removeClaimed(validators, queryValidators, reward, claimedRewardsEras) {\n    const rm = [];\n    Object.keys(reward.validators).forEach((validatorId) => {\n        const index = validators.indexOf(validatorId);\n        if (index !== -1) {\n            const valLedger = queryValidators[index].stakingLedger;\n            if (extractCompatRewards(claimedRewardsEras, valLedger).some((e) => reward.era.eq(e))) {\n                rm.push(validatorId);\n            }\n        }\n    });\n    rm.forEach((validatorId) => {\n        delete reward.validators[validatorId];\n    });\n}\nfunction filterRewards(eras, valInfo, { claimedRewardsEras, rewards, stakingLedger }) {\n    const filter = eras.filter((e) => !extractCompatRewards(claimedRewardsEras, stakingLedger).some((s) => s.eq(e)));\n    const validators = valInfo.map(([v]) => v);\n    const queryValidators = valInfo.map(([, q]) => q);\n    return rewards\n        .filter(({ isEmpty }) => !isEmpty)\n        .filter((reward) => {\n        if (!filter.some((e) => reward.era.eq(e))) {\n            return false;\n        }\n        removeClaimed(validators, queryValidators, reward, claimedRewardsEras);\n        return true;\n    })\n        .filter(({ validators }) => Object.keys(validators).length !== 0)\n        .map((reward) => objectSpread({}, reward, {\n        nominators: reward.nominating.filter((n) => reward.validators[n.validatorId])\n    }));\n}\nexport function _stakerRewardsEras(instanceId, api) {\n    return memo(instanceId, (eras, withActive = false) => combineLatest([\n        api.derive.staking._erasPoints(eras, withActive),\n        api.derive.staking._erasPrefs(eras, withActive),\n        api.derive.staking._erasRewards(eras, withActive)\n    ]));\n}\nexport function _stakerRewards(instanceId, api) {\n    return memo(instanceId, (accountIds, eras, withActive = false) => combineLatest([\n        api.derive.staking.queryMulti(accountIds, { withClaimedRewardsEras: true, withLedger: true }),\n        api.derive.staking._stakerExposures(accountIds, eras, withActive),\n        api.derive.staking._stakerRewardsEras(eras, withActive)\n    ]).pipe(switchMap(([queries, exposures, erasResult]) => {\n        const allRewards = queries.map(({ claimedRewardsEras, stakingLedger, stashId }, index) => (!stashId || (!stakingLedger && !claimedRewardsEras))\n            ? []\n            : parseRewards(api, stashId, erasResult, exposures[index]));\n        if (withActive) {\n            return of(allRewards);\n        }\n        const [allValidators, stashValidators] = allUniqValidators(allRewards);\n        return api.derive.staking.queryMulti(allValidators, { withClaimedRewardsEras: true, withLedger: true }).pipe(map((queriedVals) => queries.map(({ claimedRewardsEras, stakingLedger }, index) => filterRewards(eras, stashValidators[index]\n            .map((validatorId) => [\n            validatorId,\n            queriedVals.find((q) => q.accountId.eq(validatorId))\n        ])\n            .filter((v) => !!v[1]), {\n            claimedRewardsEras,\n            rewards: allRewards[index],\n            stakingLedger\n        }))));\n    })));\n}\nexport const stakerRewards = /*#__PURE__*/ firstMemo((api, accountId, withActive) => api.derive.staking.erasHistoric(withActive).pipe(switchMap((eras) => api.derive.staking._stakerRewards([accountId], eras, withActive))));\nexport function stakerRewardsMultiEras(instanceId, api) {\n    return memo(instanceId, (accountIds, eras) => accountIds.length && eras.length\n        ? api.derive.staking._stakerRewards(accountIds, eras, false)\n        : of([]));\n}\nexport function stakerRewardsMulti(instanceId, api) {\n    return memo(instanceId, (accountIds, withActive = false) => api.derive.staking.erasHistoric(withActive).pipe(switchMap((eras) => api.derive.staking.stakerRewardsMultiEras(accountIds, eras))));\n}\n","import { map } from 'rxjs';\nimport { memo } from '../util/index.js';\nimport { erasHistoricApplyAccount } from './util.js';\nexport function _stakerSlashes(instanceId, api) {\n    return memo(instanceId, (accountId, eras, withActive) => {\n        const stakerId = api.registry.createType('AccountId', accountId).toString();\n        return api.derive.staking._erasSlashes(eras, withActive).pipe(map((slashes) => slashes.map(({ era, nominators, validators }) => ({\n            era,\n            total: nominators[stakerId] || validators[stakerId] || api.registry.createType('Balance')\n        }))));\n    });\n}\nexport const stakerSlashes = /*#__PURE__*/ erasHistoricApplyAccount('_stakerSlashes');\n","import { map, startWith, switchMap } from 'rxjs';\nimport { drr, memo } from '../util/index.js';\nfunction onBondedEvent(api) {\n    let current = Date.now();\n    return api.query.system.events().pipe(map((events) => {\n        current = events.filter(({ event, phase }) => {\n            try {\n                return phase.isApplyExtrinsic &&\n                    event.section === 'staking' &&\n                    event.method === 'Bonded';\n            }\n            catch {\n                return false;\n            }\n        })\n            ? Date.now()\n            : current;\n        return current;\n    }), startWith(current), drr({ skipTimeout: true }));\n}\n/**\n * @description Retrieve the list of all validator stashes\n */\nexport function stashes(instanceId, api) {\n    return memo(instanceId, () => onBondedEvent(api).pipe(switchMap(() => api.query.staking.validators.keys()), map((keys) => keys.map(({ args: [v] }) => v).filter((a) => a))));\n}\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\nexport function nextElected(instanceId, api) {\n    return memo(instanceId, () => \n    // Compatibility for future generation changes in staking.\n    api.query.staking.erasStakersPaged\n        ? api.derive.session.indexes().pipe(\n        // only populate for next era in the last session, so track both here - entries are not\n        // subscriptions, so we need a trigger - currentIndex acts as that trigger to refresh\n        switchMap(({ currentEra }) => api.query.staking.erasStakersPaged.keys(currentEra)), \n        // Dedupe any duplicates\n        map((keys) => [...new Set(keys.map(({ args: [, accountId] }) => accountId.toString()))].map((a) => api.registry.createType('AccountId', a))))\n        : api.query.staking.erasStakers\n            ? api.derive.session.indexes().pipe(\n            // only populate for next era in the last session, so track both here - entries are not\n            // subscriptions, so we need a trigger - currentIndex acts as that trigger to refresh\n            switchMap(({ currentEra }) => api.query.staking.erasStakers.keys(currentEra)), \n            // Dedupe any duplicates\n            map((keys) => [...new Set(keys.map(({ args: [, accountId] }) => accountId.toString()))].map((a) => api.registry.createType('AccountId', a))))\n            : api.query.staking['currentElected']());\n}\n/**\n * @description Retrieve latest list of validators\n */\nexport function validators(instanceId, api) {\n    return memo(instanceId, () => \n    // Sadly the node-template is (for some obscure reason) not comprehensive, so while the derive works\n    // in all actual real-world deployed chains, it does create some confusion for limited template chains\n    combineLatest([\n        api.query.session\n            ? api.query.session.validators()\n            : of([]),\n        api.query.staking\n            ? api.derive.staking.nextElected()\n            : of([])\n    ]).pipe(map(([validators, nextElected]) => ({\n        nextElected: nextElected.length\n            ? nextElected\n            : validators,\n        validators\n    }))));\n}\n","import { combineLatest, map, switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\nconst DEFAULT_FLAGS = { withController: true, withPrefs: true };\nexport function waitingInfo(instanceId, api) {\n    return memo(instanceId, (flags = DEFAULT_FLAGS) => combineLatest([\n        api.derive.staking.validators(),\n        api.derive.staking.stashes()\n    ]).pipe(switchMap(([{ nextElected }, stashes]) => {\n        const elected = nextElected.map((a) => a.toString());\n        const waiting = stashes.filter((v) => !elected.includes(v.toString()));\n        return api.derive.staking.queryMulti(waiting, flags).pipe(map((info) => ({\n            info,\n            waiting\n        })));\n    })));\n}\n","import { hasProposals as collectiveHasProposals, members as collectiveMembers, prime as collectivePrime, proposal as collectiveProposal, proposalCount as collectiveProposalCount, proposalHashes as collectiveProposalHashes, proposals as collectiveProposals } from '../collective/index.js';\nexport const members = /*#__PURE__*/ collectiveMembers('technicalCommittee');\nexport const hasProposals = /*#__PURE__*/ collectiveHasProposals('technicalCommittee');\nexport const proposal = /*#__PURE__*/ collectiveProposal('technicalCommittee');\nexport const proposalCount = /*#__PURE__*/ collectiveProposalCount('technicalCommittee');\nexport const proposalHashes = /*#__PURE__*/ collectiveProposalHashes('technicalCommittee');\nexport const proposals = /*#__PURE__*/ collectiveProposals('technicalCommittee');\nexport const prime = /*#__PURE__*/ collectivePrime('technicalCommittee');\n","import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\nfunction parseResult(api, { allIds, allProposals, approvalIds, councilProposals, proposalCount }) {\n    const approvals = [];\n    const proposals = [];\n    const councilTreasury = councilProposals.filter(({ proposal }) => proposal && (api.tx.treasury.approveProposal.is(proposal) ||\n        api.tx.treasury.rejectProposal.is(proposal)));\n    allIds.forEach((id, index) => {\n        if (allProposals[index].isSome) {\n            const council = councilTreasury\n                .filter(({ proposal }) => proposal && id.eq(proposal.args[0]))\n                .sort((a, b) => a.proposal && b.proposal\n                ? a.proposal.method.localeCompare(b.proposal.method)\n                : a.proposal\n                    ? -1\n                    : 1);\n            const isApproval = approvalIds.some((approvalId) => approvalId.eq(id));\n            const derived = { council, id, proposal: allProposals[index].unwrap() };\n            if (isApproval) {\n                approvals.push(derived);\n            }\n            else {\n                proposals.push(derived);\n            }\n        }\n    });\n    return { approvals, proposalCount, proposals };\n}\nfunction retrieveProposals(api, proposalCount, approvalIds) {\n    const proposalIds = [];\n    const count = proposalCount.toNumber();\n    for (let index = 0; index < count; index++) {\n        if (!approvalIds.some((id) => id.eqn(index))) {\n            proposalIds.push(api.registry.createType('ProposalIndex', index));\n        }\n    }\n    const allIds = [...proposalIds, ...approvalIds];\n    return combineLatest([\n        api.query.treasury.proposals.multi(allIds),\n        api.derive.council\n            ? api.derive.council.proposals()\n            : of([])\n    ]).pipe(map(([allProposals, councilProposals]) => parseResult(api, { allIds, allProposals, approvalIds, councilProposals, proposalCount })));\n}\n/**\n * @description Retrieve all active and approved treasury proposals, along with their info\n */\nexport function proposals(instanceId, api) {\n    return memo(instanceId, () => api.query.treasury\n        ? combineLatest([\n            api.query.treasury.proposalCount(),\n            api.query.treasury.approvals()\n        ]).pipe(switchMap(([proposalCount, approvalIds]) => retrieveProposals(api, proposalCount, approvalIds)))\n        : of({\n            approvals: [],\n            proposalCount: api.registry.createType('ProposalIndex'),\n            proposals: []\n        }));\n}\n","import { combineLatest, map, switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\nexport function events(instanceId, api) {\n    return memo(instanceId, (blockHash) => combineLatest([\n        api.rpc.chain.getBlock(blockHash),\n        api.queryAt(blockHash).pipe(switchMap((queryAt) => queryAt.system.events()))\n    ]).pipe(map(([block, events]) => ({ block, events }))));\n}\n","import { BN } from '@polkadot/util';\nexport const FALLBACK_MAX_HASH_COUNT = 250;\nexport const FALLBACK_PERIOD = new BN(6 * 1000);\nexport const MAX_FINALITY_LAG = new BN(5);\nexport const MORTAL_PERIOD = new BN(5 * 60 * 1000);\n","import { catchError, combineLatest, map, of, switchMap } from 'rxjs';\nimport { isNumber, isUndefined } from '@polkadot/util';\nimport { unwrapBlockNumber } from '../util/index.js';\nimport { FALLBACK_MAX_HASH_COUNT, FALLBACK_PERIOD, MAX_FINALITY_LAG, MORTAL_PERIOD } from './constants.js';\nfunction latestNonce(api, address) {\n    return api.derive.balances.account(address).pipe(map(({ accountNonce }) => accountNonce));\n}\nfunction nextNonce(api, address) {\n    return api.rpc.system?.accountNextIndex\n        ? api.rpc.system.accountNextIndex(address)\n        : latestNonce(api, address);\n}\nfunction signingHeader(api) {\n    return combineLatest([\n        api.rpc.chain.getHeader().pipe(switchMap((header) => \n        // check for chains at genesis (until block 1 is produced, e.g. 6s), since\n        // we do need to allow transactions at chain start (also dev/seal chains)\n        header.parentHash.isEmpty\n            ? of(header)\n            // in the case of the current block, we use the parent to minimize the\n            // impact of forks on the system, but not completely remove it\n            : api.rpc.chain.getHeader(header.parentHash).pipe(catchError(() => of(header))))),\n        api.rpc.chain.getFinalizedHead().pipe(switchMap((hash) => api.rpc.chain.getHeader(hash).pipe(catchError(() => of(null)))))\n    ]).pipe(map(([current, finalized]) => \n    // determine the hash to use, current when lag > max, else finalized\n    !finalized || unwrapBlockNumber(current).sub(unwrapBlockNumber(finalized)).gt(MAX_FINALITY_LAG)\n        ? current\n        : finalized));\n}\nfunction babeOrAuraPeriod(api) {\n    const period = api.consts.babe?.expectedBlockTime ||\n        // this will be present ones https://github.com/paritytech/polkadot-sdk/pull/3732 is merged\n        api.consts['aura']?.slotDuration ||\n        api.consts.timestamp?.minimumPeriod.muln(2);\n    return period && period.isZero && !period.isZero() ? period : undefined;\n}\nexport function signingInfo(_instanceId, api) {\n    // no memo, we want to do this fresh on each run\n    return (address, nonce, era) => combineLatest([\n        // retrieve nonce if none was specified\n        isUndefined(nonce)\n            ? latestNonce(api, address)\n            : nonce === -1\n                ? nextNonce(api, address)\n                : of(api.registry.createType('Index', nonce)),\n        // if no era (create) or era > 0 (mortal), do block retrieval\n        (isUndefined(era) || (isNumber(era) && era > 0))\n            ? signingHeader(api)\n            : of(null)\n    ]).pipe(map(([nonce, header]) => ({\n        header,\n        mortalLength: Math.min(api.consts.system?.blockHashCount?.toNumber() || FALLBACK_MAX_HASH_COUNT, MORTAL_PERIOD\n            .div(babeOrAuraPeriod(api) || FALLBACK_PERIOD)\n            .iadd(MAX_FINALITY_LAG)\n            .toNumber()),\n        nonce\n    })));\n}\n","import * as accounts from './accounts/index.js';\nimport * as alliance from './alliance/index.js';\nimport * as bagsList from './bagsList/index.js';\nimport * as balances from './balances/index.js';\nimport * as bounties from './bounties/index.js';\nimport * as chain from './chain/index.js';\nimport * as contracts from './contracts/index.js';\nimport * as council from './council/index.js';\nimport * as crowdloan from './crowdloan/index.js';\nimport * as democracy from './democracy/index.js';\nimport * as elections from './elections/index.js';\nimport * as imOnline from './imOnline/index.js';\nimport * as membership from './membership/index.js';\nimport * as parachains from './parachains/index.js';\nimport * as session from './session/index.js';\nimport * as society from './society/index.js';\nimport * as staking from './staking/index.js';\nimport * as technicalCommittee from './technicalCommittee/index.js';\nimport * as treasury from './treasury/index.js';\nimport * as tx from './tx/index.js';\nexport const derive = { accounts, alliance, bagsList, balances, bounties, chain, contracts, council, crowdloan, democracy, elections, imOnline, membership, parachains, session, society, staking, technicalCommittee, treasury, tx };\n","import { lazyDeriveSection } from './util/index.js';\nimport { derive } from './derive.js';\nexport * from './derive.js';\nexport * from './type/index.js';\nexport { lazyDeriveSection };\nconst checks = {\n    allianceMotion: {\n        instances: ['allianceMotion'],\n        methods: []\n    },\n    bagsList: {\n        instances: ['voterBagsList', 'voterList', 'bagsList'],\n        methods: [],\n        withDetect: true\n    },\n    contracts: {\n        instances: ['contracts'],\n        methods: []\n    },\n    council: {\n        instances: ['council'],\n        methods: [],\n        withDetect: true\n    },\n    crowdloan: {\n        instances: ['crowdloan'],\n        methods: []\n    },\n    democracy: {\n        instances: ['democracy'],\n        methods: []\n    },\n    elections: {\n        instances: ['phragmenElection', 'electionsPhragmen', 'elections', 'council'],\n        methods: [],\n        withDetect: true\n    },\n    imOnline: {\n        instances: ['imOnline'],\n        methods: []\n    },\n    membership: {\n        instances: ['membership'],\n        methods: []\n    },\n    parachains: {\n        instances: ['parachains', 'registrar'],\n        methods: []\n    },\n    session: {\n        instances: ['session'],\n        methods: []\n    },\n    society: {\n        instances: ['society'],\n        methods: []\n    },\n    staking: {\n        instances: ['staking'],\n        methods: ['erasRewardPoints']\n    },\n    technicalCommittee: {\n        instances: ['technicalCommittee'],\n        methods: [],\n        withDetect: true\n    },\n    treasury: {\n        instances: ['treasury'],\n        methods: []\n    }\n};\nfunction getModuleInstances(api, specName, moduleName) {\n    return api.registry.getModuleInstances(specName, moduleName) || [];\n}\n/**\n * Returns an object that will inject `api` into all the functions inside\n * `allSections`, and keep the object architecture of `allSections`.\n */\n/** @internal */\nfunction injectFunctions(instanceId, api, derives) {\n    const result = {};\n    const names = Object.keys(derives);\n    const keys = Object.keys(api.query);\n    const specName = api.runtimeVersion.specName;\n    const filterKeys = (q) => keys.includes(q);\n    const filterInstances = (q) => getModuleInstances(api, specName, q).some(filterKeys);\n    const filterMethods = (all) => (m) => all.some((q) => keys.includes(q) && api.query[q][m]);\n    const getKeys = (s) => Object.keys(derives[s]);\n    const creator = (s, m) => derives[s][m](instanceId, api);\n    const isIncluded = (c) => (!checks[c] || ((checks[c].instances.some(filterKeys) && (!checks[c].methods.length ||\n        checks[c].methods.every(filterMethods(checks[c].instances)))) ||\n        (checks[c].withDetect &&\n            checks[c].instances.some(filterInstances))));\n    for (let i = 0, count = names.length; i < count; i++) {\n        const name = names[i];\n        isIncluded(name) &&\n            lazyDeriveSection(result, name, getKeys, creator);\n    }\n    return result;\n}\n/** @internal */\nexport function getAvailableDerives(instanceId, api, custom = {}) {\n    return {\n        ...injectFunctions(instanceId, api, derive),\n        ...injectFunctions(instanceId, api, custom)\n    };\n}\n","import { Observable, publishReplay, refCount } from 'rxjs';\nimport { rpcDefinitions } from '@polkadot/types';\nimport { hexToU8a, isFunction, isNull, isUndefined, lazyMethod, logger, memoize, objectSpread, u8aConcat, u8aToU8a } from '@polkadot/util';\nimport { drr, refCountDelay } from './util/index.js';\nexport { packageInfo } from './packageInfo.js';\nexport * from './util/index.js';\nconst l = logger('rpc-core');\nconst EMPTY_META = {\n    fallback: undefined,\n    modifier: { isOptional: true },\n    type: {\n        asMap: { linked: { isTrue: false } },\n        isMap: false\n    }\n};\n/** @internal */\nfunction logErrorMessage(method, { noErrorLog, params, type }, error) {\n    if (noErrorLog) {\n        return;\n    }\n    l.error(`${method}(${params.map(({ isOptional, name, type }) => `${name}${isOptional ? '?' : ''}: ${type}`).join(', ')}): ${type}:: ${error.message}`);\n}\nfunction isTreatAsHex(key) {\n    // :code is problematic - it does not have the length attached, which is\n    // unlike all other storage entries where it is indeed properly encoded\n    return ['0x3a636f6465'].includes(key.toHex());\n}\n/**\n * @name Rpc\n * @summary The API may use a HTTP or WebSockets provider.\n * @description It allows for querying a Polkadot Client Node.\n * WebSockets provider is recommended since HTTP provider only supports basic querying.\n *\n * ```mermaid\n * graph LR;\n *   A[Api] --> |WebSockets| B[WsProvider];\n *   B --> |endpoint| C[ws://127.0.0.1:9944]\n * ```\n *\n * @example\n * <BR>\n *\n * ```javascript\n * import Rpc from '@polkadot/rpc-core';\n * import { WsProvider } from '@polkadot/rpc-provider/ws';\n *\n * const provider = new WsProvider('ws://127.0.0.1:9944');\n * const rpc = new Rpc(provider);\n * ```\n */\nexport class RpcCore {\n    __internal__instanceId;\n    __internal__isPedantic;\n    __internal__registryDefault;\n    __internal__storageCache = new Map();\n    __internal__storageCacheHits = 0;\n    __internal__storageCacheSize = 0;\n    __internal__getBlockRegistry;\n    __internal__getBlockHash;\n    mapping = new Map();\n    provider;\n    sections = [];\n    /**\n     * @constructor\n     * Default constructor for the core RPC handler\n     * @param  {ProviderInterface} provider An API provider using any of the supported providers (HTTP, SC or WebSocket)\n     */\n    constructor(instanceId, registry, { isPedantic = true, provider, userRpc = {} }) {\n        if (!provider || !isFunction(provider.send)) {\n            throw new Error('Expected Provider to API create');\n        }\n        this.__internal__instanceId = instanceId;\n        this.__internal__isPedantic = isPedantic;\n        this.__internal__registryDefault = registry;\n        this.provider = provider;\n        const sectionNames = Object.keys(rpcDefinitions);\n        // these are the base keys (i.e. part of jsonrpc)\n        this.sections.push(...sectionNames);\n        // decorate all interfaces, defined and user on this instance\n        this.addUserInterfaces(userRpc);\n    }\n    /**\n     * @description Returns the connected status of a provider\n     */\n    get isConnected() {\n        return this.provider.isConnected;\n    }\n    /**\n     * @description Manually connect from the attached provider\n     */\n    connect() {\n        return this.provider.connect();\n    }\n    /**\n     * @description Manually disconnect from the attached provider\n     */\n    disconnect() {\n        return this.provider.disconnect();\n    }\n    /**\n     * @description Returns the underlying core stats, including those from teh provider\n     */\n    get stats() {\n        const stats = this.provider.stats;\n        return stats\n            ? {\n                ...stats,\n                core: {\n                    cacheHits: this.__internal__storageCacheHits,\n                    cacheSize: this.__internal__storageCacheSize\n                }\n            }\n            : undefined;\n    }\n    /**\n     * @description Sets a registry swap (typically from Api)\n     */\n    setRegistrySwap(registrySwap) {\n        this.__internal__getBlockRegistry = memoize(registrySwap, {\n            getInstanceId: () => this.__internal__instanceId\n        });\n    }\n    /**\n     * @description Sets a function to resolve block hash from block number\n     */\n    setResolveBlockHash(resolveBlockHash) {\n        this.__internal__getBlockHash = memoize(resolveBlockHash, {\n            getInstanceId: () => this.__internal__instanceId\n        });\n    }\n    addUserInterfaces(userRpc) {\n        // add any extra user-defined sections\n        this.sections.push(...Object.keys(userRpc).filter((k) => !this.sections.includes(k)));\n        for (let s = 0, scount = this.sections.length; s < scount; s++) {\n            const section = this.sections[s];\n            const defs = objectSpread({}, rpcDefinitions[section], userRpc[section]);\n            const methods = Object.keys(defs);\n            for (let m = 0, mcount = methods.length; m < mcount; m++) {\n                const method = methods[m];\n                const def = defs[method];\n                const jsonrpc = def.endpoint || `${section}_${method}`;\n                if (!this.mapping.has(jsonrpc)) {\n                    const isSubscription = !!def.pubsub;\n                    if (!this[section]) {\n                        this[section] = {};\n                    }\n                    this.mapping.set(jsonrpc, objectSpread({}, def, { isSubscription, jsonrpc, method, section }));\n                    lazyMethod(this[section], method, () => isSubscription\n                        ? this._createMethodSubscribe(section, method, def)\n                        : this._createMethodSend(section, method, def));\n                }\n            }\n        }\n    }\n    _memomize(creator, def) {\n        const memoOpts = { getInstanceId: () => this.__internal__instanceId };\n        const memoized = memoize(creator(true), memoOpts);\n        memoized.raw = memoize(creator(false), memoOpts);\n        memoized.meta = def;\n        return memoized;\n    }\n    _formatResult(isScale, registry, blockHash, method, def, params, result) {\n        return isScale\n            ? this._formatOutput(registry, blockHash, method, def, params, result)\n            : result;\n    }\n    _createMethodSend(section, method, def) {\n        const rpcName = def.endpoint || `${section}_${method}`;\n        const hashIndex = def.params.findIndex(({ isHistoric }) => isHistoric);\n        let memoized = null;\n        // execute the RPC call, doing a registry swap for historic as applicable\n        const callWithRegistry = async (isScale, values) => {\n            const blockId = hashIndex === -1\n                ? null\n                : values[hashIndex];\n            const blockHash = blockId && def.params[hashIndex].type === 'BlockNumber'\n                ? await this.__internal__getBlockHash?.(blockId)\n                : blockId;\n            const { registry } = isScale && blockHash && this.__internal__getBlockRegistry\n                ? await this.__internal__getBlockRegistry(u8aToU8a(blockHash))\n                : { registry: this.__internal__registryDefault };\n            const params = this._formatParams(registry, null, def, values);\n            // only cache .at(<blockHash>) queries, e.g. where valid blockHash was supplied\n            const result = await this.provider.send(rpcName, params.map((p) => p.toJSON()), !!blockHash);\n            return this._formatResult(isScale, registry, blockHash, method, def, params, result);\n        };\n        const creator = (isScale) => (...values) => {\n            const isDelayed = isScale && hashIndex !== -1 && !!values[hashIndex];\n            return new Observable((observer) => {\n                callWithRegistry(isScale, values)\n                    .then((value) => {\n                    observer.next(value);\n                    observer.complete();\n                })\n                    .catch((error) => {\n                    logErrorMessage(method, def, error);\n                    observer.error(error);\n                    observer.complete();\n                });\n                return () => {\n                    // delete old results from cache\n                    if (isScale) {\n                        memoized?.unmemoize(...values);\n                    }\n                    else {\n                        memoized?.raw.unmemoize(...values);\n                    }\n                };\n            }).pipe(\n            // eslint-disable-next-line deprecation/deprecation\n            publishReplay(1), // create a Replay(1)\n            isDelayed\n                ? refCountDelay() // Unsubscribe after delay\n                // eslint-disable-next-line deprecation/deprecation\n                : refCount());\n        };\n        memoized = this._memomize(creator, def);\n        return memoized;\n    }\n    // create a subscriptor, it subscribes once and resolves with the id as subscribe\n    _createSubscriber({ paramsJson, subName, subType, update }, errorHandler) {\n        return new Promise((resolve, reject) => {\n            this.provider\n                .subscribe(subType, subName, paramsJson, update)\n                .then(resolve)\n                .catch((error) => {\n                errorHandler(error);\n                reject(error);\n            });\n        });\n    }\n    _createMethodSubscribe(section, method, def) {\n        const [updateType, subMethod, unsubMethod] = def.pubsub;\n        const subName = `${section}_${subMethod}`;\n        const unsubName = `${section}_${unsubMethod}`;\n        const subType = `${section}_${updateType}`;\n        let memoized = null;\n        const creator = (isScale) => (...values) => {\n            return new Observable((observer) => {\n                // Have at least an empty promise, as used in the unsubscribe\n                let subscriptionPromise = Promise.resolve(null);\n                const registry = this.__internal__registryDefault;\n                const errorHandler = (error) => {\n                    logErrorMessage(method, def, error);\n                    observer.error(error);\n                };\n                try {\n                    const params = this._formatParams(registry, null, def, values);\n                    const update = (error, result) => {\n                        if (error) {\n                            logErrorMessage(method, def, error);\n                            return;\n                        }\n                        try {\n                            observer.next(this._formatResult(isScale, registry, null, method, def, params, result));\n                        }\n                        catch (error) {\n                            observer.error(error);\n                        }\n                    };\n                    subscriptionPromise = this._createSubscriber({ paramsJson: params.map((p) => p.toJSON()), subName, subType, update }, errorHandler);\n                }\n                catch (error) {\n                    errorHandler(error);\n                }\n                // Teardown logic\n                return () => {\n                    // Delete from cache, so old results don't hang around\n                    if (isScale) {\n                        memoized?.unmemoize(...values);\n                    }\n                    else {\n                        memoized?.raw.unmemoize(...values);\n                    }\n                    // Unsubscribe from provider\n                    subscriptionPromise\n                        .then((subscriptionId) => isNull(subscriptionId)\n                        ? Promise.resolve(false)\n                        : this.provider.unsubscribe(subType, unsubName, subscriptionId))\n                        .catch((error) => logErrorMessage(method, def, error));\n                };\n            }).pipe(drr());\n        };\n        memoized = this._memomize(creator, def);\n        return memoized;\n    }\n    _formatParams(registry, blockHash, def, inputs) {\n        const count = inputs.length;\n        const reqCount = def.params.filter(({ isOptional }) => !isOptional).length;\n        if (count < reqCount || count > def.params.length) {\n            throw new Error(`Expected ${def.params.length} parameters${reqCount === def.params.length ? '' : ` (${def.params.length - reqCount} optional)`}, ${count} found instead`);\n        }\n        const params = new Array(count);\n        for (let i = 0; i < count; i++) {\n            params[i] = registry.createTypeUnsafe(def.params[i].type, [inputs[i]], { blockHash });\n        }\n        return params;\n    }\n    _formatOutput(registry, blockHash, method, rpc, params, result) {\n        if (rpc.type === 'StorageData') {\n            const key = params[0];\n            return this._formatStorageData(registry, blockHash, key, result);\n        }\n        else if (rpc.type === 'StorageChangeSet') {\n            const keys = params[0];\n            return keys\n                ? this._formatStorageSet(registry, result.block, keys, result.changes)\n                : registry.createType('StorageChangeSet', result);\n        }\n        else if (rpc.type === 'Vec<StorageChangeSet>') {\n            const jsonSet = result;\n            const count = jsonSet.length;\n            const mapped = new Array(count);\n            for (let i = 0; i < count; i++) {\n                const { block, changes } = jsonSet[i];\n                mapped[i] = [\n                    registry.createType('BlockHash', block),\n                    this._formatStorageSet(registry, block, params[0], changes)\n                ];\n            }\n            // we only query at a specific block, not a range - flatten\n            return method === 'queryStorageAt'\n                ? mapped[0][1]\n                : mapped;\n        }\n        return registry.createTypeUnsafe(rpc.type, [result], { blockHash });\n    }\n    _formatStorageData(registry, blockHash, key, value) {\n        const isEmpty = isNull(value);\n        // we convert to Uint8Array since it maps to the raw encoding, all\n        // data will be correctly encoded (incl. numbers, excl. :code)\n        const input = isEmpty\n            ? null\n            : isTreatAsHex(key)\n                ? value\n                : u8aToU8a(value);\n        return this._newType(registry, blockHash, key, input, isEmpty);\n    }\n    _formatStorageSet(registry, blockHash, keys, changes) {\n        // For StorageChangeSet, the changes has the [key, value] mappings\n        const count = keys.length;\n        const withCache = count !== 1;\n        const values = new Array(count);\n        // multiple return values (via state.storage subscription), decode the\n        // values one at a time, all based on the supplied query types\n        for (let i = 0; i < count; i++) {\n            values[i] = this._formatStorageSetEntry(registry, blockHash, keys[i], changes, withCache, i);\n        }\n        return values;\n    }\n    _formatStorageSetEntry(registry, blockHash, key, changes, withCache, entryIndex) {\n        const hexKey = key.toHex();\n        const found = changes.find(([key]) => key === hexKey);\n        const isNotFound = isUndefined(found);\n        // if we don't find the value, this is our fallback\n        //   - in the case of an array of values, fill the hole from the cache\n        //   - if a single result value, don't fill - it is not an update hole\n        //   - fallback to an empty option in all cases\n        if (isNotFound && withCache) {\n            const cached = this.__internal__storageCache.get(hexKey);\n            if (cached) {\n                this.__internal__storageCacheHits++;\n                return cached;\n            }\n        }\n        const value = isNotFound\n            ? null\n            : found[1];\n        const isEmpty = isNull(value);\n        const input = isEmpty || isTreatAsHex(key)\n            ? value\n            : u8aToU8a(value);\n        const codec = this._newType(registry, blockHash, key, input, isEmpty, entryIndex);\n        // store the retrieved result - the only issue with this cache is that there is no\n        // clearing of it, so very long running processes (not just a couple of hours, longer)\n        // will increase memory beyond what is allowed.\n        this.__internal__storageCache.set(hexKey, codec);\n        this.__internal__storageCacheSize++;\n        return codec;\n    }\n    _newType(registry, blockHash, key, input, isEmpty, entryIndex = -1) {\n        // single return value (via state.getStorage), decode the value based on the\n        // outputType that we have specified. Fallback to Raw on nothing\n        const type = key.outputType || 'Raw';\n        const meta = key.meta || EMPTY_META;\n        const entryNum = entryIndex === -1\n            ? ''\n            : ` entry ${entryIndex}:`;\n        try {\n            return registry.createTypeUnsafe(type, [\n                isEmpty\n                    ? meta.fallback\n                        // For old-style Linkage, we add an empty linkage at the end\n                        ? type.includes('Linkage<')\n                            ? u8aConcat(hexToU8a(meta.fallback.toHex()), new Uint8Array(2))\n                            : hexToU8a(meta.fallback.toHex())\n                        : undefined\n                    : meta.modifier.isOptional\n                        ? registry.createTypeUnsafe(type, [input], { blockHash, isPedantic: this.__internal__isPedantic })\n                        : input\n            ], { blockHash, isFallback: isEmpty && !!meta.fallback, isOptional: meta.modifier.isOptional, isPedantic: this.__internal__isPedantic && !meta.modifier.isOptional });\n        }\n        catch (error) {\n            throw new Error(`Unable to decode storage ${key.section || 'unknown'}.${key.method || 'unknown'}:${entryNum}: ${error.message}`);\n        }\n    }\n}\n","import { xglobal } from '@polkadot/x-global';\nexport { packageInfo } from './packageInfo.js';\nexport const WebSocket = xglobal.WebSocket;\n","const known = {\n    1000: 'Normal Closure',\n    1001: 'Going Away',\n    1002: 'Protocol Error',\n    1003: 'Unsupported Data',\n    1004: '(For future)',\n    1005: 'No Status Received',\n    1006: 'Abnormal Closure',\n    1007: 'Invalid frame payload data',\n    1008: 'Policy Violation',\n    1009: 'Message too big',\n    1010: 'Missing Extension',\n    1011: 'Internal Error',\n    1012: 'Service Restart',\n    1013: 'Try Again Later',\n    1014: 'Bad Gateway',\n    1015: 'TLS Handshake'\n};\nexport function getWSErrorString(code) {\n    if (code >= 0 && code <= 999) {\n        return '(Unused)';\n    }\n    else if (code >= 1016) {\n        if (code <= 1999) {\n            return '(For WebSocket standard)';\n        }\n        else if (code <= 2999) {\n            return '(For WebSocket extensions)';\n        }\n        else if (code <= 3999) {\n            return '(For libraries and frameworks)';\n        }\n        else if (code <= 4999) {\n            return '(For applications)';\n        }\n    }\n    return known[code] || '(Unknown)';\n}\n","import { EventEmitter } from 'eventemitter3';\nimport { isChildClass, isNull, isUndefined, logger, noop, objectSpread, stringify } from '@polkadot/util';\nimport { xglobal } from '@polkadot/x-global';\nimport { WebSocket } from '@polkadot/x-ws';\nimport { RpcCoder } from '../coder/index.js';\nimport defaults from '../defaults.js';\nimport { DEFAULT_CAPACITY, LRUCache } from '../lru.js';\nimport { getWSErrorString } from './errors.js';\nconst ALIASES = {\n    chain_finalisedHead: 'chain_finalizedHead',\n    chain_subscribeFinalisedHeads: 'chain_subscribeFinalizedHeads',\n    chain_unsubscribeFinalisedHeads: 'chain_unsubscribeFinalizedHeads'\n};\nconst RETRY_DELAY = 2500;\nconst DEFAULT_TIMEOUT_MS = 60 * 1000;\nconst TIMEOUT_INTERVAL = 5000;\nconst l = logger('api-ws');\n/** @internal Clears a Record<*> of all keys, optionally with all callback on clear */\nfunction eraseRecord(record, cb) {\n    Object.keys(record).forEach((key) => {\n        if (cb) {\n            cb(record[key]);\n        }\n        delete record[key];\n    });\n}\n/** @internal Creates a default/empty stats object */\nfunction defaultEndpointStats() {\n    return { bytesRecv: 0, bytesSent: 0, cached: 0, errors: 0, requests: 0, subscriptions: 0, timeout: 0 };\n}\n/**\n * # @polkadot/rpc-provider/ws\n *\n * @name WsProvider\n *\n * @description The WebSocket Provider allows sending requests using WebSocket to a WebSocket RPC server TCP port. Unlike the [[HttpProvider]], it does support subscriptions and allows listening to events such as new blocks or balance changes.\n *\n * @example\n * <BR>\n *\n * ```javascript\n * import Api from '@polkadot/api/promise';\n * import { WsProvider } from '@polkadot/rpc-provider/ws';\n *\n * const provider = new WsProvider('ws://127.0.0.1:9944');\n * const api = new Api(provider);\n * ```\n *\n * @see [[HttpProvider]]\n */\nexport class WsProvider {\n    __internal__callCache;\n    __internal__coder;\n    __internal__endpoints;\n    __internal__headers;\n    __internal__eventemitter;\n    __internal__handlers = {};\n    __internal__isReadyPromise;\n    __internal__stats;\n    __internal__waitingForId = {};\n    __internal__autoConnectMs;\n    __internal__endpointIndex;\n    __internal__endpointStats;\n    __internal__isConnected = false;\n    __internal__subscriptions = {};\n    __internal__timeoutId = null;\n    __internal__websocket;\n    __internal__timeout;\n    /**\n     * @param {string | string[]}  endpoint    The endpoint url. Usually `ws://ip:9944` or `wss://ip:9944`, may provide an array of endpoint strings.\n     * @param {number | false} autoConnectMs Whether to connect automatically or not (default). Provided value is used as a delay between retries.\n     * @param {Record<string, string>} headers The headers provided to the underlying WebSocket\n     * @param {number} [timeout] Custom timeout value used per request . Defaults to `DEFAULT_TIMEOUT_MS`\n     */\n    constructor(endpoint = defaults.WS_URL, autoConnectMs = RETRY_DELAY, headers = {}, timeout, cacheCapacity) {\n        const endpoints = Array.isArray(endpoint)\n            ? endpoint\n            : [endpoint];\n        if (endpoints.length === 0) {\n            throw new Error('WsProvider requires at least one Endpoint');\n        }\n        endpoints.forEach((endpoint) => {\n            if (!/^(wss|ws):\\/\\//.test(endpoint)) {\n                throw new Error(`Endpoint should start with 'ws://', received '${endpoint}'`);\n            }\n        });\n        this.__internal__callCache = new LRUCache(cacheCapacity || DEFAULT_CAPACITY);\n        this.__internal__eventemitter = new EventEmitter();\n        this.__internal__autoConnectMs = autoConnectMs || 0;\n        this.__internal__coder = new RpcCoder();\n        this.__internal__endpointIndex = -1;\n        this.__internal__endpoints = endpoints;\n        this.__internal__headers = headers;\n        this.__internal__websocket = null;\n        this.__internal__stats = {\n            active: { requests: 0, subscriptions: 0 },\n            total: defaultEndpointStats()\n        };\n        this.__internal__endpointStats = defaultEndpointStats();\n        this.__internal__timeout = timeout || DEFAULT_TIMEOUT_MS;\n        if (autoConnectMs && autoConnectMs > 0) {\n            this.connectWithRetry().catch(noop);\n        }\n        this.__internal__isReadyPromise = new Promise((resolve) => {\n            this.__internal__eventemitter.once('connected', () => {\n                resolve(this);\n            });\n        });\n    }\n    /**\n     * @summary `true` when this provider supports subscriptions\n     */\n    get hasSubscriptions() {\n        return !!true;\n    }\n    /**\n     * @summary `true` when this provider supports clone()\n     */\n    get isClonable() {\n        return !!true;\n    }\n    /**\n     * @summary Whether the node is connected or not.\n     * @return {boolean} true if connected\n     */\n    get isConnected() {\n        return this.__internal__isConnected;\n    }\n    /**\n     * @description Promise that resolves the first time we are connected and loaded\n     */\n    get isReady() {\n        return this.__internal__isReadyPromise;\n    }\n    get endpoint() {\n        return this.__internal__endpoints[this.__internal__endpointIndex];\n    }\n    /**\n     * @description Returns a clone of the object\n     */\n    clone() {\n        return new WsProvider(this.__internal__endpoints);\n    }\n    selectEndpointIndex(endpoints) {\n        return (this.__internal__endpointIndex + 1) % endpoints.length;\n    }\n    /**\n     * @summary Manually connect\n     * @description The [[WsProvider]] connects automatically by default, however if you decided otherwise, you may\n     * connect manually using this method.\n     */\n    // eslint-disable-next-line @typescript-eslint/require-await\n    async connect() {\n        if (this.__internal__websocket) {\n            throw new Error('WebSocket is already connected');\n        }\n        try {\n            this.__internal__endpointIndex = this.selectEndpointIndex(this.__internal__endpoints);\n            // the as here is Deno-specific - not available on the globalThis\n            this.__internal__websocket = typeof xglobal.WebSocket !== 'undefined' && isChildClass(xglobal.WebSocket, WebSocket)\n                ? new WebSocket(this.endpoint)\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore - WS may be an instance of ws, which supports options\n                : new WebSocket(this.endpoint, undefined, {\n                    headers: this.__internal__headers\n                });\n            if (this.__internal__websocket) {\n                this.__internal__websocket.onclose = this.__internal__onSocketClose;\n                this.__internal__websocket.onerror = this.__internal__onSocketError;\n                this.__internal__websocket.onmessage = this.__internal__onSocketMessage;\n                this.__internal__websocket.onopen = this.__internal__onSocketOpen;\n            }\n            // timeout any handlers that have not had a response\n            this.__internal__timeoutId = setInterval(() => this.__internal__timeoutHandlers(), TIMEOUT_INTERVAL);\n        }\n        catch (error) {\n            l.error(error);\n            this.__internal__emit('error', error);\n            throw error;\n        }\n    }\n    /**\n     * @description Connect, never throwing an error, but rather forcing a retry\n     */\n    async connectWithRetry() {\n        if (this.__internal__autoConnectMs > 0) {\n            try {\n                await this.connect();\n            }\n            catch {\n                setTimeout(() => {\n                    this.connectWithRetry().catch(noop);\n                }, this.__internal__autoConnectMs);\n            }\n        }\n    }\n    /**\n     * @description Manually disconnect from the connection, clearing auto-connect logic\n     */\n    // eslint-disable-next-line @typescript-eslint/require-await\n    async disconnect() {\n        // switch off autoConnect, we are in manual mode now\n        this.__internal__autoConnectMs = 0;\n        try {\n            if (this.__internal__websocket) {\n                // 1000 - Normal closure; the connection successfully completed\n                this.__internal__websocket.close(1000);\n            }\n        }\n        catch (error) {\n            l.error(error);\n            this.__internal__emit('error', error);\n            throw error;\n        }\n    }\n    /**\n     * @description Returns the connection stats\n     */\n    get stats() {\n        return {\n            active: {\n                requests: Object.keys(this.__internal__handlers).length,\n                subscriptions: Object.keys(this.__internal__subscriptions).length\n            },\n            total: this.__internal__stats.total\n        };\n    }\n    get endpointStats() {\n        return this.__internal__endpointStats;\n    }\n    /**\n     * @summary Listens on events after having subscribed using the [[subscribe]] function.\n     * @param  {ProviderInterfaceEmitted} type Event\n     * @param  {ProviderInterfaceEmitCb}  sub  Callback\n     * @return unsubscribe function\n     */\n    on(type, sub) {\n        this.__internal__eventemitter.on(type, sub);\n        return () => {\n            this.__internal__eventemitter.removeListener(type, sub);\n        };\n    }\n    /**\n     * @summary Send JSON data using WebSockets to configured HTTP Endpoint or queue.\n     * @param method The RPC methods to execute\n     * @param params Encoded parameters as applicable for the method\n     * @param subscription Subscription details (internally used)\n     */\n    send(method, params, isCacheable, subscription) {\n        this.__internal__endpointStats.requests++;\n        this.__internal__stats.total.requests++;\n        const [id, body] = this.__internal__coder.encodeJson(method, params);\n        const cacheKey = isCacheable ? `${method}::${stringify(params)}` : '';\n        let resultPromise = isCacheable\n            ? this.__internal__callCache.get(cacheKey)\n            : null;\n        if (!resultPromise) {\n            resultPromise = this.__internal__send(id, body, method, params, subscription);\n            if (isCacheable) {\n                this.__internal__callCache.set(cacheKey, resultPromise);\n            }\n        }\n        else {\n            this.__internal__endpointStats.cached++;\n            this.__internal__stats.total.cached++;\n        }\n        return resultPromise;\n    }\n    async __internal__send(id, body, method, params, subscription) {\n        return new Promise((resolve, reject) => {\n            try {\n                if (!this.isConnected || this.__internal__websocket === null) {\n                    throw new Error('WebSocket is not connected');\n                }\n                const callback = (error, result) => {\n                    error\n                        ? reject(error)\n                        : resolve(result);\n                };\n                l.debug(() => ['calling', method, body]);\n                this.__internal__handlers[id] = {\n                    callback,\n                    method,\n                    params,\n                    start: Date.now(),\n                    subscription\n                };\n                const bytesSent = body.length;\n                this.__internal__endpointStats.bytesSent += bytesSent;\n                this.__internal__stats.total.bytesSent += bytesSent;\n                this.__internal__websocket.send(body);\n            }\n            catch (error) {\n                this.__internal__endpointStats.errors++;\n                this.__internal__stats.total.errors++;\n                reject(error);\n            }\n        });\n    }\n    /**\n     * @name subscribe\n     * @summary Allows subscribing to a specific event.\n     *\n     * @example\n     * <BR>\n     *\n     * ```javascript\n     * const provider = new WsProvider('ws://127.0.0.1:9944');\n     * const rpc = new Rpc(provider);\n     *\n     * rpc.state.subscribeStorage([[storage.system.account, <Address>]], (_, values) => {\n     *   console.log(values)\n     * }).then((subscriptionId) => {\n     *   console.log('balance changes subscription id: ', subscriptionId)\n     * })\n     * ```\n     */\n    subscribe(type, method, params, callback) {\n        this.__internal__endpointStats.subscriptions++;\n        this.__internal__stats.total.subscriptions++;\n        // subscriptions are not cached, LRU applies to .at(<blockHash>) only\n        return this.send(method, params, false, { callback, type });\n    }\n    /**\n     * @summary Allows unsubscribing to subscriptions made with [[subscribe]].\n     */\n    async unsubscribe(type, method, id) {\n        const subscription = `${type}::${id}`;\n        // FIXME This now could happen with re-subscriptions. The issue is that with a re-sub\n        // the assigned id now does not match what the API user originally received. It has\n        // a slight complication in solving - since we cannot rely on the send id, but rather\n        // need to find the actual subscription id to map it\n        if (isUndefined(this.__internal__subscriptions[subscription])) {\n            l.debug(() => `Unable to find active subscription=${subscription}`);\n            return false;\n        }\n        delete this.__internal__subscriptions[subscription];\n        try {\n            return this.isConnected && !isNull(this.__internal__websocket)\n                ? this.send(method, [id])\n                : true;\n        }\n        catch {\n            return false;\n        }\n    }\n    __internal__emit = (type, ...args) => {\n        this.__internal__eventemitter.emit(type, ...args);\n    };\n    __internal__onSocketClose = (event) => {\n        const error = new Error(`disconnected from ${this.endpoint}: ${event.code}:: ${event.reason || getWSErrorString(event.code)}`);\n        if (this.__internal__autoConnectMs > 0) {\n            l.error(error.message);\n        }\n        this.__internal__isConnected = false;\n        if (this.__internal__websocket) {\n            this.__internal__websocket.onclose = null;\n            this.__internal__websocket.onerror = null;\n            this.__internal__websocket.onmessage = null;\n            this.__internal__websocket.onopen = null;\n            this.__internal__websocket = null;\n        }\n        if (this.__internal__timeoutId) {\n            clearInterval(this.__internal__timeoutId);\n            this.__internal__timeoutId = null;\n        }\n        // reject all hanging requests\n        eraseRecord(this.__internal__handlers, (h) => {\n            try {\n                h.callback(error, undefined);\n            }\n            catch (err) {\n                // does not throw\n                l.error(err);\n            }\n        });\n        eraseRecord(this.__internal__waitingForId);\n        // Reset stats for active endpoint\n        this.__internal__endpointStats = defaultEndpointStats();\n        this.__internal__emit('disconnected');\n        if (this.__internal__autoConnectMs > 0) {\n            setTimeout(() => {\n                this.connectWithRetry().catch(noop);\n            }, this.__internal__autoConnectMs);\n        }\n    };\n    __internal__onSocketError = (error) => {\n        l.debug(() => ['socket error', error]);\n        this.__internal__emit('error', error);\n    };\n    __internal__onSocketMessage = (message) => {\n        l.debug(() => ['received', message.data]);\n        const bytesRecv = message.data.length;\n        this.__internal__endpointStats.bytesRecv += bytesRecv;\n        this.__internal__stats.total.bytesRecv += bytesRecv;\n        const response = JSON.parse(message.data);\n        return isUndefined(response.method)\n            ? this.__internal__onSocketMessageResult(response)\n            : this.__internal__onSocketMessageSubscribe(response);\n    };\n    __internal__onSocketMessageResult = (response) => {\n        const handler = this.__internal__handlers[response.id];\n        if (!handler) {\n            l.debug(() => `Unable to find handler for id=${response.id}`);\n            return;\n        }\n        try {\n            const { method, params, subscription } = handler;\n            const result = this.__internal__coder.decodeResponse(response);\n            // first send the result - in case of subs, we may have an update\n            // immediately if we have some queued results already\n            handler.callback(null, result);\n            if (subscription) {\n                const subId = `${subscription.type}::${result}`;\n                this.__internal__subscriptions[subId] = objectSpread({}, subscription, {\n                    method,\n                    params\n                });\n                // if we have a result waiting for this subscription already\n                if (this.__internal__waitingForId[subId]) {\n                    this.__internal__onSocketMessageSubscribe(this.__internal__waitingForId[subId]);\n                }\n            }\n        }\n        catch (error) {\n            this.__internal__endpointStats.errors++;\n            this.__internal__stats.total.errors++;\n            handler.callback(error, undefined);\n        }\n        delete this.__internal__handlers[response.id];\n    };\n    __internal__onSocketMessageSubscribe = (response) => {\n        if (!response.method) {\n            throw new Error('No method found in JSONRPC response');\n        }\n        const method = ALIASES[response.method] || response.method;\n        const subId = `${method}::${response.params.subscription}`;\n        const handler = this.__internal__subscriptions[subId];\n        if (!handler) {\n            // store the JSON, we could have out-of-order subid coming in\n            this.__internal__waitingForId[subId] = response;\n            l.debug(() => `Unable to find handler for subscription=${subId}`);\n            return;\n        }\n        // housekeeping\n        delete this.__internal__waitingForId[subId];\n        try {\n            const result = this.__internal__coder.decodeResponse(response);\n            handler.callback(null, result);\n        }\n        catch (error) {\n            this.__internal__endpointStats.errors++;\n            this.__internal__stats.total.errors++;\n            handler.callback(error, undefined);\n        }\n    };\n    __internal__onSocketOpen = () => {\n        if (this.__internal__websocket === null) {\n            throw new Error('WebSocket cannot be null in onOpen');\n        }\n        l.debug(() => ['connected to', this.endpoint]);\n        this.__internal__isConnected = true;\n        this.__internal__resubscribe();\n        this.__internal__emit('connected');\n        return true;\n    };\n    __internal__resubscribe = () => {\n        const subscriptions = this.__internal__subscriptions;\n        this.__internal__subscriptions = {};\n        Promise.all(Object.keys(subscriptions).map(async (id) => {\n            const { callback, method, params, type } = subscriptions[id];\n            // only re-create subscriptions which are not in author (only area where\n            // transactions are created, i.e. submissions such as 'author_submitAndWatchExtrinsic'\n            // are not included (and will not be re-broadcast)\n            if (type.startsWith('author_')) {\n                return;\n            }\n            try {\n                await this.subscribe(type, method, params, callback);\n            }\n            catch (error) {\n                l.error(error);\n            }\n        })).catch(l.error);\n    };\n    __internal__timeoutHandlers = () => {\n        const now = Date.now();\n        const ids = Object.keys(this.__internal__handlers);\n        for (let i = 0, count = ids.length; i < count; i++) {\n            const handler = this.__internal__handlers[ids[i]];\n            if ((now - handler.start) > this.__internal__timeout) {\n                try {\n                    handler.callback(new Error(`No response received from RPC endpoint in ${this.__internal__timeout / 1000}s`), undefined);\n                }\n                catch {\n                    // ignore\n                }\n                this.__internal__endpointStats.timeout++;\n                this.__internal__stats.total.timeout++;\n                delete this.__internal__handlers[ids[i]];\n            }\n        }\n    };\n}\n","import { EmptyError } from '../util/EmptyError';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function throwIfEmpty(errorFactory) {\n    if (errorFactory === void 0) { errorFactory = defaultErrorFactory; }\n    return operate(function (source, subscriber) {\n        var hasValue = false;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            hasValue = true;\n            subscriber.next(value);\n        }, function () { return (hasValue ? subscriber.complete() : subscriber.error(errorFactory())); }));\n    });\n}\nfunction defaultErrorFactory() {\n    return new EmptyError();\n}\n//# sourceMappingURL=throwIfEmpty.js.map","import { EmptyError } from '../util/EmptyError';\nimport { filter } from './filter';\nimport { take } from './take';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { throwIfEmpty } from './throwIfEmpty';\nimport { identity } from '../util/identity';\nexport function first(predicate, defaultValue) {\n    var hasDefaultValue = arguments.length >= 2;\n    return function (source) {\n        return source.pipe(predicate ? filter(function (v, i) { return predicate(v, i, source); }) : identity, take(1), hasDefaultValue ? defaultIfEmpty(defaultValue) : throwIfEmpty(function () { return new EmptyError(); }));\n    };\n}\n//# sourceMappingURL=first.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function filter(predicate, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return predicate.call(thisArg, value, index++) && subscriber.next(value); }));\n    });\n}\n//# sourceMappingURL=filter.js.map","import { EMPTY } from '../observable/empty';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function take(count) {\n    return count <= 0\n        ?\n            function () { return EMPTY; }\n        : operate(function (source, subscriber) {\n            var seen = 0;\n            source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n                if (++seen <= count) {\n                    subscriber.next(value);\n                    if (count <= seen) {\n                        subscriber.complete();\n                    }\n                }\n            }));\n        });\n}\n//# sourceMappingURL=take.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function defaultIfEmpty(defaultValue) {\n    return operate(function (source, subscriber) {\n        var hasValue = false;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            hasValue = true;\n            subscriber.next(value);\n        }, function () {\n            if (!hasValue) {\n                subscriber.next(defaultValue);\n            }\n            subscriber.complete();\n        }));\n    });\n}\n//# sourceMappingURL=defaultIfEmpty.js.map","import { isFunction } from '@polkadot/util';\nexport function isKeyringPair(account) {\n    return isFunction(account.sign);\n}\n","import { logger } from '@polkadot/util';\nexport const l = /*#__PURE__*/ logger('api/util');\n","import { isCompact } from '@polkadot/util';\nimport { l } from './logging.js';\nexport function filterEvents(txHash, { block: { extrinsics, header } }, allEvents, status) {\n    // extrinsics to hashes\n    for (const [txIndex, x] of extrinsics.entries()) {\n        if (x.hash.eq(txHash)) {\n            return {\n                blockNumber: isCompact(header.number) ? header.number.unwrap() : header.number,\n                events: allEvents.filter(({ phase }) => phase.isApplyExtrinsic &&\n                    phase.asApplyExtrinsic.eqn(txIndex)),\n                txIndex\n            };\n        }\n    }\n    // if we do get the block after finalized, it _should_ be there\n    // only warn on filtering with isInBlock (finalization finalizes after)\n    if (status.isInBlock) {\n        const allHashes = extrinsics.map((x) => x.hash.toHex());\n        l.warn(`block ${header.hash.toHex()}: Unable to find extrinsic ${txHash.toHex()} inside ${allHashes.join(', ')}`);\n    }\n    return {};\n}\n","const recordIdentity = (record) => record;\nfunction filterAndApply(events, section, methods, onFound) {\n    return events\n        .filter(({ event }) => section === event.section &&\n        methods.includes(event.method))\n        .map((record) => onFound(record));\n}\nfunction getDispatchError({ event: { data: [dispatchError] } }) {\n    return dispatchError;\n}\nfunction getDispatchInfo({ event: { data, method } }) {\n    return method === 'ExtrinsicSuccess'\n        ? data[0]\n        : data[1];\n}\nfunction extractError(events = []) {\n    return filterAndApply(events, 'system', ['ExtrinsicFailed'], getDispatchError)[0];\n}\nfunction extractInfo(events = []) {\n    return filterAndApply(events, 'system', ['ExtrinsicFailed', 'ExtrinsicSuccess'], getDispatchInfo)[0];\n}\nexport class SubmittableResult {\n    dispatchError;\n    dispatchInfo;\n    internalError;\n    events;\n    status;\n    txHash;\n    txIndex;\n    blockNumber;\n    constructor({ blockNumber, dispatchError, dispatchInfo, events, internalError, status, txHash, txIndex }) {\n        this.dispatchError = dispatchError || extractError(events);\n        this.dispatchInfo = dispatchInfo || extractInfo(events);\n        this.events = events || [];\n        this.internalError = internalError;\n        this.status = status;\n        this.txHash = txHash;\n        this.txIndex = txIndex;\n        this.blockNumber = blockNumber;\n    }\n    get isCompleted() {\n        return this.isError || this.status.isInBlock || this.status.isFinalized;\n    }\n    get isError() {\n        return this.status.isDropped || this.status.isFinalityTimeout || this.status.isInvalid || this.status.isUsurped;\n    }\n    get isFinalized() {\n        return this.status.isFinalized;\n    }\n    get isInBlock() {\n        return this.status.isInBlock;\n    }\n    get isWarning() {\n        return this.status.isRetracted;\n    }\n    /**\n     * @description Filters EventRecords for the specified method & section (there could be multiple)\n     */\n    filterRecords(section, method) {\n        return filterAndApply(this.events, section, Array.isArray(method) ? method : [method], recordIdentity);\n    }\n    /**\n     * @description Finds an EventRecord for the specified method & section\n     */\n    findRecord(section, method) {\n        return this.filterRecords(section, method)[0];\n    }\n    /**\n     * @description Creates a human representation of the output\n     */\n    toHuman(isExtended) {\n        return {\n            dispatchError: this.dispatchError?.toHuman(),\n            dispatchInfo: this.dispatchInfo?.toHuman(),\n            events: this.events.map((e) => e.toHuman(isExtended)),\n            internalError: this.internalError?.message.toString(),\n            status: this.status.toHuman(isExtended)\n        };\n    }\n}\n","import { catchError, first, map, mergeMap, of, switchMap, tap } from 'rxjs';\nimport { identity, isBn, isFunction, isNumber, isString, isU8a, objectSpread } from '@polkadot/util';\nimport { filterEvents, isKeyringPair } from '../util/index.js';\nimport { SubmittableResult } from './Result.js';\nfunction makeEraOptions(api, registry, partialOptions, { header, mortalLength, nonce }) {\n    if (!header) {\n        if (partialOptions.era && !partialOptions.blockHash) {\n            throw new Error('Expected blockHash to be passed alongside non-immortal era options');\n        }\n        if (isNumber(partialOptions.era)) {\n            // since we have no header, it is immortal, remove any option overrides\n            // so we only supply the genesisHash and no era to the construction\n            delete partialOptions.era;\n            delete partialOptions.blockHash;\n        }\n        return makeSignOptions(api, partialOptions, { nonce });\n    }\n    return makeSignOptions(api, partialOptions, {\n        blockHash: header.hash,\n        era: registry.createTypeUnsafe('ExtrinsicEra', [{\n                current: header.number,\n                period: partialOptions.era || mortalLength\n            }]),\n        nonce\n    });\n}\nfunction makeSignAndSendOptions(partialOptions, statusCb) {\n    let options = {};\n    if (isFunction(partialOptions)) {\n        statusCb = partialOptions;\n    }\n    else {\n        options = objectSpread({}, partialOptions);\n    }\n    return [options, statusCb];\n}\nfunction makeSignOptions(api, partialOptions, extras) {\n    return objectSpread({ blockHash: api.genesisHash, genesisHash: api.genesisHash }, partialOptions, extras, { runtimeVersion: api.runtimeVersion, signedExtensions: api.registry.signedExtensions, version: api.extrinsicType });\n}\nfunction optionsOrNonce(partialOptions = {}) {\n    return isBn(partialOptions) || isNumber(partialOptions)\n        ? { nonce: partialOptions }\n        : partialOptions;\n}\nexport function createClass({ api, apiType, blockHash, decorateMethod }) {\n    // an instance of the base extrinsic for us to extend\n    const ExtrinsicBase = api.registry.createClass('Extrinsic');\n    class Submittable extends ExtrinsicBase {\n        __internal__ignoreStatusCb;\n        __internal__transformResult = (identity);\n        constructor(registry, extrinsic) {\n            super(registry, extrinsic, { version: api.extrinsicType });\n            this.__internal__ignoreStatusCb = apiType === 'rxjs';\n        }\n        get hasDryRun() {\n            return isFunction(api.rpc.system?.dryRun);\n        }\n        get hasPaymentInfo() {\n            return isFunction(api.call.transactionPaymentApi?.queryInfo);\n        }\n        // dry run an extrinsic\n        dryRun(account, optionsOrHash) {\n            if (!this.hasDryRun) {\n                throw new Error('The system.dryRun RPC call is not available in your environment');\n            }\n            if (blockHash || isString(optionsOrHash) || isU8a(optionsOrHash)) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n                return decorateMethod(() => api.rpc.system.dryRun(this.toHex(), blockHash || optionsOrHash));\n            }\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return,@typescript-eslint/no-unsafe-call\n            return decorateMethod(() => this.__internal__observeSign(account, optionsOrHash).pipe(switchMap(() => api.rpc.system.dryRun(this.toHex()))))();\n        }\n        // calculate the payment info for this transaction (if signed and submitted)\n        paymentInfo(account, optionsOrHash) {\n            if (!this.hasPaymentInfo) {\n                throw new Error('The transactionPaymentApi.queryInfo runtime call is not available in your environment');\n            }\n            if (blockHash || isString(optionsOrHash) || isU8a(optionsOrHash)) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n                return decorateMethod(() => api.callAt(blockHash || optionsOrHash).pipe(switchMap((callAt) => {\n                    const u8a = this.toU8a();\n                    return callAt.transactionPaymentApi.queryInfo(u8a, u8a.length);\n                })));\n            }\n            const [allOptions] = makeSignAndSendOptions(optionsOrHash);\n            const address = isKeyringPair(account) ? account.address : account.toString();\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return,@typescript-eslint/no-unsafe-call\n            return decorateMethod(() => api.derive.tx.signingInfo(address, allOptions.nonce, allOptions.era).pipe(first(), switchMap((signingInfo) => {\n                // setup our options (same way as in signAndSend)\n                const eraOptions = makeEraOptions(api, this.registry, allOptions, signingInfo);\n                const signOptions = makeSignOptions(api, eraOptions, {});\n                // 1. Don't use the internal objects inside the new tx (hence toU8a)\n                // 2. Don't override the data from existing signed extrinsics\n                // 3. Ensure that this object stays intact, with no new sign after operation\n                const u8a = api.tx(this.toU8a()).signFake(address, signOptions).toU8a();\n                return api.call.transactionPaymentApi.queryInfo(u8a, u8a.length);\n            })))();\n        }\n        // send implementation for both immediate Hash and statusCb variants\n        send(statusCb) {\n            const isSubscription = api.hasSubscriptions && (this.__internal__ignoreStatusCb || !!statusCb);\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return,@typescript-eslint/no-unsafe-call\n            return decorateMethod(isSubscription\n                ? this.__internal__observeSubscribe\n                : this.__internal__observeSend)(statusCb);\n        }\n        /**\n         * @description Signs a transaction, returning `this` to allow chaining. E.g.: `signAsync(...).send()`. Like `.signAndSend` this will retrieve the nonce and blockHash to send the tx with.\n         */\n        signAsync(account, partialOptions) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return,@typescript-eslint/no-unsafe-call\n            return decorateMethod(() => this.__internal__observeSign(account, partialOptions).pipe(map(() => this)))();\n        }\n        // signAndSend implementation for all 3 cases above\n        signAndSend(account, partialOptions, optionalStatusCb) {\n            const [options, statusCb] = makeSignAndSendOptions(partialOptions, optionalStatusCb);\n            const isSubscription = api.hasSubscriptions && (this.__internal__ignoreStatusCb || !!statusCb);\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return,@typescript-eslint/no-unsafe-call\n            return decorateMethod(() => this.__internal__observeSign(account, options).pipe(switchMap((info) => isSubscription\n                ? this.__internal__observeSubscribe(info)\n                : this.__internal__observeSend(info))) // FIXME This is wrong, SubmittableResult is _not_ a codec\n            )(statusCb);\n        }\n        // adds a transform to the result, applied before result is returned\n        withResultTransform(transform) {\n            this.__internal__transformResult = transform;\n            return this;\n        }\n        __internal__observeSign = (account, partialOptions) => {\n            const address = isKeyringPair(account) ? account.address : account.toString();\n            const options = optionsOrNonce(partialOptions);\n            return api.derive.tx.signingInfo(address, options.nonce, options.era).pipe(first(), mergeMap(async (signingInfo) => {\n                const eraOptions = makeEraOptions(api, this.registry, options, signingInfo);\n                let updateId = -1;\n                if (isKeyringPair(account)) {\n                    this.sign(account, eraOptions);\n                }\n                else {\n                    updateId = await this.__internal__signViaSigner(address, eraOptions, signingInfo.header);\n                }\n                return { options: eraOptions, updateId };\n            }));\n        };\n        __internal__observeStatus = (txHash, status) => {\n            if (!status.isFinalized && !status.isInBlock) {\n                return of(this.__internal__transformResult(new SubmittableResult({\n                    status,\n                    txHash\n                })));\n            }\n            const blockHash = status.isInBlock\n                ? status.asInBlock\n                : status.asFinalized;\n            return api.derive.tx.events(blockHash).pipe(map(({ block, events }) => this.__internal__transformResult(new SubmittableResult({\n                ...filterEvents(txHash, block, events, status),\n                status,\n                txHash\n            }))), catchError((internalError) => of(this.__internal__transformResult(new SubmittableResult({\n                internalError,\n                status,\n                txHash\n            })))));\n        };\n        __internal__observeSend = (info) => {\n            return api.rpc.author.submitExtrinsic(this).pipe(tap((hash) => {\n                this.__internal__updateSigner(hash, info);\n            }));\n        };\n        __internal__observeSubscribe = (info) => {\n            const txHash = this.hash;\n            return api.rpc.author.submitAndWatchExtrinsic(this).pipe(switchMap((status) => this.__internal__observeStatus(txHash, status)), tap((status) => {\n                this.__internal__updateSigner(status, info);\n            }));\n        };\n        __internal__signViaSigner = async (address, options, header) => {\n            const signer = options.signer || api.signer;\n            if (!signer) {\n                throw new Error('No signer specified, either via api.setSigner or via sign options. You possibly need to pass through an explicit keypair for the origin so it can be used for signing.');\n            }\n            const payload = this.registry.createTypeUnsafe('SignerPayload', [objectSpread({}, options, {\n                    address,\n                    blockNumber: header ? header.number : 0,\n                    method: this.method\n                })]);\n            let result;\n            if (isFunction(signer.signPayload)) {\n                result = await signer.signPayload(payload.toPayload());\n            }\n            else if (isFunction(signer.signRaw)) {\n                result = await signer.signRaw(payload.toRaw());\n            }\n            else {\n                throw new Error('Invalid signer interface, it should implement either signPayload or signRaw (or both)');\n            }\n            // Here we explicitly call `toPayload()` again instead of working with an object\n            // (reference) as passed to the signer. This means that we are sure that the\n            // payload data is not modified from our inputs, but the signer\n            super.addSignature(address, result.signature, payload.toPayload());\n            return result.id;\n        };\n        __internal__updateSigner = (status, info) => {\n            if (info && (info.updateId !== -1)) {\n                const { options, updateId } = info;\n                const signer = options.signer || api.signer;\n                if (signer && isFunction(signer.update)) {\n                    signer.update(updateId, status);\n                }\n            }\n        };\n    }\n    return Submittable;\n}\n","import { createClass } from './createClass.js';\nexport function createSubmittable(apiType, api, decorateMethod, registry, blockHash) {\n    const Submittable = createClass({ api, apiType, blockHash, decorateMethod });\n    return (extrinsic) => new Submittable(registry || api.registry, extrinsic);\n}\n","import { lazyMethods, logger, objectClear } from '@polkadot/util';\nconst l = logger('api/augment');\nfunction logLength(type, values, and = []) {\n    return values.length\n        ? ` ${values.length} ${type}${and.length ? ' and' : ''}`\n        : '';\n}\nfunction logValues(type, values) {\n    return values.length\n        ? `\\n\\t${type.padStart(7)}: ${values.sort().join(', ')}`\n        : '';\n}\nfunction warn(prefix, type, [added, removed]) {\n    if (added.length || removed.length) {\n        l.warn(`api.${prefix}: Found${logLength('added', added, removed)}${logLength('removed', removed)} ${type}:${logValues('added', added)}${logValues('removed', removed)}`);\n    }\n}\nfunction findSectionExcludes(a, b) {\n    return a.filter((s) => !b.includes(s));\n}\nfunction findSectionIncludes(a, b) {\n    return a.filter((s) => b.includes(s));\n}\nfunction extractSections(src, dst) {\n    const srcSections = Object.keys(src);\n    const dstSections = Object.keys(dst);\n    return [\n        findSectionExcludes(srcSections, dstSections),\n        findSectionExcludes(dstSections, srcSections)\n    ];\n}\nfunction findMethodExcludes(src, dst) {\n    const srcSections = Object.keys(src);\n    const dstSections = findSectionIncludes(Object.keys(dst), srcSections);\n    const excludes = [];\n    for (let s = 0, scount = dstSections.length; s < scount; s++) {\n        const section = dstSections[s];\n        const srcMethods = Object.keys(src[section]);\n        const dstMethods = Object.keys(dst[section]);\n        for (let d = 0, mcount = dstMethods.length; d < mcount; d++) {\n            const method = dstMethods[d];\n            if (!srcMethods.includes(method)) {\n                excludes.push(`${section}.${method}`);\n            }\n        }\n    }\n    return excludes;\n}\nfunction extractMethods(src, dst) {\n    return [\n        findMethodExcludes(dst, src),\n        findMethodExcludes(src, dst)\n    ];\n}\n/**\n * @description Takes a decorated api section (e.g. api.tx) and augment it with the details. It does not override what is\n * already available, but rather just adds new missing items into the result object.\n * @internal\n */\nexport function augmentObject(prefix, src, dst, fromEmpty = false) {\n    fromEmpty && objectClear(dst);\n    // NOTE: This part is slightly problematic since it will get the\n    // values for at least all the sections and the names of the methods\n    // (Since methods won't be decorated before lazy, this _may_ be ok)\n    if (prefix && Object.keys(dst).length) {\n        warn(prefix, 'modules', extractSections(src, dst));\n        warn(prefix, 'calls', extractMethods(src, dst));\n    }\n    const sections = Object.keys(src);\n    for (let i = 0, count = sections.length; i < count; i++) {\n        const section = sections[i];\n        const methods = src[section];\n        // We don't set here with a lazy interface, we decorate based\n        // on the top-level structure (this bypasses adding lazy onto lazy)\n        if (!dst[section]) {\n            dst[section] = {};\n        }\n        lazyMethods(dst[section], Object.keys(methods), (m) => methods[m]);\n    }\n    return dst;\n}\n","import { lazyDeriveSection } from '@polkadot/api-derive';\n/**\n * This is a section decorator which keeps all type information.\n */\nexport function decorateDeriveSections(decorateMethod, derives) {\n    const getKeys = (s) => Object.keys(derives[s]);\n    const creator = (s, m) => decorateMethod(derives[s][m]);\n    const result = {};\n    const names = Object.keys(derives);\n    for (let i = 0, count = names.length; i < count; i++) {\n        lazyDeriveSection(result, names[i], getKeys, creator);\n    }\n    return result;\n}\n","import { isUndefined } from '@polkadot/util';\nfunction sig({ lookup }, { method, section }, args) {\n    return `${section}.${method}(${args.map((a) => lookup.getTypeDef(a).type).join(', ')})`;\n}\nexport function extractStorageArgs(registry, creator, _args) {\n    const args = _args.filter((a) => !isUndefined(a));\n    if (creator.meta.type.isPlain) {\n        if (args.length !== 0) {\n            throw new Error(`${sig(registry, creator, [])} does not take any arguments, ${args.length} found`);\n        }\n    }\n    else {\n        const { hashers, key } = creator.meta.type.asMap;\n        const keys = hashers.length === 1\n            ? [key]\n            : registry.lookup.getSiType(key).def.asTuple.map((t) => t);\n        if (args.length !== keys.length) {\n            throw new Error(`${sig(registry, creator, keys)} is a map, requiring ${keys.length} arguments, ${args.length} found`);\n        }\n    }\n    // pass as tuple\n    return [creator, args];\n}\n","import { EventEmitter } from 'eventemitter3';\nexport class Events {\n    __internal__eventemitter = new EventEmitter();\n    emit(type, ...args) {\n        return this.__internal__eventemitter.emit(type, ...args);\n    }\n    /**\n     * @description Attach an eventemitter handler to listen to a specific event\n     *\n     * @param type The type of event to listen to. Available events are `connected`, `disconnected`, `ready` and `error`\n     * @param handler The callback to be called when the event fires. Depending on the event type, it could fire with additional arguments.\n     *\n     * @example\n     * <BR>\n     *\n     * ```javascript\n     * api.on('connected', (): void => {\n     *   console.log('API has been connected to the endpoint');\n     * });\n     *\n     * api.on('disconnected', (): void => {\n     *   console.log('API has been disconnected from the endpoint');\n     * });\n     * ```\n     */\n    on(type, handler) {\n        this.__internal__eventemitter.on(type, handler);\n        return this;\n    }\n    /**\n     * @description Remove the given eventemitter handler\n     *\n     * @param type The type of event the callback was attached to. Available events are `connected`, `disconnected`, `ready` and `error`\n     * @param handler The callback to unregister.\n     *\n     * @example\n     * <BR>\n     *\n     * ```javascript\n     * const handler = (): void => {\n     *  console.log('Connected !);\n     * };\n     *\n     * // Start listening\n     * api.on('connected', handler);\n     *\n     * // Stop listening\n     * api.off('connected', handler);\n     * ```\n     */\n    off(type, handler) {\n        this.__internal__eventemitter.removeListener(type, handler);\n        return this;\n    }\n    /**\n     * @description Attach an one-time eventemitter handler to listen to a specific event\n     *\n     * @param type The type of event to listen to. Available events are `connected`, `disconnected`, `ready` and `error`\n     * @param handler The callback to be called when the event fires. Depending on the event type, it could fire with additional arguments.\n     *\n     * @example\n     * <BR>\n     *\n     * ```javascript\n     * api.once('connected', (): void => {\n     *   console.log('API has been connected to the endpoint');\n     * });\n     *\n     * api.once('disconnected', (): void => {\n     *   console.log('API has been disconnected from the endpoint');\n     * });\n     * ```\n     */\n    once(type, handler) {\n        this.__internal__eventemitter.once(type, handler);\n        return this;\n    }\n}\n","import { BehaviorSubject, combineLatest, from, map, of, switchMap, tap, toArray } from 'rxjs';\nimport { getAvailableDerives } from '@polkadot/api-derive';\nimport { memo, RpcCore } from '@polkadot/rpc-core';\nimport { WsProvider } from '@polkadot/rpc-provider';\nimport { expandMetadata, GenericExtrinsic, typeDefinitions, TypeRegistry } from '@polkadot/types';\nimport { getSpecRuntime } from '@polkadot/types-known';\nimport { arrayChunk, arrayFlatten, assertReturn, BN, compactStripLength, lazyMethod, lazyMethods, logger, nextTick, objectSpread, stringCamelCase, stringUpperFirst, u8aConcatStrict, u8aToHex } from '@polkadot/util';\nimport { blake2AsHex } from '@polkadot/util-crypto';\nimport { createSubmittable } from '../submittable/index.js';\nimport { augmentObject } from '../util/augmentObject.js';\nimport { decorateDeriveSections } from '../util/decorate.js';\nimport { extractStorageArgs } from '../util/validate.js';\nimport { Events } from './Events.js';\nimport { findCall, findError } from './find.js';\nconst PAGE_SIZE_K = 1000; // limit aligned with the 1k on the node (trie lookups are heavy)\nconst PAGE_SIZE_V = 250; // limited since the data may be > 16MB (e.g. misfiring elections)\nconst PAGE_SIZE_Q = 50; // queue of pending storage queries (mapped together, next tick)\nconst l = logger('api/init');\nlet instanceCounter = 0;\nfunction getAtQueryFn(api, { method, section }) {\n    return assertReturn(api.rx.query[section] && api.rx.query[section][method], () => `query.${section}.${method} is not available in this version of the metadata`);\n}\nexport class Decorate extends Events {\n    __internal__instanceId;\n    __internal__runtimeLog = {};\n    __internal__registry;\n    __internal__storageGetQ = [];\n    __internal__storageSubQ = [];\n    // HACK Use BN import so decorateDerive works... yes, wtf.\n    __phantom = new BN(0);\n    _type;\n    _call = {};\n    _consts = {};\n    _derive;\n    _errors = {};\n    _events = {};\n    _extrinsics;\n    _extrinsicType = GenericExtrinsic.LATEST_EXTRINSIC_VERSION;\n    _genesisHash;\n    _isConnected;\n    _isReady = false;\n    _query = {};\n    _queryMulti;\n    _rpc;\n    _rpcCore;\n    _runtimeMap = {};\n    _runtimeChain;\n    _runtimeMetadata;\n    _runtimeVersion;\n    _rx = { call: {}, consts: {}, query: {}, tx: {} };\n    _options;\n    /**\n     * This is the one and only method concrete children classes need to implement.\n     * It's a higher-order function, which takes one argument\n     * `method: Method extends (...args: any[]) => Observable<any>`\n     * (and one optional `options`), and should return the user facing method.\n     * For example:\n     * - For ApiRx, `decorateMethod` should just be identity, because the input\n     * function is already an Observable\n     * - For ApiPromise, `decorateMethod` should return a function that takes all\n     * the parameters from `method`, adds an optional `callback` argument, and\n     * returns a Promise.\n     *\n     * We could easily imagine other user-facing interfaces, which are simply\n     * implemented by transforming the Observable to Stream/Iterator/Kefir/Bacon\n     * via `decorateMethod`.\n     */\n    _decorateMethod;\n    /**\n     * @description Create an instance of the class\n     *\n     * @param options Options object to create API instance or a Provider instance\n     *\n     * @example\n     * <BR>\n     *\n     * ```javascript\n     * import Api from '@polkadot/api/promise';\n     *\n     * const api = new Api().isReady();\n     *\n     * api.rpc.subscribeNewHeads((header) => {\n     *   console.log(`new block #${header.number.toNumber()}`);\n     * });\n     * ```\n     */\n    constructor(options, type, decorateMethod) {\n        super();\n        this.__internal__instanceId = `${++instanceCounter}`;\n        this.__internal__registry = options.source?.registry || options.registry || new TypeRegistry();\n        this._rx.callAt = (blockHash, knownVersion) => from(this.at(blockHash, knownVersion)).pipe(map((a) => a.rx.call));\n        this._rx.queryAt = (blockHash, knownVersion) => from(this.at(blockHash, knownVersion)).pipe(map((a) => a.rx.query));\n        this._rx.registry = this.__internal__registry;\n        this._decorateMethod = decorateMethod;\n        this._options = options;\n        this._type = type;\n        const provider = options.source\n            ? options.source._rpcCore.provider.isClonable\n                ? options.source._rpcCore.provider.clone()\n                : options.source._rpcCore.provider\n            : (options.provider || new WsProvider());\n        // The RPC interface decorates the known interfaces on init\n        this._rpcCore = new RpcCore(this.__internal__instanceId, this.__internal__registry, {\n            isPedantic: this._options.isPedantic,\n            provider,\n            userRpc: this._options.rpc\n        });\n        this._isConnected = new BehaviorSubject(this._rpcCore.provider.isConnected);\n        this._rx.hasSubscriptions = this._rpcCore.provider.hasSubscriptions;\n    }\n    /**\n     * @description Return the current used registry\n     */\n    get registry() {\n        return this.__internal__registry;\n    }\n    /**\n     * @description Creates an instance of a type as registered\n     */\n    createType(type, ...params) {\n        return this.__internal__registry.createType(type, ...params);\n    }\n    /**\n     * @description Register additional user-defined of chain-specific types in the type registry\n     */\n    registerTypes(types) {\n        types && this.__internal__registry.register(types);\n    }\n    /**\n     * @returns `true` if the API operates with subscriptions\n     */\n    get hasSubscriptions() {\n        return this._rpcCore.provider.hasSubscriptions;\n    }\n    /**\n     * @returns `true` if the API decorate multi-key queries\n     */\n    get supportMulti() {\n        return this._rpcCore.provider.hasSubscriptions || !!this._rpcCore.state.queryStorageAt;\n    }\n    _emptyDecorated(registry, blockHash) {\n        return {\n            call: {},\n            consts: {},\n            errors: {},\n            events: {},\n            query: {},\n            registry,\n            rx: {\n                call: {},\n                query: {}\n            },\n            tx: createSubmittable(this._type, this._rx, this._decorateMethod, registry, blockHash)\n        };\n    }\n    _createDecorated(registry, fromEmpty, decoratedApi, blockHash) {\n        if (!decoratedApi) {\n            decoratedApi = this._emptyDecorated(registry.registry, blockHash);\n        }\n        if (fromEmpty || !registry.decoratedMeta) {\n            registry.decoratedMeta = expandMetadata(registry.registry, registry.metadata);\n        }\n        const runtime = this._decorateCalls(registry, this._decorateMethod, blockHash);\n        const runtimeRx = this._decorateCalls(registry, this._rxDecorateMethod, blockHash);\n        const storage = this._decorateStorage(registry.decoratedMeta, this._decorateMethod, blockHash);\n        const storageRx = this._decorateStorage(registry.decoratedMeta, this._rxDecorateMethod, blockHash);\n        augmentObject('consts', registry.decoratedMeta.consts, decoratedApi.consts, fromEmpty);\n        augmentObject('errors', registry.decoratedMeta.errors, decoratedApi.errors, fromEmpty);\n        augmentObject('events', registry.decoratedMeta.events, decoratedApi.events, fromEmpty);\n        augmentObject('query', storage, decoratedApi.query, fromEmpty);\n        augmentObject('query', storageRx, decoratedApi.rx.query, fromEmpty);\n        augmentObject('call', runtime, decoratedApi.call, fromEmpty);\n        augmentObject('call', runtimeRx, decoratedApi.rx.call, fromEmpty);\n        decoratedApi.findCall = (callIndex) => findCall(registry.registry, callIndex);\n        decoratedApi.findError = (errorIndex) => findError(registry.registry, errorIndex);\n        decoratedApi.queryMulti = blockHash\n            ? this._decorateMultiAt(decoratedApi, this._decorateMethod, blockHash)\n            : this._decorateMulti(this._decorateMethod);\n        decoratedApi.runtimeVersion = registry.runtimeVersion;\n        return {\n            createdAt: blockHash,\n            decoratedApi,\n            decoratedMeta: registry.decoratedMeta\n        };\n    }\n    _injectMetadata(registry, fromEmpty = false) {\n        // clear the decoration, we are redoing it here\n        if (fromEmpty || !registry.decoratedApi) {\n            registry.decoratedApi = this._emptyDecorated(registry.registry);\n        }\n        const { decoratedApi, decoratedMeta } = this._createDecorated(registry, fromEmpty, registry.decoratedApi);\n        this._call = decoratedApi.call;\n        this._consts = decoratedApi.consts;\n        this._errors = decoratedApi.errors;\n        this._events = decoratedApi.events;\n        this._query = decoratedApi.query;\n        this._rx.call = decoratedApi.rx.call;\n        this._rx.query = decoratedApi.rx.query;\n        const tx = this._decorateExtrinsics(decoratedMeta, this._decorateMethod);\n        const rxtx = this._decorateExtrinsics(decoratedMeta, this._rxDecorateMethod);\n        if (fromEmpty || !this._extrinsics) {\n            this._extrinsics = tx;\n            this._rx.tx = rxtx;\n        }\n        else {\n            augmentObject('tx', tx, this._extrinsics, false);\n            augmentObject(null, rxtx, this._rx.tx, false);\n        }\n        augmentObject(null, decoratedMeta.consts, this._rx.consts, fromEmpty);\n        this.emit('decorated');\n    }\n    /**\n     * @deprecated\n     * backwards compatible endpoint for metadata injection, may be removed in the future (However, it is still useful for testing injection)\n     */\n    injectMetadata(metadata, fromEmpty, registry) {\n        this._injectMetadata({ counter: 0, metadata, registry: registry || this.__internal__registry, runtimeVersion: this.__internal__registry.createType('RuntimeVersionPartial') }, fromEmpty);\n    }\n    _decorateFunctionMeta(input, output) {\n        output.meta = input.meta;\n        output.method = input.method;\n        output.section = input.section;\n        output.toJSON = input.toJSON;\n        if (input.callIndex) {\n            output.callIndex = input.callIndex;\n        }\n        return output;\n    }\n    // Filter all RPC methods based on the results of the rpc_methods call. We do this in the following\n    // manner to cater for both old and new:\n    //   - when the number of entries are 0, only remove the ones with isOptional (account & contracts)\n    //   - when non-zero, remove anything that is not in the array (we don't do this)\n    _filterRpc(methods, additional) {\n        // add any specific user-base RPCs\n        if (Object.keys(additional).length !== 0) {\n            this._rpcCore.addUserInterfaces(additional);\n            // re-decorate, only adding any new additional interfaces\n            this._decorateRpc(this._rpcCore, this._decorateMethod, this._rpc);\n            this._decorateRpc(this._rpcCore, this._rxDecorateMethod, this._rx.rpc);\n        }\n        // extract the actual sections from the methods (this is useful when\n        // we try and create mappings to runtime names via a hash mapping)\n        const sectionMap = {};\n        for (let i = 0, count = methods.length; i < count; i++) {\n            const [section] = methods[i].split('_');\n            sectionMap[section] = true;\n        }\n        // convert the actual section names into an easy name lookup\n        const sections = Object.keys(sectionMap);\n        for (let i = 0, count = sections.length; i < count; i++) {\n            const nameA = stringUpperFirst(sections[i]);\n            const nameB = `${nameA}Api`;\n            this._runtimeMap[blake2AsHex(nameA, 64)] = nameA;\n            this._runtimeMap[blake2AsHex(nameB, 64)] = nameB;\n        }\n        // finally we filter the actual methods to expose\n        this._filterRpcMethods(methods);\n    }\n    _filterRpcMethods(exposed) {\n        const hasResults = exposed.length !== 0;\n        const allKnown = [...this._rpcCore.mapping.entries()];\n        const allKeys = [];\n        const count = allKnown.length;\n        for (let i = 0; i < count; i++) {\n            const [, { alias, endpoint, method, pubsub, section }] = allKnown[i];\n            allKeys.push(`${section}_${method}`);\n            if (pubsub) {\n                allKeys.push(`${section}_${pubsub[1]}`);\n                allKeys.push(`${section}_${pubsub[2]}`);\n            }\n            if (alias) {\n                allKeys.push(...alias);\n            }\n            if (endpoint) {\n                allKeys.push(endpoint);\n            }\n        }\n        const unknown = exposed.filter((k) => !allKeys.includes(k) &&\n            !k.includes('_unstable_'));\n        if (unknown.length && !this._options.noInitWarn) {\n            l.warn(`RPC methods not decorated: ${unknown.join(', ')}`);\n        }\n        // loop through all entries we have (populated in decorate) and filter as required\n        // only remove when we have results and method missing, or with no results if optional\n        for (let i = 0; i < count; i++) {\n            const [k, { method, section }] = allKnown[i];\n            if (hasResults && !exposed.includes(k) && k !== 'rpc_methods') {\n                if (this._rpc[section]) {\n                    delete this._rpc[section][method];\n                    delete this._rx.rpc[section][method];\n                }\n            }\n        }\n    }\n    _rpcSubmitter(decorateMethod) {\n        const method = (method, ...params) => {\n            return from(this._rpcCore.provider.send(method, params));\n        };\n        return decorateMethod(method);\n    }\n    _decorateRpc(rpc, decorateMethod, input = this._rpcSubmitter(decorateMethod)) {\n        const out = input;\n        const decorateFn = (section, method) => {\n            const source = rpc[section][method];\n            const fn = decorateMethod(source, { methodName: method });\n            fn.meta = source.meta;\n            fn.raw = decorateMethod(source.raw, { methodName: method });\n            return fn;\n        };\n        for (let s = 0, scount = rpc.sections.length; s < scount; s++) {\n            const section = rpc.sections[s];\n            if (!Object.prototype.hasOwnProperty.call(out, section)) {\n                const methods = Object.keys(rpc[section]);\n                const decorateInternal = (method) => decorateFn(section, method);\n                for (let m = 0, mcount = methods.length; m < mcount; m++) {\n                    const method = methods[m];\n                    //  skip subscriptions where we have a non-subscribe interface\n                    if (this.hasSubscriptions || !(method.startsWith('subscribe') || method.startsWith('unsubscribe'))) {\n                        if (!Object.prototype.hasOwnProperty.call(out, section)) {\n                            out[section] = {};\n                        }\n                        lazyMethod(out[section], method, decorateInternal);\n                    }\n                }\n            }\n        }\n        return out;\n    }\n    // add all definition entries\n    _addRuntimeDef(result, additional) {\n        if (!additional) {\n            return;\n        }\n        const entries = Object.entries(additional);\n        for (let j = 0, ecount = entries.length; j < ecount; j++) {\n            const [key, defs] = entries[j];\n            if (result[key]) {\n                // we have this one already, step through for new versions or\n                // new methods and add those as applicable\n                for (let k = 0, dcount = defs.length; k < dcount; k++) {\n                    const def = defs[k];\n                    const prev = result[key].find(({ version }) => def.version === version);\n                    if (prev) {\n                        // interleave the new methods with the old - last definition wins\n                        objectSpread(prev.methods, def.methods);\n                    }\n                    else {\n                        // we don't have this specific version, add it\n                        result[key].push(def);\n                    }\n                }\n            }\n            else {\n                // we don't have this runtime definition, add it as-is\n                result[key] = defs;\n            }\n        }\n    }\n    // extract all runtime definitions\n    _getRuntimeDefs(registry, specName, chain = '') {\n        const result = {};\n        const defValues = Object.values(typeDefinitions);\n        // options > chain/spec > built-in, apply in reverse order with\n        // methods overriding previous definitions (or interleave missing)\n        for (let i = 0, count = defValues.length; i < count; i++) {\n            this._addRuntimeDef(result, defValues[i].runtime);\n        }\n        this._addRuntimeDef(result, getSpecRuntime(registry, chain, specName));\n        this._addRuntimeDef(result, this._options.runtime);\n        return Object.entries(result);\n    }\n    // pre-metadata decoration\n    _decorateCalls({ registry, runtimeVersion: { apis, specName, specVersion } }, decorateMethod, blockHash) {\n        const result = {};\n        const named = {};\n        const hashes = {};\n        const sections = this._getRuntimeDefs(registry, specName, this._runtimeChain);\n        const older = [];\n        const implName = `${specName.toString()}/${specVersion.toString()}`;\n        const hasLogged = this.__internal__runtimeLog[implName] || false;\n        this.__internal__runtimeLog[implName] = true;\n        for (let i = 0, scount = sections.length; i < scount; i++) {\n            const [_section, secs] = sections[i];\n            const sectionHash = blake2AsHex(_section, 64);\n            const rtApi = apis.find(([a]) => a.eq(sectionHash));\n            hashes[sectionHash] = true;\n            if (rtApi) {\n                const all = secs.map(({ version }) => version).sort();\n                const sec = secs.find(({ version }) => rtApi[1].eq(version));\n                if (sec) {\n                    const section = stringCamelCase(_section);\n                    const methods = Object.entries(sec.methods);\n                    if (methods.length) {\n                        if (!named[section]) {\n                            named[section] = {};\n                        }\n                        for (let m = 0, mcount = methods.length; m < mcount; m++) {\n                            const [_method, def] = methods[m];\n                            const method = stringCamelCase(_method);\n                            named[section][method] = objectSpread({ method, name: `${_section}_${_method}`, section, sectionHash }, def);\n                        }\n                    }\n                }\n                else {\n                    older.push(`${_section}/${rtApi[1].toString()} (${all.join('/')} known)`);\n                }\n            }\n        }\n        // find the runtimes that we don't have hashes for\n        const notFound = apis\n            .map(([a, v]) => [a.toHex(), v.toString()])\n            .filter(([a]) => !hashes[a])\n            .map(([a, v]) => `${this._runtimeMap[a] || a}/${v}`);\n        if (!this._options.noInitWarn && !hasLogged) {\n            if (older.length) {\n                l.warn(`${implName}: Not decorating runtime apis without matching versions: ${older.join(', ')}`);\n            }\n            if (notFound.length) {\n                l.warn(`${implName}: Not decorating unknown runtime apis: ${notFound.join(', ')}`);\n            }\n        }\n        const stateCall = blockHash\n            ? (name, bytes) => this._rpcCore.state.call(name, bytes, blockHash)\n            : (name, bytes) => this._rpcCore.state.call(name, bytes);\n        const lazySection = (section) => lazyMethods({}, Object.keys(named[section]), (method) => this._decorateCall(registry, named[section][method], stateCall, decorateMethod));\n        const modules = Object.keys(named);\n        for (let i = 0, count = modules.length; i < count; i++) {\n            lazyMethod(result, modules[i], lazySection);\n        }\n        return result;\n    }\n    _decorateCall(registry, def, stateCall, decorateMethod) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        const decorated = decorateMethod((...args) => {\n            if (args.length !== def.params.length) {\n                throw new Error(`${def.name}:: Expected ${def.params.length} arguments, found ${args.length}`);\n            }\n            const bytes = registry.createType('Raw', u8aConcatStrict(args.map((a, i) => registry.createTypeUnsafe(def.params[i].type, [a]).toU8a())));\n            return stateCall(def.name, bytes).pipe(map((r) => registry.createTypeUnsafe(def.type, [r])));\n        });\n        decorated.meta = def;\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return decorated;\n    }\n    // only be called if supportMulti is true\n    _decorateMulti(decorateMethod) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return decorateMethod((keys) => keys.length\n            ? (this.hasSubscriptions\n                ? this._rpcCore.state.subscribeStorage\n                : this._rpcCore.state.queryStorageAt)(keys.map((args) => Array.isArray(args)\n                ? args[0].creator.meta.type.isPlain\n                    ? [args[0].creator]\n                    : args[0].creator.meta.type.asMap.hashers.length === 1\n                        ? [args[0].creator, args.slice(1)]\n                        : [args[0].creator, ...args.slice(1)]\n                : [args.creator]))\n            : of([]));\n    }\n    _decorateMultiAt(atApi, decorateMethod, blockHash) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return decorateMethod((calls) => calls.length\n            ? this._rpcCore.state.queryStorageAt(calls.map((args) => {\n                if (Array.isArray(args)) {\n                    const { creator } = getAtQueryFn(atApi, args[0].creator);\n                    return creator.meta.type.isPlain\n                        ? [creator]\n                        : creator.meta.type.asMap.hashers.length === 1\n                            ? [creator, args.slice(1)]\n                            : [creator, ...args.slice(1)];\n                }\n                return [getAtQueryFn(atApi, args.creator).creator];\n            }), blockHash)\n            : of([]));\n    }\n    _decorateExtrinsics({ tx }, decorateMethod) {\n        const result = createSubmittable(this._type, this._rx, decorateMethod);\n        const lazySection = (section) => lazyMethods({}, Object.keys(tx[section]), (method) => method.startsWith('$')\n            ? tx[section][method]\n            : this._decorateExtrinsicEntry(tx[section][method], result));\n        const sections = Object.keys(tx);\n        for (let i = 0, count = sections.length; i < count; i++) {\n            lazyMethod(result, sections[i], lazySection);\n        }\n        return result;\n    }\n    _decorateExtrinsicEntry(method, creator) {\n        const decorated = (...params) => creator(method(...params));\n        // pass through the `.is`\n        decorated.is = (other) => method.is(other);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return this._decorateFunctionMeta(method, decorated);\n    }\n    _decorateStorage({ query, registry }, decorateMethod, blockHash) {\n        const result = {};\n        const lazySection = (section) => lazyMethods({}, Object.keys(query[section]), (method) => blockHash\n            ? this._decorateStorageEntryAt(registry, query[section][method], decorateMethod, blockHash)\n            : this._decorateStorageEntry(query[section][method], decorateMethod));\n        const sections = Object.keys(query);\n        for (let i = 0, count = sections.length; i < count; i++) {\n            lazyMethod(result, sections[i], lazySection);\n        }\n        return result;\n    }\n    _decorateStorageEntry(creator, decorateMethod) {\n        const getArgs = (args, registry) => extractStorageArgs(registry || this.__internal__registry, creator, args);\n        const getQueryAt = (blockHash) => from(this.at(blockHash)).pipe(map((api) => getAtQueryFn(api, creator)));\n        // Disable this where it occurs for each field we are decorating\n        /* eslint-disable @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment */\n        const decorated = this._decorateStorageCall(creator, decorateMethod);\n        decorated.creator = creator;\n        // eslint-disable-next-line deprecation/deprecation\n        decorated.at = decorateMethod((blockHash, ...args) => getQueryAt(blockHash).pipe(switchMap((q) => q(...args))));\n        decorated.hash = decorateMethod((...args) => this._rpcCore.state.getStorageHash(getArgs(args)));\n        decorated.is = (key) => key.section === creator.section &&\n            key.method === creator.method;\n        decorated.key = (...args) => u8aToHex(compactStripLength(creator(...args))[1]);\n        decorated.keyPrefix = (...args) => u8aToHex(creator.keyPrefix(...args));\n        decorated.size = decorateMethod((...args) => this._rpcCore.state.getStorageSize(getArgs(args)));\n        // eslint-disable-next-line deprecation/deprecation\n        decorated.sizeAt = decorateMethod((blockHash, ...args) => getQueryAt(blockHash).pipe(switchMap((q) => this._rpcCore.state.getStorageSize(getArgs(args, q.creator.meta.registry), blockHash))));\n        // .keys() & .entries() only available on map types\n        if (creator.iterKey && creator.meta.type.isMap) {\n            decorated.entries = decorateMethod(memo(this.__internal__instanceId, (...args) => this._retrieveMapEntries(creator, null, args)));\n            // eslint-disable-next-line deprecation/deprecation\n            decorated.entriesAt = decorateMethod(memo(this.__internal__instanceId, (blockHash, ...args) => getQueryAt(blockHash).pipe(switchMap((q) => this._retrieveMapEntries(q.creator, blockHash, args)))));\n            decorated.entriesPaged = decorateMethod(memo(this.__internal__instanceId, (opts) => this._retrieveMapEntriesPaged(creator, undefined, opts)));\n            decorated.keys = decorateMethod(memo(this.__internal__instanceId, (...args) => this._retrieveMapKeys(creator, null, args)));\n            // eslint-disable-next-line deprecation/deprecation\n            decorated.keysAt = decorateMethod(memo(this.__internal__instanceId, (blockHash, ...args) => getQueryAt(blockHash).pipe(switchMap((q) => this._retrieveMapKeys(q.creator, blockHash, args)))));\n            decorated.keysPaged = decorateMethod(memo(this.__internal__instanceId, (opts) => this._retrieveMapKeysPaged(creator, undefined, opts)));\n        }\n        if (this.supportMulti && creator.meta.type.isMap) {\n            // When using double map storage function, user need to pass double map key as an array\n            decorated.multi = decorateMethod((args) => creator.meta.type.asMap.hashers.length === 1\n                ? this._retrieveMulti(args.map((a) => [creator, [a]]))\n                : this._retrieveMulti(args.map((a) => [creator, a])));\n        }\n        /* eslint-enable @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment */\n        return this._decorateFunctionMeta(creator, decorated);\n    }\n    _decorateStorageEntryAt(registry, creator, decorateMethod, blockHash) {\n        const getArgs = (args) => extractStorageArgs(registry, creator, args);\n        // Disable this where it occurs for each field we are decorating\n        /* eslint-disable @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment */\n        const decorated = decorateMethod((...args) => this._rpcCore.state.getStorage(getArgs(args), blockHash));\n        decorated.creator = creator;\n        decorated.hash = decorateMethod((...args) => this._rpcCore.state.getStorageHash(getArgs(args), blockHash));\n        decorated.is = (key) => key.section === creator.section &&\n            key.method === creator.method;\n        decorated.key = (...args) => u8aToHex(compactStripLength(creator(...args))[1]);\n        decorated.keyPrefix = (...keys) => u8aToHex(creator.keyPrefix(...keys));\n        decorated.size = decorateMethod((...args) => this._rpcCore.state.getStorageSize(getArgs(args), blockHash));\n        // .keys() & .entries() only available on map types\n        if (creator.iterKey && creator.meta.type.isMap) {\n            decorated.entries = decorateMethod(memo(this.__internal__instanceId, (...args) => this._retrieveMapEntries(creator, blockHash, args)));\n            decorated.entriesPaged = decorateMethod(memo(this.__internal__instanceId, (opts) => this._retrieveMapEntriesPaged(creator, blockHash, opts)));\n            decorated.keys = decorateMethod(memo(this.__internal__instanceId, (...args) => this._retrieveMapKeys(creator, blockHash, args)));\n            decorated.keysPaged = decorateMethod(memo(this.__internal__instanceId, (opts) => this._retrieveMapKeysPaged(creator, blockHash, opts)));\n        }\n        if (this.supportMulti && creator.meta.type.isMap) {\n            // When using double map storage function, user need to pass double map key as an array\n            decorated.multi = decorateMethod((args) => creator.meta.type.asMap.hashers.length === 1\n                ? this._retrieveMulti(args.map((a) => [creator, [a]]), blockHash)\n                : this._retrieveMulti(args.map((a) => [creator, a]), blockHash));\n        }\n        /* eslint-enable @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment */\n        return this._decorateFunctionMeta(creator, decorated);\n    }\n    _queueStorage(call, queue) {\n        const query = queue === this.__internal__storageSubQ\n            ? this._rpcCore.state.subscribeStorage\n            : this._rpcCore.state.queryStorageAt;\n        let queueIdx = queue.length - 1;\n        let valueIdx = 0;\n        let valueObs;\n        // if we don't have queue entries yet,\n        // or the current queue has fired (see from below),\n        // or the current queue has the max entries,\n        // then we create a new queue\n        if (queueIdx === -1 || !queue[queueIdx] || queue[queueIdx][1].length === PAGE_SIZE_Q) {\n            queueIdx++;\n            valueObs = from(\n            // we delay the execution until the next tick, this allows\n            // any queries made in this timeframe to be added to the same\n            // queue for a single query\n            new Promise((resolve) => {\n                nextTick(() => {\n                    // get all the calls in this instance, resolve with it\n                    // and then clear the queue so we don't add more\n                    // (anything after this will be added to a new queue)\n                    const calls = queue[queueIdx][1];\n                    delete queue[queueIdx];\n                    resolve(calls);\n                });\n            })).pipe(switchMap((calls) => query(calls)));\n            queue.push([valueObs, [call]]);\n        }\n        else {\n            valueObs = queue[queueIdx][0];\n            valueIdx = queue[queueIdx][1].length;\n            queue[queueIdx][1].push(call);\n        }\n        return valueObs.pipe(\n        // return the single value at this index\n        map((values) => values[valueIdx]));\n    }\n    // Decorate the base storage call. In the case or rxjs or promise-without-callback (await)\n    // we make a subscription, alternatively we push this through a single-shot query\n    _decorateStorageCall(creator, decorateMethod) {\n        const memoed = memo(this.__internal__instanceId, (...args) => {\n            const call = extractStorageArgs(this.__internal__registry, creator, args);\n            if (!this.hasSubscriptions) {\n                return this._rpcCore.state.getStorage(call);\n            }\n            return this._queueStorage(call, this.__internal__storageSubQ);\n        });\n        return decorateMethod(memoed, {\n            methodName: creator.method,\n            overrideNoSub: (...args) => this._queueStorage(extractStorageArgs(this.__internal__registry, creator, args), this.__internal__storageGetQ)\n        });\n    }\n    // retrieve a set of values for a specific set of keys - here we chunk the keys into PAGE_SIZE sizes\n    _retrieveMulti(keys, blockHash) {\n        if (!keys.length) {\n            return of([]);\n        }\n        const query = this.hasSubscriptions && !blockHash\n            ? this._rpcCore.state.subscribeStorage\n            : this._rpcCore.state.queryStorageAt;\n        if (keys.length <= PAGE_SIZE_V) {\n            return blockHash\n                ? query(keys, blockHash)\n                : query(keys);\n        }\n        return combineLatest(arrayChunk(keys, PAGE_SIZE_V).map((k) => blockHash\n            ? query(k, blockHash)\n            : query(k))).pipe(map(arrayFlatten));\n    }\n    _retrieveMapKeys({ iterKey, meta, method, section }, at, args) {\n        if (!iterKey || !meta.type.isMap) {\n            throw new Error('keys can only be retrieved on maps');\n        }\n        const headKey = iterKey(...args).toHex();\n        const startSubject = new BehaviorSubject(headKey);\n        const query = at\n            ? (startKey) => this._rpcCore.state.getKeysPaged(headKey, PAGE_SIZE_K, startKey, at)\n            : (startKey) => this._rpcCore.state.getKeysPaged(headKey, PAGE_SIZE_K, startKey);\n        const setMeta = (key) => key.setMeta(meta, section, method);\n        return startSubject.pipe(switchMap(query), map((keys) => keys.map(setMeta)), tap((keys) => nextTick(() => {\n            keys.length === PAGE_SIZE_K\n                ? startSubject.next(keys[PAGE_SIZE_K - 1].toHex())\n                : startSubject.complete();\n        })), toArray(), // toArray since we want to startSubject to be completed\n        map(arrayFlatten));\n    }\n    _retrieveMapKeysPaged({ iterKey, meta, method, section }, at, opts) {\n        if (!iterKey || !meta.type.isMap) {\n            throw new Error('keys can only be retrieved on maps');\n        }\n        const setMeta = (key) => key.setMeta(meta, section, method);\n        const query = at\n            ? (headKey) => this._rpcCore.state.getKeysPaged(headKey, opts.pageSize, opts.startKey || headKey, at)\n            : (headKey) => this._rpcCore.state.getKeysPaged(headKey, opts.pageSize, opts.startKey || headKey);\n        return query(iterKey(...opts.args).toHex()).pipe(map((keys) => keys.map(setMeta)));\n    }\n    _retrieveMapEntries(entry, at, args) {\n        const query = at\n            ? (keys) => this._rpcCore.state.queryStorageAt(keys, at)\n            : (keys) => this._rpcCore.state.queryStorageAt(keys);\n        return this._retrieveMapKeys(entry, at, args).pipe(switchMap((keys) => keys.length\n            ? combineLatest(arrayChunk(keys, PAGE_SIZE_V).map(query)).pipe(map((valsArr) => arrayFlatten(valsArr).map((value, index) => [keys[index], value])))\n            : of([])));\n    }\n    _retrieveMapEntriesPaged(entry, at, opts) {\n        const query = at\n            ? (keys) => this._rpcCore.state.queryStorageAt(keys, at)\n            : (keys) => this._rpcCore.state.queryStorageAt(keys);\n        return this._retrieveMapKeysPaged(entry, at, opts).pipe(switchMap((keys) => keys.length\n            ? query(keys).pipe(map((valsArr) => valsArr.map((value, index) => [keys[index], value])))\n            : of([])));\n    }\n    _decorateDeriveRx(decorateMethod) {\n        const specName = this._runtimeVersion?.specName.toString();\n        // Pull in derive from api-derive\n        const available = getAvailableDerives(this.__internal__instanceId, this._rx, objectSpread({}, this._options.derives, this._options.typesBundle?.spec?.[specName || '']?.derives));\n        return decorateDeriveSections(decorateMethod, available);\n    }\n    _decorateDerive(decorateMethod) {\n        return decorateDeriveSections(decorateMethod, this._rx.derive);\n    }\n    /**\n     * Put the `this.onCall` function of ApiRx here, because it is needed by\n     * `api._rx`.\n     */\n    _rxDecorateMethod = (method) => {\n        return method;\n    };\n}\n","import { firstValueFrom, map, of, switchMap } from 'rxjs';\nimport { Metadata, TypeRegistry } from '@polkadot/types';\nimport { getSpecAlias, getSpecExtensions, getSpecHasher, getSpecRpc, getSpecTypes, getUpgradeVersion } from '@polkadot/types-known';\nimport { assertReturn, BN_ZERO, isUndefined, logger, noop, objectSpread, u8aEq, u8aToHex, u8aToU8a } from '@polkadot/util';\nimport { cryptoWaitReady } from '@polkadot/util-crypto';\nimport { Decorate } from './Decorate.js';\nconst KEEPALIVE_INTERVAL = 10000;\nconst WITH_VERSION_SHORTCUT = false;\nconst l = logger('api/init');\nfunction textToString(t) {\n    return t.toString();\n}\nexport class Init extends Decorate {\n    __internal__atLast = null;\n    __internal__healthTimer = null;\n    __internal__registries = [];\n    __internal__updateSub = null;\n    __internal__waitingRegistries = {};\n    constructor(options, type, decorateMethod) {\n        super(options, type, decorateMethod);\n        // all injected types added to the registry for overrides\n        this.registry.setKnownTypes(options);\n        // We only register the types (global) if this is not a cloned instance.\n        // Do right up-front, so we get in the user types before we are actually\n        // doing anything on-chain, this ensures we have the overrides in-place\n        if (!options.source) {\n            this.registerTypes(options.types);\n        }\n        else {\n            this.__internal__registries = options.source.__internal__registries;\n        }\n        this._rpc = this._decorateRpc(this._rpcCore, this._decorateMethod);\n        this._rx.rpc = this._decorateRpc(this._rpcCore, this._rxDecorateMethod);\n        if (this.supportMulti) {\n            this._queryMulti = this._decorateMulti(this._decorateMethod);\n            this._rx.queryMulti = this._decorateMulti(this._rxDecorateMethod);\n        }\n        this._rx.signer = options.signer;\n        this._rpcCore.setRegistrySwap((blockHash) => this.getBlockRegistry(blockHash));\n        this._rpcCore.setResolveBlockHash((blockNumber) => firstValueFrom(this._rpcCore.chain.getBlockHash(blockNumber)));\n        if (this.hasSubscriptions) {\n            this._rpcCore.provider.on('disconnected', () => this.__internal__onProviderDisconnect());\n            this._rpcCore.provider.on('error', (e) => this.__internal__onProviderError(e));\n            this._rpcCore.provider.on('connected', () => this.__internal__onProviderConnect());\n        }\n        else if (!this._options.noInitWarn) {\n            l.warn('Api will be available in a limited mode since the provider does not support subscriptions');\n        }\n        // If the provider was instantiated earlier, and has already emitted a\n        // 'connected' event, then the `on('connected')` won't fire anymore. To\n        // cater for this case, we call manually `this._onProviderConnect`.\n        if (this._rpcCore.provider.isConnected) {\n            this.__internal__onProviderConnect().catch(noop);\n        }\n    }\n    /**\n     * @description Decorates a registry based on the runtime version\n     */\n    _initRegistry(registry, chain, version, metadata, chainProps) {\n        registry.clearCache();\n        registry.setChainProperties(chainProps || this.registry.getChainProperties());\n        registry.setKnownTypes(this._options);\n        registry.register(getSpecTypes(registry, chain, version.specName, version.specVersion));\n        registry.setHasher(getSpecHasher(registry, chain, version.specName));\n        // for bundled types, pull through the aliases defined\n        if (registry.knownTypes.typesBundle) {\n            registry.knownTypes.typesAlias = getSpecAlias(registry, chain, version.specName);\n        }\n        registry.setMetadata(metadata, undefined, objectSpread({}, getSpecExtensions(registry, chain, version.specName), this._options.signedExtensions), this._options.noInitWarn);\n    }\n    /**\n     * @description Returns the default versioned registry\n     */\n    _getDefaultRegistry() {\n        return assertReturn(this.__internal__registries.find(({ isDefault }) => isDefault), 'Initialization error, cannot find the default registry');\n    }\n    /**\n     * @description Returns a decorated API instance at a specific point in time\n     */\n    async at(blockHash, knownVersion) {\n        const u8aHash = u8aToU8a(blockHash);\n        const u8aHex = u8aToHex(u8aHash);\n        const registry = await this.getBlockRegistry(u8aHash, knownVersion);\n        if (!this.__internal__atLast || this.__internal__atLast[0] !== u8aHex) {\n            // always create a new decoration - since we are pointing to a specific hash, this\n            // means that all queries needs to use that hash (not a previous one already existing)\n            this.__internal__atLast = [u8aHex, this._createDecorated(registry, true, null, u8aHash).decoratedApi];\n        }\n        return this.__internal__atLast[1];\n    }\n    async _createBlockRegistry(blockHash, header, version) {\n        const registry = new TypeRegistry(blockHash);\n        const metadata = new Metadata(registry, await firstValueFrom(this._rpcCore.state.getMetadata.raw(header.parentHash)));\n        const runtimeChain = this._runtimeChain;\n        if (!runtimeChain) {\n            throw new Error('Invalid initializion order, runtimeChain is not available');\n        }\n        this._initRegistry(registry, runtimeChain, version, metadata);\n        // add our new registry\n        const result = { counter: 0, lastBlockHash: blockHash, metadata, registry, runtimeVersion: version };\n        this.__internal__registries.push(result);\n        return result;\n    }\n    _cacheBlockRegistryProgress(key, creator) {\n        // look for waiting resolves\n        let waiting = this.__internal__waitingRegistries[key];\n        if (isUndefined(waiting)) {\n            // nothing waiting, construct new\n            waiting = this.__internal__waitingRegistries[key] = new Promise((resolve, reject) => {\n                creator()\n                    .then((registry) => {\n                    delete this.__internal__waitingRegistries[key];\n                    resolve(registry);\n                })\n                    .catch((error) => {\n                    delete this.__internal__waitingRegistries[key];\n                    reject(error);\n                });\n            });\n        }\n        return waiting;\n    }\n    _getBlockRegistryViaVersion(blockHash, version) {\n        if (version) {\n            // check for pre-existing registries. We also check specName, e.g. it\n            // could be changed like in Westmint with upgrade from shell -> westmint\n            const existingViaVersion = this.__internal__registries.find(({ runtimeVersion: { specName, specVersion } }) => specName.eq(version.specName) &&\n                specVersion.eq(version.specVersion));\n            if (existingViaVersion) {\n                existingViaVersion.counter++;\n                existingViaVersion.lastBlockHash = blockHash;\n                return existingViaVersion;\n            }\n        }\n        return null;\n    }\n    async _getBlockRegistryViaHash(blockHash) {\n        // ensure we have everything required\n        if (!this._genesisHash || !this._runtimeVersion) {\n            throw new Error('Cannot retrieve data on an uninitialized chain');\n        }\n        // We have to assume that on the RPC layer the calls used here does not call back into\n        // the registry swap, so getHeader & getRuntimeVersion should not be historic\n        const header = this.registry.createType('HeaderPartial', this._genesisHash.eq(blockHash)\n            ? { number: BN_ZERO, parentHash: this._genesisHash }\n            : await firstValueFrom(this._rpcCore.chain.getHeader.raw(blockHash)));\n        if (header.parentHash.isEmpty) {\n            throw new Error('Unable to retrieve header and parent from supplied hash');\n        }\n        // get the runtime version, either on-chain or via an known upgrade history\n        const [firstVersion, lastVersion] = getUpgradeVersion(this._genesisHash, header.number);\n        const version = this.registry.createType('RuntimeVersionPartial', WITH_VERSION_SHORTCUT && (firstVersion && (lastVersion ||\n            firstVersion.specVersion.eq(this._runtimeVersion.specVersion)))\n            ? { apis: firstVersion.apis, specName: this._runtimeVersion.specName, specVersion: firstVersion.specVersion }\n            : await firstValueFrom(this._rpcCore.state.getRuntimeVersion.raw(header.parentHash)));\n        return (\n        // try to find via version\n        this._getBlockRegistryViaVersion(blockHash, version) ||\n            // return new or in-flight result\n            await this._cacheBlockRegistryProgress(version.toHex(), () => this._createBlockRegistry(blockHash, header, version)));\n    }\n    /**\n     * @description Sets up a registry based on the block hash defined\n     */\n    async getBlockRegistry(blockHash, knownVersion) {\n        return (\n        // try to find via blockHash\n        this.__internal__registries.find(({ lastBlockHash }) => lastBlockHash && u8aEq(lastBlockHash, blockHash)) ||\n            // try to find via version\n            this._getBlockRegistryViaVersion(blockHash, knownVersion) ||\n            // return new or in-flight result\n            await this._cacheBlockRegistryProgress(u8aToHex(blockHash), () => this._getBlockRegistryViaHash(blockHash)));\n    }\n    async _loadMeta() {\n        // on re-connection to the same chain, we don't want to re-do everything from chain again\n        if (this._isReady) {\n            // on re-connection only re-subscribe to chain updates if we are not a clone\n            if (!this._options.source) {\n                this._subscribeUpdates();\n            }\n            return true;\n        }\n        this._unsubscribeUpdates();\n        // only load from on-chain if we are not a clone (default path), alternatively\n        // just use the values from the source instance provided\n        [this._genesisHash, this._runtimeMetadata] = this._options.source?._isReady\n            ? await this._metaFromSource(this._options.source)\n            : await this._metaFromChain(this._options.metadata);\n        return this._initFromMeta(this._runtimeMetadata);\n    }\n    // eslint-disable-next-line @typescript-eslint/require-await\n    async _metaFromSource(source) {\n        this._extrinsicType = source.extrinsicVersion;\n        this._runtimeChain = source.runtimeChain;\n        this._runtimeVersion = source.runtimeVersion;\n        // manually build a list of all available methods in this RPC, we are\n        // going to filter on it to align the cloned RPC without making a call\n        const sections = Object.keys(source.rpc);\n        const rpcs = [];\n        for (let s = 0, scount = sections.length; s < scount; s++) {\n            const section = sections[s];\n            const methods = Object.keys(source.rpc[section]);\n            for (let m = 0, mcount = methods.length; m < mcount; m++) {\n                rpcs.push(`${section}_${methods[m]}`);\n            }\n        }\n        this._filterRpc(rpcs, getSpecRpc(this.registry, source.runtimeChain, source.runtimeVersion.specName));\n        return [source.genesisHash, source.runtimeMetadata];\n    }\n    // subscribe to metadata updates, inject the types on changes\n    _subscribeUpdates() {\n        if (this.__internal__updateSub || !this.hasSubscriptions) {\n            return;\n        }\n        this.__internal__updateSub = this._rpcCore.state.subscribeRuntimeVersion().pipe(switchMap((version) => \n        // only retrieve the metadata when the on-chain version has been changed\n        this._runtimeVersion?.specVersion.eq(version.specVersion)\n            ? of(false)\n            : this._rpcCore.state.getMetadata().pipe(map((metadata) => {\n                l.log(`Runtime version updated to spec=${version.specVersion.toString()}, tx=${version.transactionVersion.toString()}`);\n                this._runtimeMetadata = metadata;\n                this._runtimeVersion = version;\n                this._rx.runtimeVersion = version;\n                // update the default registry version\n                const thisRegistry = this._getDefaultRegistry();\n                const runtimeChain = this._runtimeChain;\n                if (!runtimeChain) {\n                    throw new Error('Invalid initializion order, runtimeChain is not available');\n                }\n                // setup the data as per the current versions\n                thisRegistry.metadata = metadata;\n                thisRegistry.runtimeVersion = version;\n                this._initRegistry(this.registry, runtimeChain, version, metadata);\n                this._injectMetadata(thisRegistry, true);\n                return true;\n            })))).subscribe();\n    }\n    async _metaFromChain(optMetadata) {\n        const [genesisHash, runtimeVersion, chain, chainProps, rpcMethods, chainMetadata] = await Promise.all([\n            firstValueFrom(this._rpcCore.chain.getBlockHash(0)),\n            firstValueFrom(this._rpcCore.state.getRuntimeVersion()),\n            firstValueFrom(this._rpcCore.system.chain()),\n            firstValueFrom(this._rpcCore.system.properties()),\n            firstValueFrom(this._rpcCore.rpc.methods()),\n            optMetadata\n                ? Promise.resolve(null)\n                : firstValueFrom(this._rpcCore.state.getMetadata())\n        ]);\n        // set our chain version & genesisHash as returned\n        this._runtimeChain = chain;\n        this._runtimeVersion = runtimeVersion;\n        this._rx.runtimeVersion = runtimeVersion;\n        // retrieve metadata, either from chain  or as pass-in via options\n        const metadataKey = `${genesisHash.toHex() || '0x'}-${runtimeVersion.specVersion.toString()}`;\n        const metadata = chainMetadata || (optMetadata?.[metadataKey]\n            ? new Metadata(this.registry, optMetadata[metadataKey])\n            : await firstValueFrom(this._rpcCore.state.getMetadata()));\n        // initializes the registry & RPC\n        this._initRegistry(this.registry, chain, runtimeVersion, metadata, chainProps);\n        this._filterRpc(rpcMethods.methods.map(textToString), getSpecRpc(this.registry, chain, runtimeVersion.specName));\n        this._subscribeUpdates();\n        // setup the initial registry, when we have none\n        if (!this.__internal__registries.length) {\n            this.__internal__registries.push({ counter: 0, isDefault: true, metadata, registry: this.registry, runtimeVersion });\n        }\n        // get unique types & validate\n        metadata.getUniqTypes(this._options.throwOnUnknown || false);\n        return [genesisHash, metadata];\n    }\n    _initFromMeta(metadata) {\n        const runtimeVersion = this._runtimeVersion;\n        if (!runtimeVersion) {\n            throw new Error('Invalid initializion order, runtimeVersion is not available');\n        }\n        this._extrinsicType = metadata.asLatest.extrinsic.version.toNumber();\n        this._rx.extrinsicType = this._extrinsicType;\n        this._rx.genesisHash = this._genesisHash;\n        this._rx.runtimeVersion = runtimeVersion;\n        // inject metadata and adjust the types as detected\n        this._injectMetadata(this._getDefaultRegistry(), true);\n        // derive is last, since it uses the decorated rx\n        this._rx.derive = this._decorateDeriveRx(this._rxDecorateMethod);\n        this._derive = this._decorateDerive(this._decorateMethod);\n        return true;\n    }\n    _subscribeHealth() {\n        this._unsubscribeHealth();\n        // Only enable the health keepalive on WS, not needed on HTTP\n        this.__internal__healthTimer = this.hasSubscriptions\n            ? setInterval(() => {\n                firstValueFrom(this._rpcCore.system.health.raw()).catch(noop);\n            }, KEEPALIVE_INTERVAL)\n            : null;\n    }\n    _unsubscribeHealth() {\n        if (this.__internal__healthTimer) {\n            clearInterval(this.__internal__healthTimer);\n            this.__internal__healthTimer = null;\n        }\n    }\n    _unsubscribeUpdates() {\n        if (this.__internal__updateSub) {\n            this.__internal__updateSub.unsubscribe();\n            this.__internal__updateSub = null;\n        }\n    }\n    _unsubscribe() {\n        this._unsubscribeHealth();\n        this._unsubscribeUpdates();\n    }\n    async __internal__onProviderConnect() {\n        this._isConnected.next(true);\n        this.emit('connected');\n        try {\n            const cryptoReady = this._options.initWasm === false\n                ? true\n                : await cryptoWaitReady();\n            const hasMeta = await this._loadMeta();\n            this._subscribeHealth();\n            if (hasMeta && !this._isReady && cryptoReady) {\n                this._isReady = true;\n                this.emit('ready', this);\n            }\n        }\n        catch (_error) {\n            const error = new Error(`FATAL: Unable to initialize the API: ${_error.message}`);\n            l.error(error);\n            this.emit('error', error);\n        }\n    }\n    __internal__onProviderDisconnect() {\n        this._isConnected.next(false);\n        this._unsubscribe();\n        this.emit('disconnected');\n    }\n    __internal__onProviderError(error) {\n        this.emit('error', error);\n    }\n}\n","import { packageInfo } from '../packageInfo.js';\nimport { findCall, findError } from './find.js';\nimport { Init } from './Init.js';\nfunction assertResult(value) {\n    if (value === undefined) {\n        throw new Error(\"Api interfaces needs to be initialized before using, wait for 'isReady'\");\n    }\n    return value;\n}\nexport class Getters extends Init {\n    /**\n     * @description Runtime call interfaces (currently untyped, only decorated via API options)\n     */\n    get call() {\n        return assertResult(this._call);\n    }\n    /**\n     * @description Contains the parameter types (constants) of all modules.\n     *\n     * The values are instances of the appropriate type and are accessible using `section`.`constantName`,\n     *\n     * @example\n     * <BR>\n     *\n     * ```javascript\n     * console.log(api.consts.democracy.enactmentPeriod.toString())\n     * ```\n     */\n    get consts() {\n        return assertResult(this._consts);\n    }\n    /**\n     * @description Derived results that are injected into the API, allowing for combinations of various query results.\n     *\n     * @example\n     * <BR>\n     *\n     * ```javascript\n     * api.derive.chain.bestNumber((number) => {\n     *   console.log('best number', number);\n     * });\n     * ```\n     */\n    get derive() {\n        return assertResult(this._derive);\n    }\n    /**\n     * @description Errors from metadata\n     */\n    get errors() {\n        return assertResult(this._errors);\n    }\n    /**\n     * @description Events from metadata\n     */\n    get events() {\n        return assertResult(this._events);\n    }\n    /**\n     * @description  Returns the version of extrinsics in-use on this chain\n     */\n    get extrinsicVersion() {\n        return this._extrinsicType;\n    }\n    /**\n     * @description Contains the genesis Hash of the attached chain. Apart from being useful to determine the actual chain, it can also be used to sign immortal transactions.\n     */\n    get genesisHash() {\n        return assertResult(this._genesisHash);\n    }\n    /**\n     * @description true is the underlying provider is connected\n     */\n    get isConnected() {\n        return this._isConnected.getValue();\n    }\n    /**\n     * @description The library information name & version (from package.json)\n     */\n    get libraryInfo() {\n        return `${packageInfo.name} v${packageInfo.version}`;\n    }\n    /**\n     * @description Contains all the chain state modules and their subsequent methods in the API. These are attached dynamically from the runtime metadata.\n     *\n     * All calls inside the namespace, is denoted by `section`.`method` and may take an optional query parameter. As an example, `api.query.timestamp.now()` (current block timestamp) does not take parameters, while `api.query.system.account(<accountId>)` (retrieving the associated nonce & balances for an account), takes the `AccountId` as a parameter.\n     *\n     * @example\n     * <BR>\n     *\n     * ```javascript\n     * api.query.system.account(<accountId>, ([nonce, balance]) => {\n     *   console.log('new free balance', balance.free, 'new nonce', nonce);\n     * });\n     * ```\n     */\n    get query() {\n        return assertResult(this._query);\n    }\n    /**\n     * @description Allows for the querying of multiple storage entries and the combination thereof into a single result. This is a very optimal way to make multiple queries since it only makes a single connection to the node and retrieves the data over one subscription.\n     *\n     * @example\n     * <BR>\n     *\n     * ```javascript\n     * const unsub = await api.queryMulti(\n     *   [\n     *     // you can include the storage without any parameters\n     *     api.query.balances.totalIssuance,\n     *     // or you can pass parameters to the storage query\n     *     [api.query.system.account, '5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY']\n     *   ],\n     *   ([existential, [, { free }]]) => {\n     *     console.log(`You have ${free.sub(existential)} more than the existential deposit`);\n     *\n     *     unsub();\n     *   }\n     * );\n     * ```\n     */\n    get queryMulti() {\n        return assertResult(this._queryMulti);\n    }\n    /**\n     * @description Contains all the raw rpc sections and their subsequent methods in the API as defined by the jsonrpc interface definitions. Unlike the dynamic `api.query` and `api.tx` sections, these methods are fixed (although extensible with node upgrades) and not determined by the runtime.\n     *\n     * RPC endpoints available here allow for the query of chain, node and system information, in addition to providing interfaces for the raw queries of state (using known keys) and the submission of transactions.\n     *\n     * @example\n     * <BR>\n     *\n     * ```javascript\n     * api.rpc.chain.subscribeNewHeads((header) => {\n     *   console.log('new header', header);\n     * });\n     * ```\n     */\n    get rpc() {\n        return assertResult(this._rpc);\n    }\n    /**\n     * @description Contains the chain information for the current node.\n     */\n    get runtimeChain() {\n        return assertResult(this._runtimeChain);\n    }\n    /**\n     * @description Yields the current attached runtime metadata. Generally this is only used to construct extrinsics & storage, but is useful for current runtime inspection.\n     */\n    get runtimeMetadata() {\n        return assertResult(this._runtimeMetadata);\n    }\n    /**\n     * @description Contains the version information for the current runtime.\n     */\n    get runtimeVersion() {\n        return assertResult(this._runtimeVersion);\n    }\n    /**\n     * @description The underlying Rx API interface\n     */\n    get rx() {\n        return assertResult(this._rx);\n    }\n    /**\n     * @description Returns the underlying provider stats\n     */\n    get stats() {\n        return this._rpcCore.stats;\n    }\n    /**\n     * @description The type of this API instance, either 'rxjs' or 'promise'\n     */\n    get type() {\n        return this._type;\n    }\n    /**\n     * @description Contains all the extrinsic modules and their subsequent methods in the API. It allows for the construction of transactions and the submission thereof. These are attached dynamically from the runtime metadata.\n     *\n     * @example\n     * <BR>\n     *\n     * ```javascript\n     * api.tx.balances\n     *   .transferAllowDeath(<recipientId>, <balance>)\n     *   .signAndSend(<keyPair>, ({status}) => {\n     *     console.log('tx status', status.asFinalized.toHex());\n     *   });\n     * ```\n     */\n    get tx() {\n        return assertResult(this._extrinsics);\n    }\n    /**\n     * @description Finds the definition for a specific [[CallFunction]] based on the index supplied\n     */\n    findCall(callIndex) {\n        return findCall(this.registry, callIndex);\n    }\n    /**\n     * @description Finds the definition for a specific [[RegistryError]] based on the index supplied\n     */\n    findError(errorIndex) {\n        return findError(this.registry, errorIndex);\n    }\n}\n","import { isString, objectSpread, u8aToHex, u8aToU8a } from '@polkadot/util';\nimport { Getters } from './Getters.js';\nexport class ApiBase extends Getters {\n    /**\n     * @description Create an instance of the class\n     *\n     * @param options Options object to create API instance or a Provider instance\n     *\n     * @example\n     * <BR>\n     *\n     * ```javascript\n     * import Api from '@polkadot/api/promise';\n     *\n     * const api = new Api().isReady();\n     *\n     * api.rpc.subscribeNewHeads((header) => {\n     *   console.log(`new block #${header.number.toNumber()}`);\n     * });\n     * ```\n     */\n    constructor(options = {}, type, decorateMethod) {\n        super(options, type, decorateMethod);\n    }\n    /**\n     * @description Connect from the underlying provider, halting all network traffic\n     */\n    connect() {\n        return this._rpcCore.connect();\n    }\n    /**\n     * @description Disconnect from the underlying provider, halting all network traffic\n     */\n    disconnect() {\n        this._unsubscribe();\n        return this._rpcCore.disconnect();\n    }\n    /**\n     * @description Set an external signer which will be used to sign extrinsic when account passed in is not KeyringPair\n     */\n    setSigner(signer) {\n        this._rx.signer = signer;\n    }\n    /**\n     * @description Signs a raw signer payload, string or Uint8Array\n     */\n    async sign(address, data, { signer } = {}) {\n        if (isString(address)) {\n            const _signer = signer || this._rx.signer;\n            if (!_signer?.signRaw) {\n                throw new Error('No signer exists with a signRaw interface. You possibly need to pass through an explicit keypair for the origin so it can be used for signing.');\n            }\n            return (await _signer.signRaw(objectSpread({ type: 'bytes' }, data, { address }))).signature;\n        }\n        return u8aToHex(address.sign(u8aToU8a(data.data)));\n    }\n}\n","import { isFunction, noop } from '@polkadot/util';\nexport class Combinator {\n    __internal__allHasFired = false;\n    __internal__callback;\n    __internal__fired = [];\n    __internal__fns = [];\n    __internal__isActive = true;\n    __internal__results = [];\n    __internal__subscriptions = [];\n    constructor(fns, callback) {\n        this.__internal__callback = callback;\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises, @typescript-eslint/require-await\n        this.__internal__subscriptions = fns.map(async (input, index) => {\n            const [fn, ...args] = Array.isArray(input)\n                ? input\n                : [input];\n            this.__internal__fired.push(false);\n            this.__internal__fns.push(fn);\n            // Not quite 100% how to have a variable number at the front here\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return,@typescript-eslint/ban-types\n            return fn(...args, this._createCallback(index));\n        });\n    }\n    _allHasFired() {\n        this.__internal__allHasFired ||= this.__internal__fired.filter((hasFired) => !hasFired).length === 0;\n        return this.__internal__allHasFired;\n    }\n    _createCallback(index) {\n        return (value) => {\n            this.__internal__fired[index] = true;\n            this.__internal__results[index] = value;\n            this._triggerUpdate();\n        };\n    }\n    _triggerUpdate() {\n        if (!this.__internal__isActive || !isFunction(this.__internal__callback) || !this._allHasFired()) {\n            return;\n        }\n        try {\n            Promise\n                .resolve(this.__internal__callback(this.__internal__results))\n                .catch(noop);\n        }\n        catch {\n            // swallow, we don't want the handler to trip us up\n        }\n    }\n    unsubscribe() {\n        if (!this.__internal__isActive) {\n            return;\n        }\n        this.__internal__isActive = false;\n        Promise\n            .all(this.__internal__subscriptions.map(async (subscription) => {\n            try {\n                const unsubscribe = await subscription;\n                if (isFunction(unsubscribe)) {\n                    unsubscribe();\n                }\n            }\n            catch {\n                // ignore\n            }\n        })).catch(() => {\n            // ignore, already ignored above, should never throw\n        });\n    }\n}\n","import { catchError, EMPTY, tap } from 'rxjs';\nimport { isFunction, nextTick } from '@polkadot/util';\nexport function promiseTracker(resolve, reject) {\n    let isCompleted = false;\n    return {\n        reject: (error) => {\n            if (!isCompleted) {\n                isCompleted = true;\n                reject(error);\n            }\n            return EMPTY;\n        },\n        resolve: (value) => {\n            if (!isCompleted) {\n                isCompleted = true;\n                resolve(value);\n            }\n        }\n    };\n}\nfunction extractArgs(args, needsCallback) {\n    const actualArgs = args.slice();\n    // If the last arg is a function, we pop it, put it into callback.\n    // actualArgs will then hold the actual arguments to be passed to `method`\n    const callback = (args.length && isFunction(args[args.length - 1]))\n        ? actualArgs.pop()\n        : undefined;\n    // When we need a subscription, ensure that a valid callback is actually passed\n    if (needsCallback && !isFunction(callback)) {\n        throw new Error('Expected a callback to be passed with subscriptions');\n    }\n    return [actualArgs, callback];\n}\nfunction decorateCall(method, args) {\n    return new Promise((resolve, reject) => {\n        // single result tracker - either reject with Error or resolve with Codec result\n        const tracker = promiseTracker(resolve, reject);\n        // encoding errors reject immediately, any result unsubscribes and resolves\n        const subscription = method(...args)\n            .pipe(catchError((error) => tracker.reject(error)))\n            .subscribe((result) => {\n            tracker.resolve(result);\n            nextTick(() => subscription.unsubscribe());\n        });\n    });\n}\nfunction decorateSubscribe(method, args, resultCb) {\n    return new Promise((resolve, reject) => {\n        // either reject with error or resolve with unsubscribe callback\n        const tracker = promiseTracker(resolve, reject);\n        // errors reject immediately, the first result resolves with an unsubscribe promise, all results via callback\n        const subscription = method(...args)\n            .pipe(catchError((error) => tracker.reject(error)), tap(() => tracker.resolve(() => subscription.unsubscribe())))\n            .subscribe((result) => {\n            // queue result (back of queue to clear current)\n            nextTick(() => resultCb(result));\n        });\n    });\n}\n/**\n * @description Decorate method for ApiPromise, where the results are converted to the Promise equivalent\n */\nexport function toPromiseMethod(method, options) {\n    const needsCallback = !!(options?.methodName && options.methodName.includes('subscribe'));\n    return function (...args) {\n        const [actualArgs, resultCb] = extractArgs(args, needsCallback);\n        return resultCb\n            ? decorateSubscribe(method, actualArgs, resultCb)\n            : decorateCall(options?.overrideNoSub || method, actualArgs);\n    };\n}\n","import { noop, objectSpread } from '@polkadot/util';\nimport { ApiBase } from '../base/index.js';\nimport { Combinator } from './Combinator.js';\nimport { promiseTracker, toPromiseMethod } from './decorateMethod.js';\n/**\n * # @polkadot/api/promise\n *\n * ## Overview\n *\n * @name ApiPromise\n * @description\n * ApiPromise is a standard JavaScript wrapper around the RPC and interfaces on the Polkadot network. As a full Promise-based, all interface calls return Promises, including the static `.create(...)`. Subscription calls utilise `(value) => {}` callbacks to pass through the latest values.\n *\n * The API is well suited to real-time applications where either the single-shot state is needed or use is to be made of the subscription-based features of Polkadot (and Substrate) clients.\n *\n * @see [[ApiRx]]\n *\n * ## Usage\n *\n * Making rpc calls -\n * <BR>\n *\n * ```javascript\n * import ApiPromise from '@polkadot/api/promise';\n *\n * // initialise via static create\n * const api = await ApiPromise.create();\n *\n * // make a subscription to the network head\n * api.rpc.chain.subscribeNewHeads((header) => {\n *   console.log(`Chain is at #${header.number}`);\n * });\n * ```\n * <BR>\n *\n * Subscribing to chain state -\n * <BR>\n *\n * ```javascript\n * import { ApiPromise, WsProvider } from '@polkadot/api';\n *\n * // initialise a provider with a specific endpoint\n * const provider = new WsProvider('wss://example.com:9944')\n *\n * // initialise via isReady & new with specific provider\n * const api = await new ApiPromise({ provider }).isReady;\n *\n * // retrieve the block target time\n * const blockPeriod = await api.query.timestamp.blockPeriod().toNumber();\n * let last = 0;\n *\n * // subscribe to the current block timestamp, updates automatically (callback provided)\n * api.query.timestamp.now((timestamp) => {\n *   const elapsed = last\n *     ? `, ${timestamp.toNumber() - last}s since last`\n *     : '';\n *\n *   last = timestamp.toNumber();\n *   console.log(`timestamp ${timestamp}${elapsed} (${blockPeriod}s target)`);\n * });\n * ```\n * <BR>\n *\n * Submitting a transaction -\n * <BR>\n *\n * ```javascript\n * import ApiPromise from '@polkadot/api/promise';\n *\n * ApiPromise.create().then((api) => {\n *   const [nonce] = await api.query.system.account(keyring.alice.address);\n *\n *   api.tx.balances\n *     // create transfer\n *     transfer(keyring.bob.address, 12345)\n *     // sign the transcation\n *     .sign(keyring.alice, { nonce })\n *     // send the transaction (optional status callback)\n *     .send((status) => {\n *       console.log(`current status ${status.type}`);\n *     })\n *     // retrieve the submitted extrinsic hash\n *     .then((hash) => {\n *       console.log(`submitted with hash ${hash}`);\n *     });\n * });\n * ```\n */\nexport class ApiPromise extends ApiBase {\n    __internal__isReadyPromise;\n    __internal__isReadyOrErrorPromise;\n    /**\n     * @description Creates an instance of the ApiPromise class\n     * @param options Options to create an instance. This can be either [[ApiOptions]] or\n     * an [[WsProvider]].\n     * @example\n     * <BR>\n     *\n     * ```javascript\n     * import Api from '@polkadot/api/promise';\n     *\n     * new Api().isReady.then((api) => {\n     *   api.rpc.subscribeNewHeads((header) => {\n     *     console.log(`new block #${header.number.toNumber()}`);\n     *   });\n     * });\n     * ```\n     */\n    constructor(options) {\n        super(options, 'promise', toPromiseMethod);\n        this.__internal__isReadyPromise = new Promise((resolve) => {\n            super.once('ready', () => resolve(this));\n        });\n        this.__internal__isReadyOrErrorPromise = new Promise((resolve, reject) => {\n            const tracker = promiseTracker(resolve, reject);\n            super.once('ready', () => tracker.resolve(this));\n            super.once('error', (error) => tracker.reject(error));\n        });\n    }\n    /**\n     * @description Creates an ApiPromise instance using the supplied provider. Returns an Promise containing the actual Api instance.\n     * @param options options that is passed to the class contructor. Can be either [[ApiOptions]] or a\n     * provider (see the constructor arguments)\n     * @example\n     * <BR>\n     *\n     * ```javascript\n     * import Api from '@polkadot/api/promise';\n     *\n     * Api.create().then(async (api) => {\n     *   const timestamp = await api.query.timestamp.now();\n     *\n     *   console.log(`lastest block timestamp ${timestamp}`);\n     * });\n     * ```\n     */\n    static create(options) {\n        const instance = new ApiPromise(options);\n        if (options && options.throwOnConnect) {\n            return instance.isReadyOrError;\n        }\n        // Swallow any rejections on isReadyOrError\n        // (in Node 15.x this creates issues, when not being looked at)\n        instance.isReadyOrError.catch(noop);\n        return instance.isReady;\n    }\n    /**\n     * @description Promise that resolves the first time we are connected and loaded\n     */\n    get isReady() {\n        return this.__internal__isReadyPromise;\n    }\n    /**\n     * @description Promise that resolves if we can connect, or reject if there is an error\n     */\n    get isReadyOrError() {\n        return this.__internal__isReadyOrErrorPromise;\n    }\n    /**\n     * @description Returns a clone of this ApiPromise instance (new underlying provider connection)\n     */\n    clone() {\n        return new ApiPromise(objectSpread({}, this._options, { source: this }));\n    }\n    /**\n     * @description Creates a combinator that can be used to combine the latest results from multiple subscriptions\n     * @param fns An array of function to combine, each in the form of `(cb: (value: void)) => void`\n     * @param callback A callback that will return an Array of all the values this combinator has been applied to\n     * @example\n     * <BR>\n     *\n     * ```javascript\n     * const address = '5DTestUPts3kjeXSTMyerHihn1uwMfLj8vU8sqF7qYrFacT7';\n     *\n     * // combines values from balance & nonce as it updates\n     * api.combineLatest([\n     *   api.rpc.chain.subscribeNewHeads,\n     *   (cb) => api.query.system.account(address, cb)\n     * ], ([head, [balance, nonce]]) => {\n     *   console.log(`#${head.number}: You have ${balance.free} units, with ${nonce} transactions sent`);\n     * });\n     * ```\n     */\n    // eslint-disable-next-line @typescript-eslint/require-await\n    async combineLatest(fns, callback) {\n        const combinator = new Combinator(fns, callback);\n        return () => {\n            combinator.unsubscribe();\n        };\n    }\n}\n"],"names":["has","Object","prototype","hasOwnProperty","prefix","Events","EE","fn","context","once","this","addListener","emitter","event","TypeError","listener","evt","_events","push","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","name","names","call","slice","getOwnPropertySymbols","concat","listeners","handlers","i","l","length","ee","Array","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","undefined","apply","j","on","removeAllListeners","off","prefixed","module","exports","UNKNOWN","extend","that","value","defineProperty","configurable","enumerable","RpcError","Error","code","data","message","stack","constructor","super","String","captureStackTrace","static","ASSERT","INVALID_JSONRPC","METHOD_NOT_FOUND","checkError","error","formatErrorData","formatted","replace","stringify","substring","RpcCoder","__internal__id","decodeResponse","response","jsonrpc","isSubscription","params","method","id","subscription","result","encodeJson","encodeObject","HTTP_URL","WS_URL","fetch","ERROR_SUBSCRIBE","logger","HttpProvider","__internal__callCache","__internal__coder","__internal__endpoint","__internal__headers","__internal__stats","endpoint","defaults","headers","test","active","requests","subscriptions","total","bytesRecv","bytesSent","cached","errors","timeout","hasSubscriptions","clone","connect","disconnect","stats","isClonable","isConnected","_type","_sub","noop","send","isCacheable","body","cacheKey","resultPromise","get","__internal__send","set","Accept","ok","status","statusText","text","decoded","JSON","parse","e","subscribe","_types","_method","_params","_cb","unsubscribe","_id","DEFAULT_CAPACITY","LRUNode","key","next","prev","LRUCache","capacity","__internal__data","Map","__internal__refs","__internal__length","__internal__head","__internal__tail","lengthData","size","lengthRefs","entries","keys","count","curr","__internal__toHead","node","delete","ref","getAbsoluteUrl","relativeUrl","publicPath","url","indexOf","window","location","protocol","host","packageInfo","URL","pathname","lastIndexOf","findCall","registry","callIndex","findMetaCall","findError","errorIndex","findMetaError","createErrorClass","createImpl","ctorFunc","instance","EmptyError","_super","EmptyErrorImpl","isFunction","UnsubscriptionError","UnsubscriptionErrorImpl","map","err","toString","join","arrRemove","arr","item","index","splice","Subscription","initialTeardown","closed","_parentage","_finalizers","e_1","_a","e_2","_b","isArray","_parentage_1","__values","_parentage_1_1","done","remove","e_1_1","return","initialFinalizer","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","__spreadArray","__read","e_2_1","add","teardown","_hasParent","_addParent","parent","includes","_removeParent","EMPTY","empty","EMPTY_SUBSCRIPTION","config","onUnhandledError","onStoppedNotification","Promise","useDeprecatedSynchronousErrorHandling","useDeprecatedNextContext","timeoutProvider","setTimeout","handler","_i","delegate","clearTimeout","handle","reportUnhandledError","COMPLETE_NOTIFICATION","createNotification","kind","errorContext","cb","isRoot","errorThrown","Subscriber","destination","_this","isStopped","EMPTY_OBSERVER","__extends","complete","SafeSubscriber","handleStoppedNotification","nextNotification","_next","errorNotification","_error","_complete","_bind","Function","bind","thisArg","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","context_1","captureError","notification","subscriber","defaultErrorHandler","firstValueFrom","source","hasConfig","resolve","reject","defaultValue","isArrayLike","x","isPromise","then","observable","Symbol","identity","pipeFromArray","fns","piped","input","reduce","Observable","_subscribe","lift","operator","isSubscriber","isObserver","_trySubscribe","sink","forEach","promiseCtor","getPromiseCtor","pipe","operations","toPromise","isInteropObservable","isAsyncIterable","obj","asyncIterator","createInvalidObservableTypeError","getSymbolIterator","iterator","isIterable","readableStreamLikeToAsyncGenerator","readableStream","__asyncGenerator","readableStreamLikeToAsyncGenerator_1","reader","__generator","label","getReader","trys","__await","read","sent","releaseLock","isReadableStreamLike","innerFrom","fromInteropObservable","obs","fromArrayLike","array","fromPromise","promise","fromAsyncIterable","fromIterable","iterable","iterable_1","iterable_1_1","fromReadableStreamLike","asyncIterable","process","asyncIterable_1","asyncIterable_1_1","__awaiter","__asyncValues","catch","hasLift","operate","init","liftedSource","createOperatorSubscriber","onNext","onComplete","onError","onFinalize","OperatorSubscriber","shouldUnsubscribe","closed_1","switchMap","project","resultSelector","innerSubscriber","isComplete","checkComplete","innerIndex","outerIndex","innerValue","last","popScheduler","isScheduler","schedule","pop","executeSchedule","parentSubscription","scheduler","work","delay","repeat","scheduleSubscription","observeOn","subscribeOn","scheduleAsyncIterable","scheduled","scheduleObservable","scheduleArray","schedulePromise","scheduleIterable","scheduleReadableStreamLike","from","of","ObjectUnsubscribedError","ObjectUnsubscribedErrorImpl","Subject","currentObservers","observers","hasError","thrownError","subject","AnonymousSubject","_throwIfClosed","_c","shift","_checkFinalizedStatuses","_innerSubscribe","asObservable","BehaviorSubject","_value","getValue","getPrototypeOf","objectProto","getKeys","argsArgArrayOrObject","first_1","isPOJO","mapOneOrManyArgs","callOrApply","combineLatest","popResultSelector","observables","combineLatestInit","valueTransform","maybeSchedule","values","remainingFirstValues","_loop_1","hasFirstValue","createObject","execute","tap","tapObserver","isUnsub","finalize","accumulator","seed","scanInternals","hasSeed","emitOnNext","emitBeforeComplete","hasState","state","arrReducer","toArray","lazyDeriveSection","section","creator","lazy","catchError","selector","handledResult","innerSub","syncUnsub","defaultCompare","a","b","dateTimestampProvider","now","Date","ReplaySubject","_bufferSize","_windowTime","_timestampProvider","Infinity","_buffer","_infiniteTimeWindow","Math","max","_trimBuffer","copy","adjustedBufferSize","refCount","connection","_refCount","refCounter","sharedConnection","_connection","conn","ConnectableObservable","subjectFactory","_subject","getSubject","_teardown","subject_1","DEFAULT_CONFIG","connector","fromSubscribable","subscribable","publishReplay","bufferSize","windowTime","selectorOrScheduler","timestampProvider","multicast","subjectOrSubjectFactory","resolved","Action","intervalProvider","setInterval","clearInterval","AsyncAction","pending","recycleAsyncId","requestAsyncId","flush","_scheduler","_execute","_delay","errorValue","errored","actions","nextHandle","activeHandles","findAndClearHandle","setImmediate","clearImmediate","immediateProvider","AsapAction","_scheduled","Scheduler","schedulerActionCtor","asapScheduler","AsapScheduler","action","_active","flushId","AsyncScheduler","SchedulerAction","refCountDelay","ob","CMP","t","ERR","NOOP","drr","skipChange","skipTimeout","source$","distinctUntilChanged","comparator","keySelector","previousKey","first","currentKey","memo","instanceId","inner","options","getInstanceId","memoize","observer","unmemoize","accountId","api","address","decode","createType","accountIndex","derive","accounts","indexToId","assert","_flags","results","calls","query","elections","members","council","technicalCommittee","society","sudo","filtered","filter","c","queryMulti","resultIndex","flags","r","parseFlags","electionsMembers","councilMembers","technicalCommitteeMembers","societyMembers","sudoKey","addrStr","isIncluded","isCouncil","who","some","isSociety","isSudo","isTechCommittee","idAndIndex","idToIndex","firstObservable","firstMemo","UNDEF_HEX","toHex","dataAsString","isRaw","asRaw","toU8a","isNone","identityCompat","identityOfOpt","unwrap","_identity","identityOf","superOf","superOfOpt","getParent","isSome","info","extractIdentity","judgements","topDisplay","display","discord","displayParent","email","github","image","legal","matrix","other","additional","_key","pgp","pgpFingerprint","unwrapOr","riot","twitter","web","hasIdentity","hasIdentityMulti","accountIds","multi","identities","supers","parentId","indexes","mergeMap","concurrent","ii","mergeInternals","onBeforeNext","expand","innerSubScheduler","additionalFinalizer","buffer","outerNext","doInnerSub","innerComplete","bufferedValue","concatAll","mergeAll","startWith","indicesCache","indices","queryAccounts","idOpt","optResult","retrieveNick","nameOf","consts","toNumber","nickname","withSection","getInstance","instances","getModuleInstances","runtimeVersion","specName","callMethod","_proposalsFrom","hashes","proposals","proposalOf","voting","votes","o","hash","proposal","hasProposals","proposalHashes","all","proposalCount","prime","getQueryInterface","voterList","_getIds","_ids","ids","listBags","bags","orderBags","sorted","bag","sort","cmp","entry","bagLower","bagUpper","bagsList","list","listNodes","nodes","getExpanded","head","traverseLinks","account","nextTick","VESTING_ID","calcShared","bestNumber","locks","allLocked","lockedBalance","lockedBreakdown","vestingLocked","calcLocked","until","gt","amount","isMax","eq","iadd","notAll","availableBalance","freeBalance","sub","calcBalances","vesting","allLocks","namedReserves","shared","calcVesting","_vesting","isVesting","isZero","vestedBalances","locked","perBlock","startingBlock","mul","vestedBalance","vestingTotal","vestedClaimable","endBlock","div","vested","accountNonce","queryOld","balances","optVesting","vestingNew","offset","isNonNullable","nullable","createCalls","queryCurrent","balanceInstances","lockEmpty","lockQueries","m","customLocks","reserveEmpty","reserveQueries","reserves","opt","offsetLock","offsetReserve","system","chain","zeroBalance","getBalance","reservedBalance","frozenFee","frozenMisc","votingBalance","toBn","queryBalancesFree","queryNonceOnly","fill","nonce","queryBalancesAccount","modules","customAccount","q","extract","feeFrozen","free","miscFrozen","reserved","querySystemAccount","infoOrTuple","isEmpty","nonDefaultBalances","primary","votingBalances","addresses","filterBountiesProposals","allProposals","bountyTxBase","tx","bounties","treasury","bountyProposalCalls","approveBounty","closeBounty","proposeCurator","unassignCurator","find","bountyCall","is","parseResult","maybeBounties","maybeDescriptions","bountyProposals","bounty","description","unwrapOrDefault","toUtf8","bountyProposal","bountyBase","bountyCount","bountyDescriptions","unwrapBlockNumber","hdr","number","createBlockNumberDerive","getAuthorDetails","header","blockHash","queryAt","parentHash","getAuthorDetailsWithAt","validators","session","logs","log","digest","loggedAuthor","isConsensus","asConsensus","isNimbus","isPreRuntime","asPreRuntime","nextKeys","loggedHex","selectedCandidates","findIndex","nimbus","rpc","subscribeNewHeads","bestNumberFinalized","subscribeFinalizedHeads","bestNumberLag","extractAuthor","sessionValidators","citem","pitem","sitem","isSeal","engine","asSeal","getBlock","signedBlock","block","author","createSignedBlockExtended","SignedBlockBase","createClass","Implementation","__internal__author","__internal__events","__internal__extrinsics","mapExtrinsics","extrinsics","records","extrinsic","dispatchError","dispatchInfo","phase","isApplyExtrinsic","asApplyExtrinsic","createdAtHash","getBlockByNumber","blockNumber","getBlockHash","h","createHeaderExtended","HeaderBase","getHeader","subscribeFinalizedBlocks","_getHeaderRange","startHash","endHash","prevHash","subscribeNewBlocks","fees","queryConstants","contracts","callBaseFee","contractFee","creationFee","transactionBaseFee","transactionByteFee","transferFee","rentByteFee","rentDepositOffset","surchargeReward","tombstoneDeposit","isVoter","retrieveStakeOf","stake","retrieveVoteOf","retrievePrev","stakes","voter","staker","retrieveCurrent","votesOf","childKey","paraId","optInfo","createChildKey","fundIndex","trieIndex","extractContributed","eventParaId","added","removed","PAGE_SIZE_K","_getUpdates","changes","addedDelta","removedDelta","_getAll","_eventTriggerAll","childstate","getKeysPaged","_getKeysPaged","startKey","keyArr","k","contributions","crowdloan","_contributions","contributorsMap","contributorsHex","_getValues","getStorage","v","_watchOwnChanges","childkey","ownContributions","latest","compareRationals","n1","d1","n2","d2","q1","q2","lt","r1","mod","r2","calcPassing","threshold","sqrtElectorate","isSimpleMajority","votedAye","votedNay","calcPassingOther","votedTotal","sqrtVoters","isSuperMajorityApprove","calcVotes","referendum","isCurrentStatus","tally","calcVotesCurrent","allAye","allNay","derived","vote","isAye","voteCount","voteCountAye","voteCountNay","ayes","nays","turnout","calcVotesPrev","votesFor","balance","isDefault","conviction","counted","muln","divn","isPassing","getImageHashBounded","isLegacy","asLegacy","hash_","isLookup","asLookup","isInline","asInline","getImageHash","proposalHash","DEMOCRACY_ID","queryScheduler","schedulerEntries","democracy","referendumsFinished","agenda","blockNumbers","agendas","at","maybeId","startsWith","imageHash","isMaybeHashedOrBounded","Enum","isBounded","isHash","asHash","asValue","preimages","infos","images","dispatchQueue","queryQueue","dispatches","dispatchIndex","LOCKUPS","parseLock","referendumId","accountVote","asStandard","referendumEnd","unlockAt","isFinished","parseEnd","approved","end","isTrue","isFalse","isNay","voteLockingPeriod","enactmentPeriod","asFinished","isDelegated","votingOf","isDirect","directLocks","referendumInfoOf","referendums","isStandard","directVote","asDirect","isDelegating","delegateLocks","target","available","aye","asDelegating","nextExternal","nextOpt","withImage","preimage","constructProposal","bytes","proposer","console","getDemocracyImages","bounded","imageOpt","parseDemocracy","isDemocracyPreimage","isMissing","deposit","provider","since","asAvailable","getImages","bytesType","lookup","getTypeDef","preimageFor","meta","type","asMap","statusFor","optStatus","statuses","s","isRequested","asRequested","asUnrequested","p","optBytes","ptr","parseImage","isUnrequested","getUnrequestedTicket","ticket","getRequestedTicket","maybeTicket","optDepositors","proposalIndex","depositors","isNewDepositors","seconds","publicProps","depositOf","referendumIds","lowestUnbaked","referendumCount","_","addn","referendumsActive","_referendumsVotes","referendumsInfo","votesPrev","votersFor","votesCurr","allVoting","mapped","extractVotes","idx","directVotes","delegations","toDelegator","to","_referendumVotes","_referendumInfo","getStatus","unwrapped","isOldInfo","isOngoing","asOngoing","totalIssuance","getAccountTuple","isSeatHolder","getCandidate","isCandidateTuple","sortAccounts","balanceA","balanceB","getModules","queryAll","candidates","runnersUp","queryCouncil","getConstants","candidacyBond","desiredRunnersUp","desiredSeats","desiredMembers","termDuration","votingBond","votingBondBase","votingBondFactor","candidateCount","mapResult","heartbeats","numBlocks","validator","validatorId","blockCount","hasMessage","isOnline","receivedHeartbeats","imOnline","staking","overview","currentIndex","_address","authoredBlocks","didUpdateToBool","didUpdate","parseActive","found","collatorId","retriable","isWithRetries","isRetriable","retries","asWithRetries","parseCollators","collatorQueue","queue","retryQueue","selectedThreads","pendingSwap","heads","relayDispatchQueue","pendingSwapId","retryCollators","selectedCollators","relayDispatchQueueSizes","pendingSwaps","relayDispatchQueueSize","paraIds","activeEra","activeEraStart","currentEra","validatorCount","queryStaking","activeOpt","start","querySession","sessionLength","babe","epochDuration","sessionsPerEra","eraLength","isEpoch","withProgressField","field","progress","queryBabe","erasStartSessionIndex","currentSlot","epochIndex","genesisSlot","optStartIndex","slots","createDerive","epochOrGenesisStartSlot","activeEraStartSessionIndex","epochStartSlot","sessionProgress","eraProgress","imul","queryAura","isPlain","getPrev","suspended","isSuspended","getCurr","bid","bids","founder","pot","defender","maxMembers","hasDefender","member","_members","isMap","_membersCurr","payouts","challengeRoundCount","round","defenderVotes","suspendedMembers","isDefenderVoter","strikes","vouching","_membersPrev","QUERY_OPTS","withDestination","withLedger","withNominations","withPrefs","calculateUnlocking","stakingLedger","sessionInfo","groupByEra","era","unlocking","eraString","remainingEras","isub","redeemableSum","opts","keysMulti","queries","redeemable","currentPoints","erasRewardPoints","DEFAULT_FLAGS","withController","withExposure","electedInfo","page","nextElected","combineAccounts","n","deriveNoopCache","del","CHACHE_EXPIRY","deriveCache","getEraCache","CACHE_KEY","withActive","getEraMultiCache","eras","setEraCache","setEraMultiCache","filterCachedEras","setDeriveCache","cache","wrapCache","keyStart","partial","clearCache","ERA_CHUNK_SIZE","filterEras","erasHistoricApply","erasHistoric","erasHistoricApplyAccount","singleEra","combineEras","chunkEras","chunked","_eraExposure","erasStakersPaged","mapStakersPaged","stakers","nominators","exposureOpt","exposure","others","validatorIndex","nominatorId","erasStakersClipped","mapStakersClipped","eraExposure","_erasExposure","erasExposure","historyDepth","activeEraOpt","lastEra","gte","reverse","mapValidators","individual","points","_erasPoints","remaining","mapPoints","eraPoints","erasPoints","_eraPrefs","erasValidatorPrefs","mapPrefs","prefs","eraPrefs","_erasPrefs","erasPrefs","_erasRewards","erasValidatorReward","mapRewards","optRewards","eraReward","erasRewards","_eraSlashes","nominatorSlashInEra","validatorSlashInEra","mapSlashes","noms","vals","optBalance","optRes","eraSlashes","_erasSlashes","erasSlashes","stashId","stashIds","queuedKeys","extractsIds","sessionIds","currentId","nextSessionIds","_ownExposures","_withActive","emptyStakingExposure","emptyOptionPage","emptyOptionMeta","erasStakers","erasStakersOverview","clp","exp","paged","expMeta","clipped","exposureMeta","exposurePaged","ownExposure","ownExposures","_ownSlashes","ownSlash","ownSlashes","filterClaimedRewards","cl","getStashInfo","withClaimedRewardsEras","withExposureErasStakersLegacy","withExposureMeta","emptyNoms","emptyRewa","emptyExpoEraStakers","emptyPrefs","emptyExpo","emptyExpoMeta","emptyClaimedRewards","depth","Number","bonded","payee","claimedRewards","rewardsStorageVec","overviewStorageVec","filterRewards","stakersOverview","claimedData","overviewData","rewards","pageCount","rewardsPerEra","overviewPerEra","getBatch","controllerIdOpt","nominatorsOpt","rewardDestination","validatorPrefs","claimedRewardsEras","exposureEraStakers","getLedgers","optIds","emptyLed","ledger","optLedgers","stakingLedgerOpts","parseDetails","rewardDestinationOpts","stakingLedgerOpt","controllerId","targets","_stakerExposures","stakerIds","exposures","stakerId","allNominators","allValidators","isValidator","nominating","stakerExposures","stakerExposure","_stakerPoints","stakerPoints","_stakerPrefs","stakerPrefs","extractCompatRewards","legacyClaimedRewards","valInfo","queryValidators","reward","removeClaimed","rm","valLedger","_stakerRewardsEras","_stakerRewards","erasResult","allRewards","parseRewards","eraValidators","allValPoints","allValPrefs","valPoints","valComm","commission","expTotal","pageTotal","avail","valCut","staked","own","expAccount","stakerExp","stashValidators","allUniqValidators","perStash","uniq","queriedVals","stakerRewards","stakerRewardsMultiEras","stakerRewardsMulti","_stakerSlashes","slashes","stakerSlashes","stashes","onBondedEvent","current","Set","waitingInfo","elected","waiting","approvals","approvalIds","retrieveProposals","proposalIds","eqn","allIds","councilProposals","councilTreasury","approveProposal","rejectProposal","localeCompare","isApproval","approvalId","FALLBACK_MAX_HASH_COUNT","FALLBACK_PERIOD","MAX_FINALITY_LAG","MORTAL_PERIOD","latestNonce","nextNonce","accountNextIndex","signingHeader","getFinalizedHead","finalized","babeOrAuraPeriod","period","expectedBlockTime","slotDuration","timestamp","minimumPeriod","signingInfo","_instanceId","mortalLength","min","blockHashCount","checks","allianceMotion","methods","withDetect","membership","parachains","injectFunctions","derives","filterKeys","filterInstances","moduleName","every","EMPTY_META","fallback","modifier","isOptional","linked","logErrorMessage","noErrorLog","isTreatAsHex","RpcCore","__internal__instanceId","__internal__isPedantic","__internal__registryDefault","__internal__storageCache","__internal__storageCacheHits","__internal__storageCacheSize","__internal__getBlockRegistry","__internal__getBlockHash","mapping","sections","isPedantic","userRpc","sectionNames","addUserInterfaces","core","cacheHits","cacheSize","setRegistrySwap","registrySwap","setResolveBlockHash","resolveBlockHash","scount","defs","mcount","def","pubsub","_createMethodSubscribe","_createMethodSend","_memomize","memoOpts","memoized","raw","_formatResult","isScale","_formatOutput","rpcName","hashIndex","isHistoric","callWithRegistry","async","blockId","_formatParams","toJSON","isDelayed","_createSubscriber","paramsJson","subName","subType","update","errorHandler","updateType","subMethod","unsubMethod","unsubName","subscriptionPromise","subscriptionId","inputs","reqCount","createTypeUnsafe","_formatStorageData","_formatStorageSet","jsonSet","_newType","withCache","_formatStorageSetEntry","entryIndex","hexKey","isNotFound","codec","outputType","entryNum","Uint8Array","isFallback","WebSocket","known","ALIASES","chain_finalisedHead","chain_subscribeFinalisedHeads","chain_unsubscribeFinalisedHeads","eraseRecord","record","WsProvider","__internal__endpoints","__internal__eventemitter","__internal__handlers","__internal__isReadyPromise","__internal__waitingForId","__internal__autoConnectMs","__internal__endpointIndex","__internal__endpointStats","__internal__isConnected","__internal__subscriptions","__internal__timeoutId","__internal__websocket","__internal__timeout","autoConnectMs","cacheCapacity","endpoints","connectWithRetry","isReady","selectEndpointIndex","onclose","__internal__onSocketClose","onerror","__internal__onSocketError","onmessage","__internal__onSocketMessage","onopen","__internal__onSocketOpen","__internal__timeoutHandlers","__internal__emit","close","endpointStats","callback","debug","reason","getWSErrorString","__internal__onSocketMessageResult","__internal__onSocketMessageSubscribe","subId","__internal__resubscribe","defaultErrorFactory","predicate","hasDefaultValue","take","seen","defaultIfEmpty","hasValue","throwIfEmpty","errorFactory","isKeyringPair","sign","filterEvents","txHash","allEvents","txIndex","isInBlock","allHashes","warn","recordIdentity","filterAndApply","onFound","getDispatchError","getDispatchInfo","SubmittableResult","internalError","extractError","extractInfo","isCompleted","isError","isFinalized","isDropped","isFinalityTimeout","isInvalid","isUsurped","isWarning","isRetracted","filterRecords","findRecord","toHuman","isExtended","makeEraOptions","partialOptions","makeSignOptions","makeSignAndSendOptions","statusCb","extras","genesisHash","signedExtensions","version","extrinsicType","apiType","decorateMethod","ExtrinsicBase","Submittable","__internal__ignoreStatusCb","__internal__transformResult","hasDryRun","dryRun","hasPaymentInfo","transactionPaymentApi","queryInfo","optionsOrHash","__internal__observeSign","paymentInfo","callAt","u8a","allOptions","eraOptions","signOptions","signFake","__internal__observeSubscribe","__internal__observeSend","signAsync","signAndSend","optionalStatusCb","withResultTransform","transform","optionsOrNonce","updateId","__internal__signViaSigner","__internal__observeStatus","asInBlock","asFinalized","submitExtrinsic","__internal__updateSigner","submitAndWatchExtrinsic","signer","payload","signPayload","toPayload","signRaw","toRaw","addSignature","signature","createSubmittable","logLength","and","logValues","padStart","findSectionExcludes","findMethodExcludes","src","dst","srcSections","dstSections","findSectionIncludes","excludes","srcMethods","dstMethods","d","augmentObject","fromEmpty","extractSections","extractMethods","decorateDeriveSections","sig","extractStorageArgs","_args","hashers","getSiType","asTuple","instanceCounter","getAtQueryFn","rx","Decorate","__internal__runtimeLog","__internal__registry","__internal__storageGetQ","__internal__storageSubQ","__phantom","_call","_consts","_derive","_errors","_extrinsics","_extrinsicType","LATEST_EXTRINSIC_VERSION","_genesisHash","_isConnected","_isReady","_query","_queryMulti","_rpc","_rpcCore","_runtimeMap","_runtimeChain","_runtimeMetadata","_runtimeVersion","_rx","_options","_decorateMethod","knownVersion","registerTypes","types","register","supportMulti","queryStorageAt","_emptyDecorated","_createDecorated","decoratedApi","decoratedMeta","expandMetadata","metadata","runtime","_decorateCalls","runtimeRx","_rxDecorateMethod","storage","_decorateStorage","storageRx","_decorateMultiAt","_decorateMulti","createdAt","_injectMetadata","_decorateExtrinsics","rxtx","injectMetadata","counter","_decorateFunctionMeta","output","_filterRpc","_decorateRpc","sectionMap","split","nameA","nameB","_filterRpcMethods","exposed","hasResults","allKnown","allKeys","alias","unknown","noInitWarn","_rpcSubmitter","out","decorateFn","methodName","decorateInternal","_addRuntimeDef","ecount","dcount","_getRuntimeDefs","defValues","apis","specVersion","named","older","implName","hasLogged","_section","secs","sectionHash","rtApi","sec","notFound","stateCall","lazySection","_decorateCall","decorated","subscribeStorage","atApi","_decorateExtrinsicEntry","_decorateStorageEntryAt","_decorateStorageEntry","getArgs","getQueryAt","_decorateStorageCall","getStorageHash","keyPrefix","getStorageSize","sizeAt","iterKey","_retrieveMapEntries","entriesAt","entriesPaged","_retrieveMapEntriesPaged","_retrieveMapKeys","keysAt","keysPaged","_retrieveMapKeysPaged","_retrieveMulti","_queueStorage","valueObs","queueIdx","valueIdx","overrideNoSub","headKey","startSubject","setMeta","pageSize","valsArr","_decorateDeriveRx","getAvailableDerives","custom","typesBundle","spec","_decorateDerive","textToString","Init","__internal__atLast","__internal__healthTimer","__internal__registries","__internal__updateSub","__internal__waitingRegistries","setKnownTypes","getBlockRegistry","__internal__onProviderDisconnect","__internal__onProviderError","__internal__onProviderConnect","_initRegistry","chainProps","setChainProperties","getChainProperties","setHasher","knownTypes","typesAlias","setMetadata","_getDefaultRegistry","u8aHash","u8aHex","_createBlockRegistry","Metadata","getMetadata","runtimeChain","lastBlockHash","_cacheBlockRegistryProgress","_getBlockRegistryViaVersion","existingViaVersion","_getBlockRegistryViaHash","firstVersion","lastVersion","getRuntimeVersion","_loadMeta","_subscribeUpdates","_unsubscribeUpdates","_metaFromSource","_metaFromChain","_initFromMeta","extrinsicVersion","rpcs","runtimeMetadata","subscribeRuntimeVersion","transactionVersion","thisRegistry","optMetadata","rpcMethods","chainMetadata","properties","metadataKey","getUniqTypes","throwOnUnknown","asLatest","_subscribeHealth","_unsubscribeHealth","health","_unsubscribe","cryptoReady","initWasm","hasMeta","assertResult","Getters","libraryInfo","ApiBase","setSigner","_signer","Combinator","__internal__allHasFired","__internal__callback","__internal__fired","__internal__fns","__internal__isActive","__internal__results","_createCallback","_allHasFired","hasFired","_triggerUpdate","promiseTracker","toPromiseMethod","needsCallback","actualArgs","resultCb","extractArgs","decorateSubscribe","tracker","decorateCall","ApiPromise","__internal__isReadyOrErrorPromise","throwOnConnect","isReadyOrError","combinator"],"sourceRoot":""}