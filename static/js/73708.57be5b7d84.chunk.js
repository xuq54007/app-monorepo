!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=(new e.Error).stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="2368cc04-cba4-4539-ad4c-ebff6e75f5fe",e._sentryDebugIdIdentifier="sentry-dbid-2368cc04-cba4-4539-ad4c-ebff6e75f5fe")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[73708],{593827:(e,a,t)=>{t.d(a,{L:()=>WalletAvatar});var n=t(503668),o=t.n(n),r=t(490343),s=t(491180),i=t(258988),l=t(831085);function WalletAvatarBase({size:e,img:a,wallet:t}){var n,o,c=a||t?.avatarInfo?.img;return c?s.A.isHwHiddenWallet({wallet:t})?(0,l.jsx)(r.Icon,{size:"$10",name:"LockSolid",color:"$iconSubdued"}):(0,l.jsxs)(r.Image,{size:e,"data-sentry-element":"Image","data-sentry-component":"WalletAvatarBase","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx",children:[(0,l.jsx)(r.Image.Source,{source:null!=(n=i.UO[c])?n:i.UO.bear,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx"}),(0,l.jsx)(r.Image.Fallback,{delayMs:300,justifyContent:"center",alignItems:"center","data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx",children:(0,l.jsx)(r.SizableText,{"data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx",children:null!=(o=t?.avatarInfo?.emoji)?o:""})})]}):null}function WalletAvatar({size:e="$10",status:a,badge:t,img:n,wallet:s}){return(0,l.jsxs)(r.Stack,{w:e,h:e,justifyContent:"center",alignItems:"center","data-sentry-element":"Stack","data-sentry-component":"WalletAvatar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx",children:[(0,l.jsx)(WalletAvatarBase,{size:e,img:n,wallet:s,"data-sentry-element":"WalletAvatarBase","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/WalletAvatar/WalletAvatar.tsx"}),"connected"===a?(0,l.jsx)(r.Stack,{position:"absolute",bottom:-2,right:-2,bg:"$bgSidebar",p:"$0.5",borderRadius:"$full",zIndex:"$1",children:(0,l.jsx)(r.Stack,{borderRadius:"$full",w:"$2.5",h:"$2.5",bg:"$bgSuccessStrong"})}):null,o()(t)?null:(0,l.jsx)(r.Stack,{position:"absolute",h:"$4",px:"$0.5",justifyContent:"center",bottom:-2,right:-1,bg:"$bgSubdued",borderRadius:"$full",zIndex:"$1",children:(0,l.jsx)(r.SizableText,{size:"$bodySm",textAlign:"center",children:t})})]})}},903469:(e,a,t)=>{t.d(a,{A:()=>BackupListLoading});var n=t(490343),o=t(831085);function BackupListLoading(){return(0,o.jsxs)(n.Stack,{flex:1,px:"$5",gap:"$2",pt:"$5","data-sentry-element":"Stack","data-sentry-component":"BackupListLoading","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/CloudBackup/components/BackupListLoading.tsx",children:[(0,o.jsx)(n.Skeleton,{h:"$6",w:"70%","data-sentry-element":"Skeleton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/CloudBackup/components/BackupListLoading.tsx"}),(0,o.jsx)(n.Skeleton,{h:"$6",w:"100%","data-sentry-element":"Skeleton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/CloudBackup/components/BackupListLoading.tsx"}),(0,o.jsx)(n.Skeleton,{h:"$6",w:"70%","data-sentry-element":"Skeleton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/CloudBackup/components/BackupListLoading.tsx"}),(0,o.jsx)(n.Skeleton,{h:"$6",w:"100%","data-sentry-element":"Skeleton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/CloudBackup/components/BackupListLoading.tsx"})]})}},573708:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Detail});var n=t(324586),o=t(586330),r=t(514041),s=t(654266),i=t(908867),l=t(302722),c=t.n(l),u=t(490343),d=t(896666),p=t(643087),m=t(791088),f=t(536612),g=t(593827),k=t(498356),b=t(911998),y=t(847164),w=t(334439),_=t(296827),v=t(663522),h=t(193068),x=t(567807),j=t(903469),T=t(831085);function DeleteBackupDialogFooter({filename:e,callback:a}){var t=(0,i.A)(),[n,s]=(0,r.useState)(!1);return(0,T.jsx)(u.Dialog.Footer,{confirmButtonProps:{loading:n},tone:"destructive",onConfirmText:t.formatMessage({id:w.ETranslations.global_delete}),onConfirm:(0,o.A)((function*(){try{s(!0),yield p.A.serviceCloudBackup.removeBackup(e),a?.(),u.Toast.message({title:t.formatMessage({id:w.ETranslations.backup_backup_deleted})})}finally{s(!1)}})),"data-sentry-element":"unknown","data-sentry-component":"DeleteBackupDialogFooter","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/CloudBackup/components/useDeleteBackupDialog.tsx"})}var S=t(882115);function RestorePasswordVerify(){var e=(0,i.A)(),[a,t]=(0,r.useState)(!0);return(0,T.jsx)(u.Dialog.Form,{formProps:{values:{password:""}},"data-sentry-element":"unknown","data-sentry-component":"RestorePasswordVerify","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/CloudBackup/components/useResotrePasswordVerify.tsx",children:(0,T.jsx)(u.Dialog.FormField,{name:"password",rules:{required:{value:!0,message:e.formatMessage({id:w.ETranslations.auth_enter_your_password})},onChange:function(){}},"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/CloudBackup/components/useResotrePasswordVerify.tsx",children:(0,T.jsx)(u.Input,{autoFocus:!0,size:"large",placeholder:e.formatMessage({id:w.ETranslations.auth_enter_your_password}),flex:1,keyboardType:(0,S.V)(!a),secureTextEntry:a,addOns:[{iconName:a?"EyeOffOutline":"EyeOutline",onPress:function(){t(!a)},testID:"password-eye-"+(a?"off":"on")}],"data-sentry-element":"Input","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/CloudBackup/components/useResotrePasswordVerify.tsx"})})})}function ownKeys(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?ownKeys(Object(t),!0).forEach((function(a){(0,n.A)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function Detail(){var e,a,t=(0,i.A)(),n=function useRestorePasswordVerifyDialog(){var e=(0,i.A)(),a=(0,r.useCallback)((function(){return new Promise((function(a,t){return u.Dialog.confirm({icon:"InfoCircleOutline",title:e.formatMessage({id:w.ETranslations.backup_import_data}),description:e.formatMessage({id:w.ETranslations.backup_verify_app_password_to_import_data}),renderContent:(0,T.jsx)(RestorePasswordVerify,{}),onConfirmText:e.formatMessage({id:w.ETranslations.global_import}),onConfirm:function(e){var t,n=e.getForm()?.getValues(),o=null!=(t=n?.password)?t:"";o.length<=0||a(o)},onClose:function(){t(e.formatMessage({id:w.ETranslations.global_cancel}))}})}))}),[e]);return(0,r.useMemo)((function(){return{show:a}}),[a])}(),l=function useDeleteBackupDialog(){var e=(0,i.A)(),a=(0,r.useCallback)((function(a){return new Promise((function(t){u.Dialog.show({title:e.formatMessage({id:w.ETranslations.backup_delete_this_backup}),icon:"DeleteOutline",description:e.formatMessage({id:v.Ay.isNativeAndroid?w.ETranslations.backup_file_permanently_deleted_android:w.ETranslations.backup_file_permanently_deleted}),tone:"destructive",renderContent:(0,T.jsx)(DeleteBackupDialogFooter,{filename:a,callback:t})})}))}),[e]);return(0,r.useMemo)((function(){return{show:a}}),[a])}(),S=(0,k.A)(),O=(0,s.lq)(),{item:{filename:E,backupTime:D}}=O.params,A=(0,x.Yq)(new Date(D)),[M,C]=(0,r.useState)(0),[B,$]=(0,r.useState)(!1),P=(0,f.SX)(),L=(0,r.useCallback)((function(e){var a,n,o;return[Object.values(e.HDWallets).length>0&&{title:t.formatMessage({id:w.ETranslations.global_app_wallet}),data:Object.values(e.HDWallets).map((function(e){return{title:e.name,detail:t.formatMessage({id:w.ETranslations.global_number_accounts},{number:e.indexedAccountUUIDs.length}),walletAvatar:e.avatar,infoList:[t.formatMessage({id:w.ETranslations.global_recovery_phrase}),t.formatMessage({id:w.ETranslations.global_wallet_avatar}),t.formatMessage({id:w.ETranslations.global_names_of_wallets_and_accounts})],footerDescription:t.formatMessage({id:w.ETranslations.backup_only_accounts_with_addresses_will_be_backed_up})}}))},Object.values(e.importedAccounts).length+Object.values(e.watchingAccounts).length>0&&{title:t.formatMessage({id:w.ETranslations.global_other_wallet}),data:[Object.values(e.importedAccounts).length>0&&{title:t.formatMessage({id:w.ETranslations.global_private_key}),detail:t.formatMessage({id:w.ETranslations.global_number_accounts},{number:Object.keys(e.importedAccounts).length}),icon:"PasswordOutline",infoList:[t.formatMessage({id:w.ETranslations.global_private_key}),t.formatMessage({id:w.ETranslations.global_account_name})]},Object.values(e.watchingAccounts).length>0&&{title:t.formatMessage({id:w.ETranslations.global_watchlist}),detail:t.formatMessage({id:w.ETranslations.global_number_accounts},{number:Object.keys(e.watchingAccounts).length}),icon:"EyeOutline",infoList:[t.formatMessage({id:w.ETranslations.global_address}),t.formatMessage({id:w.ETranslations.global_account_name})]}].filter((function(e){return e}))},Object.keys(e.contacts).length>0&&{title:t.formatMessage({id:w.ETranslations.backup_address_book_labels}),data:[Object.keys(e.contacts).length>0&&{title:t.formatMessage({id:w.ETranslations.settings_address_book}),detail:t.formatMessage({id:w.ETranslations.global_number_items},{number:Object.keys(e.contacts).length}),icon:"BookOpenOutline",infoList:[t.formatMessage({id:w.ETranslations.global_address}),t.formatMessage({id:w.ETranslations.global_name}),t.formatMessage({id:w.ETranslations.global_network_type})]}].filter((function(e){return e}))},(null!=(a=e?.discoverBookmarks?.length)?a:0)>0&&{title:t.formatMessage({id:w.ETranslations.global_browser}),data:[(null!=(n=e?.discoverBookmarks?.length)?n:0)>0&&{title:t.formatMessage({id:w.ETranslations.browser_bookmark}),detail:t.formatMessage({id:w.ETranslations.global_number_items},{number:null!=(o=e?.discoverBookmarks?.length)?o:0}),icon:"BookmarkOutline",infoList:[t.formatMessage({id:w.ETranslations.global_url}),t.formatMessage({id:w.ETranslations.global_name})]}].filter((function(e){return e}))}].filter((function(e){return e}))}),[t]),W=(0,b.yk)((0,o.A)((function*(){var e=yield p.A.serviceCloudBackup.getBackupDiffListWithFilename(E),a=L(e.alreadyOnDevice),t=L(e.notOnDevice);return _objectSpread(_objectSpread({},e),{},{alreadyOnDeviceSectionList:a,notOnDeviceSectionList:t})})),[E,L]).result,I=(0,r.useMemo)((function(){if(!W)return[];var e=0===M?W.notOnDeviceSectionList:W.alreadyOnDeviceSectionList;return null!=e?e:[]}),[M,W]),R=(0,r.useCallback)((0,o.A)((function*(){yield l.show(E),S.pop()})),[l,E,S]),z=(0,r.useCallback)((function(){B||u.ActionList.show({title:A,items:[{label:t.formatMessage({id:w.ETranslations.global_delete}),icon:"DeleteOutline",destructive:!0,onPress:function(){R()}}]})}),[B,A,t,R]),F=(0,r.useCallback)((function(){return(0,T.jsx)(d.v$,{icon:"DotVerOutline",onPress:z})}),[z]),V=(0,r.useCallback)((a=(0,o.A)((function*(e){if(W){var{password:a}=yield p.A.servicePassword.promptPasswordVerify();return p.A.serviceCloudBackup.restoreFromPrivateBackup({privateString:W.backupData.privateData,notOnDevice:W.notOnDevice,localPassword:a,remotePassword:null!=e?e:a})}})),function(e){return a.apply(this,arguments)}),[W]),N=(0,r.useCallback)((0,o.A)((function*(){var e;if(c().gt(null!=(e=W?.backupData.appVersion)?e:"",null!="5.5.0"?"5.5.0":"1.0.0"))u.Dialog.show({icon:"InfoCircleOutline",title:t.formatMessage({id:w.ETranslations.backup_upgrade_required}),description:t.formatMessage({id:w.ETranslations.backup_please_upgrade_app_to_import_data}),onConfirmText:t.formatMessage({id:w.ETranslations.global_upgrade}),onConfirm:function(){P.toUpdatePreviewPage()}});else{$(!0);try{var{isOnboardingDone:a}=yield p.A.serviceOnboarding.isOnboardingDone(),o=yield V();if(o===y.d.WRONG_PASSWORD){var r=yield n.show();o=yield V(yield p.A.servicePassword.encodeSensitiveText({text:r}))}o===y.d.WRONG_PASSWORD?u.Toast.error({title:t.formatMessage({id:w.ETranslations.auth_error_password_incorrect})}):o===y.d.UNKNOWN_ERROR?u.Toast.error({title:o}):(u.Toast.success({title:t.formatMessage({id:w.ETranslations.backup_backup_imported})}),a?S.pop():S.navigate(h.WP.Main))}catch(e){var s;u.Toast.error({title:`${null!=(s=e?.message)?s:e}`})}finally{$(!1)}_.U.account.wallet.importWallet({importMethod:"cloud"})}})),[t,n,W,S,P,V]);return(0,T.jsxs)(u.Page,{"data-sentry-element":"Page","data-sentry-component":"Detail","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/CloudBackup/pages/Detail/index.tsx",children:[(0,T.jsx)(u.Page.Header,{title:A,headerRight:F,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/CloudBackup/pages/Detail/index.tsx"}),(0,T.jsxs)(u.Page.Body,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/CloudBackup/pages/Detail/index.tsx",children:[(0,T.jsx)(u.Stack,{m:"$5","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/CloudBackup/pages/Detail/index.tsx",children:(0,T.jsx)(u.SegmentControl,{fullWidth:!0,value:M,onChange:function(e){C(e)},options:[{label:t.formatMessage({id:w.ETranslations.backup_off_device},{number:null!=(e=W?.diffCount)?e:0}),value:0},{label:t.formatMessage({id:w.ETranslations.backup_on_device}),value:1}],"data-sentry-element":"SegmentControl","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/CloudBackup/pages/Detail/index.tsx"})}),W?(0,T.jsx)(u.SectionList,{sections:I,renderItem:function({item:e}){return(0,T.jsx)(m.c,{title:e.title,renderIcon:e.walletAvatar?(0,T.jsx)(g.L,{wallet:{avatarInfo:e.walletAvatar}}):(0,T.jsx)(u.Stack,{bg:"$bgStrong",p:"$2",borderRadius:"$3",children:(0,T.jsx)(u.Icon,{name:e.icon,size:"$6",color:"$icon"})}),children:(0,T.jsxs)(u.XStack,{gap:"$1",onPress:function(){u.ActionList.show({title:t.formatMessage({id:w.ETranslations.backup_encrypted_backup_contents}),items:e.infoList.map((function(e){return{label:`  •${v.Ay.isNativeAndroid?"\t\t":"\t"}${e}`}})),renderItems:e?.footerDescription?function(){return(0,T.jsx)(u.SizableText,{mx:"$3",my:"$3",size:"$bodyMd",color:"$textSubdued",children:e?.footerDescription})}:void 0})},children:[(0,T.jsx)(m.c.Text,{secondary:e.detail,align:"right"}),(0,T.jsx)(u.Icon,{name:"InfoCircleOutline",color:"$iconSubdued",size:"small",bg:"transparent"})]})})},estimatedItemSize:"$16",ListEmptyComponent:(0,T.jsx)(u.Empty,{icon:"SearchOutline",title:t.formatMessage({id:w.ETranslations.backup_no_data}),description:t.formatMessage({id:w.ETranslations.backup_data_already_present})}),renderSectionHeader:function({section:e}){return(0,T.jsx)(u.SectionList.SectionHeader,{title:e.title})}}):(0,T.jsx)(j.A,{}),(0,T.jsx)(u.Button,{m:"$5",borderRadius:"$3",py:"$3",variant:"primary",loading:B,disabled:!W||W.notOnDeviceSectionList.length<=0,onPress:N,"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/CloudBackup/pages/Detail/index.tsx",children:t.formatMessage({id:w.ETranslations.global_import})})]})]})}}}]);
//# sourceMappingURL=73708.57be5b7d84.chunk.js.map