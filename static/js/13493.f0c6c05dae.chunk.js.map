{"version":3,"file":"static/js/13493.f0c6c05dae.chunk.js","mappings":"ywBAAuV,SAASA,aAAaC,GAAS,IAAIC,EAA0BC,4BAA4B,OAAO,SAASC,uBAAuB,IAAmCC,EAA/BC,GAAM,OAAgBL,GAAgB,GAAGC,EAA0B,CAAC,IAAIK,GAAU,OAAgBC,MAAMC,YAAYJ,EAAOK,QAAQC,UAAUL,EAAMM,UAAUL,EAAW,MAAMF,EAAOC,EAAMO,MAAML,KAAKI,WAAY,OAAO,OAA2BJ,KAAKH,EAAQ,CAAE,CAAC,SAASF,4BAA4B,IAAI,IAAIW,GAAGC,QAAQC,UAAUC,QAAQC,KAAKR,QAAQC,UAAUI,QAAQ,IAAG,WAAW,IAAI,CAAC,MAAMD,GAAG,CAAC,OAAOX,0BAA0B,WAAW,QAAQW,CAAE,IAAK,CAAkJ,IAA2+BK,EAAY,SAASC,IAAW,OAAUD,YAAYC,GAAW,IAAIC,EAAOrB,aAAamB,aAAa,SAASA,YAAYG,EAAoBC,EAASC,GAAO,IAAIC,EAAUC,GAAI,IAAAC,GAAEH,EAAM,CAACI,IAAIN,EAAoBO,UAAUC,EAAOC,MAAM,KAAKR,GAAUK,IAAII,SAAS,OAAiI,OAA1HP,EAAMJ,EAAOH,KAAKV,KAAKkB,EAAIF,IAAaF,oBAAoBA,EAAoBG,EAAMF,SAASA,EAASE,EAAMD,MAAMA,EAAaC,CAAM,CAAC,IAAuLQ,EAAnLC,EAAQf,YAAYH,UAAqmB,OAA3lBkB,EAAQC,UAAU,SAASA,YAAY,OAAOC,QAAQC,SAAQ,QAAQ7B,KAAKe,SAASf,KAAKc,qBAAsB,EAAEY,EAAQI,cAA4BL,GAAc,QAAkB,YAAY,OAAOM,EAAA,EAAYC,iBAAiBhC,KAAK2B,YAAa,IAAG,SAASG,eAAe,OAAOL,EAAcpB,MAAML,KAAKI,UAAW,GAAyBsB,EAAQO,KAAK,SAASA,KAAKC,GAAQ,IAAIC,GAAU,QAAMnC,KAAKgB,MAAMhB,KAAKc,oBAAoBoB,EAAOlC,KAAKe,UAAU,MAAgB,cAAbf,KAAKgB,MAA4BY,QAAQC,QAAQ,CAACM,EAAUC,MAAM,GAAG,GAAGD,EAAUA,EAAUE,OAAO,KAAaT,QAAQC,QAAQ,CAACM,EAAU,GAAI,GAAS,OAAaxB,YAAa,CAAtiC,CAA1+B,WAAW,SAAS2B,SAASpB,EAAIF,GAAOhB,KAAKgB,MAAMA,EAAMhB,KAAKuC,oBAAoBjB,EAAOkB,KAAKtB,EAAI,OAAOlB,KAAKyC,uBAAsB,QAAoBzB,EAAMhB,KAAKuC,oBAAqB,CAAC,IAA0MG,EAAtMC,EAAOL,SAAS9B,UAAouB,OAA1tBmC,EAAOC,UAAU,SAASA,UAAUC,GAAY,OAAOjB,QAAQC,QAAQgB,EAAW7C,KAAKuC,oBAAoBvC,KAAKyC,sBAAuB,EAAEE,EAAOG,cAA4BJ,GAAc,QAAkB,UAAUG,GAAY,OAAOd,EAAA,EAAYC,iBAAiBhC,KAAK4C,UAAUC,GAAa,IAAG,SAASC,aAAaC,GAAI,OAAOL,EAAcrC,MAAML,KAAKI,UAAW,GAAyBuC,EAAOK,OAAO,SAASA,SAAS,OAAOpB,QAAQC,QAAQP,EAAOkB,KAAK,IAAK,EAAEG,EAAOM,gBAAgB,SAASA,iBAAgB,UAACC,EAAS,OAAChB,EAAM,UAACC,IAAY,IAAIgB,EAAEpB,EAAA,EAAYqB,SAASF,GAAeG,EAAEtB,EAAA,EAAYqB,SAASlB,GAAYoB,EAAEvB,EAAA,EAAYqB,SAASjB,IAAc,MAACnB,GAAOhB,KAASH,GAAO,QAAOmB,EAAMmC,EAAEE,EAAEC,GAAG,OAAO1B,QAAQC,QAAQhC,EAAQ,GAAS,OAAayC,SAAU,CAA/8B,ICAv1B,SAASiB,QAAQC,EAAEC,GAAG,IAAInD,EAAEoD,OAAOC,KAAKH,GAAG,GAAGE,OAAOE,sBAAsB,CAAC,IAAIC,EAAEH,OAAOE,sBAAsBJ,GAAGC,IAAII,EAAEA,EAAEC,QAAO,SAASL,GAAG,OAAOC,OAAOK,yBAAyBP,EAAEC,GAAGO,UAAW,KAAI1D,EAAE2D,KAAK5D,MAAMC,EAAEuD,EAAG,CAAC,OAAOvD,CAAE,CAAC,SAAS4D,cAAcV,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAErD,UAAUiC,OAAOoB,IAAI,CAAC,IAAInD,EAAE,MAAMF,UAAUqD,GAAGrD,UAAUqD,GAAG,CAAC,EAAEA,EAAE,EAAEF,QAAQG,OAAOpD,IAAG,GAAI6D,SAAQ,SAASV,IAAG,OAAgBD,EAAEC,EAAEnD,EAAEmD,GAAI,IAAGC,OAAOU,0BAA0BV,OAAOW,iBAAiBb,EAAEE,OAAOU,0BAA0B9D,IAAIiD,QAAQG,OAAOpD,IAAI6D,SAAQ,SAASV,GAAGC,OAAOY,eAAed,EAAEC,EAAEC,OAAOK,yBAAyBzD,EAAEmD,GAAI,GAAG,CAAC,OAAOD,CAAE,CAAqZ,IAAIe,EAAiB,WAAW,SAASA,mBAAmB,CAAC,IAA+SC,EAA2cC,EAAgpBC,EAAw5BC,EAA+wBC,EAAk9DC,EAA6XC,EAAmNC,EAA/kLpC,EAAO4B,iBAAiB/D,UAA2uL,OAAjuLmC,EAAOqC,aAAa,SAASA,aAAaC,GAAW,OAAOA,GAAW,IAAI,UAAU,OAAO,KAAQ,IAAI,YAAY,OAAO,KAAU,IAAI,WAAW,OAAO,KAAS,QAAQ,MAAM,IAAI,KAAoB,qBAAsB,EAAEtC,EAAOuC,kBAAgCV,GAAkB,QAAkB,WAAU,MAACxD,EAAK,WAACmE,EAAU,SAACpE,IAAW,QAAqB,IAAXA,EAAwB,MAAM,IAAI,KAAoB,yCAA0C,IAAIqE,EAAiBrD,EAAA,EAAYqB,SAAS+B,GAAY,OAAOvD,QAAQC,QAAQ,IAAIlB,EAAYyE,EAAiBrE,EAASC,GAAQ,IAAG,SAASkE,iBAAiBnC,GAAI,OAAOyB,EAAkBnE,MAAML,KAAKI,UAAW,GAA6BuC,EAAO0C,qBAAmCZ,GAAqB,QAAkB,WAAU,QAACa,EAAO,MAACtE,IAAQ,IAAIuE,QAAkBvF,KAAKwF,eAAeF,GAAaG,EAAYH,EAAQI,QAAQC,KAASR,EAAWI,EAAYE,GAAiBG,EAAaN,GAASO,WAAW,GAAqH,IAA9GV,GAAYS,IAAgET,EAAWI,EAAhD,CAACE,EAAYG,GAAcE,KAAK,QAA2CX,EAAY,MAAM,IAAIY,MAAM,yBAAyBN,KAAgB,OAAOzF,KAAKkF,iBAAiB,CAAClE,QAAMmE,aAAWpE,SAASuE,EAAQvE,UAAW,IAAG,SAASsE,oBAAoBW,GAAK,OAAOvB,EAAqBpE,MAAML,KAAKI,UAAW,GAAgCuC,EAAOsD,oBAAkCvB,GAAoB,QAAkB,WAAU,QAACY,EAAO,MAACtE,IAAQ,IAAG,YAACkF,EAAW,QAACR,EAAO,SAAC3E,EAAQ,SAAC8E,GAAUP,EAAYC,EAAY,CAAC,EAAE,GAAGW,EAAYC,IAAID,EAAYE,SAAU,MAAM,IAAI,KAAoB,uEAAuM,GAA5HF,EAAYC,KAAIZ,QAAkBvF,KAAKqG,qBAAqB,CAACrF,QAAM0E,UAAQY,aAAaJ,EAAYC,GAAGpF,WAAS8E,cAAeK,EAAYE,SAAS,CAAC,IAAIjB,WAAWhC,IAAG,QAA0B,CAACpC,WAASwF,WAAWL,EAAYE,WAAeI,EAAkBzE,EAAA,EAAYC,YAAW,OAAQjB,EAASoC,IAAIoC,EAAYG,EAAQC,MAAMa,EAAkBjB,EAAY,IAAIiB,CAAkB,CAAC,IAAI9C,OAAOC,KAAK4B,GAAalD,OAAQ,MAAM,IAAI0D,MAAM,yBAA0B,OAAOR,CAAY,IAAG,SAASU,mBAAmBQ,GAAK,OAAO/B,EAAoBrE,MAAML,KAAKI,UAAW,GAA+BuC,EAAO0D,sBAAoC1B,GAAsB,QAAkB,WAAU,MAAC3D,EAAK,SAACD,EAAQ,QAAC2E,EAAO,SAACG,EAAQ,aAACS,IAAe,IAAG,KAACX,GAAMD,EAAYgB,EAAef,EAAKgB,MAAM,KAASC,EAAkBf,GAAU,CAACa,EAAeG,OAAWC,EAASJ,EAAeZ,KAAK,KAAK,GAA8B,IAA3Bc,EAAkBvE,OAAY,MAAM,IAAI,KAAoB,8CAA0S,OAAlP,QAAoBrB,EAAMsF,EAAavF,EAAS+F,EAASF,GAAgCG,QAAO,SAASC,EAAI5F,GAAiH,OAAjG8C,cAAcA,cAAc,CAAC,EAAE8C,GAAK,CAAC,EAAE,CAAC,CAAC5F,EAAIuE,MAAM5D,EAAA,EAAYC,WAAWZ,EAAI6F,YAAY7F,MAAqB,GAAE,CAAC,EAAc,IAAG,SAASiF,qBAAqBa,GAAK,OAAOvC,EAAsBtE,MAAML,KAAKI,UAAW,GAAiCuC,EAAOwE,wBAAsCvC,GAAwB,QAAkB,UAAUwC,EAAMC,GAAS,IAAIpG,EAAMjB,MAAQ,MAACgB,EAAK,aAACsG,GAAcD,GAAW,SAACE,EAAQ,aAACjB,EAAY,SAACvF,EAAQ,QAACyG,GAASJ,GAAS,WAACK,EAAU,WAACC,IAAY,QAAkBH,GAAcI,EAAeH,EAAQI,KAAI,SAASC,GAAO,OAAOH,EAAWI,QAAQ,UAAUD,EAAMrG,WAAY,IAAOuG,EAAgC,eAAfT,EAAgCU,EAAY,GAAOC,EAAY,GAAMF,EAAkBE,GAAY,QAAoBjH,EAAMsF,EAAavF,EAAS0G,EAAWE,GAAsBK,QAAkB,QAAwB,CAAC/C,UAAUjE,EAAMsF,eAAavF,WAASmH,OAAOT,EAAW5B,SAAS8B,IAAkB,IAAIQ,EAAMJ,EAAiBE,EAAYD,EAAY,GAAGG,EAAM9F,SAASmF,EAAQnF,OAAQ,MAAM,IAAI,KAAoB,8BAA+B,IAAyD+F,EAArDC,QAAgBzG,QAAQ0G,IAAIH,EAAMP,KAAmBQ,GAAK,QAAkB,UAAUG,GAAM,IAAqCrF,EAAcrD,GAAhD,KAAC8F,EAAKsB,aAAY,IAAC7F,IAAMmH,EAA8B,GAAGR,EAAiB,CAAC,IAAIS,EAAczG,EAAA,EAAYC,YAAW,QAAQjB,EAASK,IAAMvB,QAAaoB,EAAMwH,sBAAsB,CAACC,YAAYtB,EAAMsB,YAAYF,gBAAcG,eAAeJ,GAAO,MAAMrF,EAAU9B,EAAII,SAAS,OAAO3B,QAAaoB,EAAM2H,qBAAqB,CAACF,YAAYtB,EAAMsB,YAAYxF,YAAU2F,cAAcN,IAAQ,OAAO,IAAO,CAACrF,YAAUyC,QAAM9F,EAAQ,IAAU,SAASiJ,GAAK,OAAOV,EAAK/H,MAAML,KAAKI,UAAW,KAAQ,MAAM,CAACiI,YAAW,IAAG,SAASlB,uBAAuB4B,EAAIC,GAAK,OAAOpE,EAAwBvE,MAAML,KAAKI,UAAW,GAAmCuC,EAAOsG,uBAAuB,SAASA,wBAAuB,YAAC/C,IAAc,GAAGA,EAAYC,IAAID,EAAYE,SAAU,MAAM,IAAI,KAAoB,2EAA4E,GAAGF,EAAYC,GAAI,OAAO,EAAA+C,oBAAoB/C,GAAI,GAAGD,EAAYE,SAAU,OAAO,EAAA8C,oBAAoB9C,SAAU,MAAM,IAAI,KAAoB,iDAAkD,EAAEzD,EAAOwG,0BAAwCtE,GAA0B,QAAkB,UAAUuE,GAAQ,IAAIC,QAAqBrJ,KAAKwF,eAAe4D,IAAYtI,GAAqB4C,OAAO4F,OAAOD,GAAgB,MAAM,CAACb,cAAc1H,EAAqB,IAAG,SAASqI,yBAAyBI,GAAK,OAAO1E,EAA0BxE,MAAML,KAAKI,UAAW,GAAqCuC,EAAO6G,cAA4B1E,GAAc,QAAkB,UAAUsE,GAAQ,MAAM,IAAI,IAAiB,IAAG,SAASI,aAAaC,GAAK,OAAO3E,EAAczE,MAAML,KAAKI,UAAW,GAAyBuC,EAAO+G,eAA6B3E,GAAe,QAAkB,UAAUqE,GAAQ,MAAM,IAAI,IAAiB,IAAG,SAASM,cAAcC,GAAM,OAAO5E,EAAe1E,MAAML,KAAKI,UAAW,IAAiC,OAAamE,iBAAkB,CAAr1L,E,qGCA7+B,SAAS/E,aAAaC,GAAS,IAAIC,EAA0BC,4BAA4B,OAAO,SAASC,uBAAuB,IAAmCC,EAA/BC,GAAM,OAAgBL,GAAgB,GAAGC,EAA0B,CAAC,IAAIK,GAAU,OAAgBC,MAAMC,YAAYJ,EAAOK,QAAQC,UAAUL,EAAMM,UAAUL,EAAW,MAAMF,EAAOC,EAAMO,MAAML,KAAKI,WAAY,OAAO,OAA2BJ,KAAKH,EAAQ,CAAE,CAAC,SAASF,4BAA4B,IAAI,IAAIW,GAAGC,QAAQC,UAAUC,QAAQC,KAAKR,QAAQC,UAAUI,QAAQ,IAAG,WAAW,IAAI,CAAC,MAAMD,GAAG,CAAC,OAAOX,0BAA0B,WAAW,QAAQW,CAAE,IAAK,CAAoD,IAAIsJ,EAAkB,SAASC,IAAoB,OAAUD,kBAAkBC,GAAoB,IAAIhJ,EAAOrB,aAAaoK,mBAAmB,SAASA,oBAAoB,OAAO/I,EAAOR,MAAML,KAAKI,UAAW,CAAC,OAAO,OAAawJ,kBAAmB,CAAjO,C,UAAmO,E,oTCA3sB,SAASrG,QAAQC,EAAEC,GAAG,IAAInD,EAAEoD,OAAOC,KAAKH,GAAG,GAAGE,OAAOE,sBAAsB,CAAC,IAAIC,EAAEH,OAAOE,sBAAsBJ,GAAGC,IAAII,EAAEA,EAAEC,QAAO,SAASL,GAAG,OAAOC,OAAOK,yBAAyBP,EAAEC,GAAGO,UAAW,KAAI1D,EAAE2D,KAAK5D,MAAMC,EAAEuD,EAAG,CAAC,OAAOvD,CAAE,CAAC,SAAS4D,cAAcV,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAErD,UAAUiC,OAAOoB,IAAI,CAAC,IAAInD,EAAE,MAAMF,UAAUqD,GAAGrD,UAAUqD,GAAG,CAAC,EAAEA,EAAE,EAAEF,QAAQG,OAAOpD,IAAG,GAAI6D,SAAQ,SAASV,IAAG,OAAgBD,EAAEC,EAAEnD,EAAEmD,GAAI,IAAGC,OAAOU,0BAA0BV,OAAOW,iBAAiBb,EAAEE,OAAOU,0BAA0B9D,IAAIiD,QAAQG,OAAOpD,IAAI6D,SAAQ,SAASV,GAAGC,OAAOY,eAAed,EAAEC,EAAEC,OAAOK,yBAAyBzD,EAAEmD,GAAI,GAAG,CAAC,OAAOD,CAAE,CAAC,SAAShE,aAAaC,GAAS,IAAIC,EAA0BC,4BAA4B,OAAO,SAASC,uBAAuB,IAAmCC,EAA/BC,GAAM,OAAgBL,GAAgB,GAAGC,EAA0B,CAAC,IAAIK,GAAU,OAAgBC,MAAMC,YAAYJ,EAAOK,QAAQC,UAAUL,EAAMM,UAAUL,EAAW,MAAMF,EAAOC,EAAMO,MAAML,KAAKI,WAAY,OAAO,OAA2BJ,KAAKH,EAAQ,CAAE,CAAC,SAASF,4BAA4B,IAAI,IAAIW,GAAGC,QAAQC,UAAUC,QAAQC,KAAKR,QAAQC,UAAUI,QAAQ,IAAG,WAAW,IAAI,CAAC,MAAMD,GAAG,CAAC,OAAOX,0BAA0B,WAAW,QAAQW,CAAE,IAAK,CAA0pB,IAAIU,EAAM,UAAc8I,mBAAmB,SAASC,EAASpE,GAAM,IAAI,OAAO,OAASoE,EAASpE,EAAM,CAAC,MAAMnC,GAAG,IAAG,QAACwG,GAASxG,EAAE,GAAa,mEAAVwG,EAA4E,MAAM,IAAI,KAA8B,MAAMxG,CAAE,CAAC,EAAMyG,EAAkB,SAASC,IAAmB,OAAUD,kBAAkBC,GAAmB,IAAIrJ,EAAOrB,aAAayK,mBAAmB,SAASA,oBAAoB,OAAOpJ,EAAOR,MAAML,KAAKI,UAAW,CAAC,IAAkF+J,EAAijBzF,EAAkrC0F,EAA6OC,EAA2wBC,EAAmgBC,EAAqdC,EAAmiBC,EAApyI9H,EAAOsH,kBAAkBzJ,UAAs1K,OAA50KmC,EAAO+H,sBAAoCP,GAAsB,QAAkB,UAAU/C,GAAO,IAAG,SAACrG,EAAQ,QAAC4J,EAAO,YAACzE,GAAakB,GAAS,cAACoB,SAAqBxI,KAAKmJ,yBAAyB/B,GAAO,IAAIoB,EAAe,MAAM,IAAIzC,MAAM,6BAA8B,GAAG4E,IAAU,EAAAC,8BAA8BzF,WAAY,MAAM,MAAK,QAAQpE,EAASyH,GAAehH,SAAS,SAAU,MAAM,IAAIuE,MAAM,+BAA+B4E,IAAW,IAAG,SAASD,qBAAqB3H,GAAI,OAAOoH,EAAsB9J,MAAML,KAAKI,UAAW,GAAiCuC,EAAOsD,oBAAkCvB,GAAoB,QAAkB,WAAU,QAACY,IAAU,IAAG,YAACY,EAAW,QAACR,EAAO,SAAC3E,EAAQ,SAAC8E,GAAUP,EAAYC,EAAY,CAAC,EAAE,GAAGW,EAAYC,GAAG,CAAC,IAAIO,EAAehB,EAAQC,KAAKgB,MAAM,KAASC,EAAkBf,GAAU,CAACa,EAAeG,OAAWC,EAASJ,EAAeZ,KAAK,KAASiE,GAAS,QAAoB7D,EAAYC,GAAGpF,GAA4NwE,EAAzMqB,EAAkBgB,KAAI,SAASiD,GAAS,IAAIlF,EAAK,GAAGmB,KAAY+D,IAAcC,EAAQhB,mBAAmBC,EAASpE,GAAM,MAAM,CAACA,OAAKvE,KAAI,OAAQL,EAASO,EAAOkB,KAAKsI,EAAQC,UAAU3I,MAAM,EAAE,MAAO,IAAoB2E,QAAO,SAASC,EAAI5F,GAAK,OAAO8C,cAAcA,cAAc,CAAC,EAAE8C,GAAK,CAAC,EAAE,CAAC,CAAC5F,EAAIuE,MAAM,IAAY3D,WAAWZ,EAAIA,MAAO,GAAE,CAAC,EAAG,CAAC,GAAG8E,EAAYE,SAAS,CAAC,IAAIjB,WAAWhC,IAAG,QAA0B,CAACpC,WAASwF,WAAWL,EAAYE,WAAeI,EAAkB,IAAYxE,YAAW,OAAQjB,EAASoC,IAAIoC,EAAYG,EAAQC,MAAMa,EAAkBjB,EAAY,IAAIiB,CAAkB,CAAC,IAAI9C,OAAOC,KAAK4B,GAAalD,OAAQ,MAAM,IAAI0D,MAAM,yBAA0B,OAAOR,CAAY,IAAG,SAASU,mBAAmBD,GAAK,OAAOtB,EAAoBrE,MAAML,KAAKI,UAAW,GAA+BuC,EAAO6C,gBAA8B4E,GAAgB,QAAkB,UAAU9E,GAAS,OAAOtF,KAAKiG,mBAAmB,CAACX,WAAU,IAAG,SAASE,eAAeiB,GAAK,OAAO2D,EAAgB/J,MAAML,KAAKI,UAAW,GAA2BuC,EAAOqI,iBAA+BX,GAAiB,QAAkB,UAAU/E,GAAS,IAAG,WAAC2F,GAAY3F,EAAY4F,QAAalL,KAAKqF,oBAAoB,CAACC,UAAQtE,UAAQ,IAAIiK,EAAWE,cAAe,MAAM,IAAIpF,MAAM,8BAA+B,IAAI5D,SAAiB+I,EAAOjJ,KAAK,IAAYmB,SAAS,IAAYgI,WAAWH,EAAWE,iBAAqBE,GAAY,OAAU,IAAgBC,SAAQ,OAAYnJ,IAAgBoJ,EAAe,IAAYvJ,WAAWqJ,GAA6BG,QAAY,QAA2BP,EAAWQ,UAAUF,GAAgB,MAAM,CAACE,UAAUR,EAAWQ,UAAUC,KAAzH,GAA8HF,QAAMrJ,UAAU,IAASwJ,aAAaJ,GAAiB,IAAG,SAASP,gBAAgB9D,GAAK,OAAOmD,EAAiBhK,MAAML,KAAKI,UAAW,GAA4BuC,EAAOiJ,aAA2BtB,GAAa,QAAkB,UAAUhF,GAAS,IAAG,QAAC0E,GAAS1E,EAAQuG,YAAgBX,QAAalL,KAAKqF,oBAAoB,CAACC,UAAQtE,UAAY8K,QAAkB,QAAiB9B,IAAa7H,SAAiB+I,EAAOjJ,KAAK6J,GAAiBT,GAAY,OAAU,IAAgBC,SAAQ,OAAYnJ,IAAY,OAAO,IAASwJ,aAAa,IAAY3J,WAAWqJ,GAAc,IAAG,SAASO,YAAY7C,GAAK,OAAOuB,EAAajK,MAAML,KAAKI,UAAW,GAAwBuC,EAAO8F,uBAAqC8B,GAAuB,QAAkB,UAAUnD,GAAO,IAAG,cAACoB,GAAepB,EAAUjC,EAAW,IAAY/B,SAASoF,GAAmBtH,EAAIlB,KAAKgF,aAAahE,GAAO+K,kBAAkB5G,GAAY,OAAOnF,KAAK4I,qBAAqB,CAAC1F,UAAU,IAAYlB,WAAWd,GAAKwH,YAAYtB,EAAMsB,aAAc,IAAG,SAASD,sBAAsBO,GAAK,OAAOuB,EAAuBlK,MAAML,KAAKI,UAAW,GAAkCuC,EAAOiG,sBAAoC4B,GAAsB,QAAkB,UAAUpD,GAAO,IAAI4E,GAAyB,UAAC9I,EAAS,YAACwF,GAAatB,EAAU6E,EAAY,IAAYb,WAAW,IAASc,eAAehJ,IAAY,OAAOtB,QAAQC,QAAQ,CAACsK,QAAQ,GAAG9D,UAAU,CAAC,CAACK,EAAY0D,YAAW,OAAcH,IAAiE,OAAlDD,EAAsBtD,EAAY2D,eAAqBL,EAAsB,KAAK9I,aAAY,IAAG,SAAS0F,qBAAqBE,GAAK,OAAO0B,EAAsBnK,MAAML,KAAKI,UAAW,GAAiCuC,EAAO2J,oBAAkC7B,GAAoB,QAAkB,UAAUrD,GAAO,IAAInG,EAAMjB,MAAQ,SAACuH,EAAQ,aAACjB,EAAY,SAACvF,EAAQ,QAACyG,GAASJ,GAAS,WAACK,EAAU,WAACC,IAAY,QAAkBH,GAAcI,EAAeH,EAAQI,KAAI,SAASC,GAAO,OAAOH,EAAWI,QAAQ,UAAUD,EAAMrG,WAAY,IAAOuI,GAAS,QAAoBzD,EAAavF,GAAcwL,EAAW5E,EAAeC,KAAI,SAASC,GAAO,IAAIlC,EAAK,GAAG8B,KAAcI,IAAsD,MAAM,CAAClC,OAAK6G,OAA9C1C,mBAAmBC,EAASpE,GAAiCzC,UAAW,IAAG,GAAGqJ,EAAWlK,SAASmF,EAAQnF,OAAQ,MAAM,IAAI,KAAoB,6BAA8B,IAA8D+F,EAA1DC,QAAgBzG,QAAQ0G,IAAIiE,EAAW3E,KAAmBQ,GAAK,QAAkB,UAAUG,GAAM,IAAG,KAAC5C,EAAI,OAAC6G,GAAQjE,EAASrF,EAAU,IAAYlB,WAAWwK,GAAY3M,QAAaoB,EAAM2H,qBAAqB,CAAC1F,YAAUwF,YAAYtB,EAAMsB,cAAc,OAAO,IAAO,CAACxF,YAAUyC,QAAM9F,EAAQ,IAAU,SAAS4J,GAAK,OAAOrB,EAAK/H,MAAML,KAAKI,UAAW,KAAQ,MAAM,CAACiI,YAAW,IAAG,SAASiE,mBAAmB/C,GAAK,OAAOkB,EAAoBpK,MAAML,KAAKI,UAAW,IAAsC,OAAa6J,kBAAmB,CAAllL,CAAolL,I,iPCA3+P,SAAS1G,QAAQC,EAAEC,GAAG,IAAInD,EAAEoD,OAAOC,KAAKH,GAAG,GAAGE,OAAOE,sBAAsB,CAAC,IAAIC,EAAEH,OAAOE,sBAAsBJ,GAAGC,IAAII,EAAEA,EAAEC,QAAO,SAASL,GAAG,OAAOC,OAAOK,yBAAyBP,EAAEC,GAAGO,UAAW,KAAI1D,EAAE2D,KAAK5D,MAAMC,EAAEuD,EAAG,CAAC,OAAOvD,CAAE,CAAC,SAAS4D,cAAcV,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAErD,UAAUiC,OAAOoB,IAAI,CAAC,IAAInD,EAAE,MAAMF,UAAUqD,GAAGrD,UAAUqD,GAAG,CAAC,EAAEA,EAAE,EAAEF,QAAQG,OAAOpD,IAAG,GAAI6D,SAAQ,SAASV,IAAG,OAAgBD,EAAEC,EAAEnD,EAAEmD,GAAI,IAAGC,OAAOU,0BAA0BV,OAAOW,iBAAiBb,EAAEE,OAAOU,0BAA0B9D,IAAIiD,QAAQG,OAAOpD,IAAI6D,SAAQ,SAASV,GAAGC,OAAOY,eAAed,EAAEC,EAAEC,OAAOK,yBAAyBzD,EAAEmD,GAAI,GAAG,CAAC,OAAOD,CAAE,CAA0U,SAASiJ,iBAAiB1J,GAAI,OAAO2J,kBAAkBrM,MAAML,KAAKI,UAAW,CAAC,SAASsM,oBAAsJ,OAAlIA,mBAAkB,QAAkB,UAAU1C,GAAS,IAAI2C,GAAQ,QAAa3C,GAAS,OAAO1I,EAAOkB,MAAK,OAASmK,GAAU,KAA4BtM,MAAML,KAAKI,UAAW,CAAQ,SAASwM,6BAA6B5G,GAAK,OAAO6G,8BAA8BxM,MAAML,KAAKI,UAAW,CAAC,SAASyM,gCAAgzB,OAAhxBA,+BAA8B,QAAkB,UAAUpB,GAAW,IAAIqB,EAAoBC,GAAwB,YAACC,GAAavB,EAAcwB,GAAS,IAAAC,aAAY,CAACF,cAAYG,SAAmD,OAAzCL,EAAoBrB,EAAU0B,UAAgBL,EAAoB,GAAGM,aAAa,KAAYC,aAAa5B,EAAU2B,aAAa5L,WAAW8L,UAAsD,OAA3CP,EAAqBtB,EAAU6B,WAAiBP,EAAqB,KAAKE,EAASM,aAAY,IAAAC,gBAAeP,EAASD,IAAc,IAAIS,EAAe,EAAAtN,UAAUsN,eAAehC,EAAU,CAACwB,aAAuHS,EAAvFT,EAASU,WAAW,mBAAmBF,EAAe,CAACG,QAAQ,EAAAC,oBAA6CC,MAAM,CAACC,QAAO,IAAWpB,EAAQe,EAAIrL,OAAO,IAAI4K,EAASe,KAAKN,GAAKA,EAAI,MAAM,CAAClC,MAAMkC,EAAIM,MAAK,OAASrB,GAAU,KAAwCtM,MAAML,KAAKI,UAAW,CAAQ,SAAS6N,2BAA2BxH,EAAIS,GAAK,OAAOgH,4BAA4B7N,MAAML,KAAKI,UAAW,CAAC,SAAS8N,8BAAulB,OAAzjBA,6BAA4B,QAAkB,UAAUzC,EAAUtJ,GAAW,IAAIgM,EAAqBC,GAAyB,YAACpB,GAAavB,EAAcwB,GAAS,IAAAC,aAAYhJ,cAAcA,cAAc,CAAC,EAAEuH,GAAW,CAAC,EAAE,CAAC0B,SAAoD,OAA1CgB,EAAqB1C,EAAU0B,UAAgBgB,EAAqB,GAAGf,aAAa,KAAYC,aAAa5B,EAAU2B,aAAa5L,WAAW8L,UAAuD,OAA5Cc,EAAsB3C,EAAU6B,WAAiBc,EAAsB,MAAmG,OAAtF,EAAAjO,UAAUkO,SAAS5C,EAAU,IAASE,aAAaxJ,GAAW,CAAC6K,cAAYC,YAAqB,KAAsC5M,MAAML,KAAKI,UAAW,C,oCCA/jG,IAAIkO,EAAgB,CAACC,MAAM,IAAIC,WAAW,CAAC,IAAIlD,QAAQ,IAAIkD,WAAW,CAAC,IAAIC,SAAS,IAAID,WAAW,CAAC,IAAIE,QAAQ,IAAIF,WAAW,CAAC,I,oKCAN,SAASG,kBAAkBpH,GAAU,OAAO,IAAaoH,kBAAkBpH,EAAU,CAAQ,SAASqH,0BAAyB,SAACC,IAAW,IAAIC,EAAcD,EAASlI,MAAM,KAAoF,OAA/EmI,EAAcjI,MAAMiI,EAAcjI,MAAqBiI,EAAchJ,KAAK,IAAuB,CAAQ,SAASiJ,aAAarJ,EAAQyG,GAAS,IAAI6C,EAAS,GAAG,IAAI,IAAI5N,EAAI6N,KAASvL,OAAOwL,QAAQxJ,EAAQ2C,WAAY,GAAG4G,IAAQ9C,EAAQ,CAAC6C,EAAS5N,EAAI,KAAM,CAAE,MAAM,GAAGsE,EAAQC,QAAQqJ,GAAW,CAAQ,SAASG,eAAeC,EAAoBC,GAAsB,OAAO,qBAAiCD,EAAoBC,EAAsB,C","sources":["webpack://web/../../packages/core/src/base/ChainSigner.ts","webpack://web/../../packages/core/src/base/CoreChainApiBase.ts","webpack://web/../../packages/core/src/chains/dot/CoreChainImported.ts","webpack://web/../../packages/core/src/chains/dot/CoreChainSoftware.ts","webpack://web/../../packages/core/src/chains/dot/sdkDot/index.ts","webpack://web/../../packages/core/src/chains/dot/types.ts","webpack://web/../../packages/core/src/utils/index.ts"],"sourcesContent":["import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _createClass from\"@babel/runtime/helpers/createClass\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function(){return!!t;})();}import bufferUtils from'@onekeyhq/shared/src/utils/bufferUtils';import{N,decrypt,sign as _sign,uncompressPublicKey,verify}from\"../secret\";export var Verifier=function(){function Verifier(pub,curve){this.curve=curve;this.compressedPublicKey=Buffer.from(pub,'hex');this.uncompressedPublicKey=uncompressPublicKey(curve,this.compressedPublicKey);}var _proto=Verifier.prototype;_proto.getPubkey=function getPubkey(compressed){return Promise.resolve(compressed?this.compressedPublicKey:this.uncompressedPublicKey);};_proto.getPubkeyHex=function(){var _getPubkeyHex=_asyncToGenerator(function*(compressed){return bufferUtils.bytesToHex(yield this.getPubkey(compressed));});function getPubkeyHex(_x){return _getPubkeyHex.apply(this,arguments);}return getPubkeyHex;}();_proto.verify=function verify(){return Promise.resolve(Buffer.from([]));};_proto.verifySignature=function verifySignature({publicKey,digest,signature}){var p=bufferUtils.toBuffer(publicKey);var d=bufferUtils.toBuffer(digest);var s=bufferUtils.toBuffer(signature);var{curve}=this;var result=verify(curve,p,d,s);return Promise.resolve(result);};return _createClass(Verifier);}();export var ChainSigner=function(_Verifier){_inherits(ChainSigner,_Verifier);var _super=_createSuper(ChainSigner);function ChainSigner(encryptedPrivateKey,password,curve){var _this;var pub=N(curve,{key:encryptedPrivateKey,chainCode:Buffer.alloc(32)},password).key.toString('hex');_this=_super.call(this,pub,curve);_this.encryptedPrivateKey=encryptedPrivateKey;_this.password=password;_this.curve=curve;return _this;}var _proto2=ChainSigner.prototype;_proto2.getPrvkey=function getPrvkey(){return Promise.resolve(decrypt(this.password,this.encryptedPrivateKey));};_proto2.getPrvkeyHex=function(){var _getPrvkeyHex=_asyncToGenerator(function*(){return bufferUtils.bytesToHex(yield this.getPrvkey());});function getPrvkeyHex(){return _getPrvkeyHex.apply(this,arguments);}return getPrvkeyHex;}();_proto2.sign=function sign(digest){var signature=_sign(this.curve,this.encryptedPrivateKey,digest,this.password);if(this.curve==='secp256k1'){return Promise.resolve([signature.slice(0,-1),signature[signature.length-1]]);}return Promise.resolve([signature,0]);};return _createClass(ChainSigner);}(Verifier);","import _merge from\"lodash/merge\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _createClass from\"@babel/runtime/helpers/createClass\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{NotImplemented,OneKeyInternalError}from'@onekeyhq/shared/src/errors';import bufferUtils from'@onekeyhq/shared/src/utils/bufferUtils';import{batchGetPrivateKeys,batchGetPublicKeysAsync,decrypt,decryptImportedCredential,ed25519,encrypt,nistp256,secp256k1}from\"../secret\";import{ECoreCredentialType}from\"../types\";import{slicePathTemplate}from\"../utils\";import{ChainSigner}from\"./ChainSigner\";export var CoreChainApiBase=function(){function CoreChainApiBase(){}var _proto=CoreChainApiBase.prototype;_proto.baseGetCurve=function baseGetCurve(curveName){switch(curveName){case'ed25519':return ed25519;case'secp256k1':return secp256k1;case'nistp256':return nistp256;default:throw new OneKeyInternalError('Unsupported curve');}};_proto.baseCreateSigner=function(){var _baseCreateSigner=_asyncToGenerator(function*({curve,privateKey,password}){if(typeof password==='undefined'){throw new OneKeyInternalError('Software signing requires a password.');}var privateKeyBuffer=bufferUtils.toBuffer(privateKey);return Promise.resolve(new ChainSigner(privateKeyBuffer,password,curve));});function baseCreateSigner(_x){return _baseCreateSigner.apply(this,arguments);}return baseCreateSigner;}();_proto.baseGetSingleSigner=function(){var _baseGetSingleSigner=_asyncToGenerator(function*({payload,curve}){var privateKeys=yield this.getPrivateKeys(payload);var accountPath=payload.account.path;var privateKey=privateKeys[accountPath];var firstRelPath=payload?.relPaths?.[0];if(!privateKey&&firstRelPath){var fullPath=[accountPath,firstRelPath].join('/');privateKey=privateKeys[fullPath];}if(!privateKey){throw new Error(`No private key found: ${accountPath}`);}return this.baseCreateSigner({curve,privateKey,password:payload.password});});function baseGetSingleSigner(_x2){return _baseGetSingleSigner.apply(this,arguments);}return baseGetSingleSigner;}();_proto.baseGetPrivateKeys=function(){var _baseGetPrivateKeys=_asyncToGenerator(function*({payload,curve}){var{credentials,account,password,relPaths}=payload;var privateKeys={};if(credentials.hd&&credentials.imported){throw new OneKeyInternalError('getPrivateKeys ERROR: hd and imported credentials can NOT both set.');}if(credentials.hd){privateKeys=yield this.baseGetPrivateKeysHd({curve,account,hdCredential:credentials.hd,password,relPaths});}if(credentials.imported){var{privateKey:p}=decryptImportedCredential({password,credential:credentials.imported});var encryptPrivateKey=bufferUtils.bytesToHex(encrypt(password,p));privateKeys[account.path]=encryptPrivateKey;privateKeys['']=encryptPrivateKey;}if(!Object.keys(privateKeys).length){throw new Error('No private keys found');}return privateKeys;});function baseGetPrivateKeys(_x3){return _baseGetPrivateKeys.apply(this,arguments);}return baseGetPrivateKeys;}();_proto.baseGetPrivateKeysHd=function(){var _baseGetPrivateKeysHd=_asyncToGenerator(function*({curve,password,account,relPaths,hdCredential}){var{path}=account;var pathComponents=path.split('/');var usedRelativePaths=relPaths||[pathComponents.pop()];var basePath=pathComponents.join('/');if(usedRelativePaths.length===0){throw new OneKeyInternalError('getPrivateKeysHd ERROR: relPaths is empty.');}var keys=batchGetPrivateKeys(curve,hdCredential,password,basePath,usedRelativePaths);var map=keys.reduce(function(ret,key){var result=_objectSpread(_objectSpread({},ret),{},{[key.path]:bufferUtils.bytesToHex(key.extendedKey.key)});return result;},{});return map;});function baseGetPrivateKeysHd(_x4){return _baseGetPrivateKeysHd.apply(this,arguments);}return baseGetPrivateKeysHd;}();_proto.baseGetAddressesFromHd=function(){var _baseGetAddressesFromHd=_asyncToGenerator(function*(query,options){var _this=this;var{curve,generateFrom}=options;var{template,hdCredential,password,indexes}=query;var{pathPrefix,pathSuffix}=slicePathTemplate(template);var indexFormatted=indexes.map(function(index){return pathSuffix.replace('{index}',index.toString());});var isPrivateKeyMode=generateFrom==='privateKey';var pubkeyInfos=[];var pvtkeyInfos=[];if(isPrivateKeyMode){pvtkeyInfos=batchGetPrivateKeys(curve,hdCredential,password,pathPrefix,indexFormatted);}else{pubkeyInfos=yield batchGetPublicKeysAsync({curveName:curve,hdCredential,password,prefix:pathPrefix,relPaths:indexFormatted});}var infos=isPrivateKeyMode?pvtkeyInfos:pubkeyInfos;if(infos.length!==indexes.length){throw new OneKeyInternalError('Unable to get publick key.');}var addresses=yield Promise.all(infos.map(function(){var _ref=_asyncToGenerator(function*(info){var{path,extendedKey:{key}}=info;var publicKey;var result;if(isPrivateKeyMode){var privateKeyRaw=bufferUtils.bytesToHex(decrypt(password,key));result=yield _this.getAddressFromPrivate({networkInfo:query.networkInfo,privateKeyRaw,privateKeyInfo:info});}else{publicKey=key.toString('hex');result=yield _this.getAddressFromPublic({networkInfo:query.networkInfo,publicKey,publicKeyInfo:info});}return _merge({publicKey,path},result);});return function(_x7){return _ref.apply(this,arguments);};}()));return{addresses};});function baseGetAddressesFromHd(_x5,_x6){return _baseGetAddressesFromHd.apply(this,arguments);}return baseGetAddressesFromHd;}();_proto.baseGetCredentialsType=function baseGetCredentialsType({credentials}){if(credentials.hd&&credentials.imported){throw new OneKeyInternalError('getCredentialsType ERROR: hd and imported credentials can NOT both set.');}if(credentials.hd){return ECoreCredentialType.hd;}if(credentials.imported){return ECoreCredentialType.imported;}throw new OneKeyInternalError('getCredentialsType ERROR: no credentials found');};_proto.baseGetDefaultPrivateKey=function(){var _baseGetDefaultPrivateKey=_asyncToGenerator(function*(params){var privateKeysMap=yield this.getPrivateKeys(params);var[encryptedPrivateKey]=Object.values(privateKeysMap);return{privateKeyRaw:encryptedPrivateKey};});function baseGetDefaultPrivateKey(_x8){return _baseGetDefaultPrivateKey.apply(this,arguments);}return baseGetDefaultPrivateKey;}();_proto.validateXpub=function(){var _validateXpub=_asyncToGenerator(function*(params){throw new NotImplemented();});function validateXpub(_x9){return _validateXpub.apply(this,arguments);}return validateXpub;}();_proto.validateXprvt=function(){var _validateXprvt=_asyncToGenerator(function*(params){throw new NotImplemented();});function validateXprvt(_x10){return _validateXprvt.apply(this,arguments);}return validateXprvt;}();return _createClass(CoreChainApiBase);}();","import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function(){return!!t;})();}import CoreChainSoftware from\"./CoreChainSoftware\";var CoreChainImported=function(_CoreChainSoftware){_inherits(CoreChainImported,_CoreChainSoftware);var _super=_createSuper(CoreChainImported);function CoreChainImported(){return _super.apply(this,arguments);}return _createClass(CoreChainImported);}(CoreChainSoftware);export{CoreChainImported as default};","import _merge from\"lodash/merge\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function(){return!!t;})();}import{bufferToU8a,u8aConcat}from'@polkadot/util';import{encodeAddress,hdLedger}from'@polkadot/util-crypto';import{Expect24WordsMnemonicError,OneKeyInternalError}from'@onekeyhq/shared/src/errors';import bufferUtils from'@onekeyhq/shared/src/utils/bufferUtils';import hexUtils from'@onekeyhq/shared/src/utils/hexUtils';import{CoreChainApiBase}from\"../../base/CoreChainApiBase\";import{decrypt,decryptImportedCredential,encrypt,mnemonicFromEntropy}from\"../../secret\";import{ECoreApiExportedSecretKeyType}from\"../../types\";import{slicePathTemplate}from\"../../utils\";import{serializeMessage,serializeSignedTransaction}from\"./sdkDot\";import{DOT_TYPE_PREFIX}from\"./types\";var curve='ed25519';var derivationHdLedger=function(mnemonic,path){try{return hdLedger(mnemonic,path);}catch(e){var{message}=e;if(message==='Expected a mnemonic with 24 words (or 25 including a password)'){throw new Expect24WordsMnemonicError();}throw e;}};var CoreChainSoftware=function(_CoreChainApiBase){_inherits(CoreChainSoftware,_CoreChainApiBase);var _super=_createSuper(CoreChainSoftware);function CoreChainSoftware(){return _super.apply(this,arguments);}var _proto=CoreChainSoftware.prototype;_proto.getExportedSecretKey=function(){var _getExportedSecretKey=_asyncToGenerator(function*(query){var{password,keyType,credentials}=query;var{privateKeyRaw}=yield this.baseGetDefaultPrivateKey(query);if(!privateKeyRaw){throw new Error('privateKeyRaw is required');}if(keyType===ECoreApiExportedSecretKeyType.privateKey){return`0x${decrypt(password,privateKeyRaw).toString('hex')}`;}throw new Error(`SecretKey type not support: ${keyType}`);});function getExportedSecretKey(_x){return _getExportedSecretKey.apply(this,arguments);}return getExportedSecretKey;}();_proto.baseGetPrivateKeys=function(){var _baseGetPrivateKeys=_asyncToGenerator(function*({payload}){var{credentials,account,password,relPaths}=payload;var privateKeys={};if(credentials.hd){var pathComponents=account.path.split('/');var usedRelativePaths=relPaths||[pathComponents.pop()];var basePath=pathComponents.join('/');var mnemonic=mnemonicFromEntropy(credentials.hd,password);var keys=usedRelativePaths.map(function(relPath){var path=`${basePath}/${relPath}`;var keyPair=derivationHdLedger(mnemonic,path);return{path,key:encrypt(password,Buffer.from(keyPair.secretKey.slice(0,32)))};});privateKeys=keys.reduce(function(ret,key){return _objectSpread(_objectSpread({},ret),{},{[key.path]:bufferUtils.bytesToHex(key.key)});},{});}if(credentials.imported){var{privateKey:p}=decryptImportedCredential({password,credential:credentials.imported});var encryptPrivateKey=bufferUtils.bytesToHex(encrypt(password,p));privateKeys[account.path]=encryptPrivateKey;privateKeys['']=encryptPrivateKey;}if(!Object.keys(privateKeys).length){throw new Error('No private keys found');}return privateKeys;});function baseGetPrivateKeys(_x2){return _baseGetPrivateKeys.apply(this,arguments);}return baseGetPrivateKeys;}();_proto.getPrivateKeys=function(){var _getPrivateKeys=_asyncToGenerator(function*(payload){return this.baseGetPrivateKeys({payload});});function getPrivateKeys(_x3){return _getPrivateKeys.apply(this,arguments);}return getPrivateKeys;}();_proto.signTransaction=function(){var _signTransaction=_asyncToGenerator(function*(payload){var{unsignedTx}=payload;var signer=yield this.baseGetSingleSigner({payload,curve});if(!unsignedTx.rawTxUnsigned){throw new Error('rawTxUnsigned is undefined');}var[signature]=yield signer.sign(bufferUtils.toBuffer(bufferUtils.hexToBytes(unsignedTx.rawTxUnsigned)));var txSignature=u8aConcat(DOT_TYPE_PREFIX.ed25519,bufferToU8a(signature));var txSignatureHex=bufferUtils.bytesToHex(txSignature);var txid='';var rawTx=yield serializeSignedTransaction(unsignedTx.encodedTx,txSignatureHex);return{encodedTx:unsignedTx.encodedTx,txid,rawTx,signature:hexUtils.addHexPrefix(txSignatureHex)};});function signTransaction(_x4){return _signTransaction.apply(this,arguments);}return signTransaction;}();_proto.signMessage=function(){var _signMessage=_asyncToGenerator(function*(payload){var{message}=payload.unsignedMsg;var signer=yield this.baseGetSingleSigner({payload,curve});var wrapMessage=yield serializeMessage(message);var[signature]=yield signer.sign(wrapMessage);var txSignature=u8aConcat(DOT_TYPE_PREFIX.ed25519,bufferToU8a(signature));return hexUtils.addHexPrefix(bufferUtils.bytesToHex(txSignature));});function signMessage(_x5){return _signMessage.apply(this,arguments);}return signMessage;}();_proto.getAddressFromPrivate=function(){var _getAddressFromPrivate=_asyncToGenerator(function*(query){var{privateKeyRaw}=query;var privateKey=bufferUtils.toBuffer(privateKeyRaw);var pub=this.baseGetCurve(curve).publicFromPrivate(privateKey);return this.getAddressFromPublic({publicKey:bufferUtils.bytesToHex(pub),networkInfo:query.networkInfo});});function getAddressFromPrivate(_x6){return _getAddressFromPrivate.apply(this,arguments);}return getAddressFromPrivate;}();_proto.getAddressFromPublic=function(){var _getAddressFromPublic=_asyncToGenerator(function*(query){var _networkInfo$addressP;var{publicKey,networkInfo}=query;var pubKeyBytes=bufferUtils.hexToBytes(hexUtils.stripHexPrefix(publicKey));return Promise.resolve({address:'',addresses:{[networkInfo.networkId]:encodeAddress(pubKeyBytes,+((_networkInfo$addressP=networkInfo.addressPrefix)!=null?_networkInfo$addressP:0))},publicKey});});function getAddressFromPublic(_x7){return _getAddressFromPublic.apply(this,arguments);}return getAddressFromPublic;}();_proto.getAddressesFromHd=function(){var _getAddressesFromHd=_asyncToGenerator(function*(query){var _this=this;var{template,hdCredential,password,indexes}=query;var{pathPrefix,pathSuffix}=slicePathTemplate(template);var indexFormatted=indexes.map(function(index){return pathSuffix.replace('{index}',index.toString());});var mnemonic=mnemonicFromEntropy(hdCredential,password);var publicKeys=indexFormatted.map(function(index){var path=`${pathPrefix}/${index}`;var keyPair=derivationHdLedger(mnemonic,path);return{path,pubkey:keyPair.publicKey};});if(publicKeys.length!==indexes.length){throw new OneKeyInternalError('Unable to get public key.');}var addresses=yield Promise.all(publicKeys.map(function(){var _ref=_asyncToGenerator(function*(info){var{path,pubkey}=info;var publicKey=bufferUtils.bytesToHex(pubkey);var result=yield _this.getAddressFromPublic({publicKey,networkInfo:query.networkInfo});return _merge({publicKey,path},result);});return function(_x9){return _ref.apply(this,arguments);};}()));return{addresses};});function getAddressesFromHd(_x8){return _getAddressesFromHd.apply(this,arguments);}return getAddressesFromHd;}();return _createClass(CoreChainSoftware);}(CoreChainApiBase);export{CoreChainSoftware as default};","import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{EXTRINSIC_VERSION}from'@polkadot/types/extrinsic/v4/Extrinsic';import{u8aToU8a,u8aWrapBytes}from'@polkadot/util';import{construct,createMetadata,getRegistry}from'@substrate/txwrapper-polkadot';import hexUtils from'@onekeyhq/shared/src/utils/hexUtils';import numberUtils from'@onekeyhq/shared/src/utils/numberUtils';export function serializeMessage(_x){return _serializeMessage.apply(this,arguments);}function _serializeMessage(){_serializeMessage=_asyncToGenerator(function*(message){var encoded=u8aWrapBytes(message);return Buffer.from(u8aToU8a(encoded));});return _serializeMessage.apply(this,arguments);}export function serializeUnsignedTransaction(_x2){return _serializeUnsignedTransaction.apply(this,arguments);}function _serializeUnsignedTransaction(){_serializeUnsignedTransaction=_asyncToGenerator(function*(encodedTx){var _encodedTx$specName,_encodedTx$chainName;var{metadataRpc}=encodedTx;var registry=getRegistry({metadataRpc,specName:(_encodedTx$specName=encodedTx.specName)!=null?_encodedTx$specName:'',specVersion:+numberUtils.hexToDecimal(encodedTx.specVersion).toString(),chainName:(_encodedTx$chainName=encodedTx.chainName)!=null?_encodedTx$chainName:''});registry.setMetadata(createMetadata(registry,metadataRpc));var signingPayload=construct.signingPayload(encodedTx,{registry});var extrinsicPayload=registry.createType('ExtrinsicPayload',signingPayload,{version:EXTRINSIC_VERSION});var u8a=extrinsicPayload.toU8a({method:true});var encoded=u8a.length>256?registry.hash(u8a):u8a;return{rawTx:u8a,hash:u8aToU8a(encoded)};});return _serializeUnsignedTransaction.apply(this,arguments);}export function serializeSignedTransaction(_x3,_x4){return _serializeSignedTransaction.apply(this,arguments);}function _serializeSignedTransaction(){_serializeSignedTransaction=_asyncToGenerator(function*(encodedTx,signature){var _encodedTx$specName2,_encodedTx$chainName2;var{metadataRpc}=encodedTx;var registry=getRegistry(_objectSpread(_objectSpread({},encodedTx),{},{specName:(_encodedTx$specName2=encodedTx.specName)!=null?_encodedTx$specName2:'',specVersion:+numberUtils.hexToDecimal(encodedTx.specVersion).toString(),chainName:(_encodedTx$chainName2=encodedTx.chainName)!=null?_encodedTx$chainName2:''}));var tx=construct.signedTx(encodedTx,hexUtils.addHexPrefix(signature),{metadataRpc,registry});return tx;});return _serializeSignedTransaction.apply(this,arguments);}","export var DOT_TYPE_PREFIX={ecdsa:new Uint8Array([2]),ed25519:new Uint8Array([0]),ethereum:new Uint8Array([2]),sr25519:new Uint8Array([1])};","import coinselectUtils from'@onekeyfe/coinselect/utils';import accountUtils from'@onekeyhq/shared/src/utils/accountUtils';export function slicePathTemplate(template){return accountUtils.slicePathTemplate(template);}export function getUtxoAccountPrefixPath({fullPath}){var pathComponent=fullPath.split('/');pathComponent.pop();pathComponent.pop();var prefixPath=pathComponent.join('/');return prefixPath;}export function getBIP44Path(account,address){var realPath='';for(var[key,value]of Object.entries(account.addresses)){if(value===address){realPath=key;break;}}return`${account.path}/${realPath}`;}export function estimateTxSize(inputsForCoinSelect,outputsForCoinSelect){return coinselectUtils.transactionBytes(inputsForCoinSelect,outputsForCoinSelect);}"],"names":["_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","result","Super","NewTarget","this","constructor","Reflect","construct","arguments","apply","t","Boolean","prototype","valueOf","call","ChainSigner","_Verifier","_super","encryptedPrivateKey","password","curve","_this","pub","N","key","chainCode","Buffer","alloc","toString","_getPrvkeyHex","_proto2","getPrvkey","Promise","resolve","getPrvkeyHex","bufferUtils","bytesToHex","sign","digest","signature","slice","length","Verifier","compressedPublicKey","from","uncompressedPublicKey","_getPubkeyHex","_proto","getPubkey","compressed","getPubkeyHex","_x","verify","verifySignature","publicKey","p","toBuffer","d","s","ownKeys","e","r","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","CoreChainApiBase","_baseCreateSigner","_baseGetSingleSigner","_baseGetPrivateKeys","_baseGetPrivateKeysHd","_baseGetAddressesFromHd","_baseGetDefaultPrivateKey","_validateXpub","_validateXprvt","baseGetCurve","curveName","baseCreateSigner","privateKey","privateKeyBuffer","baseGetSingleSigner","payload","privateKeys","getPrivateKeys","accountPath","account","path","firstRelPath","relPaths","join","Error","_x2","baseGetPrivateKeys","credentials","hd","imported","baseGetPrivateKeysHd","hdCredential","credential","encryptPrivateKey","_x3","pathComponents","split","usedRelativePaths","pop","basePath","reduce","ret","extendedKey","_x4","baseGetAddressesFromHd","query","options","generateFrom","template","indexes","pathPrefix","pathSuffix","indexFormatted","map","index","replace","isPrivateKeyMode","pubkeyInfos","pvtkeyInfos","prefix","infos","_ref","addresses","all","info","privateKeyRaw","getAddressFromPrivate","networkInfo","privateKeyInfo","getAddressFromPublic","publicKeyInfo","_x7","_x5","_x6","baseGetCredentialsType","ECoreCredentialType","baseGetDefaultPrivateKey","params","privateKeysMap","values","_x8","validateXpub","_x9","validateXprvt","_x10","CoreChainImported","_CoreChainSoftware","derivationHdLedger","mnemonic","message","CoreChainSoftware","_CoreChainApiBase","_getExportedSecretKey","_getPrivateKeys","_signTransaction","_signMessage","_getAddressFromPrivate","_getAddressFromPublic","_getAddressesFromHd","getExportedSecretKey","keyType","ECoreApiExportedSecretKeyType","relPath","keyPair","secretKey","signTransaction","unsignedTx","signer","rawTxUnsigned","hexToBytes","txSignature","ed25519","txSignatureHex","rawTx","encodedTx","txid","addHexPrefix","signMessage","unsignedMsg","wrapMessage","publicFromPrivate","_networkInfo$addressP","pubKeyBytes","stripHexPrefix","address","networkId","addressPrefix","getAddressesFromHd","publicKeys","pubkey","serializeMessage","_serializeMessage","encoded","serializeUnsignedTransaction","_serializeUnsignedTransaction","_encodedTx$specName","_encodedTx$chainName","metadataRpc","registry","getRegistry","specName","specVersion","hexToDecimal","chainName","setMetadata","createMetadata","signingPayload","u8a","createType","version","EXTRINSIC_VERSION","toU8a","method","hash","serializeSignedTransaction","_serializeSignedTransaction","_encodedTx$specName2","_encodedTx$chainName2","signedTx","DOT_TYPE_PREFIX","ecdsa","Uint8Array","ethereum","sr25519","slicePathTemplate","getUtxoAccountPrefixPath","fullPath","pathComponent","getBIP44Path","realPath","value","entries","estimateTxSize","inputsForCoinSelect","outputsForCoinSelect"],"sourceRoot":""}