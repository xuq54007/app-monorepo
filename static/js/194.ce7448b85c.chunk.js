!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f8bfe0e1-ffc2-4725-8a28-7dddd7de1fc8",e._sentryDebugIdIdentifier="sentry-dbid-f8bfe0e1-ffc2-4725-8a28-7dddd7de1fc8")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[194],{183259:(e,t,r)=>{r.d(t,{U:()=>a});var o=r(514041),n=r(17617),s=r(490343),i=r(831085);var a=(0,o.memo)((function BasicDiscoveryIcon({uri:e,size:t,borderRadius:r="$2"}){return e?(0,i.jsxs)(s.Image,{size:t,borderRadius:r,borderWidth:n.A.hairlineWidth,borderColor:"$borderSubdued",borderCurve:"continuous","data-sentry-element":"Image","data-sentry-component":"BasicDiscoveryIcon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/DiscoveryIcon.tsx",children:[(0,i.jsx)(s.Image.Source,{source:{uri:decodeURIComponent(e)},"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/DiscoveryIcon.tsx"}),(0,i.jsx)(s.Image.Fallback,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/DiscoveryIcon.tsx",children:(0,i.jsx)(s.Stack,{bg:"$bgStrong",ai:"center",jc:"center",width:"100%",height:"100%","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/DiscoveryIcon.tsx",children:(0,i.jsx)(s.Icon,{name:"GlobusOutline",width:"100%",height:"100%","data-sentry-element":"Icon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/DiscoveryIcon.tsx"})})}),(0,i.jsx)(s.Image.Loading,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/DiscoveryIcon.tsx",children:(0,i.jsx)(s.Skeleton,{width:"100%",height:"100%","data-sentry-element":"Skeleton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/components/DiscoveryIcon.tsx"})})]}):(0,i.jsx)(s.Skeleton,{width:t,height:t,radius:"round"})}))},800194:(e,t,r)=>{r.r(t),r.d(t,{default:()=>x});var o=r(324586),n=r(503668),s=r.n(n),i=r(586330),a=r(514041),c=r(908867),d=r(490343),l=r(643087),p=r(791088),u=r(498356),m=r(911998),y=r(657412),f=r(334439),g=r(296827),h=r(899035),w=r(567807),v=r(183259),b=r(564452),k=r(831085);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const x=(0,b.k)((function HistoryListModal(){var[e,t]=(0,a.useState)(!1),r=(0,c.A)(),o=(0,u.A)(),{removeBrowserHistory:n,removeAllBrowserHistory:b}=(0,y.cS)().current,{gtMd:x}=(0,d.useMedia)(),{handleOpenWebSite:D}=(0,y.yZ)().current,[j,I]=(0,a.useState)(1),{result:S,run:_}=(0,m.yk)((0,i.A)((function*(){var e=function groupDataByDate(e){var t=e.reduce((function(e,t){var r=(0,w.wI)(new Date(t.createdAt));return e[r]?e[r].push(t):e[r]=[t],e}),{});return Object.keys(t).map((function(e){return{title:e,data:t[e]}}))}(yield l.A.serviceDiscovery.fetchHistoryData(j));return e})),[j],{watchLoading:!0}),O=(0,a.useRef)(!1),E=(0,a.useCallback)((0,i.A)((function*(){yield b(),O.current=!0,setTimeout((function(){_()}),200)})),[_,b]);(0,a.useEffect)((function(){O.current&&0===S?.length&&(o.pop(),O.current=!1)}),[o,S?.length]);var M=(0,a.useCallback)((function(){return(0,k.jsxs)(d.XStack,{children:[e?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d.IconButton,{variant:"tertiary",icon:"BroomOutline",title:r.formatMessage({id:f.ETranslations.explore_remove_all}),onPress:function(){d.Dialog.show({title:r.formatMessage({id:f.ETranslations.explore_clear_history_prompt}),description:r.formatMessage({id:f.ETranslations.explore_clear_history_message}),onConfirm:function(){return E()},onConfirmText:r.formatMessage({id:f.ETranslations.explore_remove_all})})}}),(0,k.jsx)(d.Divider,{vertical:!0,mx:"$3"})]}):null,(0,k.jsx)(d.Button,{variant:"tertiary",size:"medium",onPress:function(){return t((function(e){return!e}))},children:e?r.formatMessage({id:f.ETranslations.global_done}):r.formatMessage({id:f.ETranslations.global_edit})})]})}),[E,e,r]),P=(0,a.useCallback)((function(e){return e.id}),[]);return(0,k.jsxs)(d.Page,{scrollEnabled:!0,"data-sentry-element":"Page","data-sentry-component":"HistoryListModal","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/HistoryListModal/index.tsx",children:[(0,k.jsx)(d.Page.Header,{title:r.formatMessage({id:f.ETranslations.explore_history}),headerRight:M,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/HistoryListModal/index.tsx"}),(0,k.jsx)(d.Page.Body,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/HistoryListModal/index.tsx",children:(0,k.jsx)(d.SectionList,{testID:"History-SectionList",height:"100%",ListEmptyComponent:(0,k.jsx)(d.Empty,{py:"$32",my:"$4",icon:"ClockTimeHistoryOutline",title:r.formatMessage({id:f.ETranslations.explore_no_history})}),estimatedItemSize:"$16",extraData:e,sections:s()(S)?[]:S,renderSectionHeader:function({section:{title:e}}){return(0,k.jsx)(d.SectionList.SectionHeader,{title:e})},keyExtractor:P,renderItem:function({item:t}){return(0,k.jsx)(p.c,_objectSpread(_objectSpread({renderAvatar:(0,k.jsx)(v.U,{uri:t.logo,size:"$10"}),title:t.title,titleProps:{numberOfLines:1},subtitle:t.url,subtitleProps:{numberOfLines:1},testID:`search-modal-${t.url.toLowerCase()}`},!e&&{onPress:function(){D({switchToMultiTabBrowser:x,navigation:o,webSite:{url:t.url,title:t.title}}),g.U.discovery.dapp.enterDapp({dappDomain:t.url,dappName:t.title,enterMethod:h.z.history})}}),{},{children:e?(0,k.jsx)(p.c.IconButton,{icon:"DeleteOutline",onPress:function(){n(t.id),O.current=!0,setTimeout((function(){_()}),200),d.Toast.success({title:r.formatMessage({id:f.ETranslations.explore_removed_success})})}}):null}),t.id)},onEndReached:function(){I((function(e){return e+1}))},"data-sentry-element":"SectionList","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Discovery/pages/HistoryListModal/index.tsx"})})]})}))}}]);
//# sourceMappingURL=194.ce7448b85c.chunk.js.map