!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="87156d5c-4cfb-48ce-abd1-1c3731bbf955",e._sentryDebugIdIdentifier="sentry-dbid-87156d5c-4cfb-48ce-abd1-1c3731bbf955")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024121652)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[29404],{940916:(e,t,r)=>{r.d(t,{G:()=>A});var n=r(482451),i=r.n(n),o=r(324586),a=r(586330),s=r(230414),c=r(507140),u=r(606777),d=r(401349),l=r(404727),p=r(180556),f=r(929296),h=r(195309),y=r(972715),g=r(901048).Buffer;function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,y.A)(e);if(t){var i=(0,y.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,h.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var w=function(e){(0,f.A)(ChainSigner,e);var t=_createSuper(ChainSigner);function ChainSigner(e,r,n){var i,o=(0,d.N)(n,{key:e,chainCode:g.alloc(32)},r).key.toString("hex");return(i=t.call(this,o,n)).encryptedPrivateKey=e,i.password=r,i.curve=n,i}var r,n=ChainSigner.prototype;return n.getPrvkey=function getPrvkey(){return Promise.resolve((0,d.Yc)(this.password,this.encryptedPrivateKey))},n.getPrvkeyHex=(r=(0,a.A)((function*(){return u.A.bytesToHex(yield this.getPrvkey())})),function getPrvkeyHex(){return r.apply(this,arguments)}),n.sign=function sign(e){var t=(0,d._S)(this.curve,this.encryptedPrivateKey,e,this.password);return"secp256k1"===this.curve?Promise.resolve([t.slice(0,-1),t[t.length-1]]):Promise.resolve([t,0])},(0,s.A)(ChainSigner)}(function(){function Verifier(e,t){this.curve=t,this.compressedPublicKey=g.from(e,"hex"),this.uncompressedPublicKey=(0,d.sA)(t,this.compressedPublicKey)}var e,t=Verifier.prototype;return t.getPubkey=function getPubkey(e){return Promise.resolve(e?this.compressedPublicKey:this.uncompressedPublicKey)},t.getPubkeyHex=(e=(0,a.A)((function*(e){return u.A.bytesToHex(yield this.getPubkey(e))})),function getPubkeyHex(t){return e.apply(this,arguments)}),t.verify=function verify(){return Promise.resolve(g.from([]))},t.verifySignature=function verifySignature({publicKey:e,digest:t,signature:r}){var n=u.A.toBuffer(e),i=u.A.toBuffer(t),o=u.A.toBuffer(r),{curve:a}=this,s=(0,d.MX)(a,n,i,o);return Promise.resolve(s)},(0,s.A)(Verifier)}());function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=function(){function CoreChainApiBase(){}var e,t,r,n,o,f,h,y,g=CoreChainApiBase.prototype;return g.baseGetCurve=function baseGetCurve(e){switch(e){case"ed25519":return d.ev;case"secp256k1":return d.bI;case"nistp256":return d.OX;default:throw new c.He("Unsupported curve")}},g.baseCreateSigner=(e=(0,a.A)((function*({curve:e,privateKey:t,password:r}){if(void 0===r)throw new c.He("Software signing requires a password.");var n=u.A.toBuffer(t);return Promise.resolve(new w(n,r,e))})),function baseCreateSigner(t){return e.apply(this,arguments)}),g.baseGetSingleSigner=(t=(0,a.A)((function*({payload:e,curve:t}){var r=yield this.getPrivateKeys(e),n=e.account.path,i=r[n],o=e?.relPaths?.[0];if(!i&&o&&(i=r[[n,o].join("/")]),!i)throw new Error(`No private key found: ${n}`);return this.baseCreateSigner({curve:t,privateKey:i,password:e.password})})),function baseGetSingleSigner(e){return t.apply(this,arguments)}),g.baseGetPrivateKeys=(r=(0,a.A)((function*({payload:e,curve:t}){var{credentials:r,account:n,password:i,relPaths:o}=e,a={};if(r.hd&&r.imported)throw new c.He("getPrivateKeys ERROR: hd and imported credentials can NOT both set.");if(r.hd&&(a=yield this.baseGetPrivateKeysHd({curve:t,account:n,hdCredential:r.hd,password:i,relPaths:o})),r.imported){var{privateKey:s}=(0,d.VV)({password:i,credential:r.imported}),l=u.A.bytesToHex((0,d.w)(i,s));a[n.path]=l,a[""]=l}if(!Object.keys(a).length)throw new Error("No private keys found");return a})),function baseGetPrivateKeys(e){return r.apply(this,arguments)}),g.baseGetPrivateKeysHd=(n=(0,a.A)((function*({curve:e,password:t,account:r,relPaths:n,hdCredential:i}){var{path:o}=r,a=o.split("/"),s=n||[a.pop()],l=a.join("/");if(0===s.length)throw new c.He("getPrivateKeysHd ERROR: relPaths is empty.");return(0,d.Wu)(e,i,t,l,s).reduce((function(e,t){return _objectSpread(_objectSpread({},e),{},{[t.path]:u.A.bytesToHex(t.extendedKey.key)})}),{})})),function baseGetPrivateKeysHd(e){return n.apply(this,arguments)}),g.baseGetAddressesFromHd=(o=(0,a.A)((function*(e,t){var r=this,{curve:n,generateFrom:o}=t,{template:s,hdCredential:l,password:f,indexes:h}=e,{pathPrefix:y,pathSuffix:g}=(0,p.Ah)(s),w=h.map((function(e){return g.replace("{index}",e.toString())})),A="privateKey"===o,v=[],m=[];A?m=(0,d.Wu)(n,l,f,y,w):v=yield(0,d.MJ)({curveName:n,hdCredential:l,password:f,prefix:y,relPaths:w});var b=A?m:v;if(b.length!==h.length)throw new c.He("Unable to get publick key.");var k,T=yield Promise.all(b.map((k=(0,a.A)((function*(t){var n,o,{path:a,extendedKey:{key:s}}=t;if(A){var c=u.A.bytesToHex((0,d.Yc)(f,s));o=yield r.getAddressFromPrivate({networkInfo:e.networkInfo,privateKeyRaw:c,privateKeyInfo:t})}else n=s.toString("hex"),o=yield r.getAddressFromPublic({networkInfo:e.networkInfo,publicKey:n,publicKeyInfo:t});return i()({publicKey:n,path:a},o)})),function(e){return k.apply(this,arguments)})));return{addresses:T}})),function baseGetAddressesFromHd(e,t){return o.apply(this,arguments)}),g.baseGetCredentialsType=function baseGetCredentialsType({credentials:e}){if(e.hd&&e.imported)throw new c.He("getCredentialsType ERROR: hd and imported credentials can NOT both set.");if(e.hd)return l.ECoreCredentialType.hd;if(e.imported)return l.ECoreCredentialType.imported;throw new c.He("getCredentialsType ERROR: no credentials found")},g.baseGetDefaultPrivateKey=(f=(0,a.A)((function*(e){var t=yield this.getPrivateKeys(e),[r]=Object.values(t);return{privateKeyRaw:r}})),function baseGetDefaultPrivateKey(e){return f.apply(this,arguments)}),g.validateXpub=(h=(0,a.A)((function*(e){throw new c.MS})),function validateXpub(e){return h.apply(this,arguments)}),g.validateXprvt=(y=(0,a.A)((function*(e){throw new c.MS})),function validateXprvt(e){return y.apply(this,arguments)}),(0,s.A)(CoreChainApiBase)}()},27580:(e,t,r)=>{r.d(t,{A:()=>A,h:()=>handleSignData});var n=r(586330),i=r(230414),o=r(929296),a=r(195309),s=r(972715),c=r(723453),u=r(258051),d=r(903403),l=r(825145),p=r(606777),f=r(424754),h=r(940916),y=r(401349),g=r(404727);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,a.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var w="ed25519";function handleSignData(e){return(0,c.i)("TransactionData",e)}var A=function(e){(0,o.A)(CoreChainSoftware,e);var t=_createSuper(CoreChainSoftware);function CoreChainSoftware(){return t.apply(this,arguments)}var r,a,s,c,h,A,v,m=CoreChainSoftware.prototype;return m.getExportedSecretKey=(r=(0,n.A)((function*(e){var{password:t,keyType:r,credentials:n}=e,{privateKeyRaw:i}=yield this.baseGetDefaultPrivateKey(e);if(!i)throw new Error("privateKeyRaw is required");if(r===g.ECoreApiExportedSecretKeyType.privateKey)return`0x${(0,y.Yc)(t,i).toString("hex")}`;throw new Error(`SecretKey type not support: ${r}`)})),function getExportedSecretKey(e){return r.apply(this,arguments)}),m.getPrivateKeys=(a=(0,n.A)((function*(e){return this.baseGetPrivateKeys({payload:e,curve:w})})),function getPrivateKeys(e){return a.apply(this,arguments)}),m.signTransaction=(s=(0,n.A)((function*(e){var{unsignedTx:t,account:{pub:r}}=e,n=yield this.baseGetSingleSigner({payload:e,curve:w});if(!t.rawTxUnsigned)throw new Error("unsignedTx.rawTxUnsigned is undefined");var i=yield n.getPrvkey(),o=u.h.fromSecretKey(i),a=p.A.toBuffer(t.rawTxUnsigned),s=yield o.signTransaction(a);return{txid:"",rawTx:s.bytes,signatureScheme:"ed25519",signature:s.signature,publicKey:f.A.addHexPrefix((0,l.wT)(r)),encodedTx:t.encodedTx}})),function signTransaction(e){return s.apply(this,arguments)}),m.signMessage=(c=(0,n.A)((function*(e){var t=e.unsignedMsg,r=yield this.baseGetSingleSigner({payload:e,curve:w}),n=yield r.getPrvkey(),i=u.h.fromSecretKey(n),o=p.A.toBuffer(t.message);return(yield i.signPersonalMessage(o)).signature})),function signMessage(e){return c.apply(this,arguments)}),m.getAddressFromPrivate=(h=(0,n.A)((function*(e){var t,{privateKeyRaw:r}=e;if(f.A.isHexString(r)&&(t=p.A.toBuffer(r,"hex")),!t)throw new Error("Invalid private key");var n=this.baseGetCurve(w).publicFromPrivate(t);return this.getAddressFromPublic({publicKey:p.A.bytesToHex(n),networkInfo:e.networkInfo})})),function getAddressFromPrivate(e){return h.apply(this,arguments)}),m.getAddressFromPublic=(A=(0,n.A)((function*(e){var{publicKey:t}=e,r=new d.G(p.A.toBuffer(t)),n=f.A.addHexPrefix(r.toSuiAddress());return Promise.resolve({address:n,publicKey:t})})),function getAddressFromPublic(e){return A.apply(this,arguments)}),m.getAddressesFromHd=(v=(0,n.A)((function*(e){return this.baseGetAddressesFromHd(e,{curve:w})})),function getAddressesFromHd(e){return v.apply(this,arguments)}),(0,i.A)(CoreChainSoftware)}(h.G)},180556:(e,t,r)=>{r.d(t,{Ac:()=>estimateTxSize,Ah:()=>slicePathTemplate,vN:()=>getUtxoAccountPrefixPath,zf:()=>getBIP44Path});var n=r(451661),i=r.n(n),o=r(491180);function slicePathTemplate(e){return o.A.slicePathTemplate(e)}function getUtxoAccountPrefixPath({fullPath:e}){var t=e.split("/");return t.pop(),t.pop(),t.join("/")}function getBIP44Path(e,t){var r="";for(var[n,i]of Object.entries(e.addresses))if(i===t){r=n;break}return`${e.path}/${r}`}function estimateTxSize(e,t){return i().transactionBytes(e,t)}},959341:(e,t,r)=>{r.d(t,{L:()=>g});var n=r(503668),i=r.n(n),o=r(586330),a=r(230414),s=r(929296),c=r(195309),u=r(972715),d=r(507140),l=r(296827),p=r(491180),f=r(584186),h=r(746661),y=r(583354);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,u.A)(e);if(t){var i=(0,u.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var g=function(e){(0,s.A)(KeyringBase,e);var t=_createSuper(KeyringBase);function KeyringBase(e){var r;if((r=t.call(this,e.options)).vault=e,r.vault.networkId!==e.options.networkId)throw new Error("KeyringBase ERROR: networkId not match1");if(r.networkId!==e.options.networkId)throw new Error("KeyringBase ERROR: networkId not match2");return r}var r,n,c,u,g,w=KeyringBase.prototype;return w.isKeyringImported=function isKeyringImported(){return this.keyringType===y.U.imported},w.isKeyringHd=function isKeyringHd(){return this.keyringType===y.U.hd},w.isKeyringHardware=function isKeyringHardware(){return this.keyringType===y.U.hardware},w.isKeyringWatching=function isKeyringWatching(){return this.keyringType===y.U.watching},w.basePrepareHdNormalAccounts=(r=(0,o.A)((function*(e,t){var{walletId:r}=this;if(!r)throw new Error("walletId is not defined");var{names:n,deriveInfo:i,indexes:o}=e,{coinType:a,template:s,namePrefix:c,idSuffix:u}=i;if(!a)throw new Error("coinType is not defined");for(var d=yield this.getVaultSettings(),{accountType:l}=d,{buildAddressesInfo:f}=t,y=o,g=yield f({usedIndexes:y}),w=[],A=0;A<g.length;A+=1){var{path:v,publicKey:m,address:b,addresses:k,relPath:T}=g[A];if(!v)throw new Error("KeyringHD prepareAccounts ERROR: path not found");if(l===h.rX.VARIANT&&!k)throw new Error("addresses is required for variant account");if(l===h.rX.VARIANT&&b)throw new Error("address should not set for variant account");var I=y[A],x=n?.[A]||p.A.buildHDAccountName({pathIndex:I,namePrefix:c}),S=p.A.buildHDAccountId({walletId:r,path:v,idSuffix:u}),P=p.A.buildIndexedAccountId({walletId:r,index:I});w.push({id:S,name:x,type:l,path:v,pathIndex:I,relPath:T,indexedAccountId:P,coinType:a,impl:d.impl,pub:m,address:b,addresses:k,template:s})}return w})),function basePrepareHdNormalAccounts(e,t){return r.apply(this,arguments)}),w.basePrepareHdUtxoAccounts=(n=(0,o.A)((function*(e,t){var{walletId:r}=this;if(!r)throw new Error("walletId is undefined");var{indexes:n,deriveInfo:o,names:a,skipCheckAccountExist:s=!0}=e,{coinType:c,template:u,namePrefix:d}=o;if(!c)throw new Error("coinType is not defined");var y=yield this.getVaultSettings(),{accountType:g}=y;if(g!==h.rX.UTXO)throw new Error("accountType is not utxo");var{checkIsAccountUsed:w,buildAddressesInfo:A}=t,v=[...n];l.U.account.accountCreatePerf.utxoBuildAddressesInfo();var m=yield A({usedIndexes:v});l.U.account.accountCreatePerf.utxoBuildAddressesInfoDone(),l.U.account.accountCreatePerf.buildDBUtxoAccounts();var b=[],k=0;for(var{path:T,relPath:I,publicKey:x,xpub:S,xpubSegwit:P,address:C,addresses:O}of m){if(!T||i()(S)||!O)throw new Error("basePrepareHdUtxoAccounts ERROR: path or xpub or addresses is undefined");if(!I)throw new Error("basePrepareHdUtxoAccounts ERROR: relPath is undefined");var K=d,_=v[k],N=a?.[k]||`${K} #${_+1}`,E=`${this.walletId}--${T}`,B=p.A.buildIndexedAccountId({walletId:this.walletId,index:_});b.push({id:E,name:N,type:g,path:T,pathIndex:_,indexedAccountId:B,relPath:I,coinType:c,impl:y.impl,pub:x,xpub:S,xpubSegwit:P,address:C,addresses:O,template:u});var R=k===m.length-1;if(!s&&!R&&w){var{isUsed:H}=yield w({xpub:S,xpubSegwit:P,address:C});if(!H)break;yield f.A.wait(200)}k+=1}return l.U.account.accountCreatePerf.buildDBUtxoAccountsDone(),b})),function basePrepareHdUtxoAccounts(e,t){return n.apply(this,arguments)}),w.batchGetAddresses=(c=(0,o.A)((function*(e){return[]})),function batchGetAddresses(e){return c.apply(this,arguments)}),w.exportAccountSecretKeys=(u=(0,o.A)((function*(e){throw new d.MS})),function exportAccountSecretKeys(e){return u.apply(this,arguments)}),w.buildHwAllNetworkPrepareAccountsParams=(g=(0,o.A)((function*(e){})),function buildHwAllNetworkPrepareAccountsParams(e){return g.apply(this,arguments)}),w.buildPrepareAccountsPrefixedPath=function buildPrepareAccountsPrefixedPath(e){throw new d.MS},(0,a.A)(KeyringBase)}(r(466062).y);!function(e){(0,s.A)(KeyringBaseMock,e);var t=_createSuper(KeyringBaseMock);function KeyringBaseMock(){return t.apply(this,arguments)}(0,a.A)(KeyringBaseMock)}(g)},597194:(e,t,r)=>{r.d(t,{g:()=>d});var n=r(586330),i=r(230414),o=r(929296),a=r(195309),s=r(972715),c=r(507140),u=r(583354);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,a.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var d=function(e){(0,o.A)(KeyringExternalBase,e);var t=_createSuper(KeyringExternalBase);function KeyringExternalBase(...e){var r;return(r=t.call(this,...e)).keyringType=u.U.external,r}var r,a,s,d=KeyringExternalBase.prototype;return d.baseSignMessageByExternalWallet=(r=(0,n.A)((function*(e){return this.backgroundApi.serviceDappSide.signMessage({account:yield this.vault.getAccount(),networkId:this.networkId,params:e})})),function baseSignMessageByExternalWallet(e){return r.apply(this,arguments)}),d.baseSendTransactionByExternalWallet=(a=(0,n.A)((function*(e){return this.backgroundApi.serviceDappSide.sendTransaction({account:yield this.vault.getAccount(),networkId:this.networkId,params:e})})),function baseSendTransactionByExternalWallet(e){return a.apply(this,arguments)}),d.prepareAccounts=function prepareAccounts(e){throw new c.He("prepareAccounts is not supported for external accounts, use serviceAccount directly")},d.basePrepareExternalAccounts=(s=(0,n.A)((function*(e){return[]})),function basePrepareExternalAccounts(e){return s.apply(this,arguments)}),(0,i.A)(KeyringExternalBase)}(r(959341).L)},64238:(e,t,r)=>{r.d(t,{V:()=>g});var n=r(586330),i=r(230414),o=r(929296),a=r(195309),s=r(972715),c=r(180556),u=r(688815),d=r(507140),l=r(514527),p=r(272615),f=r(296827),h=r(100645),y=r(583354);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,a.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var g=function(e){(0,o.A)(KeyringHardwareBase,e);var t=_createSuper(KeyringHardwareBase);function KeyringHardwareBase(...e){var r;return(r=t.call(this,...e)).keyringType=y.U.hardware,r}var r,a,s,g,w,A=KeyringHardwareBase.prototype;return A.getHardwareSDKInstance=(r=(0,n.A)((function*(){var e;f.U.account.accountCreatePerf.getHardwareSDKInstance();var t=null!=(e=yield u.A?.$backgroundApiProxy?.backgroundApi?.serviceHardware?.getSDKInstance?.())?e:p.Hk;return f.U.account.accountCreatePerf.getHardwareSDKInstanceDone(),t})),function getHardwareSDKInstance(){return r.apply(this,arguments)}),A.baseGetDeviceAccountData=(a=(0,n.A)((function*({params:e,usedIndexes:t,sdkGetDataFn:r,errorMessage:i}){var{deriveInfo:o,deviceParams:a}=e,{dbDevice:s,confirmOnDevice:u}=a,{connectId:p,deviceId:f}=s,{template:y,coinName:g}=o,{pathPrefix:w,pathSuffix:A}=(0,c.Ah)(y),showOnOnekeyFn=function(e){return u===h.hz.EveryItem||u===h.hz.LastItem&&e===t[t.length-1]},v=yield(0,l.bL)((0,n.A)((function*(){return r({connectId:p,deviceId:f,pathPrefix:w,pathSuffix:A,template:y,coinName:g,showOnOnekeyFn})})));if(!v||v.length!==t.length)throw new d.He(i);return v})),function baseGetDeviceAccountData(e){return a.apply(this,arguments)}),A.baseGetDeviceAccountPublicKeys=(s=(0,n.A)((function*({params:e,usedIndexes:t,sdkGetPublicKeysFn:r}){return this.baseGetDeviceAccountData({params:e,usedIndexes:t,sdkGetDataFn:r,errorMessage:"Unable to get public keys."})})),function baseGetDeviceAccountPublicKeys(e){return s.apply(this,arguments)}),A.baseGetDeviceAccountAddresses=(g=(0,n.A)((function*({params:e,usedIndexes:t,sdkGetAddressFn:r}){return this.baseGetDeviceAccountData({params:e,usedIndexes:t,sdkGetDataFn:r,errorMessage:"Unable to get addresses."})})),function baseGetDeviceAccountAddresses(e){return g.apply(this,arguments)}),A.getAllNetworkPrepareAccounts=(w=(0,n.A)((function*({hwSdkNetwork:e,params:t,usedIndexes:r,buildPath:n,buildResultAccount:i}){if(e){var{hwAllNetworkPrepareAccountsResponse:o}=t;if(o?.length){var a=[],_loop=function*(){var t=yield n({index:s}),r=o?.find((function(r){return r.network&&r.path===t&&r.network===e}));r&&r.success&&a.push(i({account:r,index:s}))};for(var s of r)yield*_loop();if(a.length===r.length)return{success:!0,payload:a};var c=o?.find((function(e){return!e.success&&!!e.payload?.error}));if(!c?.success&&c?.payload?.error){if(-1!==c?.payload?.error?.indexOf("Failure_DataError,Forbidden key path"))throw new d.OZ;throw(0,l.MP)(c.payload)}throw new d.He("SDK GetAllNetworkAccounts Failed")}}})),function getAllNetworkPrepareAccounts(e){return w.apply(this,arguments)}),(0,i.A)(KeyringHardwareBase)}(r(959341).L)},129441:(e,t,r)=>{r.d(t,{R:()=>c});var n=r(230414),i=r(929296),o=r(195309),a=r(972715),s=r(583354);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,a.A)(e);if(t){var i=(0,a.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var c=function(e){(0,i.A)(KeyringHdBase,e);var t=_createSuper(KeyringHdBase);function KeyringHdBase(...e){var r;return(r=t.call(this,...e)).keyringType=s.U.hd,r}return(0,n.A)(KeyringHdBase)}(r(448648).w)},275061:(e,t,r)=>{r.d(t,{V:()=>c});var n=r(230414),i=r(929296),o=r(195309),a=r(972715),s=r(583354);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,a.A)(e);if(t){var i=(0,a.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var c=function(e){(0,i.A)(KeyringImportedBase,e);var t=_createSuper(KeyringImportedBase);function KeyringImportedBase(...e){var r;return(r=t.call(this,...e)).keyringType=s.U.imported,r}return(0,n.A)(KeyringImportedBase)}(r(448648).w)},448648:(e,t,r)=>{r.d(t,{w:()=>A});var n=r(324586),i=r(503668),o=r.n(i),a=r(586330),s=r(230414),c=r(929296),u=r(195309),d=r(972715),l=r(401349),p=r(507140),f=r(296827),h=r(491180),y=r(825145),g=r(482407),w=r(150673);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,d.A)(e);if(t){var i=(0,d.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var A=function(e){(0,c.A)(KeyringSoftwareBase,e);var t=_createSuper(KeyringSoftwareBase);function KeyringSoftwareBase(){return t.apply(this,arguments)}var r,n,i,u,d,A,v,m,b,k,T,I=KeyringSoftwareBase.prototype;return I.baseGetCredentialsInfo=(r=(0,a.A)((function*({password:e}){var t,r;return(0,g.Gb)(e),this.isKeyringHd()&&(t=(yield w.A.getCredential((0,y.wT)(this.walletId))).credential),this.isKeyringImported()&&(r=(yield w.A.getCredential(this.accountId)).credential),{hd:t,imported:r}})),function baseGetCredentialsInfo(e){return r.apply(this,arguments)}),I.baseSignTransactionBtc=(n=(0,a.A)((function*(e){if(!this.coreApi)throw new Error("coreApi is not defined");var t=this.vault,{password:r,unsignedTx:n,signOnly:i}=e,o=yield this.baseGetCredentialsInfo(e),a=yield this.getCoreApiNetworkInfo(),{account:s,btcExtraInfo:c,relPaths:u}=yield t.prepareBtcSignExtraInfo({unsignedTx:n});return yield this.coreApi.signTransaction({networkInfo:a,unsignedTx:n,account:s,relPaths:u,password:r,credentials:o,btcExtraInfo:c,signOnly:i})})),function baseSignTransactionBtc(e){return n.apply(this,arguments)}),I.baseSignTransaction=(i=(0,a.A)((function*(e){if(!this.coreApi)throw new Error("coreApi is not defined");var{password:t,unsignedTx:r}=e,n=yield this.vault.getAccount(),i=yield this.baseGetCredentialsInfo(e),o=yield this.getCoreApiNetworkInfo();return yield this.coreApi.signTransaction({networkInfo:o,password:t,account:n,credentials:i,unsignedTx:r})})),function baseSignTransaction(e){return i.apply(this,arguments)}),I.baseSignMessage=(u=(0,a.A)((function*(e){var t=this;if(!this.coreApi)throw new Error("coreApi is not defined");var{password:r,messages:n}=e,i=yield this.vault.getAccount(),o=yield this.baseGetCredentialsInfo(e),a=yield this.getCoreApiNetworkInfo();return yield Promise.all(n.map((function(e){return(0,y.wT)(t.coreApi).signMessage({networkInfo:a,unsignedMsg:e,account:i,password:r,credentials:o})})))})),function baseSignMessage(e){return u.apply(this,arguments)}),I.baseSignMessageBtc=(d=(0,a.A)((function*(e){var t=this;if(!this.coreApi)throw new Error("coreApi is not defined");var r,n=this.vault,{password:i,messages:o}=e,s=yield this.baseGetCredentialsInfo(e),c=yield this.getCoreApiNetworkInfo(),u=yield Promise.all(o.map((r=(0,a.A)((function*(e){var{account:r,btcExtraInfo:o,relPaths:a}=yield n.prepareBtcSignExtraInfo({unsignedMessage:e});return(0,y.wT)(t.coreApi).signMessage({networkInfo:c,unsignedMsg:e,account:r,relPaths:a,password:i,credentials:s,btcExtraInfo:o})})),function(e){return r.apply(this,arguments)})));return u})),function baseSignMessageBtc(e){return d.apply(this,arguments)}),I.basePrepareAccountsImported=(A=(0,a.A)((function*(e,t={}){if(!this.coreApi)throw new Error("coreApi is not defined");var{name:r,importedCredential:n,password:i,networks:o,createAtNetwork:a}=e,{privateKey:s}=(0,l.VV)({credential:n,password:i}),c=yield this.getVaultSettings(),{onlyAvailableOnCertainNetworks:u}=t,d=t.accountType||c.accountType,p=t.impl||c.impl,f=t.coinType||e.deriveInfo?.coinType||c.coinTypeDefault,y=yield this.getCoreApiNetworkInfo(),g=s,{address:w,addresses:A,publicKey:v}=yield this.coreApi.getAddressFromPrivate({networkInfo:y,privateKeyRaw:g,addressEncoding:e.deriveInfo?.addressEncoding}),m="";if(u&&!(m=A?.[a]||""))throw new Error(`imported account address is empty of network: ${a}`);var b=h.A.buildImportedAccountId({coinType:f,pub:v,address:m,addressEncoding:e.deriveInfo?.addressEncoding});return Promise.resolve([{id:b,name:r||"",type:d,path:"",coinType:f,impl:p,networks:u?o:void 0,createAtNetwork:a,pub:v,address:w,addresses:A}])})),function basePrepareAccountsImported(e){return A.apply(this,arguments)}),I.basePrepareAccountsImportedUtxo=(v=(0,a.A)((function*(e){if(!this.coreApi)throw new Error("coreApi is not defined");var{name:t,importedCredential:r,password:n,createAtNetwork:i,deriveInfo:a}=e,{privateKey:s}=(0,l.VV)({credential:r,password:n}),c=a?.addressEncoding,u=yield this.getVaultSettings(),{coinTypeDefault:d,accountType:p}=u,f=yield this.getCoreApiNetworkInfo(),y=s,{address:g,addresses:w,publicKey:A,xpub:v,relPath:m,xpubSegwit:b,path:k}=yield this.coreApi.getAddressFromPrivate({networkInfo:f,privateKeyRaw:y,addressEncoding:c});if(o()(v)||!w)throw new Error("xpub or addresses is undefined");var T=h.A.buildImportedAccountId({coinType:d,xpub:v||A,addressEncoding:c});return Promise.resolve([{id:T,name:t||"",type:p,path:k||"",relPath:m,coinType:d,impl:u.impl,xpub:v,xpubSegwit:b,pub:A,address:g,addresses:w,createAtNetwork:i}])})),function basePrepareAccountsImportedUtxo(e){return v.apply(this,arguments)}),I.basePrepareAccountsHd=(m=(0,a.A)((function*(e){var t,r=this,{template:n,addressEncoding:i}=e.deriveInfo,{password:o}=e,s=yield this.getCoreApiNetworkInfo();return this.basePrepareHdNormalAccounts(e,{buildAddressesInfo:(t=(0,a.A)((function*({usedIndexes:e}){if(!r.coreApi)throw new Error("coreApi is not defined");var t=yield r.baseGetCredentialsInfo({password:o}),{addresses:a}=yield r.coreApi.getAddressesFromHd({networkInfo:s,template:n,hdCredential:(0,y.wT)(t.hd),password:o,indexes:e,addressEncoding:i});return a})),function buildAddressesInfo(e){return t.apply(this,arguments)})})})),function basePrepareAccountsHd(e){return m.apply(this,arguments)}),I.basePrepareAccountsHdUtxo=(b=(0,a.A)((function*(e,t){var r,n=this,{password:i,indexes:o,deriveInfo:s,names:c,skipCheckAccountExist:u}=e,d=e?.deriveInfo?.addressEncoding;return this.basePrepareHdUtxoAccounts(e,_objectSpread(_objectSpread({},t),{},{buildAddressesInfo:(r=(0,a.A)((function*({usedIndexes:e}){var{coinType:t,template:r,namePrefix:o}=s;f.U.account.accountCreatePerf.getCredentialsInfo();var a=yield n.baseGetCredentialsInfo({password:i});if(!n.coreApi)throw new Error("coreApi is undefined");f.U.account.accountCreatePerf.getAddressesFromHd();var{addresses:c}=yield n.coreApi.getAddressesFromHd({networkInfo:yield n.getCoreApiNetworkInfo(),template:r,hdCredential:(0,y.wT)(a.hd),password:i,indexes:e,addressEncoding:d});if(c.length!==e.length)throw new p.He("Unable to get address");return f.U.account.accountCreatePerf.getAddressesFromHdDone(),c})),function buildAddressesInfo(e){return r.apply(this,arguments)})}))})),function basePrepareAccountsHdUtxo(e,t){return b.apply(this,arguments)}),I.baseExportAccountSecretKeys=(k=(0,a.A)((function*(e){var{password:t,keyType:r,relPaths:n}=e,i=yield this.vault.getAccount(),o=yield this.getCoreApiNetworkInfo(),a=yield this.baseGetCredentialsInfo({password:t}),{deriveInfo:s}=yield this.backgroundApi.serviceNetwork.getDeriveTypeByTemplate({networkId:this.networkId,template:i.template}),c=s?.addressEncoding;if(!this.coreApi)throw new Error("coreApi is not defined");return this.coreApi.getExportedSecretKey({networkInfo:o,password:t,credentials:a,account:i,relPaths:n,keyType:r,addressEncoding:c})})),function baseExportAccountSecretKeys(e){return k.apply(this,arguments)}),I.baseGetPrivateKeys=(T=(0,a.A)((function*(e){var{password:t,relPaths:r}=e;if(!this.coreApi)throw new Error("coreApi is not defined");var n=yield this.vault.getAccount(),i=yield this.baseGetCredentialsInfo({password:t}),o=yield this.getCoreApiNetworkInfo();return yield this.coreApi.getPrivateKeys({networkInfo:o,password:t,account:n,relPaths:r,credentials:i})})),function baseGetPrivateKeys(e){return T.apply(this,arguments)}),(0,s.A)(KeyringSoftwareBase)}(r(959341).L)},7440:(e,t,r)=>{r.d(t,{w:()=>y});var n=r(586330),i=r(230414),o=r(929296),a=r(195309),s=r(972715),c=r(507140),u=r(334439),d=r(849726),l=r(491180),p=r(825145),f=r(746661),h=r(583354);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,a.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var y=function(e){(0,o.A)(KeyringWatchingBase,e);var t=_createSuper(KeyringWatchingBase);function KeyringWatchingBase(...e){var r;return(r=t.call(this,...e)).keyringType=h.U.watching,r}var r,a,s,y,g=KeyringWatchingBase.prototype;return g.signTransaction=(r=(0,n.A)((function*(){throw new c.He(d.a.intl.formatMessage({id:u.ETranslations.wallet_error_trade_with_watched_acocunt}))})),function signTransaction(){return r.apply(this,arguments)}),g.signMessage=(a=(0,n.A)((function*(){throw new c.He(d.a.intl.formatMessage({id:u.ETranslations.wallet_error_trade_with_watched_acocunt}))})),function signMessage(){return a.apply(this,arguments)}),g.basePrepareUtxoWatchingAccounts=(s=(0,n.A)((function*(e){var{address:t,xpub:r,networks:n,createAtNetwork:i,name:o,deriveInfo:a,isUrlAccount:s,addresses:c}=e;if(!t&&!r)throw new Error("basePrepareUtxoWatchingAccounts ERROR: address and xpub are not defined");var u=yield this.getCoreApiNetworkInfo(),d=yield this.getVaultSettings(),h=d.coinTypeDefault,y=a?.addressEncoding,g=l.A.buildWatchingAccountId({coinType:h,address:t,xpub:r,addressEncoding:y,isUrlAccount:s}),w="",A=r;if(!t&&r){(0,p.wT)(this.coreApi);var v=yield this.coreApi?.getAddressFromPublic({publicKey:r,addressEncoding:y,networkInfo:u});w=v?.address||"",A=v?.xpubSegwit||A||r}return[{id:g,name:o,type:f.rX.UTXO,relPath:"0/0",coinType:h,impl:d.impl,networks:n,createAtNetwork:i,address:w||t||"",xpub:r||"",xpubSegwit:A,path:"",addresses:c||{}}]})),function basePrepareUtxoWatchingAccounts(e){return s.apply(this,arguments)}),g.basePrepareSimpleWatchingAccounts=(y=(0,n.A)((function*(e,t={}){var{address:r,name:n,networks:i,createAtNetwork:o,isUrlAccount:a}=e;if(!r)throw new c.q4;if(!o)throw new Error("basePrepareSimpleWatchingAccounts ERROR: createAtNetwork is not defined");var{onlyAvailableOnCertainNetworks:s=!1}=t,u=yield this.getVaultSettings(),d=t.coinType||u.coinTypeDefault,p=t.impl||u.impl,h={id:l.A.buildWatchingAccountId({coinType:d,address:r,isUrlAccount:a}),name:n||"",type:f.rX.SIMPLE,coinType:d,impl:p,networks:s?i:void 0,createAtNetwork:o,address:r,pub:"",path:""};return Promise.resolve([h])})),function basePrepareSimpleWatchingAccounts(e){return y.apply(this,arguments)}),(0,i.A)(KeyringWatchingBase)}(r(959341).L)},34344:(e,t,r)=>{r.d(t,{S:()=>D});var n=r(839850),i=r(638403),o=r.n(i),a=r(603514),s=r.n(a),c=r(503668),u=r.n(c),d=r(324586),l=r(3326),p=r.n(l),f=r(586330),h=r(230414),y=r(929296),g=r(195309),w=r(972715),A=r(333215),v=r(27103),m=r(241440),b=r(401349),k=r(625931),T=r(507140),I=r(663522),x=r(491180),S=r(983517),P=r(424754),C=r(469365),O=r(482407),K=r(914257),_=r(796151),N=r(884894),E=r(369387),B=r(232471),R=r(466062),H=["accountId"],j=["accountId"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,d.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,w.A)(e);if(t){var i=(0,w.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,g.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}if(I.Ay.isExtensionUi)throw new Error("engine/VaultBase is not allowed imported from ui");var D=function(e){(0,y.A)(VaultBase,e);var t=_createSuper(VaultBase);function VaultBase(...e){var r;return(r=t.call(this,...e)).uuid=(0,O.lk)(),r.mutexBuildOnChainHistoryTxGetDBAccount=new v.jf(1),r}var r,i,a,c,d,l,g,w,b,I,P,_,R,D,M,F,V,U,G,q,W,L,$,z,X,J,Z,Y,Q,ee,te,re,ne,ie,oe,ae,se,ce,ue,de,le,pe,fe,he,ye=VaultBase.prototype;return ye.init=(r=(0,f.A)((function*(e){yield this.initKeyring(e)})),function init(e){return r.apply(this,arguments)}),ye.initKeyring=(i=(0,f.A)((function*(e){this.options.isChainOnly||(this.keyring=yield e.keyringCreator(this))})),function initKeyring(e){return i.apply(this,arguments)}),ye.broadcastTransaction=(a=(0,f.A)((function*(e){var{signedTx:t}=e,r=yield this.backgroundApi.serviceSend.broadcastTransaction(e);return _objectSpread(_objectSpread({},t),{},{txid:r,encodedTx:t.encodedTx})})),function broadcastTransaction(e){return a.apply(this,arguments)}),ye.broadcastTransactionFromCustomRpc=(c=(0,f.A)((function*(e){throw new T.MS})),function broadcastTransactionFromCustomRpc(e){return c.apply(this,arguments)}),ye.validateSendAmount=(d=(0,f.A)((function*(e){return Promise.resolve(!0)})),function validateSendAmount(e){return d.apply(this,arguments)}),ye.buildOnChainHistoryTxExtraInfo=(l=(0,f.A)((function*({onChainHistoryTx:e}){return null})),function buildOnChainHistoryTxExtraInfo(e){return l.apply(this,arguments)}),ye.precheckUnsignedTx=(g=(0,f.A)((function*(e){return Promise.resolve(!0)})),function precheckUnsignedTx(e){return g.apply(this,arguments)}),ye.buildEstimateFeeParams=(w=(0,f.A)((function*({encodedTx:e}){return Promise.resolve({encodedTx:e})})),function buildEstimateFeeParams(e){return w.apply(this,arguments)}),ye.buildParseTransactionParams=(b=(0,f.A)((function*({encodedTx:e}){return Promise.resolve({encodedTx:e})})),function buildParseTransactionParams(e){return b.apply(this,arguments)}),ye.buildFetchHistoryListParams=(I=(0,f.A)((function*(e){return Promise.resolve({})})),function buildFetchHistoryListParams(e){return I.apply(this,arguments)}),ye.buildHistoryTx=(P=(0,f.A)((function*(e){var{historyTxToMerge:t,decodedTx:r,signedTx:n,isSigner:i,isLocalCreated:o,dbAccount:a}=e,s=e.accountAddress||"",c=e.xpub,u=n?.txid||r?.txid||"";if(!u)throw new Error("buildHistoryTx txid not found");var{accountId:d,networkId:l}=r;try{var[p,f]=yield Promise.all([this.backgroundApi.serviceAccount.getAccountAddressForApi({dbAccount:a,accountId:d,networkId:l}),this.backgroundApi.serviceAccount.getAccountXpub({dbAccount:a,accountId:d,networkId:l})]);s=p,c=f}catch(e){}r.txid=u||r.txid,r.owner=s,r.xpub=c,i&&(r.signer=s);var h=_objectSpread(_objectSpread({id:x.A.buildLocalHistoryId({networkId:l,txid:u,accountAddress:s,xpub:c}),isLocalCreated:Boolean(o)},t),{},{decodedTx:r});return Promise.resolve(h)})),function buildHistoryTx(e){return P.apply(this,arguments)}),ye.fixOnChainHistoryAccountData=function fixOnChainHistoryAccountData(e){var{accountId:t,networkId:r,accountAddress:n,xpub:i,onChainHistoryTx:o,allNetworkHistoryExtraItems:a}=e,s=t,c=r,d=n,l=i;if(r===(0,k.V)().onekeyall){var p=a?.find((function(e){var[t,r]=o.key.split("_");return u()(e.accountXpub)?e.networkId===o.networkId:e.networkId===o.networkId&&e.accountXpub===r}));p&&(s=p.accountId,c=p.networkId,d=p.accountAddress,l=p.accountXpub)}return{accountId:s,networkId:c,accountAddress:d,xpub:l}},ye.buildOnChainHistoryTx=(_=(0,f.A)((function*(e){var t=this,{onChainHistoryTx:r,tokens:n,nfts:i,allNetworkHistoryExtraItems:o,dbAccountCache:a}=e,{accountId:s,networkId:c,accountAddress:u,xpub:d}=this.fixOnChainHistoryAccountData({accountId:e.accountId,networkId:e.networkId,accountAddress:e.accountAddress,xpub:e.xpub,onChainHistoryTx:r,allNetworkHistoryExtraItems:o});e.accountId;var l,p=`${s}`;a&&(yield this.mutexBuildOnChainHistoryTxGetDBAccount.runExclusive((0,f.A)((function*(){l=a?.[p],l||(l=yield t.backgroundApi.serviceAccount.getDBAccountSafe({accountId:s}))&&(a[p]=l)}))));var h=yield this.backgroundApi.serviceNetwork.getVaultSettings({networkId:c});try{var y=yield this.buildHistoryTxAction({tx:r,tokens:n,nfts:i}),g={txid:r.tx,owner:u,signer:r.from,to:r.to,nonce:r.nonce,actions:[y],status:(0,C.RJ)(r.status),networkId:c,accountId:s,xpub:d,totalFeeInNative:r.gasFee,totalFeeFiatValue:r.gasFeeFiatValue,nativeAmount:h.isUtxo?r.value:void 0,extraInfo:yield this.buildOnChainHistoryTxExtraInfo({onChainHistoryTx:r}),payload:{type:r.type,value:r.value,label:r.label}};return g.updatedAt=new Date(1e3*r.timestamp).getTime(),g.createdAt=g.updatedAt,g.isFinal=!0,yield this.buildHistoryTx({dbAccount:l,decodedTx:g,accountAddress:u,xpub:d})}catch(e){return null}})),function buildOnChainHistoryTx(e){return _.apply(this,arguments)}),ye.buildHistoryTxAction=(R=(0,f.A)((function*({tx:e,tokens:t,nfts:r}){return e.type===E.mz.Approve&&e.tokenApprove?this.buildHistoryTxApproveAction({tx:e,tokens:t,nfts:r,tokenApprove:e.tokenApprove}):s()(e.sends)&&s()(e.receives)?e.type?this.buildHistoryTxFunctionCallAction({tx:e}):this.buildHistoryTxUnknownAction({tx:e}):this.buildHistoryTransferAction({tx:e,tokens:t,nfts:r})})),function buildHistoryTxAction(e){return R.apply(this,arguments)}),ye.buildHistoryTxFunctionCallAction=(D=(0,f.A)((function*({tx:e}){return yield this.getNetwork(),{type:B.kF.FUNCTION_CALL,functionCall:{from:e.from,to:e.to,functionName:e.label,functionHash:e.functionCode,args:e.params}}})),function buildHistoryTxFunctionCallAction(e){return D.apply(this,arguments)}),ye.buildHistoryTxUnknownAction=(M=(0,f.A)((function*({tx:e}){return yield this.getNetwork(),{type:B.kF.UNKNOWN,unknownAction:{from:e.from,to:e.to,label:e.label}}})),function buildHistoryTxUnknownAction(e){return M.apply(this,arguments)}),ye.buildHistoryTransferAction=(F=(0,f.A)((function*({tx:e,tokens:t,nfts:r}){var n=this;return{type:B.kF.ASSET_TRANSFER,assetTransfer:{from:e.from,to:e.to,label:e.label,sends:e.sends.map((function(e){return n.buildHistoryTransfer({transfer:e,tokens:t,nfts:r})})),receives:e.receives.map((function(e){return n.buildHistoryTransfer({transfer:e,tokens:t,nfts:r})}))}}})),function buildHistoryTransferAction(e){return F.apply(this,arguments)}),ye.buildHistoryTransfer=function buildHistoryTransfer({transfer:e,tokens:t,nfts:r}){var{icon:n,symbol:i,name:o,isNFT:a,isNative:s,price:c}=(0,C.vS)({key:e.key,tokenAddress:e.token,tokens:t,nfts:r});return{from:e.from,to:e.to,tokenIdOnNetwork:e.token,amount:e.amount,label:e.label,isOwn:e.isOwn,icon:n,name:o,symbol:i,isNFT:a,isNative:s,price:c}},ye.buildHistoryTxApproveAction=function buildHistoryTxApproveAction({tx:e,tokens:t,nfts:r,tokenApprove:n}){var{icon:i,symbol:o,name:a,decimals:s}=(0,C.vS)({key:n.key,tokenAddress:n.token,tokens:t,nfts:r});return{type:B.kF.TOKEN_APPROVE,tokenApprove:{from:e.from,to:e.to,spender:n.spender,icon:i,name:a,symbol:o,decimals:s,label:e.label,tokenIdOnNetwork:n.token,amount:new m.A(n.amount).shiftedBy(-s).toFixed(),isInfiniteAmount:n.isInfiniteAmount}}},ye.buildTxTransferAssetAction=(V=(0,f.A)((function*(e){var{from:t,to:r,transfers:n,data:i,application:o,isInternalSwap:a,isInternalStaking:s,internalStakingLabel:c,swapReceivedAddress:u,swapReceivedNetworkId:d}=e,[l,p]=yield Promise.all([this.getAccountAddress(),this.getNetwork()]),f=new m.A(0),h={from:t,to:r,sends:[],receives:[],application:o,isInternalSwap:a,isInternalStaking:s,internalStakingLabel:c,swapReceivedAddress:u,swapReceivedNetworkId:d};return n.forEach((function(e){(0,K.SF)({from:e.from,to:e.to,accountAddress:l})===B.z.OUT?(h.sends.push(e),e.isNative&&(f=f.plus(new m.A(e.amount)))):h.receives.push(e)})),h.nativeAmount=f.toFixed(),h.nativeAmountValue=S.A.convertAmountToChainValue({value:f,network:p}),{type:B.kF.ASSET_TRANSFER,data:i,assetTransfer:h}})),function buildTxTransferAssetAction(e){return V.apply(this,arguments)}),ye.buildInternalSwapAction=(U=(0,f.A)((function*(e){var t,r,n,i,o,{swapData:a,swapInfo:s,swapToAddress:c}=e,u=s.sender.token,d=s.receiver.token,l=s.swapBuildResData.result.info,p=s.swapBuildResData.result.fee?.otherFeeInfos,f=[],h=[{from:s.accountAddress,to:"",tokenIdOnNetwork:u.contractAddress,icon:null!=(t=u.logoURI)?t:"",name:null!=(r=u.name)?r:"",symbol:u.symbol,amount:s.sender.amount,isNFT:!1,isNative:u.isNative,networkId:s.sender.accountInfo.networkId},{from:"",to:s.receivingAddress,tokenIdOnNetwork:d.contractAddress,icon:null!=(n=d.logoURI)?n:"",name:null!=(i=d.name)?i:"",symbol:d.symbol,amount:s.receiver.amount,isNFT:!1,isNative:d.isNative,networkId:s.receiver.accountInfo.networkId}];return p&&p.forEach((function(e){var t,r;e.token.contractAddress===h[0].tokenIdOnNetwork?h[0].amount=new m.A(h[0].amount).plus(e.amount).toFixed():f.push({from:s.accountAddress,to:"",tokenIdOnNetwork:e.token.contractAddress,icon:null!=(t=e.token.logoURI)?t:"",name:null!=(r=e.token.name)?r:"",symbol:e.token.symbol,amount:e.amount,isNFT:!1,isNative:e.token.isNative,networkId:s.sender.accountInfo.networkId})})),h=[...f,...h],yield this.buildTxTransferAssetAction({from:s.accountAddress,to:null!=c?c:"",data:a,application:{name:l.providerName,icon:null!=(o=l.providerLogo)?o:""},isInternalSwap:!0,swapReceivedAddress:s.receivingAddress,swapReceivedNetworkId:s.receiver.token.networkId,transfers:h})})),function buildInternalSwapAction(e){return U.apply(this,arguments)}),ye.buildInternalStakingAction=(G=(0,f.A)((function*(e){var t,r,n,i,{stakingInfo:o,stakingData:a,accountAddress:s,stakingToAddress:c}=e,{protocol:u,protocolLogoURI:d,send:l,receive:p}=o,f=[l&&{from:s,to:"",tokenIdOnNetwork:l.token.address,icon:null!=(t=l.token.logoURI)?t:"",name:null!=(r=l.token.name)?r:"",symbol:l.token.symbol,amount:l.amount,isNFT:!1,isNative:l.token.isNative},p&&{from:"",to:s,tokenIdOnNetwork:p.token.address,icon:null!=(n=p.token.logoURI)?n:"",name:null!=(i=p.token.name)?i:"",symbol:p.token.symbol,amount:p.amount,isNFT:!1,isNative:p.token.isNative}].filter(Boolean);return yield this.buildTxTransferAssetAction({from:s,to:null!=c?c:"",data:a,application:{name:u,icon:null!=d?d:""},isInternalStaking:!0,internalStakingLabel:(0,K.eM)({stakingInfo:o}),transfers:f})})),function buildInternalStakingAction(e){return G.apply(this,arguments)}),ye.signTransaction=(q=(0,f.A)((function*(e){var t,r,{unsignedTx:n}=e;e.signOnly=null==(t=e.signOnly)||t;var i=yield this.keyring.signTransaction(e);return _objectSpread(_objectSpread({},i),{},{encodedTx:null!=(r=i.encodedTx)?r:n.encodedTx})})),function signTransaction(e){return q.apply(this,arguments)}),ye.getAccount=(W=(0,f.A)((function*({dbAccount:e}={}){var t=e;if(t&&t?.id===this.accountId||(t=yield this.backgroundApi.serviceAccount.getDBAccount({accountId:this.accountId})),!x.A.isAccountCompatibleWithNetwork({account:t,networkId:this.networkId}))throw new Error(`account impl not matched to network: ${this.networkId} ${t.id?.slice(0,30)}`);var r=yield this.getNetworkInfo(),n=t,i="";if(n.connectedAddresses){var buildExternalAccountAddress=function({key:e,fallbackIndex:t}){var r;if(!e)return"";var i=null!=(r=n.selectedAddress?.[e])?r:t,o=n.connectedAddresses?.[e]?.split(",").filter(Boolean)||[];return o?.[i]||o?.[t]||""};(i=buildExternalAccountAddress({key:this.networkId,fallbackIndex:-1}))||(i=buildExternalAccountAddress({key:yield this.getNetworkImpl(),fallbackIndex:0})),i||(i=buildExternalAccountAddress({key:this.networkId,fallbackIndex:0}))}var o=yield this.buildAccountAddressDetail({networkInfo:r,account:t,networkId:this.networkId,externalAccountAddress:i}),a=o?.address||"";if(!a&&!o.allowEmptyAddress||!o.isValid)throw new Error("VaultBase.getAccount ERROR: address is invalid");return _objectSpread(_objectSpread({},t),{},{addressDetail:o,address:a})})),function getAccount(){return W.apply(this,arguments)}),ye.getAccountAddress=(L=(0,f.A)((function*(){return(yield this.getAccount()).address})),function getAccountAddress(){return L.apply(this,arguments)}),ye.getAccountPath=($=(0,f.A)((function*(){return(yield this.getAccount()).path})),function getAccountPath(){return $.apply(this,arguments)}),ye.getAccountXpub=(z=(0,f.A)((function*({dbAccount:e}={}){var t=yield this.getAccount({dbAccount:e});return this.getXpubFromAccount(t)})),function getAccountXpub(){return z.apply(this,arguments)}),ye.fillTokensDetails=(X=(0,f.A)((function*({tokensDetails:e}){return Promise.resolve(e)})),function fillTokensDetails(e){return X.apply(this,arguments)}),ye.fillAccountDetails=(J=(0,f.A)((function*({accountDetails:e}){return Promise.resolve(e)})),function fillAccountDetails(e){return J.apply(this,arguments)}),ye.isEarliestLocalPendingTx=(Z=(0,f.A)((function*({encodedTx:e}){return!0})),function isEarliestLocalPendingTx(e){return Z.apply(this,arguments)}),ye.buildReplaceEncodedTx=(Y=(0,f.A)((function*({decodedTx:e,replaceType:t}){return Promise.resolve(e.encodedTx)})),function buildReplaceEncodedTx(e){return Y.apply(this,arguments)}),ye.attachFeeInfoToDAppEncodedTx=(Q=(0,f.A)((function*(e){return Promise.resolve(e.encodedTx)})),function attachFeeInfoToDAppEncodedTx(e){return Q.apply(this,arguments)}),ye.activateToken=(ee=(0,f.A)((function*(e){throw new T.MS})),function activateToken(e){return ee.apply(this,arguments)}),ye.getAddressType=(te=(0,f.A)((function*({address:e}){return Promise.resolve({})})),function getAddressType(e){return te.apply(this,arguments)}),ye.buildStakeEncodedTx=function buildStakeEncodedTx(e){return Promise.resolve(e)},ye.fetchAccountDetails=(re=(0,f.A)((function*(e){return(yield this.backgroundApi.serviceNetwork.isCustomNetwork({networkId:this.networkId}))?this.fetchAccountDetailsByRpc(e):this.fetchAccountDetailsByApi(e)})),function fetchAccountDetails(e){return re.apply(this,arguments)}),ye.fetchAccountDetailsByApi=(ne=(0,f.A)((function*(e){var t=_objectSpread({},p()(e,["accountId","signal"])),r=yield this.backgroundApi.serviceAccountProfile.getClient(N.D.Wallet);return yield r.get(`/wallet/v1/account/get-account?${A.stringify(o()(t,u()))}`,{headers:yield this.backgroundApi.serviceAccountProfile._getWalletTypeHeader({accountId:e.accountId}),signal:e.signal})})),function fetchAccountDetailsByApi(e){return ne.apply(this,arguments)}),ye.fetchAccountDetailsByRpc=(ie=(0,f.A)((function*(e){throw new T.MS})),function fetchAccountDetailsByRpc(e){return ie.apply(this,arguments)}),ye.fetchTokenList=(oe=(0,f.A)((function*(e){return(yield this.backgroundApi.serviceNetwork.isCustomNetwork({networkId:this.networkId}))?this.fetchTokenListByRpc(e):this.fetchTokenListByApi(e)})),function fetchTokenList(e){return oe.apply(this,arguments)}),ye.fetchTokenListByApi=(ae=(0,f.A)((function*(e){var{serviceToken:t,serviceAccountProfile:r}=this.backgroundApi,{requestApiParams:n,flag:i,signal:o,accountId:a}=e;n.contractList&&(n.contractList=n.contractList.filter((function(e){return null!==e&&"string"==typeof e})));var s=yield t.getClient(N.D.Wallet);return yield s.post(`/wallet/v1/account/token/list?flag=${i||""}`,n,{signal:o,headers:yield r._getWalletTypeHeader({accountId:a})})})),function fetchTokenListByApi(e){return ae.apply(this,arguments)}),ye.fetchTokenListByRpc=(se=(0,f.A)((function*(e){throw new T.MS})),function fetchTokenListByRpc(e){return se.apply(this,arguments)}),ye.estimateFee=(ce=(0,f.A)((function*(e){return(yield this.backgroundApi.serviceNetwork.isCustomNetwork({networkId:this.networkId}))?this.estimateFeeByRpc(e):this.estimateFeeByApi(e)})),function estimateFee(e){return ce.apply(this,arguments)}),ye.estimateFeeByApi=(ue=(0,f.A)((function*(e){var{accountId:t}=e,r=(0,n.A)(e,H),i=yield this.backgroundApi.serviceGas.getClient(N.D.Wallet);return yield i.post("/wallet/v1/account/estimate-fee",r,{headers:yield this.backgroundApi.serviceAccountProfile._getWalletTypeHeader({accountId:t})})})),function estimateFeeByApi(e){return ue.apply(this,arguments)}),ye.estimateFeeByRpc=(de=(0,f.A)((function*(e){throw new T.MS})),function estimateFeeByRpc(e){return de.apply(this,arguments)}),ye.fetchAccountHistoryDetail=(le=(0,f.A)((function*(e){return(yield this.backgroundApi.serviceNetwork.isCustomNetwork({networkId:this.networkId}))?this.fetchAccountHistoryDetailByRpc(e):this.fetchAccountHistoryDetailByApi(e)})),function fetchAccountHistoryDetail(e){return le.apply(this,arguments)}),ye.fetchAccountHistoryDetailByApi=(pe=(0,f.A)((function*(e){var{accountId:t}=e,r=(0,n.A)(e,j),i=yield this.backgroundApi.serviceGas.getClient(N.D.Wallet);return yield i.get("/wallet/v1/account/history/detail",{params:r,headers:yield this.backgroundApi.serviceAccountProfile._getWalletTypeHeader({accountId:t})})})),function fetchAccountHistoryDetailByApi(e){return pe.apply(this,arguments)}),ye.fetchAccountHistoryDetailByRpc=(fe=(0,f.A)((function*(e){throw new T.MS})),function fetchAccountHistoryDetailByRpc(e){return fe.apply(this,arguments)}),ye.buildOkxSwapEncodedTx=(he=(0,f.A)((function*(e){throw new T.MS})),function buildOkxSwapEncodedTx(e){return he.apply(this,arguments)}),(0,h.A)(VaultBase)}(function(e){(0,y.A)(VaultBaseChainOnly,e);var t=_createSuper(VaultBaseChainOnly);function VaultBaseChainOnly(){return t.apply(this,arguments)}var r,n,i,o,a,s,c,u,d,l,g,w,A,v,m,k=VaultBaseChainOnly.prototype;return k.getXpubFromAccount=(r=(0,f.A)((function*(e){return e.xpub})),function getXpubFromAccount(e){return r.apply(this,arguments)}),k.proxyJsonRPCCall=(n=(0,f.A)((function*(e){throw new T.MS})),function proxyJsonRPCCall(e){return n.apply(this,arguments)}),k.addressFromBase=(i=(0,f.A)((function*(e){throw new T.MS})),function addressFromBase(e){return i.apply(this,arguments)}),k.addressToBase=(o=(0,f.A)((function*(e){throw new T.MS})),function addressToBase(e){return o.apply(this,arguments)}),k.baseValidatePrivateKey=(a=(0,f.A)((function*(e){if(!this.coreApi)throw new Error("coreApi not defined in Vault");try{var t=yield this.getCoreApiNetworkInfo();if((yield this.coreApi.getAddressFromPrivate({networkInfo:t,privateKeyRaw:e})).publicKey)return{isValid:!0}}catch(e){}return{isValid:!1}})),function baseValidatePrivateKey(e){return a.apply(this,arguments)}),k.baseValidateGeneralInput=(s=(0,f.A)((function*(e){var t,r,n,i,o=(0,b.mP)({encodedText:e.input}),{validateAddress:a,validateXprvt:s,validateXpub:c,validatePrivateKey:u}=e,d={isValid:!1},l=!1;if(a&&!l)try{t=yield this.validateAddress(o),d.addressResult=t,l=l||t?.isValid}catch(e){}if(c&&!l)try{r=yield this.validateXpub(o),d.xpubResult=r,l=l||r?.isValid}catch(e){}if(s&&!l)try{n=yield this.validateXprvt(o),d.xprvtResult=n,l=l||n?.isValid}catch(e){}if(u&&!l)try{i=yield this.validatePrivateKey(o),d.privateKeyResult=i,l=l||i?.isValid}catch(e){}return d.isValid=Boolean(l),{result:d,inputDecoded:o}})),function baseValidateGeneralInput(e){return s.apply(this,arguments)}),k.baseGetPrivateKeyFromImported=(c=(0,f.A)((function*(e){var t=(0,b.mP)({encodedText:e.input}),r=P.A.stripHexPrefix(t);return{privateKey:r=(0,b.uX)({text:r})}})),function baseGetPrivateKeyFromImported(e){return c.apply(this,arguments)}),k.validateAmountInputShown=(u=(0,f.A)((function*({toAddress:e}){return Promise.resolve({isValid:!0})})),function validateAmountInputShown(e){return u.apply(this,arguments)}),k.checkIsDomainName=(d=(0,f.A)((function*({name:e}){return(0,_.s8)(e)})),function checkIsDomainName(e){return d.apply(this,arguments)}),k.resolveDomainName=(l=(0,f.A)((function*({name:e}){return null})),function resolveDomainName(e){return l.apply(this,arguments)}),k.getCustomRpcEndpointStatus=(g=(0,f.A)((function*(e){throw new T.MS})),function getCustomRpcEndpointStatus(e){return g.apply(this,arguments)}),k.checkFeeSupportInfo=(w=(0,f.A)((function*(e){throw new T.MS})),function checkFeeSupportInfo(e){return w.apply(this,arguments)}),k.fetchTokenDetails=(A=(0,f.A)((function*(e){return(yield this.backgroundApi.serviceNetwork.isCustomNetwork({networkId:this.networkId}))?this.fetchTokenDetailsByRpc(e):this.fetchTokenDetailsByApi(e)})),function fetchTokenDetails(e){return A.apply(this,arguments)}),k.fetchTokenDetailsByApi=(v=(0,f.A)((function*(e){var t,r=yield this.backgroundApi.serviceToken.getClient(N.D.Wallet);return yield r.post("/wallet/v1/account/token/search",p()(e,["walletId","accountId","signal"]),{headers:yield this.backgroundApi.serviceAccountProfile._getWalletTypeHeader({accountId:e.accountId,walletId:e.walletId}),signal:null!=(t=e.signal)?t:void 0})})),function fetchTokenDetailsByApi(e){return v.apply(this,arguments)}),k.fetchTokenDetailsByRpc=(m=(0,f.A)((function*(e){throw new T.MS})),function fetchTokenDetailsByRpc(e){return m.apply(this,arguments)}),(0,h.A)(VaultBaseChainOnly)}(R.y))},466062:(e,t,r)=>{r.d(t,{y:()=>c});var n=r(586330),i=r(230414),o=r(491180),a=r(553083),s=r(251614),c=function(){function VaultContext(e){if(this.options=e,this.networkId=e.networkId||"",this.accountId=e.accountId||"",this.backgroundApi=e.backgroundApi,this.walletId=e.walletId||(this.accountId?o.A.getWalletIdFromAccountId({accountId:this.accountId}):""),!this.walletId&&!this.options.isChainOnly)throw new Error("can not get correct walletId")}var e,t,r,c,u,d,l,p,f,h=VaultContext.prototype;return h.getNetworkId=(e=(0,n.A)((function*(){return this.networkId})),function getNetworkId(){return e.apply(this,arguments)}),h.getNetwork=(t=(0,n.A)((function*({cached:e}={}){if(!e||!this._network||this._network.id!==this.networkId){var t=yield this.backgroundApi.serviceNetwork.getNetwork({networkId:this.networkId});this._network=t}return this._network})),function getNetwork(){return t.apply(this,arguments)}),h.getNetworkChainId=(r=(0,n.A)((function*({hex:e=!1}={}){return a.Ay.getNetworkChainId({networkId:this.networkId,hex:e})})),function getNetworkChainId(){return r.apply(this,arguments)}),h.getNetworkImpl=(c=(0,n.A)((function*(){return a.Ay.getNetworkImpl({networkId:this.networkId})})),function getNetworkImpl(){return c.apply(this,arguments)}),h.getVaultSettings=(u=(0,n.A)((function*(){return(0,s._G)({networkId:this.networkId})})),function getVaultSettings(){return u.apply(this,arguments)}),h.getNetworkInfo=(d=(0,n.A)((function*(){return(0,s.u$)({networkId:this.networkId})})),function getNetworkInfo(){return d.apply(this,arguments)}),h.getCoreApiNetworkInfo=(l=(0,n.A)((function*(){var e=yield this.getNetwork(),t=yield this.getNetworkInfo(),{addressPrefix:r,curve:n}=t,i=yield this.getNetworkImpl(),o=yield this.getNetworkChainId({hex:!1}),{isTestnet:a}=e,{networkId:s}=this;return{isTestnet:a,networkChainCode:e.code,chainId:o,networkId:s,networkImpl:i,addressPrefix:r,curve:n}})),function getCoreApiNetworkInfo(){return l.apply(this,arguments)}),h.getRpcUrl=(p=(0,n.A)((function*(){return""})),function getRpcUrl(){return p.apply(this,arguments)}),h.destroy=(f=(0,n.A)((function*(){})),function destroy(){return f.apply(this,arguments)}),(0,i.A)(VaultContext)}()},429404:(e,t,r)=>{r.r(t),r.d(t,{default:()=>fe});var n=r(324586),i=r(603514),o=r.n(i),a=r(586330),s=r(230414),c=r(85018),u=r(929296),d=r(195309),l=r(972715),p=r(896314),f=r(141351),h=r(663673),y=r(241440),g=r(508977),w=r(507140),A=r(657355),v=r(424754),m=r(584186),b=r(232471),k=r(34344);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,l.A)(e);if(t){var i=(0,l.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var T=function(e){(0,u.A)(KeyringExternal,e);var t=_createSuper(KeyringExternal);function KeyringExternal(){return t.apply(this,arguments)}var r=KeyringExternal.prototype;return r.signMessage=function signMessage(e){throw new w.MS},r.signTransaction=function signTransaction(e){throw new w.MS},(0,s.A)(KeyringExternal)}(r(597194).g),I=r(92730),x=r(903403),S=r(491317),P=r(27580),C=r(514527),O=r(491180),K=r(825145),_=r(606777),N=r(64238);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function normalizeSuiCoinType(e){if(e!==f.Ac){var[t,r,n]=e.split("::");if(r&&n)try{return`${(0,h.t4)(t).toLowerCase()}::${r}::${n}`}catch{}}return e}function toTransaction(e,t,r){return _toTransaction.apply(this,arguments)}function _toTransaction(){return(_toTransaction=(0,a.A)((function*(e,t,r){var n;if(r instanceof Uint8Array)n=r;else{var i=p.Z.from(r.rawTx);i.setSenderIfNotSet(t),n=yield i.build({client:e})}return n}))).apply(this,arguments)}var E=r(901048).Buffer;function KeyringHardware_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function KeyringHardware_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?KeyringHardware_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KeyringHardware_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function KeyringHardware_createSuper(e){var t=KeyringHardware_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,l.A)(e);if(t){var i=(0,l.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.A)(this,r)}}function KeyringHardware_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KeyringHardware_isNativeReflectConstruct=function(){return!!e})()}var B=function(e){(0,u.A)(KeyringHardware,e);var t=KeyringHardware_createSuper(KeyringHardware);function KeyringHardware(...e){var r;return(r=t.call(this,...e)).coreApi=g.A.sui.hd,r.hwSdkNetwork="sui",r}var r,n,i,o=KeyringHardware.prototype;return o.buildHwAllNetworkPrepareAccountsParams=(r=(0,a.A)((function*(e){return{network:this.hwSdkNetwork,path:e.path,showOnOneKey:!1}})),function buildHwAllNetworkPrepareAccountsParams(e){return r.apply(this,arguments)}),o.prepareAccounts=function prepareAccounts(e){var t,r=this;return this.basePrepareHdNormalAccounts(e,{buildAddressesInfo:(t=(0,a.A)((function*({usedIndexes:t}){var n,i=yield r.baseGetDeviceAccountAddresses({params:e,usedIndexes:t,sdkGetAddressFn:(n=(0,a.A)((function*({connectId:n,deviceId:i,pathPrefix:o,template:a,showOnOnekeyFn:s}){var c=yield r.getAllNetworkPrepareAccounts({params:e,usedIndexes:t,hwSdkNetwork:r.hwSdkNetwork,buildPath:function(e){return O.A.buildPathFromTemplate({template:a,index:e.index})},buildResultAccount:function({account:e,index:t}){return{path:e.path,address:e.payload?.address||"",publicKey:e.payload?.publicKey||""}}});if(c)return c;throw new Error("use sdk allNetworkGetAddress instead")})),function sdkGetAddressFn(e){return n.apply(this,arguments)})}),o=[];for(var s of i){var{address:c,path:u,publicKey:d}=s;if(!c)throw new w.Gk("Address is empty");var l={address:v.A.addHexPrefix(c),path:u,publicKey:d||""};o.push(l)}return o})),function buildAddressesInfo(e){return t.apply(this,arguments)})})},o.signTransaction=(n=(0,a.A)((function*(e){var t=yield this.getHardwareSDKInstance(),r=e.unsignedTx.encodedTx,n=(0,K.wT)(e.deviceParams),{connectId:i,deviceId:o}=n.dbDevice,a=yield this.vault.getAccount(),s=(0,K.wT)(a.pub),c=yield this.vault.getClient(),u=yield toTransaction(c,r.sender,r),d=(0,P.h)(u),l=yield t.suiSignTransaction(i,o,KeyringHardware_objectSpread({path:a.path,rawTx:v.A.hexlify(E.from(d))},e.deviceParams?.deviceCommonParams));if(l.success){var{signature:p}=l.payload,f=(0,I.C)({signatureScheme:"ED25519",signature:_.A.hexToBytes(p),publicKey:new x.G(_.A.hexToBytes(s))});return{txid:"",rawTx:(0,S.nk)(u),signatureScheme:"ed25519",signature:f,publicKey:v.A.addHexPrefix(s),encodedTx:e.unsignedTx.encodedTx}}throw(0,C.MP)(l.payload)})),function signTransaction(e){return n.apply(this,arguments)}),o.signMessage=(i=(0,a.A)((function*(e){var t,r=yield this.getHardwareSDKInstance(),n=(0,K.wT)(e.deviceParams),{connectId:i,deviceId:o}=n.dbDevice,s=yield this.vault.getAccount(),c=yield Promise.all(e.messages.map((t=(0,a.A)((function*(t){var n=yield r.suiSignMessage(i,o,KeyringHardware_objectSpread(KeyringHardware_objectSpread({},e.deviceParams?.deviceCommonParams),{},{messageHex:v.A.hexlify(_.A.hexToBytes(t.message)),path:s.path}));if(!n.success)throw(0,C.MP)(n.payload);return(0,I.C)({signatureScheme:"ED25519",signature:_.A.hexToBytes(n.payload.signature),publicKey:new x.G(_.A.hexToBytes((0,K.wT)(s.pub)))})})),function(e){return t.apply(this,arguments)})));return c})),function signMessage(e){return i.apply(this,arguments)}),(0,s.A)(KeyringHardware)}(N.V),R=r(129441),H=r(901048).Buffer;function KeyringHd_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function KeyringHd_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?KeyringHd_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KeyringHd_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function KeyringHd_createSuper(e){var t=KeyringHd_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,l.A)(e);if(t){var i=(0,l.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.A)(this,r)}}function KeyringHd_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KeyringHd_isNativeReflectConstruct=function(){return!!e})()}var j=function(e){(0,u.A)(KeyringHd,e);var t=KeyringHd_createSuper(KeyringHd);function KeyringHd(...e){var r;return(r=t.call(this,...e)).coreApi=g.A.sui.hd,r}var r,n,i,o,c,d=KeyringHd.prototype;return d.getPrivateKeys=(r=(0,a.A)((function*(e){return this.baseGetPrivateKeys(e)})),function getPrivateKeys(e){return r.apply(this,arguments)}),d.exportAccountSecretKeys=(n=(0,a.A)((function*(e){return this.baseExportAccountSecretKeys(e)})),function exportAccountSecretKeys(e){return n.apply(this,arguments)}),d.prepareAccounts=(i=(0,a.A)((function*(e){return this.basePrepareAccountsHd(e)})),function prepareAccounts(e){return i.apply(this,arguments)}),d.signTransaction=(o=(0,a.A)((function*(e){var{unsignedTx:t}=e,r=t.encodedTx,n=yield this.vault.getClient(),i=yield toTransaction(n,r.sender,r),o=H.from(i).toString("hex");return this.baseSignTransaction(KeyringHd_objectSpread(KeyringHd_objectSpread({},e),{},{unsignedTx:KeyringHd_objectSpread(KeyringHd_objectSpread({},e.unsignedTx),{},{rawTxUnsigned:o})}))})),function signTransaction(e){return o.apply(this,arguments)}),d.signMessage=(c=(0,a.A)((function*(e){return this.baseSignMessage(e)})),function signMessage(e){return c.apply(this,arguments)}),(0,s.A)(KeyringHd)}(R.R),D=r(275061),M=r(901048).Buffer;function KeyringImported_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function KeyringImported_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?KeyringImported_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KeyringImported_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function KeyringImported_createSuper(e){var t=KeyringImported_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,l.A)(e);if(t){var i=(0,l.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.A)(this,r)}}function KeyringImported_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KeyringImported_isNativeReflectConstruct=function(){return!!e})()}var F=function(e){(0,u.A)(KeyringImported,e);var t=KeyringImported_createSuper(KeyringImported);function KeyringImported(...e){var r;return(r=t.call(this,...e)).coreApi=g.A.sui.imported,r}var r,n,i,o,c,d=KeyringImported.prototype;return d.getPrivateKeys=(r=(0,a.A)((function*(e){return this.baseGetPrivateKeys(e)})),function getPrivateKeys(e){return r.apply(this,arguments)}),d.exportAccountSecretKeys=(n=(0,a.A)((function*(e){return this.baseExportAccountSecretKeys(e)})),function exportAccountSecretKeys(e){return n.apply(this,arguments)}),d.prepareAccounts=(i=(0,a.A)((function*(e){return this.basePrepareAccountsImported(e)})),function prepareAccounts(e){return i.apply(this,arguments)}),d.signTransaction=(o=(0,a.A)((function*(e){var{unsignedTx:t}=e,r=t.encodedTx,n=yield this.vault.getClient(),i=yield toTransaction(n,r.sender,r),o=M.from(i).toString("hex");return this.baseSignTransaction(KeyringImported_objectSpread(KeyringImported_objectSpread({},e),{},{unsignedTx:KeyringImported_objectSpread(KeyringImported_objectSpread({},e.unsignedTx),{},{rawTxUnsigned:o})}))})),function signTransaction(e){return o.apply(this,arguments)}),d.signMessage=(c=(0,a.A)((function*(e){return this.baseSignMessage(e)})),function signMessage(e){return c.apply(this,arguments)}),(0,s.A)(KeyringImported)}(D.V);function KeyringWatching_createSuper(e){var t=KeyringWatching_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,l.A)(e);if(t){var i=(0,l.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.A)(this,r)}}function KeyringWatching_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KeyringWatching_isNativeReflectConstruct=function(){return!!e})()}var V=function(e){(0,u.A)(KeyringWatching,e);var t,r=KeyringWatching_createSuper(KeyringWatching);function KeyringWatching(){return r.apply(this,arguments)}return KeyringWatching.prototype.prepareAccounts=(t=(0,a.A)((function*(e){return(0,c.A)((0,l.A)(KeyringWatching.prototype),"basePrepareSimpleWatchingAccounts",this).call(this,e)})),function prepareAccounts(e){return t.apply(this,arguments)}),(0,s.A)(KeyringWatching)}(r(7440).w),U=r(860381),G=r(816504);const q=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,W=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;const L={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class SuiHTTPTransportError extends Error{}class JsonRpcError extends SuiHTTPTransportError{constructor(e,t){super(e),this.code=t,this.type=L[t]??"ServerError"}}class SuiHTTPStatusError extends SuiHTTPTransportError{constructor(e,t,r){super(e),this.status=t,this.statusText=r}}var $,z,X,J,Z,Y,Q,ee,te,__typeError=e=>{throw TypeError(e)},__accessCheck=(e,t,r)=>t.has(e)||__typeError("Cannot "+r),__privateGet=(e,t,r)=>(__accessCheck(e,t,"read from private field"),r?r.call(e):t.get(e)),__privateAdd=(e,t,r)=>t.has(e)?__typeError("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),__privateSet=(e,t,r,n)=>(__accessCheck(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),__privateMethod=(e,t,r)=>(__accessCheck(e,t,"access private method"),r);const re={WebSocketConstructor:"undefined"!=typeof WebSocket?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class WebsocketClient{constructor(e,t={}){if(__privateAdd(this,Q),__privateAdd(this,$,0),__privateAdd(this,z,0),__privateAdd(this,X,null),__privateAdd(this,J,null),__privateAdd(this,Z,new Set),__privateAdd(this,Y,new Map),this.endpoint=e,this.options={...re,...t},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=function getWebsocketUrl(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}(this.endpoint))}async makeRequest(e,t){const r=await __privateMethod(this,Q,ee).call(this);return new Promise(((n,i)=>{__privateSet(this,$,__privateGet(this,$)+1),__privateGet(this,Y).set(__privateGet(this,$),{resolve:n,reject:i,timeout:setTimeout((()=>{__privateGet(this,Y).delete(__privateGet(this,$)),i(new Error(`Request timeout: ${e}`))}),this.options.callTimeout)}),r.send(JSON.stringify({jsonrpc:"2.0",id:__privateGet(this,$),method:e,params:t}))})).then((({error:e,result:t})=>{if(e)throw new JsonRpcError(e.message,e.code);return t}))}async subscribe(e){const t=new RpcSubscription(e);return __privateGet(this,Z).add(t),await t.subscribe(this),()=>t.unsubscribe(this)}}$=new WeakMap,z=new WeakMap,X=new WeakMap,J=new WeakMap,Z=new WeakMap,Y=new WeakMap,Q=new WeakSet,ee=function(){return __privateGet(this,J)||__privateSet(this,J,new Promise((e=>{__privateGet(this,X)?.close(),__privateSet(this,X,new this.options.WebSocketConstructor(this.endpoint)),__privateGet(this,X).addEventListener("open",(()=>{__privateSet(this,z,0),e(__privateGet(this,X))})),__privateGet(this,X).addEventListener("close",(()=>{var e,t,r,n;(e=this,t=z,{set _(n){__privateSet(e,t,n,r)},get _(){return __privateGet(e,t,n)}})._++,__privateGet(this,z)<=this.options.maxReconnects&&setTimeout((()=>{__privateMethod(this,Q,te).call(this)}),this.options.reconnectTimeout)})),__privateGet(this,X).addEventListener("message",(({data:e})=>{let t;try{t=JSON.parse(e)}catch(t){return void console.error(new Error(`Failed to parse RPC message: ${e}`,{cause:t}))}if("id"in t&&null!=t.id&&__privateGet(this,Y).has(t.id)){const{resolve:e,timeout:r}=__privateGet(this,Y).get(t.id);clearTimeout(r),e(t)}else if("params"in t){const{params:e}=t;__privateGet(this,Z).forEach((t=>{t.subscriptionId===e.subscription&&e.subscription===t.subscriptionId&&t.onMessage(e.result)}))}}))}))),__privateGet(this,J)},te=async function(){return __privateGet(this,X)?.close(),__privateSet(this,J,null),Promise.allSettled([...__privateGet(this,Z)].map((e=>e.subscribe(this))))};class RpcSubscription{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:t}=this;return this.subscribed=!1,null!=t&&(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[t]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const t=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=t)}}var ne,ie,oe,ae,se,http_transport_typeError=e=>{throw TypeError(e)},http_transport_accessCheck=(e,t,r)=>t.has(e)||http_transport_typeError("Cannot "+r),http_transport_privateGet=(e,t,r)=>(http_transport_accessCheck(e,t,"read from private field"),r?r.call(e):t.get(e)),http_transport_privateAdd=(e,t,r)=>t.has(e)?http_transport_typeError("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),http_transport_privateSet=(e,t,r,n)=>(http_transport_accessCheck(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);class SuiHTTPTransport{constructor(e){http_transport_privateAdd(this,ae),http_transport_privateAdd(this,ne,0),http_transport_privateAdd(this,ie),http_transport_privateAdd(this,oe),http_transport_privateSet(this,ie,e)}fetch(e,t){const r=http_transport_privateGet(this,ie).fetch??fetch;if(!r)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return r(e,t)}async request(e){http_transport_privateSet(this,ne,http_transport_privateGet(this,ne)+1);const t=await this.fetch(http_transport_privateGet(this,ie).rpc?.url??http_transport_privateGet(this,ie).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":"1.13.0","Client-Target-Api-Version":"1.36.0",...http_transport_privateGet(this,ie).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:http_transport_privateGet(this,ne),method:e.method,params:e.params})});if(!t.ok)throw new SuiHTTPStatusError(`Unexpected status code: ${t.status}`,t.status,t.statusText);const r=await t.json();if("error"in r&&null!=r.error)throw new JsonRpcError(r.error.message,r.error.code);return r.result}async subscribe(e){const t=await(r=this,n=ae,i=se,http_transport_accessCheck(r,n,"access private method"),i).call(this).subscribe(e);var r,n,i;return async()=>!!await t()}}ne=new WeakMap,ie=new WeakMap,oe=new WeakMap,ae=new WeakSet,se=function(){if(!http_transport_privateGet(this,oe)){const e=http_transport_privateGet(this,ie).WebSocketConstructor??WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");http_transport_privateSet(this,oe,new WebsocketClient(http_transport_privateGet(this,ie).websocket?.url??http_transport_privateGet(this,ie).url,{WebSocketConstructor:e,...http_transport_privateGet(this,ie).websocket}))}return http_transport_privateGet(this,oe)};const ce=Symbol.for("@mysten/SuiClient");function ClientSui_createSuper(e){var t=ClientSui_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,l.A)(e);if(t){var i=(0,l.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.A)(this,r)}}function ClientSui_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ClientSui_isNativeReflectConstruct=function(){return!!e})()}var ue=function(e){(0,u.A)(OneKeySuiClient,e);var t=ClientSui_createSuper(OneKeySuiClient);function OneKeySuiClient(){return t.apply(this,arguments)}return(0,s.A)(OneKeySuiClient)}(class SuiClient{get[ce](){return!0}constructor(e){this.transport=e.transport??new SuiHTTPTransport({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!(0,h.AP)((0,h.t4)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!(0,h.AP)((0,h.t4)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!(0,h.AP)((0,h.t4)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!(0,h.AP)((0,h.t4)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,t){return await this.transport.request({method:e,params:t})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!(0,h.AP)((0,h.t4)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!(0,h.qD)((0,h.fN)(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){e.ids.forEach((e=>{if(!e||!(0,h.qD)((0,h.fN)(e)))throw new Error(`Invalid Sui Object id ${e}`)}));if(e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,"descending"===(e.order||"descending")]})}async getTransactionBlock(e){if(!(0,h.n4)(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){e.digests.forEach((e=>{if(!(0,h.n4)(e))throw new Error(`Invalid Transaction digest ${e}`)}));if(e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:t,options:r,requestType:n}){const i=await this.transport.request({method:"sui_executeTransactionBlock",params:["string"==typeof e?e:(0,S.nk)(e),Array.isArray(t)?t:[t],r]});if("WaitForLocalExecution"===n)try{await this.waitForTransaction({digest:i.digest})}catch(e){}return i}async signAndExecuteTransaction({transaction:e,signer:t,...r}){let n;e instanceof Uint8Array?n=e:(e.setSenderIfNotSet(t.toSuiAddress()),n=await e.build({client:this}));const{signature:i,bytes:o}=await t.signTransaction(n);return this.executeTransactionBlock({transactionBlock:o,signature:i,...r})}async getTotalTransactionBlocks(){const e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){const e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!(0,h.AP)((0,h.t4)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach((e=>{if(!e||!(0,h.qD)((0,h.fN)(e)))throw new Error(`Invalid Sui Stake id ${e}`)})),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,"descending"===(e.order||"descending")]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){let t;if((0,p.b)(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),t=(0,S.nk)(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if("string"==typeof e.transactionBlock)t=e.transactionBlock;else{if(!(e.transactionBlock instanceof Uint8Array))throw new Error("Unknown transaction block format.");t=(0,S.nk)(e.transactionBlock)}return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,t,e.gasPrice?.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:["string"==typeof e.transactionBlock?e.transactionBlock:(0,S.nk)(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!(0,h.qD)((0,h.fN)(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){const e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const e=await this.getCheckpoint({id:"0"}),t=(0,U.n3)(e.digest);return(0,G.nj)(t.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...t}){const{nextCursor:r,hasNextPage:n,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[t.address,t.cursor,t.limit]});return{hasNextPage:n,nextCursor:r,data:i.map((t=>function normalizeSuiNSName(e,t="at"){const r=e.toLowerCase();let n;if(r.includes("@")){if(!q.test(r))throw new Error(`Invalid SuiNS name ${e}`);const[t,i]=r.split("@");n=[...t?t.split("."):[],i]}else{if(!W.test(r))throw new Error(`Invalid SuiNS name ${e}`);n=r.split(".").slice(0,-1)}return"dot"===t?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}(t,e)))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version]})}async waitForTransaction({signal:e,timeout:t=6e4,pollInterval:r=2e3,...n}){const i=AbortSignal.timeout(t),o=new Promise(((e,t)=>{i.addEventListener("abort",(()=>t(i.reason)))}));for(o.catch((()=>{}));!i.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(n)}catch(e){await Promise.race([new Promise((e=>setTimeout(e,r))),o])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}),de=function(){function OneKeySuiTransport({backgroundApi:e,networkId:t}){this.backgroundApi=e,this.networkId=t}var e,t,r=OneKeySuiTransport.prototype;return r.request=(e=(0,a.A)((function*(e){var t=yield this.backgroundApi.serviceAccountProfile.sendProxyRequest({networkId:this.networkId,body:[{route:"rpc",params:{method:e.method,params:e.params}}]}),r=t?.[0];if(!r)throw new Error("No response received from the proxy");return r})),function request(t){return e.apply(this,arguments)}),r.subscribe=(t=(0,a.A)((function*(){throw new Error("Subscription not implemented")})),function subscribe(){return t.apply(this,arguments)}),(0,s.A)(OneKeySuiTransport)}(),le=function(e){return e.ContractInteraction="ContractInteraction",e.TokenTransfer="Token Transfer",e.Unknown="UNKNOWN",e}({});function _getAllCoinsByCoinType(){return(_getAllCoinsByCoinType=(0,a.A)((function*({client:e,address:t,coinType:r}){for(var n=null,i=[],o=!0,a=0;o&&a<5;)try{var s=yield e.getCoins({owner:t,coinType:r,cursor:n,limit:50}),{data:c,nextCursor:u,hasNextPage:d}=s;c&&c.length&&i.push(...c),n=u,o=d,a=0}catch(e){if((a+=1)>=5)throw new Error("Failed to fetch coins, maximum retry attempts reached");yield m.A.wait(300)}return i}))).apply(this,arguments)}function _createTokenTransaction(){return _createTokenTransaction=(0,a.A)((function*({client:e,sender:t,recipient:r,amount:n,coinType:i,maxSendNativeToken:o=!1}){var a=new p.Z,s=yield function getAllCoinsByCoinType(e){return _getAllCoinsByCoinType.apply(this,arguments)}({client:e,address:t,coinType:i}),c=s.reduce((function(e,t){return e.plus(t.balance)}),new y.A(0));if(c.lt(n))throw new Error("Insufficient balance");if(o&&i===f.Ac)return a.transferObjects([a.gas],r),a.setGasPayment(s.filter((function(e){return normalizeSuiCoinType(e.coinType)===normalizeSuiCoinType(i)})).map((function(e){return{objectId:e.coinObjectId,digest:e.digest,version:e.version}}))),a;if(i===f.Ac){var u=a.splitCoins(a.gas,[n]);a.transferObjects([u],r)}else{var[d,...l]=s.filter((function(e){return normalizeSuiCoinType(e.coinType)===normalizeSuiCoinType(i)})),h=a.object(d.coinObjectId);l.length&&a.mergeCoins(h,l.map((function(e){return a.object(e.coinObjectId)})));var g=a.splitCoins(h,[n]);a.transferObjects([g],r)}return a})),_createTokenTransaction.apply(this,arguments)}const pe={createTokenTransaction:function createTokenTransaction(e){return _createTokenTransaction.apply(this,arguments)},analyzeTransactionType:function analyzeTransactionType(e){var t=e.getData().commands;return t.some((function(e){return"MoveCall"===e.$kind}))?le.ContractInteraction:t.filter((function(e){return"TransferObjects"===e.$kind})).length?le.TokenTransfer:le.Unknown},parseTransferDetails:function parseTransferDetails({balanceChanges:e}){var t=[],r=new Map;e.forEach((function(e){var t=r.get(e.coinType)||[];t.push(e),r.set(e.coinType,t)}));var _loop=function(e){var r=i.filter((function(e){return new y.A(e.amount).isLessThan(0)})),n=i.filter((function(e){return new y.A(e.amount).isGreaterThan(0)}));if(e===f.Ac)if(1===r.length&&0===n.length){var o=r[0];t.push({from:o.owner.AddressOwner,to:o.owner.AddressOwner,amount:new y.A(0).toString(),tokenAddress:e,gasFee:new y.A(o.amount).abs().toString()})}else n.length>0&&n.forEach((function(n){var i=r.sort((function(e,t){return new y.A(t.amount).minus(e.amount).toNumber()}))[0];if(i){var o=new y.A(n.amount),a=new y.A(i.amount).abs().minus(o);t.push({from:i.owner.AddressOwner,to:n.owner.AddressOwner,amount:o.toString(),tokenAddress:e,gasFee:a.toString()})}}));else n.length>0&&n.forEach((function(n){var i=r.sort((function(e,t){return new y.A(t.amount).minus(e.amount).toNumber()}))[0];i&&t.push({from:i.owner.AddressOwner,to:n.owner.AddressOwner,amount:new y.A(n.amount).toString(),tokenAddress:e})}))};for(var[n,i]of r.entries())_loop(n);return t},parseMoveCall:function parseMoveCall(e){var t=e.getData();if(!t.commands||!t.commands.length)return null;var r=t.commands.find((function(e){return"MoveCall"===e.$kind}));if(!r?.MoveCall)return null;var n=r.MoveCall.function;return{contractName:n,contractTo:`${r.MoveCall.module}::${n}`}}};function Vault_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vault_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vault_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vault_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vault_createSuper(e){var t=Vault_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,l.A)(e);if(t){var i=(0,l.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.A)(this,r)}}function Vault_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vault_isNativeReflectConstruct=function(){return!!e})()}var fe=function(e){(0,u.A)(Vault,e);var t=Vault_createSuper(Vault);function Vault(...e){var r;return(r=t.call(this,...e)).coreApi=g.A.sui.hd,r.keyringMap={hd:j,qr:void 0,hw:B,imported:F,watching:V,external:T},r.getClientCache=(0,A.EO)((0,a.A)((function*(){return r.getSuiClient()})),{promise:!0,max:1,maxAge:m.A.getTimeDurationMs({minute:3})}),r}var r,n,i,d,k,I,x,S,P,C,O,K,_,N=Vault.prototype;return N.getClient=(r=(0,a.A)((function*(){return this.getClientCache()})),function getClient(){return r.apply(this,arguments)}),N.getSuiClient=function getSuiClient(){var e=new de({backgroundApi:this.backgroundApi,networkId:this.networkId});return new ue({transport:e})},N.buildAccountAddressDetail=function buildAccountAddressDetail(e){var{account:t,networkId:r}=e,{address:n}=t;return Promise.resolve({networkId:r,normalizedAddress:n,displayAddress:n,address:n,baseAddress:n,isValid:!0,allowEmptyAddress:!1})},N.buildEncodedTx=(n=(0,a.A)((function*(e){var{transfersInfo:t}=e;if(!t||o()(t))throw new w.He("transfersInfo is required");if(t.length>1)throw new w.He("Batch transfer is not supported");var r=t[0];if(!r.to)throw new Error("buildEncodedTx ERROR: transferInfo.to is missing");var{to:n,amount:i,tokenInfo:a}=r,s=yield this.getAccount(),c=v.A.addHexPrefix(n),u=v.A.addHexPrefix(s.address);if(!a||"number"!=typeof a.decimals||a.decimals<0)throw new w.He("Token decimals is required");var d=new y.A(i).shiftedBy(a.decimals).toFixed(),l=yield this.getClient();return{rawTx:(yield pe.createTokenTransaction({client:l,sender:u,recipient:c,amount:d,coinType:a.address})).serialize(),sender:s.address}})),function buildEncodedTx(e){return n.apply(this,arguments)}),N.buildDecodedTx=(i=(0,a.A)((function*(e){var t,r=this,{unsignedTx:n}=e,i=n?.encodedTx,{swapInfo:o}=n,s=p.Z.from(i.rawTx);s.setSender(null!=(t=s.blockData.sender)?t:yield this.getAccountAddress());var c,u,d=pe.analyzeTransactionType(s),l=yield this.getNetwork(),f=yield this.getAccount(),h=[];if(d===le.TokenTransfer)if(n.transfersInfo?.[0]){var g,w,A,v,m,{from:k,to:T,amount:I,tokenInfo:x}=n.transfersInfo[0],S=yield this.backgroundApi.serviceToken.getToken({networkId:this.networkId,accountId:this.accountId,tokenIdOnNetwork:null!=(g=x?.address)?g:""}),P=yield this.buildTxTransferAssetAction({from:k,to:T,transfers:[{from:k,to:T,amount:I,icon:null!=(w=S?.logoURI)?w:"",symbol:null!=(A=S?.symbol)?A:"",name:null!=(v=S?.name)?v:"",tokenIdOnNetwork:null!=(m=S?.address)?m:"",isNative:S?.isNative}]});h.push(P)}else{var C=yield this.getClient(),O=yield s.build({client:C}),K=yield C.dryRunTransactionBlock({transactionBlock:O}),_=pe.parseTransferDetails({balanceChanges:K.balanceChanges});if(_.length>0){var N=yield this.buildTxTransferAssetAction({from:_[0].from,to:_[0].to,transfers:(yield Promise.all(_.map((c=(0,a.A)((function*(e){var t,n,i,o,a=yield r.backgroundApi.serviceToken.getToken({networkId:r.networkId,accountId:r.accountId,tokenIdOnNetwork:e.tokenAddress});return null==a?.decimals||Number.isNaN(a?.decimals)?null:{from:e.from,to:e.to,amount:new y.A(e.amount).shiftedBy(-a.decimals).toString(),icon:null!=(t=a?.logoURI)?t:"",symbol:null!=(n=a?.symbol)?n:"",name:null!=(i=a?.name)?i:"",tokenIdOnNetwork:null!=(o=a?.address)?o:"",isNative:a?.isNative}})),function(e){return c.apply(this,arguments)})))).filter(Boolean)});h.push(N)}}else if(d===le.ContractInteraction){var E,B=pe.parseMoveCall(s);B&&h.push({type:b.kF.FUNCTION_CALL,functionCall:{from:f.address,to:B.contractTo,functionName:B.contractName,icon:null!=(E=l.logoURI)?E:"",args:[]}})}if(o){var R=n.transfersInfo?.[0]?.to||h?.[0]?.assetTransfer?.to;h=[yield this.buildInternalSwapAction({swapInfo:o,swapToAddress:R})]}0===h.length&&h.push({type:b.kF.UNKNOWN,unknownAction:{from:f.address,to:"",icon:null!=(u=l.logoURI)?u:""}});var H={txid:"",owner:f.address,signer:f.address,nonce:0,actions:h,status:b.Y1.Pending,networkId:this.networkId,accountId:this.accountId,extraInfo:null,encodedTx:i};return Promise.resolve(H)})),function buildDecodedTx(e){return i.apply(this,arguments)}),N.buildUnsignedTx=(d=(0,a.A)((function*(e){var t,r=null!=(t=e.encodedTx)?t:yield this.buildEncodedTx(e);if(r)return{encodedTx:r,transfersInfo:e.transfersInfo};throw new w.He})),function buildUnsignedTx(e){return d.apply(this,arguments)}),N.updateUnsignedTx=(k=(0,a.A)((function*(e){var t=yield this.getClient(),{unsignedTx:r,nativeAmountInfo:n,feeInfo:i}=e,o=r.encodedTx;if(n?.maxSendAmount){var a,{rawTx:s}=o,c=p.Z.from(s);if(pe.analyzeTransactionType(c)!==le.TokenTransfer)return Promise.resolve(r);if(!r.transfersInfo?.[0]?.to)throw new w.He("Invalid transfer object");var u=yield pe.createTokenTransaction({client:t,sender:null!=(a=c.blockData.sender)?a:yield this.getAccountAddress(),recipient:r.transfersInfo[0].to,amount:n.maxSendAmount,coinType:f.Ac,maxSendNativeToken:!0}),d=Vault_objectSpread(Vault_objectSpread({},o),{},{rawTx:u.serialize()});return Vault_objectSpread(Vault_objectSpread({},r),{},{encodedTx:d})}if(i?.gas?.gasLimit&&i?.gas?.gasPrice){var l=p.Z.from(o.rawTx);l.blockData.gasConfig.price=i.gas.gasPrice,l.blockData.gasConfig.budget=i.gas.gasLimit;var h=Vault_objectSpread(Vault_objectSpread({},o),{},{rawTx:l.serialize()});return Vault_objectSpread(Vault_objectSpread({},r),{},{encodedTx:h})}return Promise.resolve(r)})),function updateUnsignedTx(e){return k.apply(this,arguments)}),N.broadcastTransaction=(I=(0,a.A)((function*(e){try{var{signature:t,publicKey:r,rawTx:n,encodedTx:i}=e.signedTx;if(!t)throw new Error("signature is empty");if(!r)throw new Error("publicKey is empty");var o=yield this.backgroundApi.serviceSend.broadcastTransaction({accountId:this.accountId,networkId:this.networkId,signedTx:e.signedTx,accountAddress:(yield this.getAccount()).address,signature:t});return Vault_objectSpread(Vault_objectSpread({},e.signedTx),{},{txid:o})}catch(e){var{errorCode:a,message:s}=e||{},c=`${null!=a?a:""} ${s}`;throw-1!==s.indexOf("Insufficient gas:")?new w.He("msg__broadcast_tx_Insufficient_fee"):new w.He(c)}})),function broadcastTransaction(e){return I.apply(this,arguments)}),N.validateAddress=function validateAddress(e){var t=(0,h.AP)(e);return Promise.resolve({isValid:t,normalizedAddress:t?e:"",displayAddress:t?e:""})},N.validateXpub=function validateXpub(e){return Promise.resolve({isValid:!1})},N.getPrivateKeyFromImported=(x=(0,a.A)((function*(e){return(0,c.A)((0,l.A)(Vault.prototype),"baseGetPrivateKeyFromImported",this).call(this,e)})),function getPrivateKeyFromImported(e){return x.apply(this,arguments)}),N.validateXprvt=function validateXprvt(e){return Promise.resolve({isValid:!1})},N.validatePrivateKey=(S=(0,a.A)((function*(e){return/^(0x)?[0-9a-zA-Z]{64}$/.test(e)?this.baseValidatePrivateKey(e):{isValid:!1}})),function validatePrivateKey(e){return S.apply(this,arguments)}),N.validateGeneralInput=(P=(0,a.A)((function*(e){var{result:t}=yield this.baseValidateGeneralInput(e);return t})),function validateGeneralInput(e){return P.apply(this,arguments)}),N.waitPendingTransaction=(C=(0,a.A)((function*(e,t){return function utils_waitPendingTransaction(e,t,r,n=!0,i=10){var o,s=0,c=(o=(0,a.A)((function*(o=2e3){var a;s+=1;try{a=yield e.getTransactionBlock({digest:t,options:_objectSpread(_objectSpread({},r),{},{showEffects:!0})})}catch(e){if(n&&-32e3!==e.code&&-32602!==e.code)return Promise.reject(new w.oZ(e))}return 1==("success"===a?.effects?.status?.status)?Promise.resolve(a):s>i?Promise.reject(new w.oZ("transaction timeout")):new Promise((function(e){return setTimeout((function(){return e(c(o))}),o)}))})),function poll(){return o.apply(this,arguments)});return c()}(yield this.getClient(),e,t)})),function waitPendingTransaction(e,t){return C.apply(this,arguments)}),N.getCustomRpcEndpointStatus=(O=(0,a.A)((function*(e){var t=new ue({url:e.rpcUrl}),r=performance.now(),n=yield t.getTotalTransactionBlocks();return{responseTime:Math.floor(performance.now()-r),bestBlockNumber:Number(n)}})),function getCustomRpcEndpointStatus(e){return O.apply(this,arguments)}),N.broadcastTransactionFromCustomRpc=(K=(0,a.A)((function*(e){try{var{customRpcInfo:t,signedTx:r}=e,{signature:n,publicKey:i,rawTx:o,encodedTx:a}=r,s=t.rpc;if(!s)throw new w.He("Invalid rpc url");if(!n)throw new Error("signature is empty");if(!i)throw new Error("publicKey is empty");var c=new ue({url:s}),u=(yield c.executeTransactionBlock({transactionBlock:o,signature:n,requestType:r.encodedTx.requestType})).digest;return Vault_objectSpread(Vault_objectSpread({},e.signedTx),{},{txid:u})}catch(e){var{errorCode:d,message:l}=e||{},p=`${null!=d?d:""} ${l}`;throw-1!==l.indexOf("Insufficient gas:")?new w.He("msg__broadcast_tx_Insufficient_fee"):new w.He(p)}})),function broadcastTransactionFromCustomRpc(e){return K.apply(this,arguments)}),N.buildOkxSwapEncodedTx=(_=(0,a.A)((function*(e){var t=yield this.getAccountAddress();if(e.okxTx.from!==t)throw new w.He("Invalid from address");var r={rawTx:p.Z.from(e.okxTx.data).serialize(),sender:e.okxTx.from};return Promise.resolve(r)})),function buildOkxSwapEncodedTx(e){return _.apply(this,arguments)}),(0,s.A)(Vault)}(k.S)},583354:(e,t,r)=>{r.d(t,{D:()=>i,U:()=>n});var n=function(e){return e.hd="hd",e.qr="qr",e.hardware="hardware",e.imported="imported",e.watching="watching",e.external="external",e}({}),i=function(e){return e.DEPOSIT="deposit",e.WITHDRAW="withdraw",e}({})}}]);
//# sourceMappingURL=29404.b189487556.chunk.js.map