{"version":3,"file":"static/js/56491.0ab08e78af.chunk.js","mappings":"6uBAAmuG,QAA9+E,SAASA,iBAAiB,IAAIC,GAAK,SAAcC,GAAM,WAAc,UAACC,EAAS,UAACC,EAAS,eAACC,EAAc,YAACC,GAAaJ,EAAMK,QAAU,QAACC,EAAO,QAACC,IAAS,OAAe,CAACL,YAAUD,cAAgBO,GAAW,SAAuBC,GAAS,IAAAC,WAAS,IAAAC,YAAU,WAAW,GAAIP,GAAcH,GAAYC,EAA9B,CAA+C,IAAG,iBAACU,GAAkB,IAA6a,OAA1ZH,EAASI,QAAQC,aAAY,WAAWF,EAAiBG,oBAAoB,CAACX,cAAYF,YAAUD,cAAYe,MAAK,SAASC,GAAQA,EAAIC,UAAS,EAAAC,MAAMC,QAAQ,CAACC,MAAMtB,EAAKuB,cAAc,CAACC,GAAG,EAAAC,cAAcC,8BAA8BC,cAAcjB,EAASI,SAASc,YAAW,WAAWnB,EAAWoB,WAAWpB,EAAWoB,UAAW,GAAE,KAAM,IAAGC,OAAM,SAASC,GAAG,GAAG,GAAE,IAAWC,kBAAkB,CAACC,QAAQ,KAAY,WAAcvB,EAASI,SAASa,cAAcjB,EAASI,QAAU,CAA5gB,CAA8gB,GAAE,CAACT,EAAYH,EAAUC,EAAUH,EAAKS,IAAa,IAAG,SAACyB,IAAU,IAAAC,gBAAmBC,GAAkB,IAAAC,cAAY,WAAWH,EAAS9B,EAAgB,GAAE,CAAC8B,EAAS9B,IAAqBkC,GAAqB,IAAAD,cAAY,WAAW,OAAI9B,GAAUC,GAAUJ,GAAkC,UAAM,WAAU,CAACmC,SAAS,EAAC,SAAK,EAAAC,MAAM,CAACC,aAAa,KAAKC,YAAY,IAAWC,cAAcC,YAAY,iBAAiBC,EAAE,KAAKN,UAAS,SAAK,EAAAO,OAAO,CAACC,MAAM3C,EAAe4C,KAAK,CAACC,IAAIzC,EAAQ0C,SAASC,SAAS,GAAGC,KAAK,SAAQ,SAAK,EAAAC,mBAAmB,CAACC,SAAS,MAAMC,WAAU,EAAMC,GAAG,KAAKC,GAAG,KAAKhB,aAAa,KAAKiB,YAAY,aAAanB,UAAS,SAAK,EAAAoB,YAAY,CAACC,cAAc,EAAEC,UAAU,SAAST,KAAK,UAAUU,MAAM,CAACC,UAAU,aAAaxB,SAASnC,OAAmB,SAAK,EAAA4D,OAAO,CAACR,GAAG,KAAKS,KAAK,eAAeC,QAAQ9B,EAAkBG,SAASvC,EAAKuB,cAAc,CAACC,GAAG,EAAAC,cAAc0C,mBAAxlB,IAA2mB,GAAE,CAAC5D,EAAQ6B,EAAkBpC,EAAKQ,EAAQJ,IAAiB,OAAO,UAAM,EAAAgE,KAAK,CAAC,sBAAsB,OAAO,wBAAwB,iBAAiB,0BAA0B,sGAAsG7B,SAAS,EAAC,SAAK,EAAA6B,KAAKC,OAAO,CAAC/C,MAAMtB,EAAKuB,cAAc,CAACC,GAAG,EAAAC,cAAc6C,mBAAmB,sBAAsB,UAAU,0BAA0B,yGAAwG,SAAK,EAAAF,KAAKG,KAAK,CAACC,KAAK,EAAEC,eAAe,SAASC,WAAW,SAASjB,GAAG,KAAKkB,GAAG,KAAK,sBAAsB,UAAU,0BAA0B,sGAAsGpC,SAASD,QAA4B,C","sources":["webpack://web/../../packages/kit/src/views/Receive/pages/ReceiveInvoice.tsx"],"sourcesContent":["import{useCallback,useEffect,useRef}from'react';import{useRoute}from'@react-navigation/core';import{useIntl}from'react-intl';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import{Button,ConfirmHighlighter,Page,QRCode,SizableText,Stack,Toast,useClipboard}from'@onekeyhq/components';import{ETranslations}from'@onekeyhq/shared/src/locale';import timerUtils from'@onekeyhq/shared/src/utils/timerUtils';import backgroundApiProxy from\"../../../background/instance/backgroundApiProxy\";import{useAccountData}from\"../../../hooks/useAccountData\";import useAppNavigation from\"../../../hooks/useAppNavigation\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ReceiveInvoice(){var intl=useIntl();var route=useRoute();var{networkId,accountId,paymentRequest,paymentHash}=route.params;var{account,network}=useAccountData({accountId,networkId});var navigation=useAppNavigation();var timerRef=useRef();useEffect(function(){if(!paymentHash||!networkId||!accountId)return;var{serviceLightning}=backgroundApiProxy;timerRef.current=setInterval(function(){serviceLightning.fetchSpecialInvoice({paymentHash,accountId,networkId}).then(function(res){if(res.is_paid){Toast.success({title:intl.formatMessage({id:ETranslations.ln_payment_received_label})});clearInterval(timerRef.current);setTimeout(function(){navigation.popStack();navigation.popStack();},500);}}).catch(function(e){});},timerUtils.getTimeDurationMs({seconds:5}));return function(){if(timerRef.current){clearInterval(timerRef.current);}};},[paymentHash,networkId,accountId,intl,navigation]);var{copyText}=useClipboard();var handleCopyInvoice=useCallback(function(){copyText(paymentRequest);},[copyText,paymentRequest]);var renderReceiveInvoice=useCallback(function(){if(!account||!network||!paymentRequest)return null;return _jsxs(_Fragment,{children:[_jsx(Stack,{borderRadius:\"$3\",borderWidth:StyleSheet.hairlineWidth,borderColor:\"$borderSubdued\",p:\"$4\",children:_jsx(QRCode,{value:paymentRequest,logo:{uri:network.logoURI},logoSize:40,size:240})}),_jsx(ConfirmHighlighter,{maxWidth:\"$96\",highlight:false,mt:\"$5\",px:\"$3\",borderRadius:\"$3\",borderCurve:\"continuous\",children:_jsx(SizableText,{numberOfLines:3,textAlign:\"center\",size:\"$bodyLg\",style:{wordBreak:'break-all'},children:paymentRequest})}),_jsx(Button,{mt:\"$5\",icon:\"Copy3Outline\",onPress:handleCopyInvoice,children:intl.formatMessage({id:ETranslations.global_copy})})]});},[account,handleCopyInvoice,intl,network,paymentRequest]);return _jsxs(Page,{\"data-sentry-element\":\"Page\",\"data-sentry-component\":\"ReceiveInvoice\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Receive/pages/ReceiveInvoice.tsx\",children:[_jsx(Page.Header,{title:intl.formatMessage({id:ETranslations.lighting_invoice}),\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Receive/pages/ReceiveInvoice.tsx\"}),_jsx(Page.Body,{flex:1,justifyContent:\"center\",alignItems:\"center\",px:\"$5\",pb:\"$5\",\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Receive/pages/ReceiveInvoice.tsx\",children:renderReceiveInvoice()})]});}export default ReceiveInvoice;"],"names":["ReceiveInvoice","intl","route","networkId","accountId","paymentRequest","paymentHash","params","account","network","navigation","timerRef","useRef","useEffect","serviceLightning","current","setInterval","fetchSpecialInvoice","then","res","is_paid","Toast","success","title","formatMessage","id","ETranslations","ln_payment_received_label","clearInterval","setTimeout","popStack","catch","e","getTimeDurationMs","seconds","copyText","useClipboard","handleCopyInvoice","useCallback","renderReceiveInvoice","children","Stack","borderRadius","borderWidth","hairlineWidth","borderColor","p","QRCode","value","logo","uri","logoURI","logoSize","size","ConfirmHighlighter","maxWidth","highlight","mt","px","borderCurve","SizableText","numberOfLines","textAlign","style","wordBreak","Button","icon","onPress","global_copy","Page","Header","lighting_invoice","Body","flex","justifyContent","alignItems","pb"],"sourceRoot":""}