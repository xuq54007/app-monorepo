{"version":3,"file":"static/js/68129.3403880e4d.chunk.js","mappings":"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","sources":["webpack://web/../../packages/kit/src/components/RenameDialog/renameConsts.ts","webpack://web/../../packages/kit/src/hooks/useDebounce.ts","webpack://web/../../packages/kit/src/views/Onboarding/components/OnboardingOnMount.tsx","webpack://web/../../packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx"],"sourcesContent":["export var MAX_LENGTH_ACCOUNT_NAME=80;","import{useDebounce as useDebounceOriginal}from'use-debounce';export function useDebounce(value,delay,options){var[debounce]=useDebounceOriginal(value,delay,options);return debounce;}export{useDebouncedCallback}from'use-debounce';","import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{memo,useCallback,useEffect,useRef,useState}from'react';import{useIntl}from'react-intl';import{Checkbox,Dialog,YStack}from'@onekeyhq/components';import{useV4migrationPersistAtom}from'@onekeyhq/kit-bg/src/states/jotai/atoms';import{EAppEventBusNames,appEventBus}from'@onekeyhq/shared/src/eventBus/appEventBus';import{ETranslations}from'@onekeyhq/shared/src/locale';import platformEnv from'@onekeyhq/shared/src/platformEnv';import timerUtils from'@onekeyhq/shared/src/utils/timerUtils';import backgroundApiProxy from\"../../../background/instance/backgroundApiProxy\";import useAppNavigation from\"../../../hooks/useAppNavigation\";import{openOnBoardingFromExt,useToOnBoardingPage}from\"../pages\";import{useV4MigrationActions}from\"../pages/V4Migration/hooks/useV4MigrationActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var lastAutoStartV4MigrationTime=0;var isBaseSettingsMigrated=false;var downgradeConfirmDialogShown=false;var isAutoStartV4MigrationShown=false;function DowngradeWarningDialogContent({onConfirm}){var intl=useIntl();var[checkState,setCheckState]=useState(false);var handleConfirm=useCallback(function(){return new Promise(function(resolve){setTimeout(function(){onConfirm(checkState);resolve();},0);});},[checkState,onConfirm]);return _jsxs(YStack,{\"data-sentry-element\":\"YStack\",\"data-sentry-component\":\"DowngradeWarningDialogContent\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/components/OnboardingOnMount.tsx\",children:[_jsx(Dialog.Title,{\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/components/OnboardingOnMount.tsx\",children:intl.formatMessage({id:ETranslations.downgrade_warning_title})}),_jsx(Dialog.Description,{\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/components/OnboardingOnMount.tsx\",children:intl.formatMessage({id:ETranslations.downgrade_warning_description})}),_jsx(Checkbox,{value:checkState,label:intl.formatMessage({id:ETranslations.downgrade_warning_checkbox_label}),onChange:setCheckState,\"data-sentry-element\":\"Checkbox\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/components/OnboardingOnMount.tsx\"}),_jsx(Dialog.Footer,{confirmButtonProps:{disabled:!checkState},onConfirm:handleConfirm,onConfirmText:intl.formatMessage({id:ETranslations.global_i_understand}),showCancelButton:false,\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/components/OnboardingOnMount.tsx\"})]});}function OnboardingOnMountCmp(){var toOnBoardingPage=useToOnBoardingPage();var navigation=useAppNavigation();var v4migrationActions=useV4MigrationActions();var[v4migrationPersistData,setV4MigrationPersistAtom]=useV4migrationPersistAtom();var downgradeWarningConfirmed=v4migrationPersistData?.downgradeWarningConfirmed;var downgradeWarningConfirmedRef=useRef(downgradeWarningConfirmed);downgradeWarningConfirmedRef.current=downgradeWarningConfirmed;var migrateBaseSettings=useCallback(_asyncToGenerator(function*(){var shouldMigrateFromV4=yield backgroundApiProxy.serviceV4Migration.checkShouldMigrateV4OnMount();if(shouldMigrateFromV4){if(!isBaseSettingsMigrated){isBaseSettingsMigrated=true;yield backgroundApiProxy.serviceV4Migration.migrateBaseSettings();}}}),[]);var checkOnboardingState=useCallback(_asyncToGenerator(function*({checkingV4Migration}={}){try{if(checkingV4Migration){var shouldMigrateFromV4=yield backgroundApiProxy.serviceV4Migration.checkShouldMigrateV4OnMount();if(shouldMigrateFromV4){yield migrateBaseSettings();yield timerUtils.wait(600);if(!isAutoStartV4MigrationShown){isAutoStartV4MigrationShown=true;yield v4migrationActions.navigateToV4MigrationPage({isAutoStartOnMount:true});var now=Date.now();if(now-lastAutoStartV4MigrationTime>3000){lastAutoStartV4MigrationTime=now;setV4MigrationPersistAtom(function(v){return _objectSpread(_objectSpread({},v),{},{v4migrationAutoStartCount:(v.v4migrationAutoStartCount||0)+1});});}}return;}}}catch(error){}if(openOnBoardingFromExt()){return;}var{isOnboardingDone}=yield backgroundApiProxy.serviceOnboarding.isOnboardingDone();if(!isOnboardingDone&&!platformEnv.isWebDappMode){void toOnBoardingPage({isFullModal:true});}}),[migrateBaseSettings,setV4MigrationPersistAtom,toOnBoardingPage,v4migrationActions]);var checkStateOnMount=useCallback(_asyncToGenerator(function*(){if(false&&!downgradeWarningConfirmedRef.current){var isV4DbExist=yield backgroundApiProxy.serviceV4Migration.checkIfV4DbExist();if(isV4DbExist&&!downgradeConfirmDialogShown){downgradeConfirmDialogShown=true;downgradeWarningConfirmedRef.current=true;yield migrateBaseSettings();yield timerUtils.wait(600);var dialog=Dialog.show({tone:'warning',icon:'ShieldCheckDoneOutline',showExitButton:false,showCancelButton:false,dismissOnOverlayPress:false,renderContent:_jsx(DowngradeWarningDialogContent,{onConfirm:function(){setV4MigrationPersistAtom(function(v){return _objectSpread(_objectSpread({},v),{},{downgradeWarningConfirmed:true});});void checkOnboardingState({checkingV4Migration:true});void dialog.close();}})});return;}}yield checkOnboardingState({checkingV4Migration:true});}),[checkOnboardingState,migrateBaseSettings,setV4MigrationPersistAtom]);useEffect(function(){},[]);useEffect(function(){},[setV4MigrationPersistAtom]);useEffect(function(){},[navigation]);useEffect(function(){},[v4migrationActions]);useEffect(function(){void checkStateOnMount();},[checkStateOnMount]);useEffect(function(){var fn=function(){void checkOnboardingState({checkingV4Migration:false});};appEventBus.on(EAppEventBusNames.WalletClear,fn);return function(){appEventBus.off(EAppEventBusNames.WalletClear,fn);};},[checkOnboardingState]);return null;}export var OnboardingOnMount=memo(OnboardingOnMountCmp);","import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import{useCallback,useEffect,useMemo,useRef,useState}from'react';import{useIntl}from'react-intl';import{Form,Icon,Input,Page,SegmentControl,SizableText,Stack,Toast,useClipboard,useForm,useFormWatch,useMedia}from'@onekeyhq/components';import backgroundApiProxy from'@onekeyhq/kit/src/background/instance/backgroundApiProxy';import{AccountSelectorProviderMirror,ControlledNetworkSelectorTrigger}from'@onekeyhq/kit/src/components/AccountSelector';import{DeriveTypeSelectorFormInput}from'@onekeyhq/kit/src/components/AccountSelector/DeriveTypeSelectorTrigger';import{useAccountSelectorTrigger}from'@onekeyhq/kit/src/components/AccountSelector/hooks/useAccountSelectorTrigger';import{AddressInput,createValidateAddressRule}from'@onekeyhq/kit/src/components/AddressInput';import{MAX_LENGTH_ACCOUNT_NAME}from'@onekeyhq/kit/src/components/RenameDialog/renameConsts';import useAppNavigation from'@onekeyhq/kit/src/hooks/useAppNavigation';import{useDebounce}from'@onekeyhq/kit/src/hooks/useDebounce';import{usePromiseResult}from'@onekeyhq/kit/src/hooks/usePromiseResult';import{useAccountSelectorActions}from'@onekeyhq/kit/src/states/jotai/contexts/accountSelector';import useScanQrCode from'@onekeyhq/kit/src/views/ScanQrCode/hooks/useScanQrCode';import{getNetworkIdsMap}from'@onekeyhq/shared/src/config/networkIds';import{WALLET_TYPE_WATCHING}from'@onekeyhq/shared/src/consts/dbConsts';import{ETranslations}from'@onekeyhq/shared/src/locale';import{defaultLogger}from'@onekeyhq/shared/src/logger/logger';import{EAccountSelectorSceneName}from'@onekeyhq/shared/types';import{Tutorials}from\"../../components\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EImportMethod=function(EImportMethod){EImportMethod[\"Address\"]=\"Address\";EImportMethod[\"PublicKey\"]=\"PublicKey\";return EImportMethod;}(EImportMethod||{});var FormDeriveTypeInput=function({networkId,deriveInfoItems,fieldName}){var intl=useIntl();return _jsx(Stack,{mt:\"$2\",\"data-sentry-element\":\"Stack\",\"data-sentry-component\":\"FormDeriveTypeInput\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx\",children:_jsx(Form.Field,{label:intl.formatMessage({id:ETranslations.derivation_path}),name:fieldName,\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx\",children:_jsx(DeriveTypeSelectorFormInput,{networkId:networkId,enabledItems:deriveInfoItems,renderTrigger:function({label,onPress}){return _jsxs(Stack,{testID:\"derive-type-input\",userSelect:\"none\",flexDirection:\"row\",px:\"$3.5\",py:\"$2.5\",borderWidth:1,borderColor:\"$borderStrong\",borderRadius:\"$3\",$gtMd:{px:'$3',py:'$1.5',borderRadius:'$2'},borderCurve:\"continuous\",hoverStyle:{bg:'$bgHover'},pressStyle:{bg:'$bgActive'},onPress:onPress,children:[_jsx(SizableText,{flex:1,children:label}),_jsx(Icon,{name:\"ChevronDownSmallOutline\",color:\"$iconSubdued\",mr:\"$-0.5\"})]});},\"data-sentry-element\":\"DeriveTypeSelectorFormInput\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx\"})})});};function ImportAddress(){var intl=useIntl();var media=useMedia();var navigation=useAppNavigation();var{result:networksResp}=usePromiseResult(_asyncToGenerator(function*(){var resp=yield backgroundApiProxy.serviceNetwork.getPublicKeyExportOrWatchingAccountEnabledNetworks();var networkIds=resp.map(function(o){return o.network.id;});var publicKeyExportEnabledNetworkIds=resp.filter(function(o){return o.publicKeyExportEnabled;}).map(function(t){return t.network.id;});var watchingAccountEnabledNetworkIds=resp.filter(function(o){return o.watchingAccountEnabled;}).map(function(t){return t.network.id;});return{networkIds,publicKeyExportEnabled:new Set(publicKeyExportEnabledNetworkIds),watchingAccountEnabled:new Set(watchingAccountEnabledNetworkIds)};}),[],{initResult:{networkIds:[],publicKeyExportEnabled:new Set([]),watchingAccountEnabled:new Set([])}});var actions=useAccountSelectorActions();var[method,setMethod]=useState(EImportMethod.Address);var{activeAccount:{network}}=useAccountSelectorTrigger({num:0});var{onPasteClearText}=useClipboard();var form=useForm({values:{networkId:network?.id&&network.id!==getNetworkIdsMap().onekeyall?network?.id:getNetworkIdsMap().btc,deriveType:undefined,publicKeyValue:'',addressValue:{raw:'',resolved:undefined},accountName:''},mode:'onChange',reValidateMode:'onBlur'});var{setValue,control}=form;var[validateResult,setValidateResult]=useState();var isValidating=useRef(false);var networkIdText=useFormWatch({control,name:'networkId'});var inputText=useFormWatch({control,name:'publicKeyValue'});var addressValue=useFormWatch({control,name:'addressValue'});var accountName=useFormWatch({control,name:'accountName'});var inputTextDebounced=useDebounce(inputText.trim(),600);var accountNameDebounced=useDebounce(accountName?.trim()||'',600);var validateFn=useCallback(_asyncToGenerator(function*(){if(accountNameDebounced){try{yield backgroundApiProxy.serviceAccount.ensureAccountNameNotDuplicate({name:accountNameDebounced,walletId:WALLET_TYPE_WATCHING});form.clearErrors('accountName');}catch(error){form.setError('accountName',{message:error?.message});}}else{form.clearErrors('accountName');}setValue('deriveType',undefined);if(inputTextDebounced&&networkIdText){var input=yield backgroundApiProxy.servicePassword.encodeSensitiveText({text:inputTextDebounced});try{if(!networksResp.publicKeyExportEnabled.has(networkIdText)){throw new Error(`Network not supported: ${networkIdText}`);}var result=yield backgroundApiProxy.serviceAccount.validateGeneralInputOfImporting({input,networkId:networkIdText,validateXpub:true});setValidateResult(result);}catch(error){setValidateResult({isValid:false});}}else{setValidateResult(undefined);}}),[accountNameDebounced,setValue,inputTextDebounced,networkIdText,form,networksResp.publicKeyExportEnabled]);useEffect(function(){void _asyncToGenerator(function*(){try{isValidating.current=true;yield validateFn();}finally{isValidating.current=false;}})();},[validateFn]);var{start}=useScanQrCode();var deriveTypeValue=form.watch('deriveType');var isEnable=useMemo(function(){var errors=Object.values(form.formState.errors).filter(function(i){return method===EImportMethod.PublicKey&&i?.ref?.name!=='addressValue';});if(errors.length){return false;}if(method===EImportMethod.Address){return!addressValue.pending&&form.formState.isValid;}return validateResult?.isValid;},[method,addressValue.pending,validateResult,form.formState]);var isKeyExportEnabled=useMemo(function(){return networkIdText&&networksResp.publicKeyExportEnabled.has(networkIdText);},[networkIdText,networksResp.publicKeyExportEnabled]);var isPublicKeyImport=useMemo(function(){return method===EImportMethod.PublicKey&&isKeyExportEnabled;},[method,isKeyExportEnabled]);return _jsxs(Page,{scrollEnabled:true,\"data-sentry-element\":\"Page\",\"data-sentry-component\":\"ImportAddress\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx\",children:[_jsx(Page.Header,{title:intl.formatMessage({id:ETranslations.global_import_address}),\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx\"}),_jsxs(Page.Body,{px:\"$5\",\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx\",children:[_jsxs(Form,{form:form,\"data-sentry-element\":\"Form\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx\",children:[_jsx(Form.Field,{label:intl.formatMessage({id:ETranslations.global_network}),name:\"networkId\",\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx\",children:_jsx(ControlledNetworkSelectorTrigger,{networkIds:networksResp.networkIds,\"data-sentry-element\":\"ControlledNetworkSelectorTrigger\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx\"})}),isKeyExportEnabled?_jsx(SegmentControl,{fullWidth:true,value:method,onChange:function(v){setMethod(v);},options:[{label:intl.formatMessage({id:ETranslations.global_address}),value:EImportMethod.Address,testID:'import-address-address'},{label:intl.formatMessage({id:ETranslations.global_public_key}),value:EImportMethod.PublicKey,testID:'import-address-publicKey'}]}):null,isPublicKeyImport?_jsxs(_Fragment,{children:[_jsx(Form.Field,{label:intl.formatMessage({id:ETranslations.global_public_key}),name:\"publicKeyValue\",children:_jsx(Input,{secureTextEntry:false,placeholder:intl.formatMessage({id:ETranslations.form_public_key_placeholder}),testID:\"import-address-input\",size:media.gtMd?'medium':'large',onPaste:onPasteClearText,addOns:[{iconName:'ScanOutline',onPress:function(){var _ref4=_asyncToGenerator(function*(){var result=yield start({handlers:[],autoHandleResult:false});form.setValue('publicKeyValue',result.raw);});return function onPress(){return _ref4.apply(this,arguments);};}()}]})}),validateResult?.deriveInfoItems?_jsx(FormDeriveTypeInput,{fieldName:\"deriveType\",networkId:form.getValues().networkId||'',deriveInfoItems:validateResult?.deriveInfoItems||[]}):null,_jsx(_Fragment,{children:validateResult&&!validateResult?.isValid&&inputTextDebounced?_jsx(SizableText,{size:\"$bodyMd\",color:\"$textCritical\",children:intl.formatMessage({id:ETranslations.form_public_key_error_invalid})}):null})]}):null,!isPublicKeyImport?_jsx(_Fragment,{children:_jsx(Form.Field,{label:intl.formatMessage({id:ETranslations.global_address}),name:\"addressValue\",rules:{validate:createValidateAddressRule({defaultErrorMessage:intl.formatMessage({id:ETranslations.form_address_error_invalid})})},children:_jsx(AddressInput,{placeholder:intl.formatMessage({id:ETranslations.form_address_placeholder}),networkId:networkIdText!=null?networkIdText:'',testID:\"import-address-input\"})})}):null,_jsx(Form.Field,{label:intl.formatMessage({id:ETranslations.form_enter_account_name}),name:\"accountName\",\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx\",children:_jsx(Input,{maxLength:MAX_LENGTH_ACCOUNT_NAME,placeholder:intl.formatMessage({id:ETranslations.form_enter_account_name_placeholder}),\"data-sentry-element\":\"Input\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx\"})})]}),_jsx(Tutorials,{list:[{title:intl.formatMessage({id:ETranslations.faq_watched_account}),description:intl.formatMessage({id:ETranslations.faq_watched_account_desc})}],\"data-sentry-element\":\"Tutorials\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx\"}),\"production\"!=='production'?_jsx(_Fragment,{children:_jsxs(SizableText,{children:[\"DEV-ONLY deriveType: \",deriveTypeValue]})}):null]}),_jsx(Page.Footer,{confirmButtonProps:{disabled:!isEnable},onConfirm:_asyncToGenerator(function*(){yield form.handleSubmit(function(){var _ref6=_asyncToGenerator(function*(values){var _values$publicKeyValu,_values$networkId,_values$addressValue$,_values$networkId2;var data=isPublicKeyImport?{name:values.accountName,input:(_values$publicKeyValu=values.publicKeyValue)!=null?_values$publicKeyValu:'',networkId:(_values$networkId=values.networkId)!=null?_values$networkId:'',deriveType:values.deriveType,shouldCheckDuplicateName:true}:{name:values.accountName,input:(_values$addressValue$=values.addressValue.resolved)!=null?_values$addressValue$:'',networkId:(_values$networkId2=values.networkId)!=null?_values$networkId2:'',shouldCheckDuplicateName:true};var r=yield backgroundApiProxy.serviceAccount.addWatchingAccount(data);var accountId=r?.accounts?.[0]?.id;if(accountId){Toast.success({title:intl.formatMessage({id:ETranslations.global_success})});}void actions.current.updateSelectedAccountForSingletonAccount({num:0,networkId:values.networkId,walletId:WALLET_TYPE_WATCHING,othersWalletAccountId:accountId});navigation.popStack();defaultLogger.account.wallet.importWallet({importMethod:'address'});});return function(_x){return _ref6.apply(this,arguments);};}())();}),\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx\"})]});}function ImportAddressPage(){return _jsx(AccountSelectorProviderMirror,{config:{sceneName:EAccountSelectorSceneName.home},enabledNum:[0],\"data-sentry-element\":\"AccountSelectorProviderMirror\",\"data-sentry-component\":\"ImportAddressPage\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx\",children:_jsx(ImportAddress,{\"data-sentry-element\":\"ImportAddress\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Onboarding/pages/ImportWallet/ImportAddress.tsx\"})});}export default ImportAddressPage;"],"names":["MAX_LENGTH_ACCOUNT_NAME","useDebounce","value","delay","options","debounce","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","lastAutoStartV4MigrationTime","isBaseSettingsMigrated","isAutoStartV4MigrationShown","OnboardingOnMount","memo","OnboardingOnMountCmp","toOnBoardingPage","navigation","v4migrationActions","useV4MigrationActions","v4migrationPersistData","setV4MigrationPersistAtom","useV4migrationPersistAtom","downgradeWarningConfirmed","useRef","current","migrateBaseSettings","useCallback","backgroundApiProxy","serviceV4Migration","checkShouldMigrateV4OnMount","checkOnboardingState","checkingV4Migration","timerUtils","wait","navigateToV4MigrationPage","isAutoStartOnMount","now","Date","v","v4migrationAutoStartCount","error","isOnboardingDone","serviceOnboarding","platformEnv","isWebDappMode","isFullModal","checkStateOnMount","useEffect","fn","appEventBus","on","WalletClear","off","EImportMethod","FormDeriveTypeInput","networkId","deriveInfoItems","fieldName","intl","Stack","mt","children","Form","Field","label","formatMessage","id","ETranslations","derivation_path","name","enabledItems","renderTrigger","onPress","testID","userSelect","flexDirection","px","py","borderWidth","borderColor","borderRadius","$gtMd","borderCurve","hoverStyle","bg","pressStyle","SizableText","flex","Icon","color","mr","ImportAddress","media","useMedia","result","networksResp","resp","serviceNetwork","getPublicKeyExportOrWatchingAccountEnabledNetworks","networkIds","map","network","publicKeyExportEnabledNetworkIds","publicKeyExportEnabled","watchingAccountEnabledNetworkIds","watchingAccountEnabled","Set","initResult","actions","method","setMethod","useState","Address","activeAccount","num","onPasteClearText","useClipboard","form","useForm","values","onekeyall","btc","deriveType","undefined","publicKeyValue","addressValue","raw","resolved","accountName","mode","reValidateMode","setValue","control","validateResult","setValidateResult","isValidating","networkIdText","useFormWatch","inputText","inputTextDebounced","trim","accountNameDebounced","validateFn","serviceAccount","ensureAccountNameNotDuplicate","walletId","clearErrors","setError","message","input","servicePassword","encodeSensitiveText","text","has","Error","validateGeneralInputOfImporting","validateXpub","isValid","_ref4","start","isEnable","watch","useMemo","formState","errors","i","PublicKey","ref","pending","isKeyExportEnabled","isPublicKeyImport","Page","scrollEnabled","Header","title","global_import_address","Body","global_network","SegmentControl","fullWidth","onChange","global_address","global_public_key","Input","secureTextEntry","placeholder","form_public_key_placeholder","size","gtMd","onPaste","addOns","iconName","handlers","autoHandleResult","this","getValues","form_public_key_error_invalid","rules","validate","defaultErrorMessage","form_address_error_invalid","form_address_placeholder","form_enter_account_name","maxLength","form_enter_account_name_placeholder","list","faq_watched_account","description","faq_watched_account_desc","Footer","confirmButtonProps","disabled","onConfirm","_ref6","handleSubmit","_values$publicKeyValu","_values$networkId","_values$addressValue$","_values$networkId2","data","shouldCheckDuplicateName","addWatchingAccount","accountId","accounts","Toast","success","global_success","updateSelectedAccountForSingletonAccount","othersWalletAccountId","popStack","account","wallet","importWallet","importMethod","_x","ImportAddressPage","config","sceneName","home","enabledNum"],"sourceRoot":""}