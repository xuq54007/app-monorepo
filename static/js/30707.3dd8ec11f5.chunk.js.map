{"version":3,"file":"static/js/30707.3dd8ec11f5.chunk.js","mappings":"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","sources":["webpack://web/../../packages/kit/src/hooks/useFormatDate.ts","webpack://web/../../packages/kit/src/views/Notifications/pages/NotificationList.tsx","webpack://web/../../node_modules/date-fns/esm/formatDuration/index.js"],"sourcesContent":["import{useCallback,useMemo}from'react';import{format as fnsFormat,formatDistanceStrict as fnsFormatDistanceStrict,formatDistanceToNow as fnsFormatDistanceToNow,formatDuration as fnsFormatDuration,parseISO}from'date-fns';import{parseToDateFnsLocale}from'@onekeyhq/shared/src/utils/dateUtils';import{useLocaleVariant}from\"./useLocaleVariant\";export default function useFormatDate(){var locale=useLocaleVariant();var format=useCallback(function(date,_format){var parsedDate;if(typeof date==='string'){parsedDate=parseISO(date);}else{parsedDate=date;}try{return fnsFormat(parsedDate,_format!=null?_format:'PPp',{locale:parseToDateFnsLocale(locale)});}catch(error){return'-';}},[locale]);var formatDate=useCallback(function(date,options){var _format2;var parsedDate;if(typeof date==='string'){parsedDate=parseISO(date);}else{parsedDate=date;}var currentYear=new Date().getFullYear();var currentMonth=new Date().getMonth();var formatTemplate='yyyy/LL/dd, HH:mm';if(['de','es','en-US','fr-FR','it-IT','uk-UA'].includes(locale)){formatTemplate='LL/dd/yyyy, HH:mm';}if(currentYear===parsedDate.getFullYear()&&options?.hideTheYear||options?.hideYear){formatTemplate=formatTemplate.replace('yyyy/','');formatTemplate=formatTemplate.replace('/yyyy','');}if(currentMonth===parsedDate.getMonth()&&options?.hideTheMonth||options?.hideMonth){formatTemplate=formatTemplate.replace('LL/','');}if(options?.hideTimeForever){formatTemplate=formatTemplate.replace(', HH:mm','');}if(options?.onlyTime){formatTemplate='HH:mm';}return(_format2=format(parsedDate,formatTemplate))!=null?_format2:'';},[format,locale]);var formatMonth=useCallback(function(date,options){var _format4;var parsedDate;if(typeof date==='string'){parsedDate=parseISO(date);}else{parsedDate=date;}var currentYear=new Date().getFullYear();if(currentYear===parsedDate.getFullYear()&&options?.hideTheYear||options?.hideYear){var _format3;return(_format3=format(parsedDate,'MMMM'))!=null?_format3:'';}return(_format4=format(parsedDate,'MMMM, yyyy'))!=null?_format4:'';},[format]);var formatDistanceStrict=useCallback(function(date,baseDate){var _fnsFormatDistanceStr;return(_fnsFormatDistanceStr=fnsFormatDistanceStrict(date,baseDate,{locale:parseToDateFnsLocale(locale)}))!=null?_fnsFormatDistanceStr:'';},[locale]);var formatDistanceToNow=useCallback(function(date){var _fnsFormatDistanceToN;return(_fnsFormatDistanceToN=fnsFormatDistanceToNow(date,{addSuffix:true,locale:parseToDateFnsLocale(locale)}))!=null?_fnsFormatDistanceToN:'';},[locale]);var formatDuration=useCallback(function(duration){var _fnsFormatDuration;return(_fnsFormatDuration=fnsFormatDuration(duration,{locale:parseToDateFnsLocale(locale)}))!=null?_fnsFormatDuration:'';},[locale]);return useMemo(function(){return{format,formatDate,formatMonth,formatDistanceToNow,formatDuration,formatDistanceStrict};},[format,formatDate,formatMonth,formatDistanceToNow,formatDuration,formatDistanceStrict]);}","import _noop from\"lodash/noop\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";var _excluded=[\"item\"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{memo,useCallback,useEffect,useMemo,useRef}from'react';import{useIntl}from'react-intl';import{Alert,Dialog,Empty,HeaderButtonGroup,HeaderIconButton,Page,SectionList,SizableText,Skeleton,Stack,XStack,useSafeAreaInsets}from'@onekeyhq/components';import{NOTIFICATION_ACCOUNT_ACTIVITY_DEFAULT_MAX_ACCOUNT_COUNT}from'@onekeyhq/kit-bg/src/dbs/simple/entity/SimpleDbEntityNotificationSettings';import{useNotificationsAtom,useNotificationsReadedAtom}from'@onekeyhq/kit-bg/src/states/jotai/atoms';import{ETranslations}from'@onekeyhq/shared/src/locale';import{EModalRoutes,EModalSettingRoutes}from'@onekeyhq/shared/src/routes';import{EModalNotificationsRoutes}from'@onekeyhq/shared/src/routes/notifications';import notificationsUtils from'@onekeyhq/shared/src/utils/notificationsUtils';import backgroundApiProxy from\"../../../background/instance/backgroundApiProxy\";import{ListItem}from\"../../../components/ListItem\";import useAppNavigation from\"../../../hooks/useAppNavigation\";import useFormatDate from\"../../../hooks/useFormatDate\";import{usePromiseResult}from\"../../../hooks/usePromiseResult\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var maxAccountLimitWarningDismissed=false;function HeaderRight(){var intl=useIntl();var navigation=useAppNavigation();var handleSettingsButtonPress=useCallback(function(){navigation.pushModal(EModalRoutes.SettingModal,{screen:EModalSettingRoutes.SettingNotifications});},[navigation]);return _jsxs(HeaderButtonGroup,{\"data-sentry-element\":\"HeaderButtonGroup\",\"data-sentry-component\":\"HeaderRight\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Notifications/pages/NotificationList.tsx\",children:[_jsx(HeaderIconButton,{icon:\"BroomOutline\",onPress:function(){Dialog.show({icon:'BroomOutline',title:intl.formatMessage({id:ETranslations.global_mark_all_as_confirmation_title}),description:intl.formatMessage({id:ETranslations.global_mark_all_as_confirmation_desc}),onConfirm:function(){var _ref=_asyncToGenerator(function*(){yield backgroundApiProxy.serviceNotification.markNotificationReadAll();});return function onConfirm(){return _ref.apply(this,arguments);};}()});},\"data-sentry-element\":\"HeaderIconButton\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Notifications/pages/NotificationList.tsx\"}),_jsx(HeaderIconButton,{icon:\"SettingsOutline\",onPress:handleSettingsButtonPress,\"data-sentry-element\":\"HeaderIconButton\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Notifications/pages/NotificationList.tsx\"})]});}function NotificationItem(_ref2){var{item}=_ref2,rest=_objectWithoutProperties(_ref2,_excluded);var{formatDistanceToNow}=useFormatDate();var{title,content}=item.body;var{createdAt,readed,msgId}=item;var[{badge}]=useNotificationsAtom();var[readedMap]=useNotificationsReadedAtom();return _jsxs(ListItem,_objectSpread(_objectSpread({gap:\"$0.5\",flexDirection:\"column\",alignItems:\"stretch\",userSelect:\"none\",hoverStyle:{bg:'$bgHover'}},rest),{},{\"data-sentry-element\":\"ListItem\",\"data-sentry-component\":\"NotificationItem\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Notifications/pages/NotificationList.tsx\",children:[_jsxs(XStack,{alignItems:\"baseline\",gap:\"$3\",pr:\"$1.5\",\"data-sentry-element\":\"XStack\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Notifications/pages/NotificationList.tsx\",children:[_jsx(SizableText,{flex:1,size:\"$headingSm\",numberOfLines:1,\"data-sentry-element\":\"SizableText\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Notifications/pages/NotificationList.tsx\",children:title}),_jsx(SizableText,{size:\"$bodySm\",color:\"$textSubdued\",flexShrink:0,\"data-sentry-element\":\"SizableText\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Notifications/pages/NotificationList.tsx\",children:formatDistanceToNow(new Date(createdAt))}),!readed&&!!badge&&!readedMap?.[msgId]?_jsx(Stack,{position:\"absolute\",top:\"$1.5\",right:\"$-2\",borderRadius:\"$full\",bg:\"$bgCriticalStrong\",w:\"$2\",h:\"$2\"}):null]}),_jsx(SizableText,{size:\"$bodyMd\",flex:1,maxWidth:\"$96\",\"data-sentry-element\":\"SizableText\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Notifications/pages/NotificationList.tsx\",children:content})]}));}var NotificationItemMemo=memo(NotificationItem);function groupNotificationsByDate(notifications){if(!notifications?.length){return[];}return[{title:'default',data:notifications}];}function MaxAccountLimitWarning(){var navigation=useAppNavigation();var intl=useIntl();var[{lastSettingsUpdateTime,maxAccountCount=NOTIFICATION_ACCOUNT_ACTIVITY_DEFAULT_MAX_ACCOUNT_COUNT}]=useNotificationsAtom();var{result}=usePromiseResult(_asyncToGenerator(function*(){_noop(lastSettingsUpdateTime);var serverSettings=yield backgroundApiProxy.serviceNotification.fetchServerNotificationSettings();var enabledAccountCount=yield backgroundApiProxy.simpleDb.notificationSettings.getEnabledAccountCount();return{serverSettings,enabledAccountCount};}),[lastSettingsUpdateTime]);var shouldShowMaxAccountLimitWarning=useMemo(function(){return!maxAccountLimitWarningDismissed&&result?.serverSettings?.pushEnabled&&result?.serverSettings?.accountActivityPushEnabled&&result?.enabledAccountCount&&result?.enabledAccountCount>=maxAccountCount;},[result?.enabledAccountCount,maxAccountCount,result?.serverSettings?.accountActivityPushEnabled,result?.serverSettings?.pushEnabled]);if(!shouldShowMaxAccountLimitWarning){return null;}return _jsx(Alert,{mx:\"$5\",mb:\"$2\",type:\"warning\",title:intl.formatMessage({id:ETranslations.notifications_account_reached_limit_alert_title},{count:maxAccountCount}),description:intl.formatMessage({id:ETranslations.notifications_account_reached_limit_alert_desc}),closable:true,onClose:function(){maxAccountLimitWarningDismissed=true;},action:{primary:intl.formatMessage({id:ETranslations.global_manage}),onPrimaryPress:function(){navigation.pushModal(EModalRoutes.SettingModal,{screen:EModalSettingRoutes.SettingManageAccountActivity});}},\"data-sentry-element\":\"Alert\",\"data-sentry-component\":\"MaxAccountLimitWarning\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Notifications/pages/NotificationList.tsx\"});}function NotificationList(){var intl=useIntl();var{bottom}=useSafeAreaInsets();var navigation=useAppNavigation();var renderHeaderRight=useCallback(function(){return _jsx(HeaderRight,{});},[]);var[{lastReceivedTime,firstTimeGuideOpened},setNotificationsData]=useNotificationsAtom();var isFirstTimeGuideOpened=useRef(false);useEffect(function(){if(!firstTimeGuideOpened&&!isFirstTimeGuideOpened.current){setTimeout(function(){navigation.pushModal(EModalRoutes.NotificationsModal,{screen:EModalNotificationsRoutes.NotificationIntroduction});},600);isFirstTimeGuideOpened.current=true;setNotificationsData(function(v){return _objectSpread(_objectSpread({},v),{},{firstTimeGuideOpened:true});});}},[firstTimeGuideOpened,navigation,setNotificationsData]);var{result=[],isLoading}=usePromiseResult(_asyncToGenerator(function*(){_noop(lastReceivedTime);void backgroundApiProxy.serviceNotification.refreshBadgeFromServer();var r=yield backgroundApiProxy.serviceNotification.fetchMessageList();return r;}),[lastReceivedTime],{watchLoading:true,checkIsFocused:false});var sectionsData=useMemo(function(){return groupNotificationsByDate(result);},[result]);var contentView=useMemo(function(){if(isLoading||isLoading===undefined){return _jsx(Stack,{gap:\"$1.5\",px:\"$5\",children:Array.from({length:3}).map(function(_,index){return _jsxs(Stack,{gap:\"$1\",py:\"$2\",children:[_jsx(Stack,{py:\"$1\",children:_jsx(Skeleton,{h:\"$3\",w:\"$16\"})}),_jsx(Stack,{py:\"$1\",children:_jsx(Skeleton,{h:\"$3\",w:\"$48\"})})]},index);})});}return _jsx(_Fragment,{children:_jsx(SectionList,{sections:sectionsData,renderSectionHeader:function({section:{title}}){return null;},renderItem:function({item,index}){var itemView=_jsx(NotificationItemMemo,_objectSpread(_objectSpread({item:item},index!==0&&{mt:'$2.5'}),{},{onPress:function(){void notificationsUtils.navigateToNotificationDetail({navigation,message:item.body,notificationAccountId:item?.body?.extras?.params?.accountId,notificationId:item?.msgId||item?.body?.extras?.params?.msgId||item?.body?.extras?.msgId||''});}}),item.msgId||index);return itemView;},estimatedItemSize:\"$20\",ListEmptyComponent:_jsx(Empty,{pt:170,icon:\"BellOutline\",title:intl.formatMessage({id:ETranslations.notifications_empty_title}),description:intl.formatMessage({id:ETranslations.notifications_empty_desc})}),ListFooterComponent:_jsx(Stack,{h:bottom||'$5'})})});},[isLoading,bottom,intl,navigation,sectionsData]);return _jsxs(Page,{scrollEnabled:true,safeAreaEnabled:false,\"data-sentry-element\":\"Page\",\"data-sentry-component\":\"NotificationList\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Notifications/pages/NotificationList.tsx\",children:[_jsx(Page.Header,{title:intl.formatMessage({id:ETranslations.global_notifications}),headerRight:renderHeaderRight,\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Notifications/pages/NotificationList.tsx\"}),_jsxs(Page.Body,{pb:bottom||'$5',\"data-sentry-element\":\"unknown\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Notifications/pages/NotificationList.tsx\",children:[_jsx(MaxAccountLimitWarning,{\"data-sentry-element\":\"MaxAccountLimitWarning\",\"data-sentry-source-file\":\"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Notifications/pages/NotificationList.tsx\"}),contentView]})]});}export default NotificationList;","import { getDefaultOptions } from \"../_lib/defaultOptions/index.js\";\nimport defaultLocale from \"../_lib/defaultLocale/index.js\";\nvar defaultFormat = ['years', 'months', 'weeks', 'days', 'hours', 'minutes', 'seconds'];\n\n/**\n * @name formatDuration\n * @category Common Helpers\n * @summary Formats a duration in human-readable format\n *\n * @description\n * Return human-readable duration string i.e. \"9 months 2 days\"\n *\n * @param {Duration} duration - the duration to format\n * @param {Object} [options] - an object with options.\n * @param {string[]} [options.format=['years', 'months', 'weeks', 'days', 'hours', 'minutes', 'seconds']] - the array of units to format\n * @param {boolean} [options.zero=false] - should zeros be included in the output?\n * @param {string} [options.delimiter=' '] - delimiter string\n * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}\n * @returns {string} the formatted date string\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Format full duration\n * formatDuration({\n *   years: 2,\n *   months: 9,\n *   weeks: 1,\n *   days: 7,\n *   hours: 5,\n *   minutes: 9,\n *   seconds: 30\n * })\n * //=> '2 years 9 months 1 week 7 days 5 hours 9 minutes 30 seconds'\n *\n * @example\n * // Format partial duration\n * formatDuration({ months: 9, days: 2 })\n * //=> '9 months 2 days'\n *\n * @example\n * // Customize the format\n * formatDuration(\n *   {\n *     years: 2,\n *     months: 9,\n *     weeks: 1,\n *     days: 7,\n *     hours: 5,\n *     minutes: 9,\n *     seconds: 30\n *   },\n *   { format: ['months', 'weeks'] }\n * ) === '9 months 1 week'\n *\n * @example\n * // Customize the zeros presence\n * formatDuration({ years: 0, months: 9 })\n * //=> '9 months'\n * formatDuration({ years: 0, months: 9 }, { zero: true })\n * //=> '0 years 9 months'\n *\n * @example\n * // Customize the delimiter\n * formatDuration({ years: 2, months: 9, weeks: 3 }, { delimiter: ', ' })\n * //=> '2 years, 9 months, 3 weeks'\n */\nexport default function formatDuration(duration, options) {\n  var _ref, _options$locale, _options$format, _options$zero, _options$delimiter;\n  if (arguments.length < 1) {\n    throw new TypeError(\"1 argument required, but only \".concat(arguments.length, \" present\"));\n  }\n  var defaultOptions = getDefaultOptions();\n  var locale = (_ref = (_options$locale = options === null || options === void 0 ? void 0 : options.locale) !== null && _options$locale !== void 0 ? _options$locale : defaultOptions.locale) !== null && _ref !== void 0 ? _ref : defaultLocale;\n  var format = (_options$format = options === null || options === void 0 ? void 0 : options.format) !== null && _options$format !== void 0 ? _options$format : defaultFormat;\n  var zero = (_options$zero = options === null || options === void 0 ? void 0 : options.zero) !== null && _options$zero !== void 0 ? _options$zero : false;\n  var delimiter = (_options$delimiter = options === null || options === void 0 ? void 0 : options.delimiter) !== null && _options$delimiter !== void 0 ? _options$delimiter : ' ';\n  if (!locale.formatDistance) {\n    return '';\n  }\n  var result = format.reduce(function (acc, unit) {\n    var token = \"x\".concat(unit.replace(/(^.)/, function (m) {\n      return m.toUpperCase();\n    }));\n    var value = duration[unit];\n    if (typeof value === 'number' && (zero || duration[unit])) {\n      return acc.concat(locale.formatDistance(token, value));\n    }\n    return acc;\n  }, []).join(delimiter);\n  return result;\n}"],"names":["useFormatDate","locale","format","useCallback","date","_format","parsedDate","error","formatDate","options","_format2","currentYear","Date","getFullYear","currentMonth","getMonth","formatTemplate","includes","hideTheYear","hideYear","replace","hideTheMonth","hideMonth","hideTimeForever","onlyTime","formatMonth","_format4","_format3","formatDistanceStrict","baseDate","_fnsFormatDistanceStr","formatDistanceToNow","_fnsFormatDistanceToN","addSuffix","formatDuration","duration","_fnsFormatDuration","useMemo","_excluded","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","maxAccountLimitWarningDismissed","HeaderRight","intl","navigation","handleSettingsButtonPress","pushModal","SettingModal","screen","SettingNotifications","HeaderButtonGroup","children","HeaderIconButton","icon","onPress","_ref","Dialog","show","title","formatMessage","id","ETranslations","global_mark_all_as_confirmation_title","description","global_mark_all_as_confirmation_desc","onConfirm","serviceNotification","markNotificationReadAll","this","NotificationItemMemo","memo","NotificationItem","_ref2","item","rest","content","body","createdAt","readed","msgId","badge","useNotificationsAtom","readedMap","useNotificationsReadedAtom","gap","flexDirection","alignItems","userSelect","hoverStyle","bg","XStack","pr","SizableText","flex","size","numberOfLines","color","flexShrink","Stack","position","top","right","borderRadius","w","h","maxWidth","MaxAccountLimitWarning","lastSettingsUpdateTime","maxAccountCount","result","serverSettings","fetchServerNotificationSettings","enabledAccountCount","simpleDb","notificationSettings","getEnabledAccountCount","pushEnabled","accountActivityPushEnabled","Alert","mx","mb","type","notifications_account_reached_limit_alert_title","count","notifications_account_reached_limit_alert_desc","closable","onClose","action","primary","global_manage","onPrimaryPress","SettingManageAccountActivity","NotificationList","bottom","useSafeAreaInsets","renderHeaderRight","lastReceivedTime","firstTimeGuideOpened","setNotificationsData","isFirstTimeGuideOpened","useRef","useEffect","current","setTimeout","NotificationsModal","NotificationIntroduction","v","isLoading","refreshBadgeFromServer","fetchMessageList","watchLoading","checkIsFocused","sectionsData","groupNotificationsByDate","notifications","data","contentView","undefined","px","Array","from","map","_","index","py","Skeleton","SectionList","sections","renderSectionHeader","section","renderItem","mt","navigateToNotificationDetail","message","notificationAccountId","extras","params","accountId","notificationId","estimatedItemSize","ListEmptyComponent","Empty","pt","notifications_empty_title","notifications_empty_desc","ListFooterComponent","Page","scrollEnabled","safeAreaEnabled","Header","global_notifications","headerRight","Body","pb","defaultFormat","_options$locale","_options$format","_options$zero","_options$delimiter","TypeError","concat","defaultOptions","zero","delimiter","formatDistance","reduce","acc","unit","token","m","toUpperCase","value","join"],"sourceRoot":""}